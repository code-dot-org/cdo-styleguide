/*! For license information please see 9645.388800af.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[9645],{"./node_modules/focus-trap-react/dist/focus-trap-react.js":(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}(this,result)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}var React=__webpack_require__("./node_modules/react/index.js"),PropTypes=__webpack_require__("./node_modules/prop-types/index.js"),createFocusTrap=__webpack_require__("./node_modules/focus-trap/dist/focus-trap.esm.js").createFocusTrap,isFocusable=__webpack_require__("./node_modules/tabbable/dist/index.esm.js").isFocusable,FocusTrap=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(FocusTrap,_React$Component);var _super=_createSuper(FocusTrap);function FocusTrap(props){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FocusTrap),function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_assertThisInitialized(_this=_super.call(this,props)),"getNodeForOption",(function(optionName){var _this$internalOptions,optionValue=null!==(_this$internalOptions=this.internalOptions[optionName])&&void 0!==_this$internalOptions?_this$internalOptions:this.originalOptions[optionName];if("function"==typeof optionValue){for(var _len=arguments.length,params=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)params[_key-1]=arguments[_key];optionValue=optionValue.apply(void 0,params)}if(!0===optionValue&&(optionValue=void 0),!optionValue){if(void 0===optionValue||!1===optionValue)return optionValue;throw new Error("`".concat(optionName,"` was specified but was not a node, or did not return a node"))}var _this$getDocument,node=optionValue;if("string"==typeof optionValue&&!(node=null===(_this$getDocument=this.getDocument())||void 0===_this$getDocument?void 0:_this$getDocument.querySelector(optionValue)))throw new Error("`".concat(optionName,"` as selector refers to no known node"));return node})),_this.handleDeactivate=_this.handleDeactivate.bind(_assertThisInitialized(_this)),_this.handlePostDeactivate=_this.handlePostDeactivate.bind(_assertThisInitialized(_this)),_this.handleClickOutsideDeactivates=_this.handleClickOutsideDeactivates.bind(_assertThisInitialized(_this)),_this.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:_this.handleDeactivate,onPostDeactivate:_this.handlePostDeactivate,clickOutsideDeactivates:_this.handleClickOutsideDeactivates},_this.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var focusTrapOptions=props.focusTrapOptions;for(var optionName in focusTrapOptions)Object.prototype.hasOwnProperty.call(focusTrapOptions,optionName)&&("returnFocusOnDeactivate"!==optionName&&"onDeactivate"!==optionName&&"onPostDeactivate"!==optionName&&"checkCanReturnFocus"!==optionName&&"clickOutsideDeactivates"!==optionName?_this.internalOptions[optionName]=focusTrapOptions[optionName]:_this.originalOptions[optionName]=focusTrapOptions[optionName]);return _this.outsideClick=null,_this.focusTrapElements=props.containerElements||[],_this.updatePreviousElement(),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(FocusTrap,[{key:"getDocument",value:function getDocument(){return this.props.focusTrapOptions.document||("undefined"!=typeof document?document:void 0)}},{key:"getReturnFocusNode",value:function getReturnFocusNode(){var node=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return node||!1!==node&&this.previouslyFocusedElement}},{key:"updatePreviousElement",value:function updatePreviousElement(){var currentDocument=this.getDocument();currentDocument&&(this.previouslyFocusedElement=currentDocument.activeElement)}},{key:"deactivateTrap",value:function deactivateTrap(){this.focusTrap&&this.focusTrap.active&&this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function handleClickOutsideDeactivates(event){var allowDeactivation="function"==typeof this.originalOptions.clickOutsideDeactivates?this.originalOptions.clickOutsideDeactivates.call(null,event):this.originalOptions.clickOutsideDeactivates;return allowDeactivation&&(this.outsideClick={target:event.target,allowDeactivation}),allowDeactivation}},{key:"handleDeactivate",value:function handleDeactivate(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function handlePostDeactivate(){var _this2=this,finishDeactivation=function finishDeactivation(){var returnFocusNode=_this2.getReturnFocusNode(),canReturnFocus=!(!_this2.originalOptions.returnFocusOnDeactivate||null==returnFocusNode||!returnFocusNode.focus||_this2.outsideClick&&(!_this2.outsideClick.allowDeactivation||isFocusable(_this2.outsideClick.target,_this2.internalOptions.tabbableOptions))),_this2$internalOption=_this2.internalOptions.preventScroll,preventScroll=void 0!==_this2$internalOption&&_this2$internalOption;canReturnFocus&&returnFocusNode.focus({preventScroll}),_this2.originalOptions.onPostDeactivate&&_this2.originalOptions.onPostDeactivate.call(null),_this2.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(finishDeactivation,finishDeactivation):finishDeactivation()}},{key:"setupFocusTrap",value:function setupFocusTrap(){this.focusTrap?this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause()):this.focusTrapElements.some(Boolean)&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}},{key:"componentDidMount",value:function componentDidMount(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.focusTrap){prevProps.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var hasActivated=!prevProps.active&&this.props.active,hasDeactivated=prevProps.active&&!this.props.active,hasPaused=!prevProps.paused&&this.props.paused,hasUnpaused=prevProps.paused&&!this.props.paused;if(hasActivated&&(this.updatePreviousElement(),this.focusTrap.activate()),hasDeactivated)return void this.deactivateTrap();hasPaused&&this.focusTrap.pause(),hasUnpaused&&this.focusTrap.unpause()}else prevProps.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.deactivateTrap()}},{key:"render",value:function render(){var _this3=this,child=this.props.children?React.Children.only(this.props.children):void 0;if(child){if(child.type&&child.type===React.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");return React.cloneElement(child,{ref:function callbackRef(element){var containerElements=_this3.props.containerElements;child&&("function"==typeof child.ref?child.ref(element):child.ref&&(child.ref.current=element)),_this3.focusTrapElements=containerElements||[element]}})}return null}}]),FocusTrap}(React.Component),ElementType="undefined"==typeof Element?Function:Element;FocusTrap.propTypes={active:PropTypes.bool,paused:PropTypes.bool,focusTrapOptions:PropTypes.shape({document:PropTypes.object,onActivate:PropTypes.func,onPostActivate:PropTypes.func,checkCanFocusTrap:PropTypes.func,onPause:PropTypes.func,onPostPause:PropTypes.func,onUnpause:PropTypes.func,onPostUnpause:PropTypes.func,onDeactivate:PropTypes.func,onPostDeactivate:PropTypes.func,checkCanReturnFocus:PropTypes.func,initialFocus:PropTypes.oneOfType([PropTypes.instanceOf(ElementType),PropTypes.string,PropTypes.bool,PropTypes.func]),fallbackFocus:PropTypes.oneOfType([PropTypes.instanceOf(ElementType),PropTypes.string,PropTypes.func]),escapeDeactivates:PropTypes.oneOfType([PropTypes.bool,PropTypes.func]),clickOutsideDeactivates:PropTypes.oneOfType([PropTypes.bool,PropTypes.func]),returnFocusOnDeactivate:PropTypes.bool,setReturnFocus:PropTypes.oneOfType([PropTypes.instanceOf(ElementType),PropTypes.string,PropTypes.bool,PropTypes.func]),allowOutsideClick:PropTypes.oneOfType([PropTypes.bool,PropTypes.func]),preventScroll:PropTypes.bool,tabbableOptions:PropTypes.shape({displayCheck:PropTypes.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:PropTypes.oneOfType([PropTypes.bool,PropTypes.func])}),trapStack:PropTypes.array,isKeyForward:PropTypes.func,isKeyBackward:PropTypes.func}),containerElements:PropTypes.arrayOf(PropTypes.instanceOf(ElementType)),children:PropTypes.oneOfType([PropTypes.element,PropTypes.instanceOf(ElementType)])},FocusTrap.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:createFocusTrap},module.exports=FocusTrap},"./node_modules/focus-trap/dist/focus-trap.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{createFocusTrap:()=>createFocusTrap});var tabbable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tabbable/dist/index.esm.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var activeFocusTraps_activateTrap=function activateTrap(trapStack,trap){if(trapStack.length>0){var activeTrap=trapStack[trapStack.length-1];activeTrap!==trap&&activeTrap.pause()}var trapIndex=trapStack.indexOf(trap);-1===trapIndex||trapStack.splice(trapIndex,1),trapStack.push(trap)},activeFocusTraps_deactivateTrap=function deactivateTrap(trapStack,trap){var trapIndex=trapStack.indexOf(trap);-1!==trapIndex&&trapStack.splice(trapIndex,1),trapStack.length>0&&trapStack[trapStack.length-1].unpause()},isTabEvent=function isTabEvent(e){return"Tab"===e.key||9===e.keyCode},isKeyForward=function isKeyForward(e){return isTabEvent(e)&&!e.shiftKey},isKeyBackward=function isKeyBackward(e){return isTabEvent(e)&&e.shiftKey},delay=function delay(fn){return setTimeout(fn,0)},findIndex=function findIndex(arr,fn){var idx=-1;return arr.every((function(value,i){return!fn(value)||(idx=i,!1)})),idx},valueOrHandler=function valueOrHandler(value){for(var _len=arguments.length,params=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)params[_key-1]=arguments[_key];return"function"==typeof value?value.apply(void 0,params):value},getActualTarget=function getActualTarget(event){return event.target.shadowRoot&&"function"==typeof event.composedPath?event.composedPath()[0]:event.target},internalTrapStack=[],createFocusTrap=function createFocusTrap(elements,userOptions){var trap,doc=(null==userOptions?void 0:userOptions.document)||document,trapStack=(null==userOptions?void 0:userOptions.trapStack)||internalTrapStack,config=_objectSpread2({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward,isKeyBackward},userOptions),state={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},getOption=function getOption(configOverrideOptions,optionName,configOptionName){return configOverrideOptions&&void 0!==configOverrideOptions[optionName]?configOverrideOptions[optionName]:config[configOptionName||optionName]},findContainerIndex=function findContainerIndex(element){return state.containerGroups.findIndex((function(_ref){var container=_ref.container,tabbableNodes=_ref.tabbableNodes;return container.contains(element)||tabbableNodes.find((function(node){return node===element}))}))},getNodeForOption=function getNodeForOption(optionName){var optionValue=config[optionName];if("function"==typeof optionValue){for(var _len2=arguments.length,params=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)params[_key2-1]=arguments[_key2];optionValue=optionValue.apply(void 0,params)}if(!0===optionValue&&(optionValue=void 0),!optionValue){if(void 0===optionValue||!1===optionValue)return optionValue;throw new Error("`".concat(optionName,"` was specified but was not a node, or did not return a node"))}var node=optionValue;if("string"==typeof optionValue&&!(node=doc.querySelector(optionValue)))throw new Error("`".concat(optionName,"` as selector refers to no known node"));return node},getInitialFocusNode=function getInitialFocusNode(){var node=getNodeForOption("initialFocus");if(!1===node)return!1;if(void 0===node)if(findContainerIndex(doc.activeElement)>=0)node=doc.activeElement;else{var firstTabbableGroup=state.tabbableGroups[0];node=firstTabbableGroup&&firstTabbableGroup.firstTabbableNode||getNodeForOption("fallbackFocus")}if(!node)throw new Error("Your focus-trap needs to have at least one focusable element");return node},updateTabbableNodes=function updateTabbableNodes(){if(state.containerGroups=state.containers.map((function(container){var tabbableNodes=(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.tabbable)(container,config.tabbableOptions),focusableNodes=(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.focusable)(container,config.tabbableOptions);return{container,tabbableNodes,focusableNodes,firstTabbableNode:tabbableNodes.length>0?tabbableNodes[0]:null,lastTabbableNode:tabbableNodes.length>0?tabbableNodes[tabbableNodes.length-1]:null,nextTabbableNode:function nextTabbableNode(node){var forward=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],nodeIdx=focusableNodes.findIndex((function(n){return n===node}));if(!(nodeIdx<0))return forward?focusableNodes.slice(nodeIdx+1).find((function(n){return(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isTabbable)(n,config.tabbableOptions)})):focusableNodes.slice(0,nodeIdx).reverse().find((function(n){return(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isTabbable)(n,config.tabbableOptions)}))}}})),state.tabbableGroups=state.containerGroups.filter((function(group){return group.tabbableNodes.length>0})),state.tabbableGroups.length<=0&&!getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},tryFocus=function tryFocus(node){!1!==node&&node!==doc.activeElement&&(node&&node.focus?(node.focus({preventScroll:!!config.preventScroll}),state.mostRecentlyFocusedNode=node,function isSelectableInput(node){return node.tagName&&"input"===node.tagName.toLowerCase()&&"function"==typeof node.select}(node)&&node.select()):tryFocus(getInitialFocusNode()))},getReturnFocusNode=function getReturnFocusNode(previousActiveElement){var node=getNodeForOption("setReturnFocus",previousActiveElement);return node||!1!==node&&previousActiveElement},checkPointerDown=function checkPointerDown(e){var target=getActualTarget(e);findContainerIndex(target)>=0||(valueOrHandler(config.clickOutsideDeactivates,e)?trap.deactivate({returnFocus:config.returnFocusOnDeactivate}):valueOrHandler(config.allowOutsideClick,e)||e.preventDefault())},checkFocusIn=function checkFocusIn(e){var target=getActualTarget(e),targetContained=findContainerIndex(target)>=0;targetContained||target instanceof Document?targetContained&&(state.mostRecentlyFocusedNode=target):(e.stopImmediatePropagation(),tryFocus(state.mostRecentlyFocusedNode||getInitialFocusNode()))},checkKey=function checkKey(event){if(function isEscapeEvent(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(event)&&!1!==valueOrHandler(config.escapeDeactivates,event))return event.preventDefault(),void trap.deactivate();(config.isKeyForward(event)||config.isKeyBackward(event))&&function checkKeyNav(event){var isBackward=arguments.length>1&&void 0!==arguments[1]&&arguments[1],target=getActualTarget(event);updateTabbableNodes();var destinationNode=null;if(state.tabbableGroups.length>0){var containerIndex=findContainerIndex(target),containerGroup=containerIndex>=0?state.containerGroups[containerIndex]:void 0;if(containerIndex<0)destinationNode=isBackward?state.tabbableGroups[state.tabbableGroups.length-1].lastTabbableNode:state.tabbableGroups[0].firstTabbableNode;else if(isBackward){var startOfGroupIndex=findIndex(state.tabbableGroups,(function(_ref2){var firstTabbableNode=_ref2.firstTabbableNode;return target===firstTabbableNode}));if(startOfGroupIndex<0&&(containerGroup.container===target||(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isFocusable)(target,config.tabbableOptions)&&!(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isTabbable)(target,config.tabbableOptions)&&!containerGroup.nextTabbableNode(target,!1))&&(startOfGroupIndex=containerIndex),startOfGroupIndex>=0){var destinationGroupIndex=0===startOfGroupIndex?state.tabbableGroups.length-1:startOfGroupIndex-1;destinationNode=state.tabbableGroups[destinationGroupIndex].lastTabbableNode}else isTabEvent(event)||(destinationNode=containerGroup.nextTabbableNode(target,!1))}else{var lastOfGroupIndex=findIndex(state.tabbableGroups,(function(_ref3){var lastTabbableNode=_ref3.lastTabbableNode;return target===lastTabbableNode}));if(lastOfGroupIndex<0&&(containerGroup.container===target||(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isFocusable)(target,config.tabbableOptions)&&!(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isTabbable)(target,config.tabbableOptions)&&!containerGroup.nextTabbableNode(target))&&(lastOfGroupIndex=containerIndex),lastOfGroupIndex>=0){var _destinationGroupIndex=lastOfGroupIndex===state.tabbableGroups.length-1?0:lastOfGroupIndex+1;destinationNode=state.tabbableGroups[_destinationGroupIndex].firstTabbableNode}else isTabEvent(event)||(destinationNode=containerGroup.nextTabbableNode(target))}}else destinationNode=getNodeForOption("fallbackFocus");destinationNode&&(isTabEvent(event)&&event.preventDefault(),tryFocus(destinationNode))}(event,config.isKeyBackward(event))},checkClick=function checkClick(e){var target=getActualTarget(e);findContainerIndex(target)>=0||valueOrHandler(config.clickOutsideDeactivates,e)||valueOrHandler(config.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},addListeners=function addListeners(){if(state.active)return activeFocusTraps_activateTrap(trapStack,trap),state.delayInitialFocusTimer=config.delayInitialFocus?delay((function(){tryFocus(getInitialFocusNode())})):tryFocus(getInitialFocusNode()),doc.addEventListener("focusin",checkFocusIn,!0),doc.addEventListener("mousedown",checkPointerDown,{capture:!0,passive:!1}),doc.addEventListener("touchstart",checkPointerDown,{capture:!0,passive:!1}),doc.addEventListener("click",checkClick,{capture:!0,passive:!1}),doc.addEventListener("keydown",checkKey,{capture:!0,passive:!1}),trap},removeListeners=function removeListeners(){if(state.active)return doc.removeEventListener("focusin",checkFocusIn,!0),doc.removeEventListener("mousedown",checkPointerDown,!0),doc.removeEventListener("touchstart",checkPointerDown,!0),doc.removeEventListener("click",checkClick,!0),doc.removeEventListener("keydown",checkKey,!0),trap};return(trap={get active(){return state.active},get paused(){return state.paused},activate:function activate(activateOptions){if(state.active)return this;var onActivate=getOption(activateOptions,"onActivate"),onPostActivate=getOption(activateOptions,"onPostActivate"),checkCanFocusTrap=getOption(activateOptions,"checkCanFocusTrap");checkCanFocusTrap||updateTabbableNodes(),state.active=!0,state.paused=!1,state.nodeFocusedBeforeActivation=doc.activeElement,null==onActivate||onActivate();var finishActivation=function finishActivation(){checkCanFocusTrap&&updateTabbableNodes(),addListeners(),null==onPostActivate||onPostActivate()};return checkCanFocusTrap?(checkCanFocusTrap(state.containers.concat()).then(finishActivation,finishActivation),this):(finishActivation(),this)},deactivate:function deactivate(deactivateOptions){if(!state.active)return this;var options=_objectSpread2({onDeactivate:config.onDeactivate,onPostDeactivate:config.onPostDeactivate,checkCanReturnFocus:config.checkCanReturnFocus},deactivateOptions);clearTimeout(state.delayInitialFocusTimer),state.delayInitialFocusTimer=void 0,removeListeners(),state.active=!1,state.paused=!1,activeFocusTraps_deactivateTrap(trapStack,trap);var onDeactivate=getOption(options,"onDeactivate"),onPostDeactivate=getOption(options,"onPostDeactivate"),checkCanReturnFocus=getOption(options,"checkCanReturnFocus"),returnFocus=getOption(options,"returnFocus","returnFocusOnDeactivate");null==onDeactivate||onDeactivate();var finishDeactivation=function finishDeactivation(){delay((function(){returnFocus&&tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation)),null==onPostDeactivate||onPostDeactivate()}))};return returnFocus&&checkCanReturnFocus?(checkCanReturnFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation)).then(finishDeactivation,finishDeactivation),this):(finishDeactivation(),this)},pause:function pause(pauseOptions){if(state.paused||!state.active)return this;var onPause=getOption(pauseOptions,"onPause"),onPostPause=getOption(pauseOptions,"onPostPause");return state.paused=!0,null==onPause||onPause(),removeListeners(),null==onPostPause||onPostPause(),this},unpause:function unpause(unpauseOptions){if(!state.paused||!state.active)return this;var onUnpause=getOption(unpauseOptions,"onUnpause"),onPostUnpause=getOption(unpauseOptions,"onPostUnpause");return state.paused=!1,null==onUnpause||onUnpause(),updateTabbableNodes(),addListeners(),null==onPostUnpause||onPostUnpause(),this},updateContainerElements:function updateContainerElements(containerElements){var elementsAsArray=[].concat(containerElements).filter(Boolean);return state.containers=elementsAsArray.map((function(element){return"string"==typeof element?doc.querySelector(element):element})),state.active&&updateTabbableNodes(),this}}).updateContainerElements(elements),trap}},"./node_modules/redux-thunk/lib/index.js":(__unused_webpack_module,exports)=>{function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){return"function"==typeof action?action(dispatch,getState,extraArgument):next(action)}}}}exports.__esModule=!0;var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware,exports.default=thunk},"./node_modules/tabbable/dist/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{focusable:()=>focusable,isFocusable:()=>isFocusable,isTabbable:()=>isTabbable,tabbable:()=>tabbable});var candidateSelectors=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],candidateSelector=candidateSelectors.join(","),NoElement="undefined"==typeof Element,matches=NoElement?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,getRootNode=!NoElement&&Element.prototype.getRootNode?function(element){var _element$getRootNode;return null==element||null===(_element$getRootNode=element.getRootNode)||void 0===_element$getRootNode?void 0:_element$getRootNode.call(element)}:function(element){return null==element?void 0:element.ownerDocument},isInert=function isInert(node,lookUp){var _node$getAttribute;void 0===lookUp&&(lookUp=!0);var inertAtt=null==node||null===(_node$getAttribute=node.getAttribute)||void 0===_node$getAttribute?void 0:_node$getAttribute.call(node,"inert");return""===inertAtt||"true"===inertAtt||lookUp&&node&&isInert(node.parentNode)},getCandidates=function getCandidates(el,includeContainer,filter){if(isInert(el))return[];var candidates=Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));return includeContainer&&matches.call(el,candidateSelector)&&candidates.unshift(el),candidates=candidates.filter(filter)},getCandidatesIteratively=function getCandidatesIteratively(elements,includeContainer,options){for(var candidates=[],elementsToCheck=Array.from(elements);elementsToCheck.length;){var element=elementsToCheck.shift();if(!isInert(element,!1))if("SLOT"===element.tagName){var assigned=element.assignedElements(),nestedCandidates=getCandidatesIteratively(assigned.length?assigned:element.children,!0,options);options.flatten?candidates.push.apply(candidates,nestedCandidates):candidates.push({scopeParent:element,candidates:nestedCandidates})}else{matches.call(element,candidateSelector)&&options.filter(element)&&(includeContainer||!elements.includes(element))&&candidates.push(element);var shadowRoot=element.shadowRoot||"function"==typeof options.getShadowRoot&&options.getShadowRoot(element),validShadowRoot=!isInert(shadowRoot,!1)&&(!options.shadowRootFilter||options.shadowRootFilter(element));if(shadowRoot&&validShadowRoot){var _nestedCandidates=getCandidatesIteratively(!0===shadowRoot?element.children:shadowRoot.children,!0,options);options.flatten?candidates.push.apply(candidates,_nestedCandidates):candidates.push({scopeParent:element,candidates:_nestedCandidates})}else elementsToCheck.unshift.apply(elementsToCheck,element.children)}}return candidates},getTabindex=function getTabindex(node,isScope){return node.tabIndex<0&&(isScope||/^(AUDIO|VIDEO|DETAILS)$/.test(node.tagName)||function isContentEditable(node){var _node$getAttribute2,attValue=null==node||null===(_node$getAttribute2=node.getAttribute)||void 0===_node$getAttribute2?void 0:_node$getAttribute2.call(node,"contenteditable");return""===attValue||"true"===attValue}(node))&&isNaN(parseInt(node.getAttribute("tabindex"),10))?0:node.tabIndex},sortOrderedTabbables=function sortOrderedTabbables(a,b){return a.tabIndex===b.tabIndex?a.documentOrder-b.documentOrder:a.tabIndex-b.tabIndex},isInput=function isInput(node){return"INPUT"===node.tagName},isNonTabbableRadio=function isNonTabbableRadio(node){return function isRadio(node){return isInput(node)&&"radio"===node.type}(node)&&!function isTabbableRadio(node){if(!node.name)return!0;var radioSet,radioScope=node.form||getRootNode(node),queryRadios=function queryRadios(name){return radioScope.querySelectorAll('input[type="radio"][name="'+name+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)radioSet=queryRadios(window.CSS.escape(node.name));else try{radioSet=queryRadios(node.name)}catch(err){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",err.message),!1}var checked=function getCheckedRadio(nodes,form){for(var i=0;i<nodes.length;i++)if(nodes[i].checked&&nodes[i].form===form)return nodes[i]}(radioSet,node.form);return!checked||checked===node}(node)},isZeroArea=function isZeroArea(node){var _node$getBoundingClie=node.getBoundingClientRect(),width=_node$getBoundingClie.width,height=_node$getBoundingClie.height;return 0===width&&0===height},isHidden=function isHidden(node,_ref){var displayCheck=_ref.displayCheck,getShadowRoot=_ref.getShadowRoot;if("hidden"===getComputedStyle(node).visibility)return!0;var nodeUnderDetails=matches.call(node,"details>summary:first-of-type")?node.parentElement:node;if(matches.call(nodeUnderDetails,"details:not([open]) *"))return!0;if(displayCheck&&"full"!==displayCheck&&"legacy-full"!==displayCheck){if("non-zero-area"===displayCheck)return isZeroArea(node)}else{if("function"==typeof getShadowRoot){for(var originalNode=node;node;){var parentElement=node.parentElement,rootNode=getRootNode(node);if(parentElement&&!parentElement.shadowRoot&&!0===getShadowRoot(parentElement))return isZeroArea(node);node=node.assignedSlot?node.assignedSlot:parentElement||rootNode===node.ownerDocument?parentElement:rootNode.host}node=originalNode}if(function isNodeAttached(node){var _nodeRoot,_nodeRootHost,_nodeRootHost$ownerDo,_node$ownerDocument,nodeRoot=node&&getRootNode(node),nodeRootHost=null===(_nodeRoot=nodeRoot)||void 0===_nodeRoot?void 0:_nodeRoot.host,attached=!1;if(nodeRoot&&nodeRoot!==node)for(attached=!!(null!==(_nodeRootHost=nodeRootHost)&&void 0!==_nodeRootHost&&null!==(_nodeRootHost$ownerDo=_nodeRootHost.ownerDocument)&&void 0!==_nodeRootHost$ownerDo&&_nodeRootHost$ownerDo.contains(nodeRootHost)||null!=node&&null!==(_node$ownerDocument=node.ownerDocument)&&void 0!==_node$ownerDocument&&_node$ownerDocument.contains(node));!attached&&nodeRootHost;){var _nodeRoot2,_nodeRootHost2,_nodeRootHost2$ownerD;attached=!(null===(_nodeRootHost2=nodeRootHost=null===(_nodeRoot2=nodeRoot=getRootNode(nodeRootHost))||void 0===_nodeRoot2?void 0:_nodeRoot2.host)||void 0===_nodeRootHost2||null===(_nodeRootHost2$ownerD=_nodeRootHost2.ownerDocument)||void 0===_nodeRootHost2$ownerD||!_nodeRootHost2$ownerD.contains(nodeRootHost))}return attached}(node))return!node.getClientRects().length;if("legacy-full"!==displayCheck)return!0}return!1},isNodeMatchingSelectorFocusable=function isNodeMatchingSelectorFocusable(options,node){return!(node.disabled||isInert(node)||function isHiddenInput(node){return isInput(node)&&"hidden"===node.type}(node)||isHidden(node,options)||function isDetailsWithSummary(node){return"DETAILS"===node.tagName&&Array.prototype.slice.apply(node.children).some((function(child){return"SUMMARY"===child.tagName}))}(node)||function isDisabledFromFieldset(node){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(node.tagName))for(var parentNode=node.parentElement;parentNode;){if("FIELDSET"===parentNode.tagName&&parentNode.disabled){for(var i=0;i<parentNode.children.length;i++){var child=parentNode.children.item(i);if("LEGEND"===child.tagName)return!!matches.call(parentNode,"fieldset[disabled] *")||!child.contains(node)}return!0}parentNode=parentNode.parentElement}return!1}(node))},isNodeMatchingSelectorTabbable=function isNodeMatchingSelectorTabbable(options,node){return!(isNonTabbableRadio(node)||getTabindex(node)<0||!isNodeMatchingSelectorFocusable(options,node))},isValidShadowRootTabbable=function isValidShadowRootTabbable(shadowHostNode){var tabIndex=parseInt(shadowHostNode.getAttribute("tabindex"),10);return!!(isNaN(tabIndex)||tabIndex>=0)},sortByOrder=function sortByOrder(candidates){var regularTabbables=[],orderedTabbables=[];return candidates.forEach((function(item,i){var isScope=!!item.scopeParent,element=isScope?item.scopeParent:item,candidateTabindex=getTabindex(element,isScope),elements=isScope?sortByOrder(item.candidates):element;0===candidateTabindex?isScope?regularTabbables.push.apply(regularTabbables,elements):regularTabbables.push(element):orderedTabbables.push({documentOrder:i,tabIndex:candidateTabindex,item,isScope,content:elements})})),orderedTabbables.sort(sortOrderedTabbables).reduce((function(acc,sortable){return sortable.isScope?acc.push.apply(acc,sortable.content):acc.push(sortable.content),acc}),[]).concat(regularTabbables)},tabbable=function tabbable(el,options){var candidates;return candidates=(options=options||{}).getShadowRoot?getCandidatesIteratively([el],options.includeContainer,{filter:isNodeMatchingSelectorTabbable.bind(null,options),flatten:!1,getShadowRoot:options.getShadowRoot,shadowRootFilter:isValidShadowRootTabbable}):getCandidates(el,options.includeContainer,isNodeMatchingSelectorTabbable.bind(null,options)),sortByOrder(candidates)},focusable=function focusable(el,options){return(options=options||{}).getShadowRoot?getCandidatesIteratively([el],options.includeContainer,{filter:isNodeMatchingSelectorFocusable.bind(null,options),flatten:!0,getShadowRoot:options.getShadowRoot}):getCandidates(el,options.includeContainer,isNodeMatchingSelectorFocusable.bind(null,options))},isTabbable=function isTabbable(node,options){if(options=options||{},!node)throw new Error("No node provided");return!1!==matches.call(node,candidateSelector)&&isNodeMatchingSelectorTabbable(options,node)},focusableCandidateSelector=candidateSelectors.concat("iframe").join(","),isFocusable=function isFocusable(node,options){if(options=options||{},!node)throw new Error("No node provided");return!1!==matches.call(node,focusableCandidateSelector)&&isNodeMatchingSelectorFocusable(options,node)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTY0NS40NDRkY2I1My5pZnJhbWUuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Z05BRUEsU0FBU0EsUUFBUUMsS0FBa0MsT0FBT0QsUUFBVSxtQkFBcUJFLFFBQVUsaUJBQW1CQSxPQUFPQyxTQUFXLFNBQVVGLEtBQU8sY0FBY0EsR0FBSyxFQUFJLFNBQVVBLEtBQU8sT0FBT0EsS0FBTyxtQkFBcUJDLFFBQVVELElBQUlHLGNBQWdCRixRQUFVRCxNQUFRQyxPQUFPRyxVQUFZLGdCQUFrQkosR0FBSyxFQUFHRCxRQUFRQyxJQUFNLENBRS9VLFNBQVNLLGtCQUFrQkMsT0FBUUMsT0FBUyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUQsTUFBTUUsT0FBUUQsSUFBSyxDQUFFLElBQUlFLFdBQWFILE1BQU1DLEdBQUlFLFdBQVdDLFdBQWFELFdBQVdDLGFBQWMsRUFBT0QsV0FBV0UsY0FBZSxFQUFVLFVBQVdGLGFBQVlBLFdBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsT0FBUVUsZUFBZU4sV0FBV08sS0FBTVAsV0FBYSxDQUFFLENBRzVVLFNBQVNRLGdCQUFnQkMsRUFBR0MsR0FBNkksT0FBeElGLGdCQUFrQkosT0FBT08sZUFBaUJQLE9BQU9PLGVBQWVDLE9BQVMsU0FBU0osZ0JBQWdCQyxFQUFHQyxHQUFzQixPQUFqQkQsRUFBRUksVUFBWUgsRUFBVUQsQ0FBRyxFQUFVRCxnQkFBZ0JDLEVBQUdDLEVBQUksQ0FDdk0sU0FBU0ksYUFBYUMsU0FBVyxJQUFJQywwQkFHckMsU0FBU0MsNEJBQThCLEdBQXVCLG9CQUFaQyxVQUE0QkEsUUFBUUMsVUFBVyxPQUFPLEVBQU8sR0FBSUQsUUFBUUMsVUFBVUMsS0FBTSxPQUFPLEVBQU8sR0FBcUIsbUJBQVZDLE1BQXNCLE9BQU8sRUFBTSxJQUFzRixPQUFoRkMsUUFBUTVCLFVBQVU2QixRQUFRQyxLQUFLTixRQUFRQyxVQUFVRyxRQUFTLElBQUksV0FBYSxNQUFZLENBQU0sQ0FBRSxNQUFPRyxHQUFLLE9BQU8sQ0FBTyxDQUFFLENBSHZRUixHQUE2QixPQUFPLFNBQVNTLHVCQUF5QixJQUFzQ0MsT0FBbENDLE1BQVFDLGdCQUFnQmQsU0FBa0IsR0FBSUMsMEJBQTJCLENBQUUsSUFBSWMsVUFBWUQsZ0JBQWdCRSxNQUFNdEMsWUFBYWtDLE9BQVNULFFBQVFDLFVBQVVTLE1BQU9JLFVBQVdGLFVBQVksTUFBU0gsT0FBU0MsTUFBTUssTUFBTUYsS0FBTUMsV0FBYyxPQUNwWCxTQUFTRSwyQkFBMkJDLEtBQU1YLE1BQVEsR0FBSUEsT0FBMkIsV0FBbEJuQyxRQUFRbUMsT0FBc0MsbUJBQVRBLE1BQXdCLE9BQU9BLEtBQWEsUUFBYSxJQUFUQSxLQUFtQixNQUFNLElBQUlZLFVBQVUsNERBQStELE9BQU9DLHVCQUF1QkYsS0FBTyxDQUQ0RkQsQ0FBMkJILEtBQU1KLE9BQVMsQ0FBRyxDQUV4YSxTQUFTVSx1QkFBdUJGLE1BQVEsUUFBYSxJQUFUQSxLQUFtQixNQUFNLElBQUlHLGVBQWUsNkRBQWdFLE9BQU9ILElBQU0sQ0FFckssU0FBU04sZ0JBQWdCcEIsR0FBK0osT0FBMUpvQixnQkFBa0J6QixPQUFPTyxlQUFpQlAsT0FBT21DLGVBQWUzQixPQUFTLFNBQVNpQixnQkFBZ0JwQixHQUFLLE9BQU9BLEVBQUVJLFdBQWFULE9BQU9tQyxlQUFlOUIsRUFBSSxFQUFVb0IsZ0JBQWdCcEIsRUFBSSxDQUVuTixTQUFTSCxlQUFla0MsS0FBTyxJQUFJakMsSUFDbkMsU0FBU2tDLGFBQWFDLE1BQU9DLE1BQVEsR0FBdUIsV0FBbkJ0RCxRQUFRcUQsUUFBaUMsT0FBVkEsTUFBZ0IsT0FBT0EsTUFBTyxJQUFJRSxLQUFPRixNQUFNbkQsT0FBT3NELGFBQWMsUUFBYUMsSUFBVEYsS0FBb0IsQ0FBRSxJQUFJRyxJQUFNSCxLQUFLcEIsS0FBS2tCLE1BQU9DLE1BQVEsV0FBWSxHQUFxQixXQUFqQnRELFFBQVEwRCxLQUFtQixPQUFPQSxJQUFLLE1BQU0sSUFBSVgsVUFBVSwrQ0FBaUQsQ0FBRSxPQUFpQixXQUFUTyxLQUFvQkssT0FBU0MsUUFBUVAsTUFBUSxDQURuVkQsQ0FBYUQsSUFBSyxVQUFXLE1BQXdCLFdBQWpCbkQsUUFBUWtCLEtBQW9CQSxJQUFNeUMsT0FBT3pDLElBQU0sQ0FFNUgsSUFBSTJDLE1BQVEsb0JBQVEsaUNBQ2hCQyxVQUFZLG9CQUFRLHNDQUV0QkMsZ0JBRGEsb0JBQVEsb0RBQ01BLGdCQUUzQkMsWUFEYyxvQkFBUSw2Q0FDRUEsWUFDdEJDLFVBQXlCLFNBQVVDLG1CQWhCdkMsU0FBU0MsVUFBVUMsU0FBVUMsWUFBYyxHQUEwQixtQkFBZkEsWUFBNEMsT0FBZkEsV0FBdUIsTUFBTSxJQUFJdEIsVUFBVSxzREFBeURxQixTQUFTL0QsVUFBWVUsT0FBT3VELE9BQU9ELFlBQWNBLFdBQVdoRSxVQUFXLENBQUVELFlBQWEsQ0FBRW1FLE1BQU9ILFNBQVV0RCxVQUFVLEVBQU1ELGNBQWMsS0FBV0UsT0FBT0MsZUFBZW9ELFNBQVUsWUFBYSxDQUFFdEQsVUFBVSxJQUFjdUQsWUFBWWxELGdCQUFnQmlELFNBQVVDLFdBQWEsQ0FpQmpjRixDQUFVRixVQUFXQyxrQkFDckIsSUFBSU0sT0FBUy9DLGFBQWF3QyxXQUMxQixTQUFTQSxVQUFVekQsT0FDakIsSUFBSWlFLE9BdkJSLFNBQVNDLGdCQUFnQkMsU0FBVUMsYUFBZSxLQUFNRCxvQkFBb0JDLGFBQWdCLE1BQU0sSUFBSTdCLFVBQVUsb0NBQXdDLENBd0JwSjJCLENBQWdCaEMsS0FBTXVCLFdBZDFCLFNBQVNZLGdCQUFnQjVFLElBQUtpQixJQUFLcUQsT0FBNEwsT0FBbkxyRCxJQUFNRCxlQUFlQyxRQUFpQmpCLElBQU9jLE9BQU9DLGVBQWVmLElBQUtpQixJQUFLLENBQUVxRCxNQUFjM0QsWUFBWSxFQUFNQyxjQUFjLEVBQU1DLFVBQVUsSUFBa0JiLElBQUlpQixLQUFPcUQsTUFBZ0J0RSxHQUFLLENBZ0J2TzRFLENBQWdCN0IsdUJBRGhCeUIsTUFBUUQsT0FBT3JDLEtBQUtPLEtBQU1sQyxRQUNxQixvQkFBb0IsU0FBVXNFLFlBQzNFLElBQUlDLHNCQUVBQyxZQUE2RSxRQUE5REQsc0JBQXdCckMsS0FBS3VDLGdCQUFnQkgsbUJBQW1ELElBQTFCQyxzQkFBbUNBLHNCQUF3QnJDLEtBQUt3QyxnQkFBZ0JKLFlBQ3pLLEdBQTJCLG1CQUFoQkUsWUFBNEIsQ0FDckMsSUFBSyxJQUFJRyxLQUFPeEMsVUFBVWpDLE9BQVEwRSxPQUFTLElBQUlDLE1BQU1GLEtBQU8sRUFBSUEsS0FBTyxFQUFJLEdBQUlHLEtBQU8sRUFBR0EsS0FBT0gsS0FBTUcsT0FDcEdGLE9BQU9FLEtBQU8sR0FBSzNDLFVBQVUyQyxNQUUvQk4sWUFBY0EsWUFBWXBDLFdBQU0sRUFBUXdDLE9BQzFDLENBS0EsSUFKb0IsSUFBaEJKLGNBQ0ZBLGlCQUFjdkIsSUFHWHVCLFlBQWEsQ0FDaEIsUUFBb0J2QixJQUFoQnVCLGNBQTZDLElBQWhCQSxZQUMvQixPQUFPQSxZQUlULE1BQU0sSUFBSU8sTUFBTSxJQUFJQyxPQUFPVixXQUFZLGdFQUN6QyxDQUNBLElBR01XLGtCQUhGQyxLQUFPVixZQUVYLEdBQTJCLGlCQUFoQkEsZUFFVFUsS0FBb0QsUUFBNUNELGtCQUFvQi9DLEtBQUtpRCxxQkFBaUQsSUFBdEJGLHVCQUErQixFQUFTQSxrQkFBa0JHLGNBQWNaLGNBRWxJLE1BQU0sSUFBSU8sTUFBTSxJQUFJQyxPQUFPVixXQUFZLDBDQUczQyxPQUFPWSxJQUNULElBQ0FqQixNQUFNb0IsaUJBQW1CcEIsTUFBTW9CLGlCQUFpQnRFLEtBQUt5Qix1QkFBdUJ5QixRQUM1RUEsTUFBTXFCLHFCQUF1QnJCLE1BQU1xQixxQkFBcUJ2RSxLQUFLeUIsdUJBQXVCeUIsUUFDcEZBLE1BQU1zQiw4QkFBZ0N0QixNQUFNc0IsOEJBQThCeEUsS0FBS3lCLHVCQUF1QnlCLFFBR3RHQSxNQUFNUSxnQkFBa0IsQ0FNdEJlLHlCQUF5QixFQUd6QkMsb0JBQXFCLEtBQ3JCQyxhQUFjekIsTUFBTW9CLGlCQUNwQk0saUJBQWtCMUIsTUFBTXFCLHFCQUt4Qk0sd0JBQXlCM0IsTUFBTXNCLCtCQUlqQ3RCLE1BQU1TLGdCQUFrQixDQUd0QmMseUJBQXlCLEVBSXpCRSxhQUFjLEtBQ2RDLGlCQUFrQixLQUNsQkYsb0JBQXFCLEtBRXJCRyx5QkFBeUIsR0FFM0IsSUFBSUMsaUJBQW1CN0YsTUFBTTZGLGlCQUM3QixJQUFLLElBQUl2QixjQUFjdUIsaUJBQ2hCdEYsT0FBT1YsVUFBVWlHLGVBQWVuRSxLQUFLa0UsaUJBQWtCdkIsY0FHekMsNEJBQWZBLFlBQTJELGlCQUFmQSxZQUFnRCxxQkFBZkEsWUFBb0Qsd0JBQWZBLFlBQXVELDRCQUFmQSxXQUs5SkwsTUFBTVEsZ0JBQWdCSCxZQUFjdUIsaUJBQWlCdkIsWUFKbkRMLE1BQU1TLGdCQUFnQkosWUFBY3VCLGlCQUFpQnZCLGFBb0J6RCxPQVRBTCxNQUFNOEIsYUFBZSxLQUtyQjlCLE1BQU0rQixrQkFBb0JoRyxNQUFNaUcsbUJBQXFCLEdBR3JEaEMsTUFBTWlDLHdCQUNDakMsS0FDVCxDQThRQSxPQXhZRixTQUFTa0MsYUFBYS9CLFlBQWFnQyxXQUFZQyxhQUF5TixPQUF0TUQsWUFBWXRHLGtCQUFrQnNFLFlBQVl2RSxVQUFXdUcsWUFBaUJDLGFBQWF2RyxrQkFBa0JzRSxZQUFhaUMsYUFBYzlGLE9BQU9DLGVBQWU0RCxZQUFhLFlBQWEsQ0FBRTlELFVBQVUsSUFBaUI4RCxXQUFhLENBa0kxUitCLENBQWExQyxVQUFXLENBQUMsQ0FDdkIvQyxJQUFLLGNBQ0xxRCxNQUFPLFNBQVNvQixjQUVkLE9BQU9qRCxLQUFLbEMsTUFBTTZGLGlCQUFpQlMsV0FBaUMsb0JBQWJBLFNBQTJCQSxjQUFXckQsRUFDL0YsR0FlQyxDQUNEdkMsSUFBSyxxQkFDTHFELE1BQU8sU0FBU3dDLHFCQUNkLElBQUlyQixLQUFPaEQsS0FBS3NFLGlCQUFpQixpQkFBa0J0RSxLQUFLdUUsMEJBQ3hELE9BQU92QixPQUF1QixJQUFUQSxNQUF5QmhELEtBQUt1RSx3QkFDckQsR0FHQyxDQUNEL0YsSUFBSyx3QkFDTHFELE1BQU8sU0FBU21DLHdCQUNkLElBQUlRLGdCQUFrQnhFLEtBQUtpRCxjQUN2QnVCLGtCQUNGeEUsS0FBS3VFLHlCQUEyQkMsZ0JBQWdCQyxjQUVwRCxHQUNDLENBQ0RqRyxJQUFLLGlCQUNMcUQsTUFBTyxTQUFTNkMsaUJBTVQxRSxLQUFLMkUsV0FBYzNFLEtBQUsyRSxVQUFVQyxRQUd2QzVFLEtBQUsyRSxVQUFVRSxXQUFXLENBRXhCQyxhQUFhLEVBR2J2QixvQkFBcUIsS0FHckJDLGFBQWN4RCxLQUFLd0MsZ0JBQWdCZ0IsY0FRdkMsR0FDQyxDQUNEaEYsSUFBSyxnQ0FDTHFELE1BQU8sU0FBU3dCLDhCQUE4QjBCLE9BRTVDLElBQUlDLGtCQUE0RSxtQkFBakRoRixLQUFLd0MsZ0JBQWdCa0Isd0JBQXlDMUQsS0FBS3dDLGdCQUFnQmtCLHdCQUF3QmpFLEtBQUssS0FBTXNGLE9BQ25KL0UsS0FBS3dDLGdCQUFnQmtCLHdCQVV2QixPQVJJc0Isb0JBR0ZoRixLQUFLNkQsYUFBZSxDQUNsQmhHLE9BQVFrSCxNQUFNbEgsT0FDZG1ILG9CQUdHQSxpQkFDVCxHQUNDLENBQ0R4RyxJQUFLLG1CQUNMcUQsTUFBTyxTQUFTc0IsbUJBQ1ZuRCxLQUFLd0MsZ0JBQWdCZ0IsY0FDdkJ4RCxLQUFLd0MsZ0JBQWdCZ0IsYUFBYS9ELEtBQUssTUFHekNPLEtBQUswRSxnQkFDUCxHQUNDLENBQ0RsRyxJQUFLLHVCQUNMcUQsTUFBTyxTQUFTdUIsdUJBQ2QsSUFBSTZCLE9BQVNqRixLQUNUa0YsbUJBQXFCLFNBQVNBLHFCQUNoQyxJQUFJQyxnQkFBa0JGLE9BQU9aLHFCQUN6QmUsa0JBR0pILE9BQU96QyxnQkFBZ0JjLHlCQUF2QjJCLE1BQ0FFLGtCQUEwREEsZ0JBQWdCRSxPQUV6RUosT0FBT3BCLGdCQUVSb0IsT0FBT3BCLGFBQWFtQixtQkFJbkIxRCxZQUFZMkQsT0FBT3BCLGFBQWFoRyxPQUFRb0gsT0FBTzFDLGdCQUFnQitDLG1CQUs1REMsc0JBQXdCTixPQUFPMUMsZ0JBQWdCaUQsY0FDakRBLG1CQUEwQyxJQUExQkQsdUJBQTJDQSxzQkFDekRILGdCQUVGRCxnQkFBZ0JFLE1BQU0sQ0FDcEJHLGdCQUdBUCxPQUFPekMsZ0JBQWdCaUIsa0JBQ3pCd0IsT0FBT3pDLGdCQUFnQmlCLGlCQUFpQmhFLEtBQUssTUFHL0N3RixPQUFPcEIsYUFBZSxJQUN4QixFQUVJN0QsS0FBS3dDLGdCQUFnQmUsb0JBQ3ZCdkQsS0FBS3dDLGdCQUFnQmUsb0JBQW9COUQsS0FBSyxLQUFNTyxLQUFLcUUsc0JBQ3hEb0IsS0FBS1AsbUJBQW9CQSxvQkFFMUJBLG9CQUVKLEdBQ0MsQ0FDRDFHLElBQUssaUJBQ0xxRCxNQUFPLFNBQVM2RCxpQkFDVjFGLEtBQUsyRSxVQWNIM0UsS0FBS2xDLE1BQU04RyxTQUFXNUUsS0FBSzJFLFVBQVVDLFNBQ3ZDNUUsS0FBSzJFLFVBQVVnQixXQUNYM0YsS0FBS2xDLE1BQU04SCxRQUNiNUYsS0FBSzJFLFVBQVVrQixTQUlGN0YsS0FBSzhELGtCQUFrQmdDLEtBQUt2RyxXQUczQ1MsS0FBSzJFLFVBQVkzRSxLQUFLbEMsTUFBTWlJLGlCQUFpQi9GLEtBQUs4RCxrQkFBbUI5RCxLQUFLdUMsaUJBQ3RFdkMsS0FBS2xDLE1BQU04RyxRQUNiNUUsS0FBSzJFLFVBQVVnQixXQUViM0YsS0FBS2xDLE1BQU04SCxRQUNiNUYsS0FBSzJFLFVBQVVrQixRQUl2QixHQUNDLENBQ0RySCxJQUFLLG9CQUNMcUQsTUFBTyxTQUFTbUUsb0JBQ1ZoRyxLQUFLbEMsTUFBTThHLFFBQ2I1RSxLQUFLMEYsZ0JBT1QsR0FDQyxDQUNEbEgsSUFBSyxxQkFDTHFELE1BQU8sU0FBU29FLG1CQUFtQkMsV0FDakMsR0FBSWxHLEtBQUsyRSxVQUFXLENBQ2R1QixVQUFVbkMsb0JBQXNCL0QsS0FBS2xDLE1BQU1pRyxtQkFDN0MvRCxLQUFLMkUsVUFBVXdCLHdCQUF3Qm5HLEtBQUtsQyxNQUFNaUcsbUJBRXBELElBQUlxQyxjQUFnQkYsVUFBVXRCLFFBQVU1RSxLQUFLbEMsTUFBTThHLE9BQy9DeUIsZUFBaUJILFVBQVV0QixTQUFXNUUsS0FBS2xDLE1BQU04RyxPQUNqRDBCLFdBQWFKLFVBQVVOLFFBQVU1RixLQUFLbEMsTUFBTThILE9BQzVDVyxZQUFjTCxVQUFVTixTQUFXNUYsS0FBS2xDLE1BQU04SCxPQUtsRCxHQUpJUSxlQUNGcEcsS0FBS2dFLHdCQUNMaEUsS0FBSzJFLFVBQVVnQixZQUViVSxlQUVGLFlBREFyRyxLQUFLMEUsaUJBSUg0QixXQUNGdEcsS0FBSzJFLFVBQVVrQixRQUViVSxhQUNGdkcsS0FBSzJFLFVBQVU2QixTQUVuQixNQU1NTixVQUFVbkMsb0JBQXNCL0QsS0FBS2xDLE1BQU1pRyxvQkFDN0MvRCxLQUFLOEQsa0JBQW9COUQsS0FBS2xDLE1BQU1pRyxtQkFNbEMvRCxLQUFLbEMsTUFBTThHLFNBQ2I1RSxLQUFLZ0Usd0JBQ0xoRSxLQUFLMEYsaUJBR1gsR0FDQyxDQUNEbEgsSUFBSyx1QkFDTHFELE1BQU8sU0FBUzRFLHVCQUNkekcsS0FBSzBFLGdCQUNQLEdBQ0MsQ0FDRGxHLElBQUssU0FDTHFELE1BQU8sU0FBUzZFLFNBQ2QsSUFBSUMsT0FBUzNHLEtBQ1Q0RyxNQUFRNUcsS0FBS2xDLE1BQU0rSSxTQUFXMUYsTUFBTTJGLFNBQVNDLEtBQUsvRyxLQUFLbEMsTUFBTStJLGVBQVk5RixFQUM3RSxHQUFJNkYsTUFBTyxDQUNULEdBQUlBLE1BQU1JLE1BQVFKLE1BQU1JLE9BQVM3RixNQUFNOEYsU0FDckMsTUFBTSxJQUFJcEUsTUFBTSxxR0FnQmxCLE9BSG1CMUIsTUFBTStGLGFBQWFOLE1BQU8sQ0FDM0NPLElBWmdCLFNBQVNDLFlBQVlDLFNBQ3JDLElBQUl0RCxrQkFBb0I0QyxPQUFPN0ksTUFBTWlHLGtCQUNqQzZDLFFBQ3VCLG1CQUFkQSxNQUFNTyxJQUNmUCxNQUFNTyxJQUFJRSxTQUNEVCxNQUFNTyxNQUNmUCxNQUFNTyxJQUFJRyxRQUFVRCxVQUd4QlYsT0FBTzdDLGtCQUFvQkMsbUJBQXdDLENBQUNzRCxRQUN0RSxHQUtGLENBQ0EsT0FBTyxJQUNULEtBRUs5RixTQUNULENBeFg2QixDQXdYM0JKLE1BQU1vRyxXQUNKQyxZQUFpQyxvQkFBWkMsUUFBMEJDLFNBQVdELFFBQzlEbEcsVUFBVW9HLFVBQVksQ0FDcEIvQyxPQUFReEQsVUFBVXdHLEtBQ2xCaEMsT0FBUXhFLFVBQVV3RyxLQUNsQmpFLGlCQUFrQnZDLFVBQVV5RyxNQUFNLENBQ2hDekQsU0FBVWhELFVBQVUwRyxPQUNwQkMsV0FBWTNHLFVBQVU0RyxLQUN0QkMsZUFBZ0I3RyxVQUFVNEcsS0FDMUJFLGtCQUFtQjlHLFVBQVU0RyxLQUM3QkcsUUFBUy9HLFVBQVU0RyxLQUNuQkksWUFBYWhILFVBQVU0RyxLQUN2QkssVUFBV2pILFVBQVU0RyxLQUNyQk0sY0FBZWxILFVBQVU0RyxLQUN6QnhFLGFBQWNwQyxVQUFVNEcsS0FDeEJ2RSxpQkFBa0JyQyxVQUFVNEcsS0FDNUJ6RSxvQkFBcUJuQyxVQUFVNEcsS0FDL0JPLGFBQWNuSCxVQUFVb0gsVUFBVSxDQUFDcEgsVUFBVXFILFdBQVdqQixhQUFjcEcsVUFBVXNILE9BQVF0SCxVQUFVd0csS0FBTXhHLFVBQVU0RyxPQUNsSFcsY0FBZXZILFVBQVVvSCxVQUFVLENBQUNwSCxVQUFVcUgsV0FBV2pCLGFBQWNwRyxVQUFVc0gsT0FFakZ0SCxVQUFVNEcsT0FDVlksa0JBQW1CeEgsVUFBVW9ILFVBQVUsQ0FBQ3BILFVBQVV3RyxLQUFNeEcsVUFBVTRHLE9BQ2xFdEUsd0JBQXlCdEMsVUFBVW9ILFVBQVUsQ0FBQ3BILFVBQVV3RyxLQUFNeEcsVUFBVTRHLE9BQ3hFMUUsd0JBQXlCbEMsVUFBVXdHLEtBQ25DaUIsZUFBZ0J6SCxVQUFVb0gsVUFBVSxDQUFDcEgsVUFBVXFILFdBQVdqQixhQUFjcEcsVUFBVXNILE9BQVF0SCxVQUFVd0csS0FBTXhHLFVBQVU0RyxPQUNwSGMsa0JBQW1CMUgsVUFBVW9ILFVBQVUsQ0FBQ3BILFVBQVV3RyxLQUFNeEcsVUFBVTRHLE9BQ2xFeEMsY0FBZXBFLFVBQVV3RyxLQUN6QnRDLGdCQUFpQmxFLFVBQVV5RyxNQUFNLENBQy9Ca0IsYUFBYzNILFVBQVU0SCxNQUFNLENBQUMsT0FBUSxjQUFlLGdCQUFpQixTQUN2RUMsY0FBZTdILFVBQVVvSCxVQUFVLENBQUNwSCxVQUFVd0csS0FBTXhHLFVBQVU0RyxTQUVoRWtCLFVBQVc5SCxVQUFVK0gsTUFDckJDLGFBQWNoSSxVQUFVNEcsS0FDeEJxQixjQUFlakksVUFBVTRHLE9BRTNCakUsa0JBQW1CM0MsVUFBVWtJLFFBQVFsSSxVQUFVcUgsV0FBV2pCLGNBRTFEWCxTQUFVekYsVUFBVW9ILFVBQVUsQ0FBQ3BILFVBQVVpRyxRQUV6Q2pHLFVBQVVxSCxXQUFXakIsZ0JBUXZCakcsVUFBVWdJLGFBQWUsQ0FDdkIzRSxRQUFRLEVBQ1JnQixRQUFRLEVBQ1JqQyxpQkFBa0IsQ0FBQyxFQUNuQm9DLGlCQUFrQjFFLGlCQUVwQm1JLE9BQU9DLFFBQVVsSSx5V0M3YmpCLFNBQVNtSSxRQUFRNUIsT0FBUTZCLGdCQUN2QixJQUFJQyxLQUFPdkwsT0FBT3VMLEtBQUs5QixRQUN2QixHQUFJekosT0FBT3dMLHNCQUF1QixDQUNoQyxJQUFJQyxRQUFVekwsT0FBT3dMLHNCQUFzQi9CLFFBQzNDNkIsaUJBQW1CRyxRQUFVQSxRQUFRQyxRQUFPLFNBQVVDLEtBQ3BELE9BQU8zTCxPQUFPNEwseUJBQXlCbkMsT0FBUWtDLEtBQUs5TCxVQUN0RCxLQUFLMEwsS0FBS00sS0FBS2hLLE1BQU0wSixLQUFNRSxRQUM3QixDQUNBLE9BQU9GLElBQ1QsQ0FDQSxTQUFTTyxlQUFldE0sUUFDdEIsSUFBSyxJQUFJRSxFQUFJLEVBQUdBLEVBQUlrQyxVQUFVakMsT0FBUUQsSUFBSyxDQUN6QyxJQUFJcU0sT0FBUyxNQUFRbkssVUFBVWxDLEdBQUtrQyxVQUFVbEMsR0FBSyxDQUFDLEVBQ3BEQSxFQUFJLEVBQUkyTCxRQUFRckwsT0FBTytMLFNBQVMsR0FBSUMsU0FBUSxTQUFVN0wsS0FDcEQyRCxnQkFBZ0J0RSxPQUFRVyxJQUFLNEwsT0FBTzVMLEtBQ3RDLElBQUtILE9BQU9pTSwwQkFBNEJqTSxPQUFPa00saUJBQWlCMU0sT0FBUVEsT0FBT2lNLDBCQUEwQkYsU0FBV1YsUUFBUXJMLE9BQU8rTCxTQUFTQyxTQUFRLFNBQVU3TCxLQUM1SkgsT0FBT0MsZUFBZVQsT0FBUVcsSUFBS0gsT0FBTzRMLHlCQUF5QkcsT0FBUTVMLEtBQzdFLEdBQ0YsQ0FDQSxPQUFPWCxNQUNULENBQ0EsU0FBU3NFLGdCQUFnQjVFLElBQUtpQixJQUFLcUQsT0FZakMsT0FYQXJELElBdUJGLFNBQVNELGVBQWVrQyxLQUN0QixJQUFJakMsSUFYTixTQUFTa0MsYUFBYUMsTUFBT0MsTUFDM0IsR0FBcUIsaUJBQVZELE9BQWdDLE9BQVZBLE1BQWdCLE9BQU9BLE1BQ3hELElBQUlFLEtBQU9GLE1BQU1uRCxPQUFPc0QsYUFDeEIsUUFBYUMsSUFBVEYsS0FBb0IsQ0FDdEIsSUFBSUcsSUFBTUgsS0FBS3BCLEtBQUtrQixNQUFPQyxNQUFRLFdBQ25DLEdBQW1CLGlCQUFSSSxJQUFrQixPQUFPQSxJQUNwQyxNQUFNLElBQUlYLFVBQVUsK0NBQ3RCLENBQ0EsT0FBaUIsV0FBVE8sS0FBb0JLLE9BQVNDLFFBQVFQLE1BQy9DLENBRVlELENBQWFELElBQUssVUFDNUIsTUFBc0IsaUJBQVJqQyxJQUFtQkEsSUFBTXlDLE9BQU96QyxJQUNoRCxDQTFCUUQsQ0FBZUMsUUFDVmpCLElBQ1RjLE9BQU9DLGVBQWVmLElBQUtpQixJQUFLLENBQzlCcUQsTUFDQTNELFlBQVksRUFDWkMsY0FBYyxFQUNkQyxVQUFVLElBR1piLElBQUlpQixLQUFPcUQsTUFFTnRFLEdBQ1QsQ0FnQkEsSUFBSWlOLDhCQUNZLFNBQVNDLGFBQWF2QixVQUFXd0IsTUFDN0MsR0FBSXhCLFVBQVVsTCxPQUFTLEVBQUcsQ0FDeEIsSUFBSTJNLFdBQWF6QixVQUFVQSxVQUFVbEwsT0FBUyxHQUMxQzJNLGFBQWVELE1BQ2pCQyxXQUFXOUUsT0FFZixDQUNBLElBQUkrRSxVQUFZMUIsVUFBVTJCLFFBQVFILE9BQ2YsSUFBZkUsV0FJRjFCLFVBQVU0QixPQUFPRixVQUFXLEdBSDVCMUIsVUFBVWdCLEtBQUtRLEtBTW5CLEVBaEJFRixnQ0FpQmMsU0FBUzlGLGVBQWV3RSxVQUFXd0IsTUFDakQsSUFBSUUsVUFBWTFCLFVBQVUyQixRQUFRSCxPQUNmLElBQWZFLFdBQ0YxQixVQUFVNEIsT0FBT0YsVUFBVyxHQUUxQjFCLFVBQVVsTCxPQUFTLEdBQ3JCa0wsVUFBVUEsVUFBVWxMLE9BQVMsR0FBR3dJLFNBRXBDLEVBUUV1RSxXQUFhLFNBQVNBLFdBQVdyTCxHQUNuQyxNQUFpQixRQUFWQSxFQUFFbEIsS0FBK0IsSUFBZGtCLEVBQUVzTCxPQUM5QixFQUdJNUIsYUFBZSxTQUFTQSxhQUFhMUosR0FDdkMsT0FBT3FMLFdBQVdyTCxLQUFPQSxFQUFFdUwsUUFDN0IsRUFHSTVCLGNBQWdCLFNBQVNBLGNBQWMzSixHQUN6QyxPQUFPcUwsV0FBV3JMLElBQU1BLEVBQUV1TCxRQUM1QixFQUNJQyxNQUFRLFNBQVNBLE1BQU1DLElBQ3pCLE9BQU9DLFdBQVdELEdBQUksRUFDeEIsRUFJSUUsVUFBWSxTQUFTQSxVQUFVQyxJQUFLSCxJQUN0QyxJQUFJSSxLQUFPLEVBVVgsT0FUQUQsSUFBSUUsT0FBTSxTQUFVM0osTUFBTzlELEdBQ3pCLE9BQUlvTixHQUFHdEosU0FDTDBKLElBQU14TixHQUNDLEVBSVgsSUFFT3dOLEdBQ1QsRUFTSUUsZUFBaUIsU0FBU0EsZUFBZTVKLE9BQzNDLElBQUssSUFBSVksS0FBT3hDLFVBQVVqQyxPQUFRMEUsT0FBUyxJQUFJQyxNQUFNRixLQUFPLEVBQUlBLEtBQU8sRUFBSSxHQUFJRyxLQUFPLEVBQUdBLEtBQU9ILEtBQU1HLE9BQ3BHRixPQUFPRSxLQUFPLEdBQUszQyxVQUFVMkMsTUFFL0IsTUFBd0IsbUJBQVZmLE1BQXVCQSxNQUFNM0IsV0FBTSxFQUFRd0MsUUFBVWIsS0FDckUsRUFDSTZKLGdCQUFrQixTQUFTQSxnQkFBZ0IzRyxPQVE3QyxPQUFPQSxNQUFNbEgsT0FBTzhOLFlBQTRDLG1CQUF2QjVHLE1BQU02RyxhQUE4QjdHLE1BQU02RyxlQUFlLEdBQUs3RyxNQUFNbEgsTUFDL0csRUFJSWdPLGtCQUFvQixHQUNwQnhLLGdCQUFrQixTQUFTQSxnQkFBZ0J5SyxTQUFVQyxhQUd2RCxJQTBDSXJCLEtBMUNBc0IsS0FBT0QsdUJBQWlELEVBQVNBLFlBQVkzSCxXQUFhQSxTQUMxRjhFLFdBQWE2Qyx1QkFBaUQsRUFBU0EsWUFBWTdDLFlBQWMyQyxrQkFDakdJLE9BQVM5QixlQUFlLENBQzFCN0cseUJBQXlCLEVBQ3pCc0YsbUJBQW1CLEVBQ25Cc0QsbUJBQW1CLEVBQ25COUMsYUFDQUMsZUFDQzBDLGFBQ0NJLE1BQVEsQ0FHVkMsV0FBWSxHQWNaQyxnQkFBaUIsR0FPakJDLGVBQWdCLEdBQ2hCQyw0QkFBNkIsS0FDN0JDLHdCQUF5QixLQUN6QjVILFFBQVEsRUFDUmdCLFFBQVEsRUFHUjZHLDRCQUF3QjFMLEdBWXRCMkwsVUFBWSxTQUFTQSxVQUFVQyxzQkFBdUJ2SyxXQUFZd0ssa0JBQ3BFLE9BQU9ELDRCQUErRDVMLElBQXRDNEwsc0JBQXNCdkssWUFBNEJ1SyxzQkFBc0J2SyxZQUFjNkosT0FBT1csa0JBQW9CeEssV0FDbkosRUFTSXlLLG1CQUFxQixTQUFTQSxtQkFBbUJ4RixTQUluRCxPQUFPOEUsTUFBTUUsZ0JBQWdCaEIsV0FBVSxTQUFVeUIsTUFDL0MsSUFBSUMsVUFBWUQsS0FBS0MsVUFDbkJDLGNBQWdCRixLQUFLRSxjQUN2QixPQUFPRCxVQUFVRSxTQUFTNUYsVUFLMUIyRixjQUFjRSxNQUFLLFNBQVVsSyxNQUMzQixPQUFPQSxPQUFTcUUsT0FDbEIsR0FDRixHQUNGLEVBZUkvQyxpQkFBbUIsU0FBU0EsaUJBQWlCbEMsWUFDL0MsSUFBSUUsWUFBYzJKLE9BQU83SixZQUN6QixHQUEyQixtQkFBaEJFLFlBQTRCLENBQ3JDLElBQUssSUFBSTZLLE1BQVFsTixVQUFVakMsT0FBUTBFLE9BQVMsSUFBSUMsTUFBTXdLLE1BQVEsRUFBSUEsTUFBUSxFQUFJLEdBQUlDLE1BQVEsRUFBR0EsTUFBUUQsTUFBT0MsUUFDMUcxSyxPQUFPMEssTUFBUSxHQUFLbk4sVUFBVW1OLE9BRWhDOUssWUFBY0EsWUFBWXBDLFdBQU0sRUFBUXdDLE9BQzFDLENBS0EsSUFKb0IsSUFBaEJKLGNBQ0ZBLGlCQUFjdkIsSUFHWHVCLFlBQWEsQ0FDaEIsUUFBb0J2QixJQUFoQnVCLGNBQTZDLElBQWhCQSxZQUMvQixPQUFPQSxZQUlULE1BQU0sSUFBSU8sTUFBTSxJQUFJQyxPQUFPVixXQUFZLGdFQUN6QyxDQUNBLElBQUlZLEtBQU9WLFlBRVgsR0FBMkIsaUJBQWhCQSxlQUNUVSxLQUFPZ0osSUFBSTlJLGNBQWNaLGNBRXZCLE1BQU0sSUFBSU8sTUFBTSxJQUFJQyxPQUFPVixXQUFZLDBDQUczQyxPQUFPWSxJQUNULEVBQ0lxSyxvQkFBc0IsU0FBU0Esc0JBQ2pDLElBQUlySyxLQUFPc0IsaUJBQWlCLGdCQUc1QixJQUFhLElBQVR0QixLQUNGLE9BQU8sRUFFVCxRQUFhakMsSUFBVGlDLEtBRUYsR0FBSTZKLG1CQUFtQmIsSUFBSXZILGdCQUFrQixFQUMzQ3pCLEtBQU9nSixJQUFJdkgsa0JBQ04sQ0FDTCxJQUFJNkksbUJBQXFCbkIsTUFBTUcsZUFBZSxHQUk5Q3RKLEtBSHdCc0ssb0JBQXNCQSxtQkFBbUJDLG1CQUdyQ2pKLGlCQUFpQixnQkFDL0MsQ0FFRixJQUFLdEIsS0FDSCxNQUFNLElBQUlILE1BQU0sZ0VBRWxCLE9BQU9HLElBQ1QsRUFDSXdLLG9CQUFzQixTQUFTQSxzQkF1RGpDLEdBdERBckIsTUFBTUUsZ0JBQWtCRixNQUFNQyxXQUFXcUIsS0FBSSxTQUFVVixXQUNyRCxJQUFJQyxlQUFnQix3Q0FBQVUsVUFBU1gsVUFBV2QsT0FBTzNHLGlCQUkzQ3FJLGdCQUFpQix3Q0FBQUMsV0FBVWIsVUFBV2QsT0FBTzNHLGlCQUNqRCxNQUFPLENBQ0x5SCxVQUNBQyxjQUNBVyxlQUNBSixrQkFBbUJQLGNBQWNoUCxPQUFTLEVBQUlnUCxjQUFjLEdBQUssS0FDakVhLGlCQUFrQmIsY0FBY2hQLE9BQVMsRUFBSWdQLGNBQWNBLGNBQWNoUCxPQUFTLEdBQUssS0FTdkY4UCxpQkFBa0IsU0FBU0EsaUJBQWlCOUssTUFDMUMsSUFBSStLLFVBQVU5TixVQUFVakMsT0FBUyxRQUFzQitDLElBQWpCZCxVQUFVLEtBQW1CQSxVQUFVLEdBV3pFK04sUUFBVUwsZUFBZXRDLFdBQVUsU0FBVTRDLEdBQy9DLE9BQU9BLElBQU1qTCxJQUNmLElBQ0EsS0FBSWdMLFFBQVUsR0FHZCxPQUFJRCxRQUNLSixlQUFlTyxNQUFNRixRQUFVLEdBQUdkLE1BQUssU0FBVWUsR0FDdEQsT0FBTyx3Q0FBQUUsWUFBV0YsRUFBR2hDLE9BQU8zRyxnQkFDOUIsSUFFS3FJLGVBQWVPLE1BQU0sRUFBR0YsU0FBU0ksVUFBVWxCLE1BQUssU0FBVWUsR0FDL0QsT0FBTyx3Q0FBQUUsWUFBV0YsRUFBR2hDLE9BQU8zRyxnQkFDOUIsR0FDRixFQUVKLElBQ0E2RyxNQUFNRyxlQUFpQkgsTUFBTUUsZ0JBQWdCdEMsUUFBTyxTQUFVc0UsT0FDNUQsT0FBT0EsTUFBTXJCLGNBQWNoUCxPQUFTLENBQ3RDLElBR0ltTyxNQUFNRyxlQUFldE8sUUFBVSxJQUFNc0csaUJBQWlCLGlCQUV4RCxNQUFNLElBQUl6QixNQUFNLHNHQUVwQixFQUNJeUwsU0FBVyxTQUFTQSxTQUFTdEwsT0FDbEIsSUFBVEEsTUFHQUEsT0FBU2dKLElBQUl2SCxnQkFHWnpCLE1BQVNBLEtBQUtxQyxPQUluQnJDLEtBQUtxQyxNQUFNLENBQ1RHLGdCQUFpQnlHLE9BQU96RyxnQkFFMUIyRyxNQUFNSyx3QkFBMEJ4SixLQW5TWixTQUFTdUwsa0JBQWtCdkwsTUFDakQsT0FBT0EsS0FBS3dMLFNBQTBDLFVBQS9CeEwsS0FBS3dMLFFBQVFDLGVBQW9ELG1CQUFoQnpMLEtBQUswTCxNQUMvRSxDQWtTUUgsQ0FBa0J2TCxPQUNwQkEsS0FBSzBMLFVBUkxKLFNBQVNqQix1QkFVYixFQUNJaEosbUJBQXFCLFNBQVNBLG1CQUFtQnNLLHVCQUNuRCxJQUFJM0wsS0FBT3NCLGlCQUFpQixpQkFBa0JxSyx1QkFDOUMsT0FBTzNMLE9BQXVCLElBQVRBLE1BQXlCMkwscUJBQ2hELEVBSUlDLGlCQUFtQixTQUFTQSxpQkFBaUJsUCxHQUMvQyxJQUFJN0IsT0FBUzZOLGdCQUFnQmhNLEdBQ3pCbU4sbUJBQW1CaFAsU0FBVyxJQUk5QjROLGVBQWVRLE9BQU92SSx3QkFBeUJoRSxHQUVqRGdMLEtBQUs3RixXQUFXLENBT2RDLFlBQWFtSCxPQUFPM0ksMEJBUXBCbUksZUFBZVEsT0FBT25ELGtCQUFtQnBKLElBTTdDQSxFQUFFbVAsaUJBQ0osRUFHSUMsYUFBZSxTQUFTQSxhQUFhcFAsR0FDdkMsSUFBSTdCLE9BQVM2TixnQkFBZ0JoTSxHQUN6QnFQLGdCQUFrQmxDLG1CQUFtQmhQLFNBQVcsRUFHaERrUixpQkFBbUJsUixrQkFBa0JtUixTQUNuQ0Qsa0JBQ0Y1QyxNQUFNSyx3QkFBMEIzTyxTQUlsQzZCLEVBQUV1UCwyQkFDRlgsU0FBU25DLE1BQU1LLHlCQUEyQmEsdUJBRTlDLEVBd0dJNkIsU0FBVyxTQUFTQSxTQUFTbkssT0FDL0IsR0FwY2dCLFNBQVNvSyxjQUFjelAsR0FDekMsTUFBaUIsV0FBVkEsRUFBRWxCLEtBQThCLFFBQVZrQixFQUFFbEIsS0FBK0IsS0FBZGtCLEVBQUVzTCxPQUNwRCxDQWtjUW1FLENBQWNwSyxTQUE4RCxJQUFwRDBHLGVBQWVRLE9BQU9yRCxrQkFBbUI3RCxPQUduRSxPQUZBQSxNQUFNOEosc0JBQ05uRSxLQUFLN0YsY0FHSG9ILE9BQU83QyxhQUFhckUsUUFBVWtILE9BQU81QyxjQUFjdEUsU0F4R3ZDLFNBQVNxSyxZQUFZckssT0FDckMsSUFBSXNLLFdBQWFwUCxVQUFVakMsT0FBUyxRQUFzQitDLElBQWpCZCxVQUFVLElBQW1CQSxVQUFVLEdBQzVFcEMsT0FBUzZOLGdCQUFnQjNHLE9BQzdCeUksc0JBQ0EsSUFBSThCLGdCQUFrQixLQUN0QixHQUFJbkQsTUFBTUcsZUFBZXRPLE9BQVMsRUFBRyxDQUluQyxJQUFJdVIsZUFBaUIxQyxtQkFBbUJoUCxRQUNwQzJSLGVBQWlCRCxnQkFBa0IsRUFBSXBELE1BQU1FLGdCQUFnQmtELHFCQUFrQnhPLEVBQ25GLEdBQUl3TyxlQUFpQixFQUtqQkQsZ0JBRkVELFdBRWdCbEQsTUFBTUcsZUFBZUgsTUFBTUcsZUFBZXRPLE9BQVMsR0FBRzZQLGlCQUd0RDFCLE1BQU1HLGVBQWUsR0FBR2lCLHVCQUV2QyxHQUFJOEIsV0FBWSxDQUlyQixJQUFJSSxrQkFBb0JwRSxVQUFVYyxNQUFNRyxnQkFBZ0IsU0FBVW9ELE9BQ2hFLElBQUluQyxrQkFBb0JtQyxNQUFNbkMsa0JBQzlCLE9BQU8xUCxTQUFXMFAsaUJBQ3BCLElBVUEsR0FUSWtDLGtCQUFvQixJQUFNRCxlQUFlekMsWUFBY2xQLFNBQVUsd0NBQUF5RCxhQUFZekQsT0FBUW9PLE9BQU8zRyxvQkFBcUIsd0NBQUE2SSxZQUFXdFEsT0FBUW9PLE9BQU8zRyxtQkFBcUJrSyxlQUFlMUIsaUJBQWlCalEsUUFBUSxNQU8xTTRSLGtCQUFvQkYsZ0JBRWxCRSxtQkFBcUIsRUFBRyxDQUkxQixJQUFJRSxzQkFBOEMsSUFBdEJGLGtCQUEwQnRELE1BQU1HLGVBQWV0TyxPQUFTLEVBQUl5UixrQkFBb0IsRUFFNUdILGdCQUR1Qm5ELE1BQU1HLGVBQWVxRCx1QkFDVDlCLGdCQUNyQyxNQUFZOUMsV0FBV2hHLFNBR3JCdUssZ0JBQWtCRSxlQUFlMUIsaUJBQWlCalEsUUFBUSxHQUU5RCxLQUFPLENBSUwsSUFBSStSLGlCQUFtQnZFLFVBQVVjLE1BQU1HLGdCQUFnQixTQUFVdUQsT0FDL0QsSUFBSWhDLGlCQUFtQmdDLE1BQU1oQyxpQkFDN0IsT0FBT2hRLFNBQVdnUSxnQkFDcEIsSUFVQSxHQVRJK0IsaUJBQW1CLElBQU1KLGVBQWV6QyxZQUFjbFAsU0FBVSx3Q0FBQXlELGFBQVl6RCxPQUFRb08sT0FBTzNHLG9CQUFxQix3Q0FBQTZJLFlBQVd0USxPQUFRb08sT0FBTzNHLG1CQUFxQmtLLGVBQWUxQixpQkFBaUJqUSxXQU9qTStSLGlCQUFtQkwsZ0JBRWpCSyxrQkFBb0IsRUFBRyxDQUl6QixJQUFJRSx1QkFBeUJGLG1CQUFxQnpELE1BQU1HLGVBQWV0TyxPQUFTLEVBQUksRUFBSTRSLGlCQUFtQixFQUUzR04sZ0JBRHdCbkQsTUFBTUcsZUFBZXdELHdCQUNUdkMsaUJBQ3RDLE1BQVl4QyxXQUFXaEcsU0FHckJ1SyxnQkFBa0JFLGVBQWUxQixpQkFBaUJqUSxRQUV0RCxDQUNGLE1BR0V5UixnQkFBa0JoTCxpQkFBaUIsaUJBRWpDZ0wsa0JBQ0V2RSxXQUFXaEcsUUFLYkEsTUFBTThKLGlCQUVSUCxTQUFTZ0IsaUJBR2IsQ0FTSUYsQ0FBWXJLLE1BQU9rSCxPQUFPNUMsY0FBY3RFLE9BRTVDLEVBQ0lnTCxXQUFhLFNBQVNBLFdBQVdyUSxHQUNuQyxJQUFJN0IsT0FBUzZOLGdCQUFnQmhNLEdBQ3pCbU4sbUJBQW1CaFAsU0FBVyxHQUc5QjROLGVBQWVRLE9BQU92SSx3QkFBeUJoRSxJQUcvQytMLGVBQWVRLE9BQU9uRCxrQkFBbUJwSixLQUc3Q0EsRUFBRW1QLGlCQUNGblAsRUFBRXVQLDJCQUNKLEVBTUllLGFBQWUsU0FBU0EsZUFDMUIsR0FBSzdELE1BQU12SCxPQTZCWCxPQXhCQTRGLDhCQUE4QnRCLFVBQVd3QixNQUl6Q3lCLE1BQU1NLHVCQUF5QlIsT0FBT0Msa0JBQW9CaEIsT0FBTSxXQUM5RG9ELFNBQVNqQixzQkFDWCxJQUFLaUIsU0FBU2pCLHVCQUNkckIsSUFBSWlFLGlCQUFpQixVQUFXbkIsY0FBYyxHQUM5QzlDLElBQUlpRSxpQkFBaUIsWUFBYXJCLGlCQUFrQixDQUNsRHNCLFNBQVMsRUFDVEMsU0FBUyxJQUVYbkUsSUFBSWlFLGlCQUFpQixhQUFjckIsaUJBQWtCLENBQ25Ec0IsU0FBUyxFQUNUQyxTQUFTLElBRVhuRSxJQUFJaUUsaUJBQWlCLFFBQVNGLFdBQVksQ0FDeENHLFNBQVMsRUFDVEMsU0FBUyxJQUVYbkUsSUFBSWlFLGlCQUFpQixVQUFXZixTQUFVLENBQ3hDZ0IsU0FBUyxFQUNUQyxTQUFTLElBRUp6RixJQUNULEVBQ0kwRixnQkFBa0IsU0FBU0Esa0JBQzdCLEdBQUtqRSxNQUFNdkgsT0FRWCxPQUxBb0gsSUFBSXFFLG9CQUFvQixVQUFXdkIsY0FBYyxHQUNqRDlDLElBQUlxRSxvQkFBb0IsWUFBYXpCLGtCQUFrQixHQUN2RDVDLElBQUlxRSxvQkFBb0IsYUFBY3pCLGtCQUFrQixHQUN4RDVDLElBQUlxRSxvQkFBb0IsUUFBU04sWUFBWSxHQUM3Qy9ELElBQUlxRSxvQkFBb0IsVUFBV25CLFVBQVUsR0FDdEN4RSxJQUNULEVBbUhBLE9BN0dBQSxLQUFPLENBQ0wsVUFBSTlGLEdBQ0YsT0FBT3VILE1BQU12SCxNQUNmLEVBQ0EsVUFBSWdCLEdBQ0YsT0FBT3VHLE1BQU12RyxNQUNmLEVBQ0FELFNBQVUsU0FBU0EsU0FBUzJLLGlCQUMxQixHQUFJbkUsTUFBTXZILE9BQ1IsT0FBTzVFLEtBRVQsSUFBSStILFdBQWEyRSxVQUFVNEQsZ0JBQWlCLGNBQ3hDckksZUFBaUJ5RSxVQUFVNEQsZ0JBQWlCLGtCQUM1Q3BJLGtCQUFvQndFLFVBQVU0RCxnQkFBaUIscUJBQzlDcEksbUJBQ0hzRixzQkFFRnJCLE1BQU12SCxRQUFTLEVBQ2Z1SCxNQUFNdkcsUUFBUyxFQUNmdUcsTUFBTUksNEJBQThCUCxJQUFJdkgsY0FDeENzRCxrQkFBd0RBLGFBQ3hELElBQUl3SSxpQkFBbUIsU0FBU0EsbUJBQzFCckksbUJBQ0ZzRixzQkFFRndDLGVBQ0EvSCxzQkFBZ0VBLGdCQUNsRSxFQUNBLE9BQUlDLG1CQUNGQSxrQkFBa0JpRSxNQUFNQyxXQUFXdEosVUFBVTJDLEtBQUs4SyxpQkFBa0JBLGtCQUM3RHZRLE9BRVR1USxtQkFDT3ZRLEtBQ1QsRUFDQTZFLFdBQVksU0FBU0EsV0FBVzJMLG1CQUM5QixJQUFLckUsTUFBTXZILE9BQ1QsT0FBTzVFLEtBRVQsSUFBSXlRLFFBQVV0RyxlQUFlLENBQzNCM0csYUFBY3lJLE9BQU96SSxhQUNyQkMsaUJBQWtCd0ksT0FBT3hJLGlCQUN6QkYsb0JBQXFCMEksT0FBTzFJLHFCQUMzQmlOLG1CQUNIRSxhQUFhdkUsTUFBTU0sd0JBQ25CTixNQUFNTSw0QkFBeUIxTCxFQUMvQnFQLGtCQUNBakUsTUFBTXZILFFBQVMsRUFDZnVILE1BQU12RyxRQUFTLEVBQ2Y0RSxnQ0FBZ0N0QixVQUFXd0IsTUFDM0MsSUFBSWxILGFBQWVrSixVQUFVK0QsUUFBUyxnQkFDbENoTixpQkFBbUJpSixVQUFVK0QsUUFBUyxvQkFDdENsTixvQkFBc0JtSixVQUFVK0QsUUFBUyx1QkFDekMzTCxZQUFjNEgsVUFBVStELFFBQVMsY0FBZSwyQkFDcERqTixvQkFBNERBLGVBQzVELElBQUkwQixtQkFBcUIsU0FBU0EscUJBQ2hDZ0csT0FBTSxXQUNBcEcsYUFDRndKLFNBQVNqSyxtQkFBbUI4SCxNQUFNSSw4QkFFcEM5SSx3QkFBb0VBLGtCQUN0RSxHQUNGLEVBQ0EsT0FBSXFCLGFBQWV2QixxQkFDakJBLG9CQUFvQmMsbUJBQW1COEgsTUFBTUksOEJBQThCOUcsS0FBS1AsbUJBQW9CQSxvQkFDN0ZsRixPQUVUa0YscUJBQ09sRixLQUNULEVBQ0E2RixNQUFPLFNBQVNBLE1BQU04SyxjQUNwQixHQUFJeEUsTUFBTXZHLFNBQVd1RyxNQUFNdkgsT0FDekIsT0FBTzVFLEtBRVQsSUFBSW1JLFFBQVV1RSxVQUFVaUUsYUFBYyxXQUNsQ3ZJLFlBQWNzRSxVQUFVaUUsYUFBYyxlQUsxQyxPQUpBeEUsTUFBTXZHLFFBQVMsRUFDZnVDLGVBQWtEQSxVQUNsRGlJLGtCQUNBaEksbUJBQTBEQSxjQUNuRHBJLElBQ1QsRUFDQXdHLFFBQVMsU0FBU0EsUUFBUW9LLGdCQUN4QixJQUFLekUsTUFBTXZHLFNBQVd1RyxNQUFNdkgsT0FDMUIsT0FBTzVFLEtBRVQsSUFBSXFJLFVBQVlxRSxVQUFVa0UsZUFBZ0IsYUFDdEN0SSxjQUFnQm9FLFVBQVVrRSxlQUFnQixpQkFNOUMsT0FMQXpFLE1BQU12RyxRQUFTLEVBQ2Z5QyxpQkFBc0RBLFlBQ3REbUYsc0JBQ0F3QyxlQUNBMUgscUJBQThEQSxnQkFDdkR0SSxJQUNULEVBQ0FtRyx3QkFBeUIsU0FBU0Esd0JBQXdCcEMsbUJBQ3hELElBQUk4TSxnQkFBa0IsR0FBRy9OLE9BQU9pQixtQkFBbUJnRyxPQUFPeEssU0FPMUQsT0FOQTRNLE1BQU1DLFdBQWF5RSxnQkFBZ0JwRCxLQUFJLFNBQVVwRyxTQUMvQyxNQUEwQixpQkFBWkEsUUFBdUIyRSxJQUFJOUksY0FBY21FLFNBQVdBLE9BQ3BFLElBQ0k4RSxNQUFNdkgsUUFDUjRJLHNCQUVLeE4sSUFDVCxJQUlHbUcsd0JBQXdCMkYsVUFDdEJwQixJQUNULGlGQ2p0QkEsU0FBU29HLHNCQUFzQkMsZUFDN0IsT0FBTyxTQUFVakUsTUFDZixJQUFJa0UsU0FBV2xFLEtBQUtrRSxTQUNoQkMsU0FBV25FLEtBQUttRSxTQUNwQixPQUFPLFNBQVVDLE1BQ2YsT0FBTyxTQUFVQyxRQUNmLE1BQXNCLG1CQUFYQSxPQUNGQSxPQUFPSCxTQUFVQyxTQUFVRixlQUc3QkcsS0FBS0MsT0FDZCxDQUNGLENBQ0YsQ0FDRixDQWZBMUgsUUFBUTJILFlBQWEsRUFpQnJCLElBQUlDLE1BQVFQLHdCQUNaTyxNQUFNQyxrQkFBb0JSLHNCQUUxQnJILFFBQUEsUUFBcUI0SCxtVENickIsSUFBSUUsbUJBQXFCLENBQUMscUJBQXNCLHNCQUF1Qix3QkFBeUIsdUJBQXdCLHNCQUF1QixvQ0FBcUMsK0JBQWdDLCtCQUFnQyxnRUFBaUUsNkNBQThDLHdCQUMvVkMsa0JBQW1DRCxtQkFBbUJFLEtBQUssS0FDM0RDLFVBQStCLG9CQUFaakssUUFDbkJrSyxRQUFVRCxVQUFZLFdBQWEsRUFBSWpLLFFBQVE5SixVQUFVZ1UsU0FBV2xLLFFBQVE5SixVQUFVaVUsbUJBQXFCbkssUUFBUTlKLFVBQVVrVSxzQkFDN0hDLGFBQWVKLFdBQWFqSyxRQUFROUosVUFBVW1VLFlBQWMsU0FBVXpLLFNBQ3hFLElBQUkwSyxxQkFDSixPQUFPMUssZUFBbUcsUUFBaEQwSyxxQkFBdUIxSyxRQUFReUssbUJBQWtELElBQXpCQywwQkFBbEUsRUFBNkdBLHFCQUFxQnRTLEtBQUs0SCxRQUN6TCxFQUFJLFNBQVVBLFNBQ1osT0FBT0EsbUJBQXlDLEVBQVNBLFFBQVEySyxhQUNuRSxFQVVJQyxRQUFVLFNBQVNBLFFBQVFqUCxLQUFNa1AsUUFDbkMsSUFBSUMsd0JBQ1csSUFBWEQsU0FDRkEsUUFBUyxHQUtYLElBQUlFLFNBQVdwUCxZQUF5RixRQUE1Q21QLG1CQUFxQm5QLEtBQUtxUCxvQkFBaUQsSUFBdkJGLHdCQUE5RCxFQUF1R0EsbUJBQW1CMVMsS0FBS3VELEtBQU0sU0FVdkwsTUFUeUIsS0FBYm9QLFVBQWdDLFNBQWJBLFVBT1RGLFFBQVVsUCxNQUFRaVAsUUFBUWpQLEtBQUtzUCxXQUd2RCxFQXNCSUMsY0FBZ0IsU0FBU0EsY0FBY0MsR0FBSUMsaUJBQWtCMUksUUFHL0QsR0FBSWtJLFFBQVFPLElBQ1YsTUFBTyxHQUVULElBQUlFLFdBQWEvUCxNQUFNaEYsVUFBVXVRLE1BQU1oTyxNQUFNc1MsR0FBR0csaUJBQWlCbkIsb0JBS2pFLE9BSklpQixrQkFBb0JkLFFBQVFsUyxLQUFLK1MsR0FBSWhCLG9CQUN2Q2tCLFdBQVdFLFFBQVFKLElBRXJCRSxXQUFhQSxXQUFXM0ksT0FBT0EsT0FFakMsRUFvQ0k4SSx5QkFBMkIsU0FBU0EseUJBQXlCL0csU0FBVTJHLGlCQUFrQmhDLFNBRzNGLElBRkEsSUFBSWlDLFdBQWEsR0FDYkksZ0JBQWtCblEsTUFBTW9RLEtBQUtqSCxVQUMxQmdILGdCQUFnQjlVLFFBQVEsQ0FDN0IsSUFBSXFKLFFBQVV5TCxnQkFBZ0JFLFFBQzlCLElBQUlmLFFBQVE1SyxTQUFTLEdBS3JCLEdBQXdCLFNBQXBCQSxRQUFRbUgsUUFBb0IsQ0FFOUIsSUFBSXlFLFNBQVc1TCxRQUFRNkwsbUJBRW5CQyxpQkFBbUJOLHlCQURUSSxTQUFTalYsT0FBU2lWLFNBQVc1TCxRQUFRUixVQUNNLEVBQU00SixTQUMzREEsUUFBUTJDLFFBQ1ZWLFdBQVd4SSxLQUFLaEssTUFBTXdTLFdBQVlTLGtCQUVsQ1QsV0FBV3hJLEtBQUssQ0FDZG1KLFlBQWFoTSxRQUNicUwsV0FBWVMsa0JBR2xCLEtBQU8sQ0FFZ0J4QixRQUFRbFMsS0FBSzRILFFBQVNtSyxvQkFDckJmLFFBQVExRyxPQUFPMUMsV0FBYW9MLG1CQUFxQjNHLFNBQVN3SCxTQUFTak0sV0FDdkZxTCxXQUFXeEksS0FBSzdDLFNBSWxCLElBQUlzRSxXQUFhdEUsUUFBUXNFLFlBRVEsbUJBQTFCOEUsUUFBUXhILGVBQWdDd0gsUUFBUXhILGNBQWM1QixTQUtqRWtNLGlCQUFtQnRCLFFBQVF0RyxZQUFZLE1BQVk4RSxRQUFRK0Msa0JBQW9CL0MsUUFBUStDLGlCQUFpQm5NLFVBQzVHLEdBQUlzRSxZQUFjNEgsZ0JBQWlCLENBT2pDLElBQUlFLGtCQUFvQlosMEJBQXdDLElBQWZsSCxXQUFzQnRFLFFBQVFSLFNBQVc4RSxXQUFXOUUsVUFBVSxFQUFNNEosU0FDakhBLFFBQVEyQyxRQUNWVixXQUFXeEksS0FBS2hLLE1BQU13UyxXQUFZZSxtQkFFbENmLFdBQVd4SSxLQUFLLENBQ2RtSixZQUFhaE0sUUFDYnFMLFdBQVllLG1CQUdsQixNQUdFWCxnQkFBZ0JGLFFBQVExUyxNQUFNNFMsZ0JBQWlCekwsUUFBUVIsU0FFM0QsQ0FDRixDQUNBLE9BQU82TCxVQUNULEVBQ0lnQixZQUFjLFNBQVNBLFlBQVkxUSxLQUFNMlEsU0FDM0MsT0FBSTNRLEtBQUs0USxTQUFXLElBWWJELFNBQVcsMEJBQTBCRSxLQUFLN1EsS0FBS3dMLFVBNUloQyxTQUFTc0Ysa0JBQWtCOVEsTUFDakQsSUFBSStRLG9CQUlBQyxTQUFXaFIsWUFBMEYsUUFBN0MrUSxvQkFBc0IvUSxLQUFLcVAsb0JBQWtELElBQXhCMEIseUJBQS9ELEVBQXlHQSxvQkFBb0J0VSxLQUFLdUQsS0FBTSxtQkFDMUwsTUFBb0IsS0FBYmdSLFVBQWdDLFNBQWJBLFFBQzVCLENBcUlvRUYsQ0FBa0I5USxRQUFVaVIsTUFBTUMsU0FBU2xSLEtBQUtxUCxhQUFhLFlBQWEsS0FDakksRUFHSnJQLEtBQUs0USxRQUNkLEVBQ0lPLHFCQUF1QixTQUFTQSxxQkFBcUJDLEVBQUdDLEdBQzFELE9BQU9ELEVBQUVSLFdBQWFTLEVBQUVULFNBQVdRLEVBQUVFLGNBQWdCRCxFQUFFQyxjQUFnQkYsRUFBRVIsU0FBV1MsRUFBRVQsUUFDeEYsRUFDSVcsUUFBVSxTQUFTQSxRQUFRdlIsTUFDN0IsTUFBd0IsVUFBakJBLEtBQUt3TCxPQUNkLEVBMkNJZ0csbUJBQXFCLFNBQVNBLG1CQUFtQnhSLE1BQ25ELE9BSlksU0FBU3lSLFFBQVF6UixNQUM3QixPQUFPdVIsUUFBUXZSLE9BQXVCLFVBQWRBLEtBQUtnRSxJQUMvQixDQUVTeU4sQ0FBUXpSLFFBM0JLLFNBQVMwUixnQkFBZ0IxUixNQUM3QyxJQUFLQSxLQUFLMlIsS0FDUixPQUFPLEVBRVQsSUFJSUMsU0FKQUMsV0FBYTdSLEtBQUs4UixNQUFRaEQsWUFBWTlPLE1BQ3RDK1IsWUFBYyxTQUFTQSxZQUFZSixNQUNyQyxPQUFPRSxXQUFXbEMsaUJBQWlCLDZCQUErQmdDLEtBQU8sS0FDM0UsRUFFQSxHQUFzQixvQkFBWEssYUFBZ0QsSUFBZkEsT0FBT0MsS0FBb0QsbUJBQXRCRCxPQUFPQyxJQUFJQyxPQUMxRk4sU0FBV0csWUFBWUMsT0FBT0MsSUFBSUMsT0FBT2xTLEtBQUsyUixZQUU5QyxJQUNFQyxTQUFXRyxZQUFZL1IsS0FBSzJSLEtBQzlCLENBQUUsTUFBT1EsS0FHUCxPQURBQyxRQUFRQyxNQUFNLDJJQUE0SUYsSUFBSUcsVUFDdkosQ0FDVCxDQUVGLElBQUlDLFFBM0JnQixTQUFTQyxnQkFBZ0JDLE1BQU9YLE1BQ3BELElBQUssSUFBSS9XLEVBQUksRUFBR0EsRUFBSTBYLE1BQU16WCxPQUFRRCxJQUNoQyxHQUFJMFgsTUFBTTFYLEdBQUd3WCxTQUFXRSxNQUFNMVgsR0FBRytXLE9BQVNBLEtBQ3hDLE9BQU9XLE1BQU0xWCxFQUduQixDQXFCZ0J5WCxDQUFnQlosU0FBVTVSLEtBQUs4UixNQUM3QyxPQUFRUyxTQUFXQSxVQUFZdlMsSUFDakMsQ0FLMkIwUixDQUFnQjFSLEtBQzNDLEVBaURJMFMsV0FBYSxTQUFTQSxXQUFXMVMsTUFDbkMsSUFBSTJTLHNCQUF3QjNTLEtBQUs0Uyx3QkFDL0JDLE1BQVFGLHNCQUFzQkUsTUFDOUJDLE9BQVNILHNCQUFzQkcsT0FDakMsT0FBaUIsSUFBVkQsT0FBMEIsSUFBWEMsTUFDeEIsRUFDSUMsU0FBVyxTQUFTQSxTQUFTL1MsS0FBTThKLE1BQ3JDLElBQUkvRCxhQUFlK0QsS0FBSy9ELGFBQ3RCRSxjQUFnQjZELEtBQUs3RCxjQU12QixHQUEwQyxXQUF0QytNLGlCQUFpQmhULE1BQU1pVCxXQUN6QixPQUFPLEVBRVQsSUFDSUMsaUJBRGtCdkUsUUFBUWxTLEtBQUt1RCxLQUFNLGlDQUNBQSxLQUFLbVQsY0FBZ0JuVCxLQUM5RCxHQUFJMk8sUUFBUWxTLEtBQUt5VyxpQkFBa0IseUJBQ2pDLE9BQU8sRUFFVCxHQUFLbk4sY0FBaUMsU0FBakJBLGNBQTRDLGdCQUFqQkEsY0FnRXpDLEdBQXFCLGtCQUFqQkEsYUFNVCxPQUFPMk0sV0FBVzFTLFVBdEU0RCxDQUM5RSxHQUE2QixtQkFBbEJpRyxjQUE4QixDQUl2QyxJQURBLElBQUltTixhQUFlcFQsS0FDWkEsTUFBTSxDQUNYLElBQUltVCxjQUFnQm5ULEtBQUttVCxjQUNyQkUsU0FBV3ZFLFlBQVk5TyxNQUMzQixHQUFJbVQsZ0JBQWtCQSxjQUFjeEssYUFBK0MsSUFBakMxQyxjQUFja04sZUFJOUQsT0FBT1QsV0FBVzFTLE1BR2xCQSxLQUZTQSxLQUFLc1QsYUFFUHRULEtBQUtzVCxhQUNGSCxlQUFpQkUsV0FBYXJULEtBQUtnUCxjQUt0Q21FLGNBSEFFLFNBQVNFLElBS3BCLENBQ0F2VCxLQUFPb1QsWUFDVCxDQVdBLEdBeEdpQixTQUFTSSxlQUFleFQsTUFDM0MsSUFBSXlULFVBK0JFQyxjQUFlQyxzQkFBdUJDLG9CQVB4Q0MsU0FBVzdULE1BQVE4TyxZQUFZOU8sTUFDL0I4VCxhQUEwQyxRQUExQkwsVUFBWUksZ0JBQW9DLElBQWRKLGVBQXVCLEVBQVNBLFVBQVVGLEtBSTVGUSxVQUFXLEVBQ2YsR0FBSUYsVUFBWUEsV0FBYTdULEtBRzNCLElBREErVCxZQUFpRCxRQUFsQ0wsY0FBZ0JJLG9CQUE0QyxJQUFsQkosZUFBc0YsUUFBekRDLHNCQUF3QkQsY0FBYzFFLHFCQUFxRCxJQUExQjJFLHVCQUFvQ0Esc0JBQXNCMUosU0FBUzZKLGVBQWlCOVQsWUFBbUYsUUFBOUM0VCxvQkFBc0I1VCxLQUFLZ1AscUJBQW1ELElBQXhCNEUscUJBQWtDQSxvQkFBb0IzSixTQUFTakssUUFDN1grVCxVQUFZRCxjQUFjLENBQ2hDLElBQUlFLFdBQVlDLGVBQWdCQyxzQkFNaENILFdBQWtELFFBQW5DRSxlQURmSCxhQUEyQyxRQUEzQkUsV0FEaEJILFNBQVcvRSxZQUFZZ0YscUJBQzJDLElBQWZFLGdCQUF3QixFQUFTQSxXQUFXVCxZQUNsQixJQUFuQlUsZ0JBQXdGLFFBQTFEQyxzQkFBd0JELGVBQWVqRixxQkFBcUQsSUFBMUJrRix3QkFBb0NBLHNCQUFzQmpLLFNBQVM2SixjQUMvTixDQUVGLE9BQU9DLFFBQ1QsQ0EyRFFQLENBQWV4VCxNQUtqQixPQUFRQSxLQUFLbVUsaUJBQWlCblosT0FtQmhDLEdBQXFCLGdCQUFqQitLLGFBQ0YsT0FBTyxDQUdYLENBV0EsT0FBTyxDQUNULEVBZ0NJcU8sZ0NBQWtDLFNBQVNBLGdDQUFnQzNHLFFBQVN6TixNQUN0RixRQUFJQSxLQUFLcVUsVUFJVHBGLFFBQVFqUCxPQXBPVSxTQUFTc1UsY0FBY3RVLE1BQ3pDLE9BQU91UixRQUFRdlIsT0FBdUIsV0FBZEEsS0FBS2dFLElBQy9CLENBa09tQnNRLENBQWN0VSxPQUFTK1MsU0FBUy9TLEtBQU15TixVQWpPOUIsU0FBUzhHLHFCQUFxQnZVLE1BSXZELE1BSHlCLFlBQWpCQSxLQUFLd0wsU0FBeUI3TCxNQUFNaEYsVUFBVXVRLE1BQU1oTyxNQUFNOEMsS0FBSzZELFVBQVVmLE1BQUssU0FBVWMsT0FDOUYsTUFBeUIsWUFBbEJBLE1BQU00SCxPQUNmLEdBRUYsQ0E4TkUrSSxDQUFxQnZVLE9BbENNLFNBQVN3VSx1QkFBdUJ4VSxNQUMzRCxHQUFJLG1DQUFtQzZRLEtBQUs3USxLQUFLd0wsU0FHL0MsSUFGQSxJQUFJOEQsV0FBYXRQLEtBQUttVCxjQUVmN0QsWUFBWSxDQUNqQixHQUEyQixhQUF2QkEsV0FBVzlELFNBQTBCOEQsV0FBVytFLFNBQVUsQ0FFNUQsSUFBSyxJQUFJdFosRUFBSSxFQUFHQSxFQUFJdVUsV0FBV3pMLFNBQVM3SSxPQUFRRCxJQUFLLENBQ25ELElBQUk2SSxNQUFRMEwsV0FBV3pMLFNBQVM0USxLQUFLMVosR0FFckMsR0FBc0IsV0FBbEI2SSxNQUFNNEgsUUFHUixRQUFPbUQsUUFBUWxTLEtBQUs2UyxXQUFZLDBCQUFrQzFMLE1BQU1xRyxTQUFTakssS0FFckYsQ0FFQSxPQUFPLENBQ1QsQ0FDQXNQLFdBQWFBLFdBQVc2RCxhQUMxQixDQUtGLE9BQU8sQ0FDVCxDQVFnQ3FCLENBQXVCeFUsTUFJdkQsRUFDSTBVLCtCQUFpQyxTQUFTQSwrQkFBK0JqSCxRQUFTek4sTUFDcEYsUUFBSXdSLG1CQUFtQnhSLE9BQVMwUSxZQUFZMVEsTUFBUSxJQUFNb1UsZ0NBQWdDM0csUUFBU3pOLE1BSXJHLEVBQ0kyVSwwQkFBNEIsU0FBU0EsMEJBQTBCQyxnQkFDakUsSUFBSWhFLFNBQVdNLFNBQVMwRCxlQUFldkYsYUFBYSxZQUFhLElBQ2pFLFNBQUk0QixNQUFNTCxXQUFhQSxVQUFZLEVBTXJDLEVBTUlpRSxZQUFjLFNBQVNBLFlBQVluRixZQUNyQyxJQUFJb0YsaUJBQW1CLEdBQ25CQyxpQkFBbUIsR0FrQnZCLE9BakJBckYsV0FBV3JJLFNBQVEsU0FBVW9OLEtBQU0xWixHQUNqQyxJQUFJNFYsVUFBWThELEtBQUtwRSxZQUNqQmhNLFFBQVVzTSxRQUFVOEQsS0FBS3BFLFlBQWNvRSxLQUN2Q08sa0JBQW9CdEUsWUFBWXJNLFFBQVNzTSxTQUN6QzdILFNBQVc2SCxRQUFVa0UsWUFBWUosS0FBSy9FLFlBQWNyTCxRQUM5QixJQUF0QjJRLGtCQUNGckUsUUFBVW1FLGlCQUFpQjVOLEtBQUtoSyxNQUFNNFgsaUJBQWtCaE0sVUFBWWdNLGlCQUFpQjVOLEtBQUs3QyxTQUUxRjBRLGlCQUFpQjdOLEtBQUssQ0FDcEJvSyxjQUFldlcsRUFDZjZWLFNBQVVvRSxrQkFDVlAsS0FDQTlELFFBQ0FzRSxRQUFTbk0sVUFHZixJQUNPaU0saUJBQWlCRyxLQUFLL0Qsc0JBQXNCZ0UsUUFBTyxTQUFVQyxJQUFLQyxVQUV2RSxPQURBQSxTQUFTMUUsUUFBVXlFLElBQUlsTyxLQUFLaEssTUFBTWtZLElBQUtDLFNBQVNKLFNBQVdHLElBQUlsTyxLQUFLbU8sU0FBU0osU0FDdEVHLEdBQ1QsR0FBRyxJQUFJdFYsT0FBT2dWLGlCQUNoQixFQUNJcEssU0FBVyxTQUFTQSxTQUFTOEUsR0FBSS9CLFNBRW5DLElBQUlpQyxXQVdKLE9BVEVBLFlBSEZqQyxRQUFVQSxTQUFXLENBQUMsR0FFVnhILGNBQ0c0Six5QkFBeUIsQ0FBQ0wsSUFBSy9CLFFBQVFnQyxpQkFBa0IsQ0FDcEUxSSxPQUFRMk4sK0JBQStCN1ksS0FBSyxLQUFNNFIsU0FDbEQyQyxTQUFTLEVBQ1RuSyxjQUFld0gsUUFBUXhILGNBQ3ZCdUssaUJBQWtCbUUsNEJBR1BwRixjQUFjQyxHQUFJL0IsUUFBUWdDLGlCQUFrQmlGLCtCQUErQjdZLEtBQUssS0FBTTRSLFVBRTlGb0gsWUFBWW5GLFdBQ3JCLEVBQ0k5RSxVQUFZLFNBQVNBLFVBQVU0RSxHQUFJL0IsU0FZckMsT0FYQUEsUUFBVUEsU0FBVyxDQUFDLEdBRVZ4SCxjQUNHNEoseUJBQXlCLENBQUNMLElBQUsvQixRQUFRZ0MsaUJBQWtCLENBQ3BFMUksT0FBUXFOLGdDQUFnQ3ZZLEtBQUssS0FBTTRSLFNBQ25EMkMsU0FBUyxFQUNUbkssY0FBZXdILFFBQVF4SCxnQkFHWnNKLGNBQWNDLEdBQUkvQixRQUFRZ0MsaUJBQWtCMkUsZ0NBQWdDdlksS0FBSyxLQUFNNFIsU0FHeEcsRUFDSXRDLFdBQWEsU0FBU0EsV0FBV25MLEtBQU15TixTQUV6QyxHQURBQSxRQUFVQSxTQUFXLENBQUMsR0FDakJ6TixLQUNILE1BQU0sSUFBSUgsTUFBTSxvQkFFbEIsT0FBOEMsSUFBMUM4TyxRQUFRbFMsS0FBS3VELEtBQU13TyxvQkFHaEJrRywrQkFBK0JqSCxRQUFTek4sS0FDakQsRUFDSXNWLDJCQUE0Qy9HLG1CQUFtQnpPLE9BQU8sVUFBVTJPLEtBQUssS0FDckZuUSxZQUFjLFNBQVNBLFlBQVkwQixLQUFNeU4sU0FFM0MsR0FEQUEsUUFBVUEsU0FBVyxDQUFDLEdBQ2pCek4sS0FDSCxNQUFNLElBQUlILE1BQU0sb0JBRWxCLE9BQXVELElBQW5EOE8sUUFBUWxTLEtBQUt1RCxLQUFNc1YsNkJBR2hCbEIsZ0NBQWdDM0csUUFBU3pOLEtBQ2xEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vbm9kZV9tb2R1bGVzL2ZvY3VzLXRyYXAtcmVhY3QvZGlzdC9mb2N1cy10cmFwLXJlYWN0LmpzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL25vZGVfbW9kdWxlcy9mb2N1cy10cmFwL2Rpc3QvZm9jdXMtdHJhcC5lc20uanMiLCJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vbm9kZV9tb2R1bGVzL3JlZHV4LXRodW5rL2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9ub2RlX21vZHVsZXMvdGFiYmFibGUvZGlzdC9pbmRleC5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9LCBfdHlwZW9mKG9iaik7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7IHZhciBrZXkgPSBfdG9QcmltaXRpdmUoYXJnLCBcInN0cmluZ1wiKTsgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gXCJzeW1ib2xcIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHsgaWYgKF90eXBlb2YoaW5wdXQpICE9PSBcIm9iamVjdFwiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8IFwiZGVmYXVsdFwiKTsgaWYgKF90eXBlb2YocmVzKSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHJlczsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoaGludCA9PT0gXCJzdHJpbmdcIiA/IFN0cmluZyA6IE51bWJlcikoaW5wdXQpOyB9XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ2ZvY3VzLXRyYXAnKSxcbiAgY3JlYXRlRm9jdXNUcmFwID0gX3JlcXVpcmUuY3JlYXRlRm9jdXNUcmFwO1xudmFyIF9yZXF1aXJlMiA9IHJlcXVpcmUoJ3RhYmJhYmxlJyksXG4gIGlzRm9jdXNhYmxlID0gX3JlcXVpcmUyLmlzRm9jdXNhYmxlO1xudmFyIEZvY3VzVHJhcCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRm9jdXNUcmFwLCBfUmVhY3QkQ29tcG9uZW50KTtcbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihGb2N1c1RyYXApO1xuICBmdW5jdGlvbiBGb2N1c1RyYXAocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvY3VzVHJhcCk7XG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImdldE5vZGVGb3JPcHRpb25cIiwgZnVuY3Rpb24gKG9wdGlvbk5hbWUpIHtcbiAgICAgIHZhciBfdGhpcyRpbnRlcm5hbE9wdGlvbnM7XG4gICAgICAvLyB1c2UgaW50ZXJuYWwgb3B0aW9ucyBmaXJzdCwgZmFsbGluZyBiYWNrIHRvIG9yaWdpbmFsIG9wdGlvbnNcbiAgICAgIHZhciBvcHRpb25WYWx1ZSA9IChfdGhpcyRpbnRlcm5hbE9wdGlvbnMgPSB0aGlzLmludGVybmFsT3B0aW9uc1tvcHRpb25OYW1lXSkgIT09IG51bGwgJiYgX3RoaXMkaW50ZXJuYWxPcHRpb25zICE9PSB2b2lkIDAgPyBfdGhpcyRpbnRlcm5hbE9wdGlvbnMgOiB0aGlzLm9yaWdpbmFsT3B0aW9uc1tvcHRpb25OYW1lXTtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uVmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHBhcmFtcyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgcGFyYW1zW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25WYWx1ZSA9IG9wdGlvblZhbHVlLmFwcGx5KHZvaWQgMCwgcGFyYW1zKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25WYWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBvcHRpb25WYWx1ZSA9IHVuZGVmaW5lZDsgLy8gdXNlIGRlZmF1bHQgdmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKCFvcHRpb25WYWx1ZSkge1xuICAgICAgICBpZiAob3B0aW9uVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25WYWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gb3B0aW9uVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZWxzZSwgZW1wdHkgc3RyaW5nIChpbnZhbGlkKSwgbnVsbCAoaW52YWxpZCksIDAgKGludmFsaWQpXG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYFwiLmNvbmNhdChvcHRpb25OYW1lLCBcImAgd2FzIHNwZWNpZmllZCBidXQgd2FzIG5vdCBhIG5vZGUsIG9yIGRpZCBub3QgcmV0dXJuIGEgbm9kZVwiKSk7XG4gICAgICB9XG4gICAgICB2YXIgbm9kZSA9IG9wdGlvblZhbHVlOyAvLyBjb3VsZCBiZSBIVE1MRWxlbWVudCwgU1ZHRWxlbWVudCwgb3Igbm9uLWVtcHR5IHN0cmluZyBhdCB0aGlzIHBvaW50XG5cbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHZhciBfdGhpcyRnZXREb2N1bWVudDtcbiAgICAgICAgbm9kZSA9IChfdGhpcyRnZXREb2N1bWVudCA9IHRoaXMuZ2V0RG9jdW1lbnQoKSkgPT09IG51bGwgfHwgX3RoaXMkZ2V0RG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGdldERvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9uVmFsdWUpOyAvLyByZXNvbHZlIHRvIG5vZGUsIG9yIG51bGwgaWYgZmFpbHNcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYFwiLmNvbmNhdChvcHRpb25OYW1lLCBcImAgYXMgc2VsZWN0b3IgcmVmZXJzIHRvIG5vIGtub3duIG5vZGVcIikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9KTtcbiAgICBfdGhpcy5oYW5kbGVEZWFjdGl2YXRlID0gX3RoaXMuaGFuZGxlRGVhY3RpdmF0ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5oYW5kbGVQb3N0RGVhY3RpdmF0ZSA9IF90aGlzLmhhbmRsZVBvc3REZWFjdGl2YXRlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLmhhbmRsZUNsaWNrT3V0c2lkZURlYWN0aXZhdGVzID0gX3RoaXMuaGFuZGxlQ2xpY2tPdXRzaWRlRGVhY3RpdmF0ZXMuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG5cbiAgICAvLyBmb2N1cy10cmFwIG9wdGlvbnMgdXNlZCBpbnRlcm5hbGx5IHdoZW4gY3JlYXRpbmcgdGhlIHRyYXBcbiAgICBfdGhpcy5pbnRlcm5hbE9wdGlvbnMgPSB7XG4gICAgICAvLyBXZSBuZWVkIHRvIGhpamFjayB0aGUgcmV0dXJuRm9jdXNPbkRlYWN0aXZhdGUgb3B0aW9uLFxuICAgICAgLy8gYmVjYXVzZSBSZWFjdCBjYW4gbW92ZSBmb2N1cyBpbnRvIHRoZSBlbGVtZW50IGJlZm9yZSB3ZSBhcnJpdmVkIGF0XG4gICAgICAvLyB0aGlzIGxpZmVjeWNsZSBob29rIChlLmcuIHdpdGggYXV0b0ZvY3VzIGlucHV0cykuIFNvIHRoZSBjb21wb25lbnRcbiAgICAgIC8vIGNhcHR1cmVzIHRoZSBwcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQgaW4gY29tcG9uZW50V2lsbE1vdW50LFxuICAgICAgLy8gdGhlbiAob3B0aW9uYWxseSkgcmV0dXJucyBmb2N1cyB0byBpdCBpbiBjb21wb25lbnRXaWxsVW5tb3VudC5cbiAgICAgIHJldHVybkZvY3VzT25EZWFjdGl2YXRlOiBmYWxzZSxcbiAgICAgIC8vIHRoZSByZXN0IG9mIHRoZXNlIGFyZSBhbHNvIHJlbGF0ZWQgdG8gZGVhY3RpdmF0aW9uIG9mIHRoZSB0cmFwLCBhbmQgd2VcbiAgICAgIC8vICBuZWVkIHRvIHVzZSB0aGVtIGFuZCBjb250cm9sIHRoZW0gYXMgd2VsbFxuICAgICAgY2hlY2tDYW5SZXR1cm5Gb2N1czogbnVsbCxcbiAgICAgIG9uRGVhY3RpdmF0ZTogX3RoaXMuaGFuZGxlRGVhY3RpdmF0ZSxcbiAgICAgIG9uUG9zdERlYWN0aXZhdGU6IF90aGlzLmhhbmRsZVBvc3REZWFjdGl2YXRlLFxuICAgICAgLy8gd2UgbmVlZCB0byBzcGVjaWFsLWNhc2UgdGhpcyBzZXR0aW5nIGFzIHdlbGwgc28gdGhhdCB3ZSBjYW4ga25vdyBpZiB3ZSBzaG91bGRcbiAgICAgIC8vICBOT1QgcmV0dXJuIGZvY3VzIGlmIHRoZSB0cmFwIGdldHMgYXV0by1kZWFjdGl2YXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFuXG4gICAgICAvLyAgb3V0c2lkZSBjbGljayAob3RoZXJ3aXNlLCB3ZSdsbCBhbHdheXMgdGhpbmsgd2Ugc2hvdWxkIHJldHVybiBmb2N1cyBiZWNhdXNlXG4gICAgICAvLyAgb2YgaG93IHdlIG1hbmFnZSB0aGF0IGZsYWcgaW50ZXJuYWxseSBoZXJlKVxuICAgICAgY2xpY2tPdXRzaWRlRGVhY3RpdmF0ZXM6IF90aGlzLmhhbmRsZUNsaWNrT3V0c2lkZURlYWN0aXZhdGVzXG4gICAgfTtcblxuICAgIC8vIG9yaWdpbmFsIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIGNvbnN1bWVyXG4gICAgX3RoaXMub3JpZ2luYWxPcHRpb25zID0ge1xuICAgICAgLy8gYmVjYXVzZSBvZiB0aGUgYWJvdmUgYGludGVybmFsT3B0aW9uc2AsIHdlIG1haW50YWluIG91ciBvd24gZmxhZyBmb3JcbiAgICAgIC8vICB0aGlzIG9wdGlvbiwgYW5kIGRlZmF1bHQgaXQgdG8gYHRydWVgIGJlY2F1c2UgdGhhdCdzIGZvY3VzLXRyYXAncyBkZWZhdWx0XG4gICAgICByZXR1cm5Gb2N1c09uRGVhY3RpdmF0ZTogdHJ1ZSxcbiAgICAgIC8vIGJlY2F1c2Ugb2YgdGhlIGFib3ZlIGBpbnRlcm5hbE9wdGlvbnNgLCB3ZSBrZWVwIHRoZXNlIHNlcGFyYXRlIHNpbmNlXG4gICAgICAvLyAgdGhleSdyZSBwYXJ0IG9mIHRoZSBkZWFjdGl2YXRpb24gcHJvY2VzcyB3aGljaCB3ZSBjb25maWd1cmUgKGludGVybmFsbHkpIHRvXG4gICAgICAvLyAgYmUgc2hhcmVkIGJldHdlZW4gZm9jdXMtdHJhcCBhbmQgZm9jdXMtdHJhcC1yZWFjdFxuICAgICAgb25EZWFjdGl2YXRlOiBudWxsLFxuICAgICAgb25Qb3N0RGVhY3RpdmF0ZTogbnVsbCxcbiAgICAgIGNoZWNrQ2FuUmV0dXJuRm9jdXM6IG51bGwsXG4gICAgICAvLyB0aGUgdXNlcidzIHNldHRpbmcsIGRlZmF1bHRlZCB0byBmYWxzZSBzaW5jZSBmb2N1cy10cmFwIGRlZmF1bHRzIHRoaXMgdG8gZmFsc2VcbiAgICAgIGNsaWNrT3V0c2lkZURlYWN0aXZhdGVzOiBmYWxzZVxuICAgIH07XG4gICAgdmFyIGZvY3VzVHJhcE9wdGlvbnMgPSBwcm9wcy5mb2N1c1RyYXBPcHRpb25zO1xuICAgIGZvciAodmFyIG9wdGlvbk5hbWUgaW4gZm9jdXNUcmFwT3B0aW9ucykge1xuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZm9jdXNUcmFwT3B0aW9ucywgb3B0aW9uTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9uTmFtZSA9PT0gJ3JldHVybkZvY3VzT25EZWFjdGl2YXRlJyB8fCBvcHRpb25OYW1lID09PSAnb25EZWFjdGl2YXRlJyB8fCBvcHRpb25OYW1lID09PSAnb25Qb3N0RGVhY3RpdmF0ZScgfHwgb3B0aW9uTmFtZSA9PT0gJ2NoZWNrQ2FuUmV0dXJuRm9jdXMnIHx8IG9wdGlvbk5hbWUgPT09ICdjbGlja091dHNpZGVEZWFjdGl2YXRlcycpIHtcbiAgICAgICAgX3RoaXMub3JpZ2luYWxPcHRpb25zW29wdGlvbk5hbWVdID0gZm9jdXNUcmFwT3B0aW9uc1tvcHRpb25OYW1lXTtcbiAgICAgICAgY29udGludWU7IC8vIGV4Y2x1ZGUgZnJvbSBpbnRlcm5hbE9wdGlvbnNcbiAgICAgIH1cblxuICAgICAgX3RoaXMuaW50ZXJuYWxPcHRpb25zW29wdGlvbk5hbWVdID0gZm9jdXNUcmFwT3B0aW9uc1tvcHRpb25OYW1lXTtcbiAgICB9XG5cbiAgICAvLyBpZiBzZXQsIGB7IHRhcmdldDogTm9kZSwgYWxsb3dEZWFjdGl2YXRpb246IGJvb2xlYW4gfWAgd2hlcmUgYHRhcmdldGAgaXMgdGhlIG91dHNpZGVcbiAgICAvLyAgbm9kZSB0aGF0IHdhcyBjbGlja2VkLCBhbmQgYGFsbG93RGVhY3RpdmF0aW9uYCBpcyB0aGUgcmVzdWx0IG9mIHRoZSBjb25zdW1lcidzXG4gICAgLy8gIG9wdGlvbiAoc3RvcmVkIGluIGB0aGlzLm9yaWdpbmFsT3B0aW9ucy5jbGlja091dHNpZGVEZWFjdGl2YXRlc2AsIHdoaWNoIG1heSBiZSBhXG4gICAgLy8gIGZ1bmN0aW9uKSB3aGV0aGVyIHRvIGFsbG93IG9yIGRlbnkgYXV0by1kZWFjdGl2YXRpb24gb24gY2xpY2sgb24gdGhpcyBvdXRzaWRlIG5vZGVcbiAgICBfdGhpcy5vdXRzaWRlQ2xpY2sgPSBudWxsO1xuXG4gICAgLy8gZWxlbWVudHMgZnJvbSB3aGljaCB0byBjcmVhdGUgdGhlIGZvY3VzIHRyYXAgb24gbW91bnQ7IGlmIGEgY2hpbGQgaXMgdXNlZFxuICAgIC8vICBpbnN0ZWFkIG9mIHRoZSBgY29udGFpbmVyRWxlbWVudHNgIHByb3AsIHdlJ2xsIGdldCB0aGUgY2hpbGQncyByZWxhdGVkXG4gICAgLy8gIGVsZW1lbnQgd2hlbiB0aGUgdHJhcCByZW5kZXJzIGFuZCB0aGVuIGlzIGRlY2xhcmVkICdtb3VudGVkJ1xuICAgIF90aGlzLmZvY3VzVHJhcEVsZW1lbnRzID0gcHJvcHMuY29udGFpbmVyRWxlbWVudHMgfHwgW107XG5cbiAgICAvLyBub3cgd2UgcmVtZW1iZXIgd2hhdCB0aGUgY3VycmVudGx5IGZvY3VzZWQgZWxlbWVudCBpcywgbm90IHJlbHlpbmcgb24gZm9jdXMtdHJhcFxuICAgIF90aGlzLnVwZGF0ZVByZXZpb3VzRWxlbWVudCgpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb25maWd1cmVkIGRvY3VtZW50LlxuICAgKiBAcmV0dXJucyB7RG9jdW1lbnR8dW5kZWZpbmVkfSBDb25maWd1cmVkIGRvY3VtZW50LCBmYWxsaW5nIGJhY2sgdG8gdGhlIG1haW5cbiAgICogIGRvY3VtZW50LCBpZiBpdCBleGlzdHMuIER1cmluZyBTU1IsIGB1bmRlZmluZWRgIGlzIHJldHVybmVkIHNpbmNlIHRoZVxuICAgKiAgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICovXG4gIF9jcmVhdGVDbGFzcyhGb2N1c1RyYXAsIFt7XG4gICAga2V5OiBcImdldERvY3VtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldERvY3VtZW50KCkge1xuICAgICAgLy8gU1NSOiBjYXJlZnVsIHRvIGNoZWNrIGlmIGBkb2N1bWVudGAgZXhpc3RzIGJlZm9yZSBhY2Nlc3NpbmcgaXQgYXMgYSB2YXJpYWJsZVxuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZm9jdXNUcmFwT3B0aW9ucy5kb2N1bWVudCB8fCAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogdW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBub2RlIGZvciB0aGUgZ2l2ZW4gb3B0aW9uLCB3aGljaCBpcyBleHBlY3RlZCB0byBiZSBhbiBvcHRpb24gdGhhdFxuICAgICAqICBjYW4gYmUgZWl0aGVyIGEgRE9NIG5vZGUsIGEgc3RyaW5nIHRoYXQgaXMgYSBzZWxlY3RvciB0byBnZXQgYSBub2RlLCBgZmFsc2VgXG4gICAgICogIChpZiBhIG5vZGUgaXMgZXhwbGljaXRseSBOT1QgZ2l2ZW4pLCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbnkgb2YgdGhlc2VcbiAgICAgKiAgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25OYW1lXG4gICAgICogQHJldHVybnMge3VuZGVmaW5lZCB8IGZhbHNlIHwgSFRNTEVsZW1lbnQgfCBTVkdFbGVtZW50fSBSZXR1cm5zXG4gICAgICogIGB1bmRlZmluZWRgIGlmIHRoZSBvcHRpb24gaXMgbm90IHNwZWNpZmllZDsgYGZhbHNlYCBpZiB0aGUgb3B0aW9uXG4gICAgICogIHJlc29sdmVkIHRvIGBmYWxzZWAgKG5vZGUgZXhwbGljaXRseSBub3QgZ2l2ZW4pOyBvdGhlcndpc2UsIHRoZSByZXNvbHZlZFxuICAgICAqICBET00gbm9kZS5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIG9wdGlvbiBpcyBzZXQsIG5vdCBgZmFsc2VgLCBhbmQgaXMgbm90LCBvciBkb2VzIG5vdFxuICAgICAqICByZXNvbHZlIHRvIGEgbm9kZS5cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJnZXRSZXR1cm5Gb2N1c05vZGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmV0dXJuRm9jdXNOb2RlKCkge1xuICAgICAgdmFyIG5vZGUgPSB0aGlzLmdldE5vZGVGb3JPcHRpb24oJ3NldFJldHVybkZvY3VzJywgdGhpcy5wcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQpO1xuICAgICAgcmV0dXJuIG5vZGUgPyBub2RlIDogbm9kZSA9PT0gZmFsc2UgPyBmYWxzZSA6IHRoaXMucHJldmlvdXNseUZvY3VzZWRFbGVtZW50O1xuICAgIH1cblxuICAgIC8qKiBVcGRhdGUgdGhlIHByZXZpb3VzbHkgZm9jdXNlZCBlbGVtZW50IHdpdGggdGhlIGN1cnJlbnRseSBmb2N1c2VkIGVsZW1lbnQuICovXG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlUHJldmlvdXNFbGVtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVByZXZpb3VzRWxlbWVudCgpIHtcbiAgICAgIHZhciBjdXJyZW50RG9jdW1lbnQgPSB0aGlzLmdldERvY3VtZW50KCk7XG4gICAgICBpZiAoY3VycmVudERvY3VtZW50KSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNseUZvY3VzZWRFbGVtZW50ID0gY3VycmVudERvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRlYWN0aXZhdGVUcmFwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlYWN0aXZhdGVUcmFwKCkge1xuICAgICAgLy8gTk9URTogaXQncyBwb3NzaWJsZSB0aGUgZm9jdXMgdHJhcCBoYXMgYWxyZWFkeSBiZWVuIGRlYWN0aXZhdGVkIHdpdGhvdXQgb3VyIGtub3dpbmcgaXQsXG4gICAgICAvLyAgZXNwZWNpYWxseSBpZiB0aGUgdXNlciBzZXQgdGhlIGBjbGlja091dHNpZGVEZWFjdGl2YXRlczogdHJ1ZWAgb3B0aW9uIG9uIHRoZSB0cmFwLFxuICAgICAgLy8gIGFuZCB0aGUgbW91c2Ugd2FzIGNsaWNrZWQgb24gc29tZSBlbGVtZW50IG91dHNpZGUgdGhlIHRyYXA7IGF0IHRoYXQgcG9pbnQsIGZvY3VzLXRyYXBcbiAgICAgIC8vICB3aWxsIGluaXRpYXRlIGl0cyBhdXRvLWRlYWN0aXZhdGlvbiBwcm9jZXNzLCB3aGljaCB3aWxsIGNhbGwgb3VyIG93blxuICAgICAgLy8gIGhhbmRsZURlYWN0aXZhdGUoKSwgd2hpY2ggd2lsbCBjYWxsIGludG8gdGhpcyBtZXRob2RcbiAgICAgIGlmICghdGhpcy5mb2N1c1RyYXAgfHwgIXRoaXMuZm9jdXNUcmFwLmFjdGl2ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmZvY3VzVHJhcC5kZWFjdGl2YXRlKHtcbiAgICAgICAgLy8gTk9URTogd2UgbmV2ZXIgbGV0IHRoZSB0cmFwIHJldHVybiB0aGUgZm9jdXMgc2luY2Ugd2UgZG8gdGhhdCBvdXJzZWx2ZXNcbiAgICAgICAgcmV0dXJuRm9jdXM6IGZhbHNlLFxuICAgICAgICAvLyB3ZSdsbCBjYWxsIHRoaXMgaW4gb3VyIG93biBwb3N0IGRlYWN0aXZhdGUgaGFuZGxlciBzbyBtYWtlIHN1cmUgdGhlIHRyYXAgZG9lc24ndFxuICAgICAgICAvLyAgZG8gaXQgcHJlbWF0dXJlbHlcbiAgICAgICAgY2hlY2tDYW5SZXR1cm5Gb2N1czogbnVsbCxcbiAgICAgICAgLy8gbGV0IGl0IGNhbGwgdGhlIHVzZXIncyBvcmlnaW5hbCBkZWFjdGl2YXRlIGhhbmRsZXIsIGlmIGFueSwgaW5zdGVhZCBvZlxuICAgICAgICAvLyAgb3VyIG93biB3aGljaCBjYWxscyBiYWNrIGludG8gdGhpcyBmdW5jdGlvblxuICAgICAgICBvbkRlYWN0aXZhdGU6IHRoaXMub3JpZ2luYWxPcHRpb25zLm9uRGVhY3RpdmF0ZVxuICAgICAgICAvLyBOT1RFOiBmb3IgcG9zdCBkZWFjdGl2YXRlLCBkb24ndCBzcGVjaWZ5IGFueXRoaW5nIHNvIHRoYXQgaXQgY2FsbHMgdGhlXG4gICAgICAgIC8vICBvblBvc3REZWFjdGl2YXRlIGhhbmRsZXIgc3BlY2lmaWVkIG9uIGB0aGlzLmludGVybmFsT3B0aW9uc2BcbiAgICAgICAgLy8gIHdoaWNoIHdpbGwgYWx3YXlzIGJlIG91ciBvd24gYGhhbmRsZVBvc3REZWFjdGl2YXRlKClgIGhhbmRsZXIsIHdoaWNoXG4gICAgICAgIC8vICB3aWxsIGZpbmlzaCB0aGluZ3Mgb2ZmIGJ5IGNhbGxpbmcgdGhlIHVzZXIncyBwcm92aWRlZCBvblBvc3REZWFjdGl2YXRlXG4gICAgICAgIC8vICBoYW5kbGVyLCBpZiBhbnksIGF0IHRoZSByaWdodCB0aW1lXG4gICAgICAgIC8vIG9uUG9zdERlYWN0aXZhdGU6IE5PVEhJTkdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVDbGlja091dHNpZGVEZWFjdGl2YXRlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGlja091dHNpZGVEZWFjdGl2YXRlcyhldmVudCkge1xuICAgICAgLy8gdXNlIGNvbnN1bWVyJ3Mgb3B0aW9uIChvciBjYWxsIHRoZWlyIGhhbmRsZXIpIGFzIHRoZSBwZXJtaXNzaW9uIG9yIGRlbmlhbFxuICAgICAgdmFyIGFsbG93RGVhY3RpdmF0aW9uID0gdHlwZW9mIHRoaXMub3JpZ2luYWxPcHRpb25zLmNsaWNrT3V0c2lkZURlYWN0aXZhdGVzID09PSAnZnVuY3Rpb24nID8gdGhpcy5vcmlnaW5hbE9wdGlvbnMuY2xpY2tPdXRzaWRlRGVhY3RpdmF0ZXMuY2FsbChudWxsLCBldmVudCkgLy8gY2FsbCBvdXQgb2YgY29udGV4dFxuICAgICAgOiB0aGlzLm9yaWdpbmFsT3B0aW9ucy5jbGlja091dHNpZGVEZWFjdGl2YXRlczsgLy8gYm9vbGVhblxuXG4gICAgICBpZiAoYWxsb3dEZWFjdGl2YXRpb24pIHtcbiAgICAgICAgLy8gY2FwdHVyZSB0aGUgb3V0c2lkZSB0YXJnZXQgdGhhdCB3YXMgY2xpY2tlZCBzbyB3ZSBjYW4gdXNlIGl0IGluIHRoZSBkZWFjdGl2YXRpb25cbiAgICAgICAgLy8gIHByb2Nlc3Mgc2luY2UgdGhlIGNvbnN1bWVyIGFsbG93ZWQgaXQgdG8gY2F1c2UgYXV0by1kZWFjdGl2YXRpb25cbiAgICAgICAgdGhpcy5vdXRzaWRlQ2xpY2sgPSB7XG4gICAgICAgICAgdGFyZ2V0OiBldmVudC50YXJnZXQsXG4gICAgICAgICAgYWxsb3dEZWFjdGl2YXRpb246IGFsbG93RGVhY3RpdmF0aW9uXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gYWxsb3dEZWFjdGl2YXRpb247XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZURlYWN0aXZhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRGVhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICh0aGlzLm9yaWdpbmFsT3B0aW9ucy5vbkRlYWN0aXZhdGUpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbE9wdGlvbnMub25EZWFjdGl2YXRlLmNhbGwobnVsbCk7IC8vIGNhbGwgdXNlcidzIGhhbmRsZXIgb3V0IG9mIGNvbnRleHRcbiAgICAgIH1cblxuICAgICAgdGhpcy5kZWFjdGl2YXRlVHJhcCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVQb3N0RGVhY3RpdmF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVQb3N0RGVhY3RpdmF0ZSgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgdmFyIGZpbmlzaERlYWN0aXZhdGlvbiA9IGZ1bmN0aW9uIGZpbmlzaERlYWN0aXZhdGlvbigpIHtcbiAgICAgICAgdmFyIHJldHVybkZvY3VzTm9kZSA9IF90aGlzMi5nZXRSZXR1cm5Gb2N1c05vZGUoKTtcbiAgICAgICAgdmFyIGNhblJldHVybkZvY3VzID0gISEoXG4gICAgICAgIC8vIGRpZCB0aGUgY29uc3VtZXIgYWxsb3cgaXQ/XG5cbiAgICAgICAgX3RoaXMyLm9yaWdpbmFsT3B0aW9ucy5yZXR1cm5Gb2N1c09uRGVhY3RpdmF0ZSAmJiAvLyBjYW4gd2UgYWN0dWFsbHkgZm9jdXMgdGhlIG5vZGU/XG4gICAgICAgIHJldHVybkZvY3VzTm9kZSAhPT0gbnVsbCAmJiByZXR1cm5Gb2N1c05vZGUgIT09IHZvaWQgMCAmJiByZXR1cm5Gb2N1c05vZGUuZm9jdXMgJiYgKFxuICAgICAgICAvLyB3YXMgdGhlcmUgYW4gb3V0c2lkZSBjbGljayB0aGF0IGFsbG93ZWQgZGVhY3RpdmF0aW9uP1xuICAgICAgICAhX3RoaXMyLm91dHNpZGVDbGljayB8fFxuICAgICAgICAvLyBkaWQgdGhlIGNvbnN1bWVyIGFsbG93IGRlYWN0aXZhdGlvbiB3aGVuIHRoZSBvdXRzaWRlIG5vZGUgd2FzIGNsaWNrZWQ/XG4gICAgICAgIF90aGlzMi5vdXRzaWRlQ2xpY2suYWxsb3dEZWFjdGl2YXRpb24gJiZcbiAgICAgICAgLy8gaXMgdGhlIG91dHNpZGUgbm9kZSBOT1QgZm9jdXNhYmxlIChpbXBseWluZyB0aGF0IGl0IGRpZCBOT1QgcmVjZWl2ZSBmb2N1c1xuICAgICAgICAvLyAgYXMgYSByZXN1bHQgb2YgdGhlIGNsaWNrLXRocm91Z2gpIC0tIGluIHdoaWNoIGNhc2UgZG8gTk9UIHJlc3RvcmUgZm9jdXNcbiAgICAgICAgLy8gIHRvIGByZXR1cm5Gb2N1c05vZGVgIGJlY2F1c2UgZm9jdXMgc2hvdWxkIHJlbWFpbiBvbiB0aGUgb3V0c2lkZSBub2RlXG4gICAgICAgICFpc0ZvY3VzYWJsZShfdGhpczIub3V0c2lkZUNsaWNrLnRhcmdldCwgX3RoaXMyLmludGVybmFsT3B0aW9ucy50YWJiYWJsZU9wdGlvbnMpKVxuXG4gICAgICAgIC8vIGlmIG5vLCB0aGUgcmVzdG9yZSBmb2N1cyB0byBgcmV0dXJuRm9jdXNOb2RlYCBhdCB0aGlzIHBvaW50XG4gICAgICAgICk7XG5cbiAgICAgICAgdmFyIF90aGlzMiRpbnRlcm5hbE9wdGlvbiA9IF90aGlzMi5pbnRlcm5hbE9wdGlvbnMucHJldmVudFNjcm9sbCxcbiAgICAgICAgICBwcmV2ZW50U2Nyb2xsID0gX3RoaXMyJGludGVybmFsT3B0aW9uID09PSB2b2lkIDAgPyBmYWxzZSA6IF90aGlzMiRpbnRlcm5hbE9wdGlvbjtcbiAgICAgICAgaWYgKGNhblJldHVybkZvY3VzKSB7XG4gICAgICAgICAgLy8gcmV0dXJuIGZvY3VzIHRvIHRoZSBlbGVtZW50IHRoYXQgaGFkIGZvY3VzIHdoZW4gdGhlIHRyYXAgd2FzIGFjdGl2YXRlZFxuICAgICAgICAgIHJldHVybkZvY3VzTm9kZS5mb2N1cyh7XG4gICAgICAgICAgICBwcmV2ZW50U2Nyb2xsOiBwcmV2ZW50U2Nyb2xsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF90aGlzMi5vcmlnaW5hbE9wdGlvbnMub25Qb3N0RGVhY3RpdmF0ZSkge1xuICAgICAgICAgIF90aGlzMi5vcmlnaW5hbE9wdGlvbnMub25Qb3N0RGVhY3RpdmF0ZS5jYWxsKG51bGwpOyAvLyBkb24ndCBjYWxsIGl0IGluIGNvbnRleHQgb2YgXCJ0aGlzXCJcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi5vdXRzaWRlQ2xpY2sgPSBudWxsOyAvLyByZXNldDogbm8gbG9uZ2VyIG5lZWRlZFxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMub3JpZ2luYWxPcHRpb25zLmNoZWNrQ2FuUmV0dXJuRm9jdXMpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbE9wdGlvbnMuY2hlY2tDYW5SZXR1cm5Gb2N1cy5jYWxsKG51bGwsIHRoaXMuZ2V0UmV0dXJuRm9jdXNOb2RlKCkpIC8vIGNhbGwgb3V0IG9mIGNvbnRleHRcbiAgICAgICAgLnRoZW4oZmluaXNoRGVhY3RpdmF0aW9uLCBmaW5pc2hEZWFjdGl2YXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmluaXNoRGVhY3RpdmF0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldHVwRm9jdXNUcmFwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwRm9jdXNUcmFwKCkge1xuICAgICAgaWYgKHRoaXMuZm9jdXNUcmFwKSB7XG4gICAgICAgIC8vIHRyYXAgYWxyZWFkeSBleGlzdHM6IGl0J3MgcG9zc2libGUgd2UncmUgaW4gU3RyaWN0TW9kZSBhbmQgd2UncmUgYmVpbmcgcmVtb3VudGVkLFxuICAgICAgICAvLyAgaW4gd2hpY2ggY2FzZSwgd2Ugd2lsbCBoYXZlIGRlYWN0aXZhdGVkIHRoZSB0cmFwIHdoZW4gd2UgZ290IHVubW91bnRlZCAocmVtZW1iZXIsXG4gICAgICAgIC8vICBTdHJpY3RNb2RlLCBpbiBkZXZlbG9wbWVudCwgcHVycG9zZWx5IHVubW91bnRzIGFuZCByZW1vdW50cyBjb21wb25lbnRzIGFmdGVyXG4gICAgICAgIC8vICBtb3VudGluZyB0aGVtIHRoZSBmaXJzdCB0aW1lIHRvIG1ha2Ugc3VyZSB0aGV5IGhhdmUgcmV1c2FibGUgc3RhdGUsXG4gICAgICAgIC8vICBAc2VlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9zdHJpY3QtbW9kZS5odG1sI2Vuc3VyaW5nLXJldXNhYmxlLXN0YXRlKSBzbyBub3dcbiAgICAgICAgLy8gIHdlIG5lZWQgdG8gcmVzdG9yZSB0aGUgc3RhdGUgb2YgdGhlIHRyYXAgYWNjb3JkaW5nIHRvIG91ciBjb21wb25lbnQgc3RhdGVcbiAgICAgICAgLy8gTk9URTogU3RyaWN0IG1vZGUgX192aW9sYXRlc19fIGFzc3VtcHRpb25zIGFib3V0IHRoZSBgY29tcG9uZW50V2lsbFVubW91bnQoKWAgQVBJXG4gICAgICAgIC8vICB3aGljaCBjbGVhcmx5IHN0YXRlcyAtLSBldmVuIGZvciBSZWFjdCAxOCAtLSB0aGF0LCBcIk9uY2UgYSBjb21wb25lbnQgaW5zdGFuY2UgaXNcbiAgICAgICAgLy8gIHVubW91bnRlZCwgX19pdCB3aWxsIG5ldmVyIGJlIG1vdW50ZWQgYWdhaW4uX19cIiAoZW1waGFzaXMgb3VycykuIFNvIHdoZW4gd2UgZ2V0XG4gICAgICAgIC8vICB1bm1vdW50ZWQsIHdlIGFzc3VtZSB3ZSdyZSBnb25lIGZvcmV2ZXIgYW5kIHdlIGRlYWN0aXZhdGUgdGhlIHRyYXAuIEJ1dCB0aGVuXG4gICAgICAgIC8vICB3ZSBnZXQgcmVtb3VudGVkIGFuZCB3ZSdyZSBzdXBwb3NlZCB0byByZXN0b3JlIHN0YXRlLiBCdXQgaWYgeW91IGhhZCBwYXVzZWQsXG4gICAgICAgIC8vICB3ZSd2ZSBub3cgZGVhY3RpdmF0ZWQgKHdlIGRvbid0IGtub3cgd2UncmUgYW1vdW50IHRvIGdldCByZW1vdW50ZWQgYWdhaW4pXG4gICAgICAgIC8vICB3aGljaCBtZWFucyB3ZSBuZWVkIHRvIHJlYWN0aXZhdGUgYW5kIHRoZW4gcGF1c2UuIE90aGVyd2lzZSwgZG8gbm90aGluZy5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlICYmICF0aGlzLmZvY3VzVHJhcC5hY3RpdmUpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzVHJhcC5hY3RpdmF0ZSgpO1xuICAgICAgICAgIGlmICh0aGlzLnByb3BzLnBhdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RyYXAucGF1c2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBub2Rlc0V4aXN0ID0gdGhpcy5mb2N1c1RyYXBFbGVtZW50cy5zb21lKEJvb2xlYW4pO1xuICAgICAgICBpZiAobm9kZXNFeGlzdCkge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9wcm9wLXR5cGVzIC0tIF9jcmVhdGVGb2N1c1RyYXAgaXMgYW4gaW50ZXJuYWwgcHJvcFxuICAgICAgICAgIHRoaXMuZm9jdXNUcmFwID0gdGhpcy5wcm9wcy5fY3JlYXRlRm9jdXNUcmFwKHRoaXMuZm9jdXNUcmFwRWxlbWVudHMsIHRoaXMuaW50ZXJuYWxPcHRpb25zKTtcbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNUcmFwLmFjdGl2YXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLnByb3BzLnBhdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RyYXAucGF1c2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmUpIHtcbiAgICAgICAgdGhpcy5zZXR1cEZvY3VzVHJhcCgpO1xuICAgICAgfVxuICAgICAgLy8gZWxzZSwgd2FpdCBmb3IgbGF0ZXIgYWN0aXZhdGlvbiBpbiBjYXNlIHRoZSBgZm9jdXNUcmFwT3B0aW9uc2Agd2lsbCBiZSB1cGRhdGVkXG4gICAgICAvLyAgYWdhaW4gYmVmb3JlIHRoZSB0cmFwIGlzIGFjdGl2YXRlZCAoZS5nLiBpZiB3YWl0aW5nIHRvIGtub3cgd2hhdCB0aGUgZG9jdW1lbnRcbiAgICAgIC8vICBvYmplY3Qgd2lsbCBiZSwgc28gdGhlIFRyYXAgbXVzdCBiZSByZW5kZXJlZCwgYnV0IHRoZSBjb25zdW1lciBpcyB3YWl0aW5nIHRvXG4gICAgICAvLyAgYWN0aXZhdGUgdW50aWwgdGhleSBoYXZlIG9idGFpbmVkIHRoZSBkb2N1bWVudCBmcm9tIGEgcmVmKVxuICAgICAgLy8gIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZvY3VzLXRyYXAvZm9jdXMtdHJhcC1yZWFjdC9pc3N1ZXMvNTM5XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICBpZiAodGhpcy5mb2N1c1RyYXApIHtcbiAgICAgICAgaWYgKHByZXZQcm9wcy5jb250YWluZXJFbGVtZW50cyAhPT0gdGhpcy5wcm9wcy5jb250YWluZXJFbGVtZW50cykge1xuICAgICAgICAgIHRoaXMuZm9jdXNUcmFwLnVwZGF0ZUNvbnRhaW5lckVsZW1lbnRzKHRoaXMucHJvcHMuY29udGFpbmVyRWxlbWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoYXNBY3RpdmF0ZWQgPSAhcHJldlByb3BzLmFjdGl2ZSAmJiB0aGlzLnByb3BzLmFjdGl2ZTtcbiAgICAgICAgdmFyIGhhc0RlYWN0aXZhdGVkID0gcHJldlByb3BzLmFjdGl2ZSAmJiAhdGhpcy5wcm9wcy5hY3RpdmU7XG4gICAgICAgIHZhciBoYXNQYXVzZWQgPSAhcHJldlByb3BzLnBhdXNlZCAmJiB0aGlzLnByb3BzLnBhdXNlZDtcbiAgICAgICAgdmFyIGhhc1VucGF1c2VkID0gcHJldlByb3BzLnBhdXNlZCAmJiAhdGhpcy5wcm9wcy5wYXVzZWQ7XG4gICAgICAgIGlmIChoYXNBY3RpdmF0ZWQpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZpb3VzRWxlbWVudCgpO1xuICAgICAgICAgIHRoaXMuZm9jdXNUcmFwLmFjdGl2YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0RlYWN0aXZhdGVkKSB7XG4gICAgICAgICAgdGhpcy5kZWFjdGl2YXRlVHJhcCgpO1xuICAgICAgICAgIHJldHVybjsgLy8gdW4vcGF1c2UgZG9lcyBub3RoaW5nIG9uIGFuIGluYWN0aXZlIHRyYXBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNQYXVzZWQpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzVHJhcC5wYXVzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNVbnBhdXNlZCkge1xuICAgICAgICAgIHRoaXMuZm9jdXNUcmFwLnVucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTk9URTogaWYgd2UncmUgaW4gYGNvbXBvbmVudERpZFVwZGF0ZWAgYW5kIHdlIGRvbid0IGhhdmUgYSB0cmFwIHlldCxcbiAgICAgICAgLy8gIGl0IGVpdGhlciBtZWFucyBpdCBzaG91bGRuJ3QgYmUgYWN0aXZlLCBvciBpdCBzaG91bGQgYmUgYnV0IG5vbmUgb2ZcbiAgICAgICAgLy8gIG9mIGdpdmVuIGBjb250YWluZXJFbGVtZW50c2Agd2VyZSBwcmVzZW50IGluIHRoZSBET00gdGhlIGxhc3QgdGltZVxuICAgICAgICAvLyAgd2UgdHJpZWQgdG8gY3JlYXRlIHRoZSB0cmFwXG5cbiAgICAgICAgaWYgKHByZXZQcm9wcy5jb250YWluZXJFbGVtZW50cyAhPT0gdGhpcy5wcm9wcy5jb250YWluZXJFbGVtZW50cykge1xuICAgICAgICAgIHRoaXMuZm9jdXNUcmFwRWxlbWVudHMgPSB0aGlzLnByb3BzLmNvbnRhaW5lckVsZW1lbnRzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZG9uJ3QgY3JlYXRlIHRoZSB0cmFwIHVubGVzcyBpdCBzaG91bGQgYmUgYWN0aXZlIGluIGNhc2UgdGhlIGNvbnN1bWVyXG4gICAgICAgIC8vICBpcyBzdGlsbCB1cGRhdGluZyBgZm9jdXNUcmFwT3B0aW9uc2BcbiAgICAgICAgLy8gIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZvY3VzLXRyYXAvZm9jdXMtdHJhcC1yZWFjdC9pc3N1ZXMvNTM5XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZSkge1xuICAgICAgICAgIHRoaXMudXBkYXRlUHJldmlvdXNFbGVtZW50KCk7XG4gICAgICAgICAgdGhpcy5zZXR1cEZvY3VzVHJhcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy5kZWFjdGl2YXRlVHJhcCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG4gICAgICB2YXIgY2hpbGQgPSB0aGlzLnByb3BzLmNoaWxkcmVuID8gUmVhY3QuQ2hpbGRyZW4ub25seSh0aGlzLnByb3BzLmNoaWxkcmVuKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICBpZiAoY2hpbGQudHlwZSAmJiBjaGlsZC50eXBlID09PSBSZWFjdC5GcmFnbWVudCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQSBmb2N1cy10cmFwIGNhbm5vdCB1c2UgYSBGcmFnbWVudCBhcyBpdHMgY2hpbGQgY29udGFpbmVyLiBUcnkgcmVwbGFjaW5nIGl0IHdpdGggYSA8ZGl2PiBlbGVtZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYWxsYmFja1JlZiA9IGZ1bmN0aW9uIGNhbGxiYWNrUmVmKGVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgY29udGFpbmVyRWxlbWVudHMgPSBfdGhpczMucHJvcHMuY29udGFpbmVyRWxlbWVudHM7XG4gICAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkLnJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBjaGlsZC5yZWYoZWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkLnJlZikge1xuICAgICAgICAgICAgICBjaGlsZC5yZWYuY3VycmVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIF90aGlzMy5mb2N1c1RyYXBFbGVtZW50cyA9IGNvbnRhaW5lckVsZW1lbnRzID8gY29udGFpbmVyRWxlbWVudHMgOiBbZWxlbWVudF07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjaGlsZFdpdGhSZWYgPSBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgICAgICByZWY6IGNhbGxiYWNrUmVmXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY2hpbGRXaXRoUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBGb2N1c1RyYXA7XG59KFJlYWN0LkNvbXBvbmVudCk7IC8vIHN1cHBvcnQgc2VydmVyLXNpZGUgcmVuZGVyaW5nIHdoZXJlIGBFbGVtZW50YCB3aWxsIG5vdCBiZSBkZWZpbmVkXG52YXIgRWxlbWVudFR5cGUgPSB0eXBlb2YgRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyBGdW5jdGlvbiA6IEVsZW1lbnQ7XG5Gb2N1c1RyYXAucHJvcFR5cGVzID0ge1xuICBhY3RpdmU6IFByb3BUeXBlcy5ib29sLFxuICBwYXVzZWQ6IFByb3BUeXBlcy5ib29sLFxuICBmb2N1c1RyYXBPcHRpb25zOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGRvY3VtZW50OiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIG9uQWN0aXZhdGU6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uUG9zdEFjdGl2YXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBjaGVja0NhbkZvY3VzVHJhcDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25QYXVzZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Qb3N0UGF1c2U6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uVW5wYXVzZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Qb3N0VW5wYXVzZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25EZWFjdGl2YXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblBvc3REZWFjdGl2YXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBjaGVja0NhblJldHVybkZvY3VzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBpbml0aWFsRm9jdXM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5pbnN0YW5jZU9mKEVsZW1lbnRUeXBlKSwgUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLmJvb2wsIFByb3BUeXBlcy5mdW5jXSksXG4gICAgZmFsbGJhY2tGb2N1czogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmluc3RhbmNlT2YoRWxlbWVudFR5cGUpLCBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIC8vIE5PVEU6IGRvZXMgbm90IHN1cHBvcnQgYGZhbHNlYCBhcyB2YWx1ZSAob3IgcmV0dXJuIHZhbHVlIGZyb20gZnVuY3Rpb24pXG4gICAgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgICBlc2NhcGVEZWFjdGl2YXRlczogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmJvb2wsIFByb3BUeXBlcy5mdW5jXSksXG4gICAgY2xpY2tPdXRzaWRlRGVhY3RpdmF0ZXM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ib29sLCBQcm9wVHlwZXMuZnVuY10pLFxuICAgIHJldHVybkZvY3VzT25EZWFjdGl2YXRlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBzZXRSZXR1cm5Gb2N1czogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmluc3RhbmNlT2YoRWxlbWVudFR5cGUpLCBQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuYm9vbCwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgICBhbGxvd091dHNpZGVDbGljazogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmJvb2wsIFByb3BUeXBlcy5mdW5jXSksXG4gICAgcHJldmVudFNjcm9sbDogUHJvcFR5cGVzLmJvb2wsXG4gICAgdGFiYmFibGVPcHRpb25zOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgZGlzcGxheUNoZWNrOiBQcm9wVHlwZXMub25lT2YoWydmdWxsJywgJ2xlZ2FjeS1mdWxsJywgJ25vbi16ZXJvLWFyZWEnLCAnbm9uZSddKSxcbiAgICAgIGdldFNoYWRvd1Jvb3Q6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ib29sLCBQcm9wVHlwZXMuZnVuY10pXG4gICAgfSksXG4gICAgdHJhcFN0YWNrOiBQcm9wVHlwZXMuYXJyYXksXG4gICAgaXNLZXlGb3J3YXJkOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBpc0tleUJhY2t3YXJkOiBQcm9wVHlwZXMuZnVuY1xuICB9KSxcbiAgY29udGFpbmVyRWxlbWVudHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5pbnN0YW5jZU9mKEVsZW1lbnRUeXBlKSksXG4gIC8vIERPTSBlbGVtZW50IE9OTFlcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5lbGVtZW50LFxuICAvLyBSZWFjdCBlbGVtZW50XG4gIFByb3BUeXBlcy5pbnN0YW5jZU9mKEVsZW1lbnRUeXBlKSAvLyBET00gZWxlbWVudFxuICBdKVxuXG4gIC8vIE5PVEU6IF9jcmVhdGVGb2N1c1RyYXAgaXMgaW50ZXJuYWwsIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHksIHNvIHdlIGRvbid0XG4gIC8vICBzcGVjaWZ5IGl0IGhlcmUuIEl0J3MgZXhwZWN0ZWQgdG8gYmUgc2V0IHRvIHRoZSBmdW5jdGlvbiByZXR1cm5lZCBmcm9tXG4gIC8vICByZXF1aXJlKCdmb2N1cy10cmFwJyksIG9yIG9uZSB3aXRoIGEgY29tcGF0aWJsZSBpbnRlcmZhY2UuXG59O1xuXG5Gb2N1c1RyYXAuZGVmYXVsdFByb3BzID0ge1xuICBhY3RpdmU6IHRydWUsXG4gIHBhdXNlZDogZmFsc2UsXG4gIGZvY3VzVHJhcE9wdGlvbnM6IHt9LFxuICBfY3JlYXRlRm9jdXNUcmFwOiBjcmVhdGVGb2N1c1RyYXBcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEZvY3VzVHJhcDsiLCIvKiFcbiogZm9jdXMtdHJhcCA3LjQuMFxuKiBAbGljZW5zZSBNSVQsIGh0dHBzOi8vZ2l0aHViLmNvbS9mb2N1cy10cmFwL2ZvY3VzLXRyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRVxuKi9cbmltcG9ydCB7IHRhYmJhYmxlLCBmb2N1c2FibGUsIGlzVGFiYmFibGUsIGlzRm9jdXNhYmxlIH0gZnJvbSAndGFiYmFibGUnO1xuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO1xuICAgIGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7XG4gICAgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTtcbiAgICBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgIH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBrZXkgPSBfdG9Qcm9wZXJ0eUtleShrZXkpO1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKHR5cGVvZiByZXMgIT09IFwib2JqZWN0XCIpIHJldHVybiByZXM7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpO1xuICB9XG4gIHJldHVybiAoaGludCA9PT0gXCJzdHJpbmdcIiA/IFN0cmluZyA6IE51bWJlcikoaW5wdXQpO1xufVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7XG4gIHZhciBrZXkgPSBfdG9QcmltaXRpdmUoYXJnLCBcInN0cmluZ1wiKTtcbiAgcmV0dXJuIHR5cGVvZiBrZXkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTtcbn1cblxudmFyIGFjdGl2ZUZvY3VzVHJhcHMgPSB7XG4gIGFjdGl2YXRlVHJhcDogZnVuY3Rpb24gYWN0aXZhdGVUcmFwKHRyYXBTdGFjaywgdHJhcCkge1xuICAgIGlmICh0cmFwU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGFjdGl2ZVRyYXAgPSB0cmFwU3RhY2tbdHJhcFN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGFjdGl2ZVRyYXAgIT09IHRyYXApIHtcbiAgICAgICAgYWN0aXZlVHJhcC5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgdHJhcEluZGV4ID0gdHJhcFN0YWNrLmluZGV4T2YodHJhcCk7XG4gICAgaWYgKHRyYXBJbmRleCA9PT0gLTEpIHtcbiAgICAgIHRyYXBTdGFjay5wdXNoKHRyYXApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtb3ZlIHRoaXMgZXhpc3RpbmcgdHJhcCB0byB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlXG4gICAgICB0cmFwU3RhY2suc3BsaWNlKHRyYXBJbmRleCwgMSk7XG4gICAgICB0cmFwU3RhY2sucHVzaCh0cmFwKTtcbiAgICB9XG4gIH0sXG4gIGRlYWN0aXZhdGVUcmFwOiBmdW5jdGlvbiBkZWFjdGl2YXRlVHJhcCh0cmFwU3RhY2ssIHRyYXApIHtcbiAgICB2YXIgdHJhcEluZGV4ID0gdHJhcFN0YWNrLmluZGV4T2YodHJhcCk7XG4gICAgaWYgKHRyYXBJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRyYXBTdGFjay5zcGxpY2UodHJhcEluZGV4LCAxKTtcbiAgICB9XG4gICAgaWYgKHRyYXBTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICB0cmFwU3RhY2tbdHJhcFN0YWNrLmxlbmd0aCAtIDFdLnVucGF1c2UoKTtcbiAgICB9XG4gIH1cbn07XG52YXIgaXNTZWxlY3RhYmxlSW5wdXQgPSBmdW5jdGlvbiBpc1NlbGVjdGFibGVJbnB1dChub2RlKSB7XG4gIHJldHVybiBub2RlLnRhZ05hbWUgJiYgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcgJiYgdHlwZW9mIG5vZGUuc2VsZWN0ID09PSAnZnVuY3Rpb24nO1xufTtcbnZhciBpc0VzY2FwZUV2ZW50ID0gZnVuY3Rpb24gaXNFc2NhcGVFdmVudChlKSB7XG4gIHJldHVybiBlLmtleSA9PT0gJ0VzY2FwZScgfHwgZS5rZXkgPT09ICdFc2MnIHx8IGUua2V5Q29kZSA9PT0gMjc7XG59O1xudmFyIGlzVGFiRXZlbnQgPSBmdW5jdGlvbiBpc1RhYkV2ZW50KGUpIHtcbiAgcmV0dXJuIGUua2V5ID09PSAnVGFiJyB8fCBlLmtleUNvZGUgPT09IDk7XG59O1xuXG4vLyBjaGVja3MgZm9yIFRBQiBieSBkZWZhdWx0XG52YXIgaXNLZXlGb3J3YXJkID0gZnVuY3Rpb24gaXNLZXlGb3J3YXJkKGUpIHtcbiAgcmV0dXJuIGlzVGFiRXZlbnQoZSkgJiYgIWUuc2hpZnRLZXk7XG59O1xuXG4vLyBjaGVja3MgZm9yIFNISUZUK1RBQiBieSBkZWZhdWx0XG52YXIgaXNLZXlCYWNrd2FyZCA9IGZ1bmN0aW9uIGlzS2V5QmFja3dhcmQoZSkge1xuICByZXR1cm4gaXNUYWJFdmVudChlKSAmJiBlLnNoaWZ0S2V5O1xufTtcbnZhciBkZWxheSA9IGZ1bmN0aW9uIGRlbGF5KGZuKSB7XG4gIHJldHVybiBzZXRUaW1lb3V0KGZuLCAwKTtcbn07XG5cbi8vIEFycmF5LmZpbmQvZmluZEluZGV4KCkgYXJlIG5vdCBzdXBwb3J0ZWQgb24gSUU7IHRoaXMgcmVwbGljYXRlcyBlbm91Z2hcbi8vICBvZiBBcnJheS5maW5kSW5kZXgoKSBmb3Igb3VyIG5lZWRzXG52YXIgZmluZEluZGV4ID0gZnVuY3Rpb24gZmluZEluZGV4KGFyciwgZm4pIHtcbiAgdmFyIGlkeCA9IC0xO1xuICBhcnIuZXZlcnkoZnVuY3Rpb24gKHZhbHVlLCBpKSB7XG4gICAgaWYgKGZuKHZhbHVlKSkge1xuICAgICAgaWR4ID0gaTtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTsgLy8gbmV4dFxuICB9KTtcblxuICByZXR1cm4gaWR4O1xufTtcblxuLyoqXG4gKiBHZXQgYW4gb3B0aW9uJ3MgdmFsdWUgd2hlbiBpdCBjb3VsZCBiZSBhIHBsYWluIHZhbHVlLCBvciBhIGhhbmRsZXIgdGhhdCBwcm92aWRlc1xuICogIHRoZSB2YWx1ZS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgT3B0aW9uJ3MgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0gey4uLip9IFtwYXJhbXNdIEFueSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGhhbmRsZXIsIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHsqfSBUaGUgYHZhbHVlYCwgb3IgdGhlIGhhbmRsZXIncyByZXR1cm5lZCB2YWx1ZS5cbiAqL1xudmFyIHZhbHVlT3JIYW5kbGVyID0gZnVuY3Rpb24gdmFsdWVPckhhbmRsZXIodmFsdWUpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHBhcmFtcyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgcGFyYW1zW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gdmFsdWUuYXBwbHkodm9pZCAwLCBwYXJhbXMpIDogdmFsdWU7XG59O1xudmFyIGdldEFjdHVhbFRhcmdldCA9IGZ1bmN0aW9uIGdldEFjdHVhbFRhcmdldChldmVudCkge1xuICAvLyBOT1RFOiBJZiB0aGUgdHJhcCBpcyBfaW5zaWRlXyBhIHNoYWRvdyBET00sIGV2ZW50LnRhcmdldCB3aWxsIGFsd2F5cyBiZSB0aGVcbiAgLy8gIHNoYWRvdyBob3N0LiBIb3dldmVyLCBldmVudC50YXJnZXQuY29tcG9zZWRQYXRoKCkgd2lsbCBiZSBhbiBhcnJheSBvZlxuICAvLyAgbm9kZXMgXCJjbGlja2VkXCIgZnJvbSBpbm5lci1tb3N0ICh0aGUgYWN0dWFsIGVsZW1lbnQgaW5zaWRlIHRoZSBzaGFkb3cpIHRvXG4gIC8vICBvdXRlci1tb3N0ICh0aGUgaG9zdCBIVE1MIGRvY3VtZW50KS4gSWYgd2UgaGF2ZSBhY2Nlc3MgdG8gY29tcG9zZWRQYXRoKCksXG4gIC8vICB0aGVuIHVzZSBpdHMgZmlyc3QgZWxlbWVudDsgb3RoZXJ3aXNlLCBmYWxsIGJhY2sgdG8gZXZlbnQudGFyZ2V0IChhbmRcbiAgLy8gIHRoaXMgb25seSB3b3JrcyBmb3IgYW4gX29wZW5fIHNoYWRvdyBET007IG90aGVyd2lzZSxcbiAgLy8gIGNvbXBvc2VkUGF0aCgpWzBdID09PSBldmVudC50YXJnZXQgYWx3YXlzKS5cbiAgcmV0dXJuIGV2ZW50LnRhcmdldC5zaGFkb3dSb290ICYmIHR5cGVvZiBldmVudC5jb21wb3NlZFBhdGggPT09ICdmdW5jdGlvbicgPyBldmVudC5jb21wb3NlZFBhdGgoKVswXSA6IGV2ZW50LnRhcmdldDtcbn07XG5cbi8vIE5PVEU6IHRoaXMgbXVzdCBiZSBfb3V0c2lkZV8gYGNyZWF0ZUZvY3VzVHJhcCgpYCB0byBtYWtlIHN1cmUgYWxsIHRyYXBzIGluIHRoaXNcbi8vICBjdXJyZW50IGluc3RhbmNlIHVzZSB0aGUgc2FtZSBzdGFjayBpZiBgdXNlck9wdGlvbnMudHJhcFN0YWNrYCBpc24ndCBzcGVjaWZpZWRcbnZhciBpbnRlcm5hbFRyYXBTdGFjayA9IFtdO1xudmFyIGNyZWF0ZUZvY3VzVHJhcCA9IGZ1bmN0aW9uIGNyZWF0ZUZvY3VzVHJhcChlbGVtZW50cywgdXNlck9wdGlvbnMpIHtcbiAgLy8gU1NSOiBhIGxpdmUgdHJhcCBzaG91bGRuJ3QgYmUgY3JlYXRlZCBpbiB0aGlzIHR5cGUgb2YgZW52aXJvbm1lbnQgc28gdGhpc1xuICAvLyAgc2hvdWxkIGJlIHNhZmUgY29kZSB0byBleGVjdXRlIGlmIHRoZSBgZG9jdW1lbnRgIG9wdGlvbiBpc24ndCBzcGVjaWZpZWRcbiAgdmFyIGRvYyA9ICh1c2VyT3B0aW9ucyA9PT0gbnVsbCB8fCB1c2VyT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXNlck9wdGlvbnMuZG9jdW1lbnQpIHx8IGRvY3VtZW50O1xuICB2YXIgdHJhcFN0YWNrID0gKHVzZXJPcHRpb25zID09PSBudWxsIHx8IHVzZXJPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1c2VyT3B0aW9ucy50cmFwU3RhY2spIHx8IGludGVybmFsVHJhcFN0YWNrO1xuICB2YXIgY29uZmlnID0gX29iamVjdFNwcmVhZDIoe1xuICAgIHJldHVybkZvY3VzT25EZWFjdGl2YXRlOiB0cnVlLFxuICAgIGVzY2FwZURlYWN0aXZhdGVzOiB0cnVlLFxuICAgIGRlbGF5SW5pdGlhbEZvY3VzOiB0cnVlLFxuICAgIGlzS2V5Rm9yd2FyZDogaXNLZXlGb3J3YXJkLFxuICAgIGlzS2V5QmFja3dhcmQ6IGlzS2V5QmFja3dhcmRcbiAgfSwgdXNlck9wdGlvbnMpO1xuICB2YXIgc3RhdGUgPSB7XG4gICAgLy8gY29udGFpbmVycyBnaXZlbiB0byBjcmVhdGVGb2N1c1RyYXAoKVxuICAgIC8vIEB0eXBlIHtBcnJheTxIVE1MRWxlbWVudD59XG4gICAgY29udGFpbmVyczogW10sXG4gICAgLy8gbGlzdCBvZiBvYmplY3RzIGlkZW50aWZ5aW5nIHRhYmJhYmxlIG5vZGVzIGluIGBjb250YWluZXJzYCBpbiB0aGUgdHJhcFxuICAgIC8vIE5PVEU6IGl0J3MgcG9zc2libGUgdGhhdCBhIGdyb3VwIGhhcyBubyB0YWJiYWJsZSBub2RlcyBpZiBub2RlcyBnZXQgcmVtb3ZlZCB3aGlsZSB0aGUgdHJhcFxuICAgIC8vICBpcyBhY3RpdmUsIGJ1dCB0aGUgdHJhcCBzaG91bGQgbmV2ZXIgZ2V0IHRvIGEgc3RhdGUgd2hlcmUgdGhlcmUgaXNuJ3QgYXQgbGVhc3Qgb25lIGdyb3VwXG4gICAgLy8gIHdpdGggYXQgbGVhc3Qgb25lIHRhYmJhYmxlIG5vZGUgaW4gaXQgKHRoYXQgd291bGQgbGVhZCB0byBhbiBlcnJvciBjb25kaXRpb24gdGhhdCB3b3VsZFxuICAgIC8vICByZXN1bHQgaW4gYW4gZXJyb3IgYmVpbmcgdGhyb3duKVxuICAgIC8vIEB0eXBlIHtBcnJheTx7XG4gICAgLy8gICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIC8vICAgdGFiYmFibGVOb2RlczogQXJyYXk8SFRNTEVsZW1lbnQ+LCAvLyBlbXB0eSBpZiBub25lXG4gICAgLy8gICBmb2N1c2FibGVOb2RlczogQXJyYXk8SFRNTEVsZW1lbnQ+LCAvLyBlbXB0eSBpZiBub25lXG4gICAgLy8gICBmaXJzdFRhYmJhYmxlTm9kZTogSFRNTEVsZW1lbnR8bnVsbCxcbiAgICAvLyAgIGxhc3RUYWJiYWJsZU5vZGU6IEhUTUxFbGVtZW50fG51bGwsXG4gICAgLy8gICBuZXh0VGFiYmFibGVOb2RlOiAobm9kZTogSFRNTEVsZW1lbnQsIGZvcndhcmQ6IGJvb2xlYW4pID0+IEhUTUxFbGVtZW50fHVuZGVmaW5lZFxuICAgIC8vIH0+fVxuICAgIGNvbnRhaW5lckdyb3VwczogW10sXG4gICAgLy8gc2FtZSBvcmRlci9sZW5ndGggYXMgYGNvbnRhaW5lcnNgIGxpc3RcblxuICAgIC8vIHJlZmVyZW5jZXMgdG8gb2JqZWN0cyBpbiBgY29udGFpbmVyR3JvdXBzYCwgYnV0IG9ubHkgdGhvc2UgdGhhdCBhY3R1YWxseSBoYXZlXG4gICAgLy8gIHRhYmJhYmxlIG5vZGVzIGluIHRoZW1cbiAgICAvLyBOT1RFOiBzYW1lIG9yZGVyIGFzIGBjb250YWluZXJzYCBhbmQgYGNvbnRhaW5lckdyb3Vwc2AsIGJ1dCBfX25vdCBuZWNlc3NhcmlseV9fXG4gICAgLy8gIHRoZSBzYW1lIGxlbmd0aFxuICAgIHRhYmJhYmxlR3JvdXBzOiBbXSxcbiAgICBub2RlRm9jdXNlZEJlZm9yZUFjdGl2YXRpb246IG51bGwsXG4gICAgbW9zdFJlY2VudGx5Rm9jdXNlZE5vZGU6IG51bGwsXG4gICAgYWN0aXZlOiBmYWxzZSxcbiAgICBwYXVzZWQ6IGZhbHNlLFxuICAgIC8vIHRpbWVyIElEIGZvciB3aGVuIGRlbGF5SW5pdGlhbEZvY3VzIGlzIHRydWUgYW5kIGluaXRpYWwgZm9jdXMgaW4gdGhpcyB0cmFwXG4gICAgLy8gIGhhcyBiZWVuIGRlbGF5ZWQgZHVyaW5nIGFjdGl2YXRpb25cbiAgICBkZWxheUluaXRpYWxGb2N1c1RpbWVyOiB1bmRlZmluZWRcbiAgfTtcbiAgdmFyIHRyYXA7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJlZmVyLWNvbnN0IC0tIHNvbWUgcHJpdmF0ZSBmdW5jdGlvbnMgcmVmZXJlbmNlIGl0LCBhbmQgaXRzIG1ldGhvZHMgcmVmZXJlbmNlIHByaXZhdGUgZnVuY3Rpb25zLCBzbyB3ZSBtdXN0IGRlY2xhcmUgaGVyZSBhbmQgZGVmaW5lIGxhdGVyXG5cbiAgLyoqXG4gICAqIEdldHMgYSBjb25maWd1cmF0aW9uIG9wdGlvbiB2YWx1ZS5cbiAgICogQHBhcmFtIHtPYmplY3R8dW5kZWZpbmVkfSBjb25maWdPdmVycmlkZU9wdGlvbnMgSWYgdHJ1ZSwgYW5kIG9wdGlvbiBpcyBkZWZpbmVkIGluIHRoaXMgc2V0LFxuICAgKiAgdmFsdWUgd2lsbCBiZSB0YWtlbiBmcm9tIHRoaXMgb2JqZWN0LiBPdGhlcndpc2UsIHZhbHVlIHdpbGwgYmUgdGFrZW4gZnJvbSBiYXNlIGNvbmZpZ3VyYXRpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25OYW1lIE5hbWUgb2YgdGhlIG9wdGlvbiB3aG9zZSB2YWx1ZSBpcyBzb3VnaHQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gW2NvbmZpZ09wdGlvbk5hbWVdIE5hbWUgb2Ygb3B0aW9uIHRvIHVzZSBfX2luc3RlYWQgb2ZfXyBgb3B0aW9uTmFtZWBcbiAgICogIElJRiBgY29uZmlnT3ZlcnJpZGVPcHRpb25zYCBpcyBub3QgZGVmaW5lZC4gT3RoZXJ3aXNlLCBgb3B0aW9uTmFtZWAgaXMgdXNlZC5cbiAgICovXG4gIHZhciBnZXRPcHRpb24gPSBmdW5jdGlvbiBnZXRPcHRpb24oY29uZmlnT3ZlcnJpZGVPcHRpb25zLCBvcHRpb25OYW1lLCBjb25maWdPcHRpb25OYW1lKSB7XG4gICAgcmV0dXJuIGNvbmZpZ092ZXJyaWRlT3B0aW9ucyAmJiBjb25maWdPdmVycmlkZU9wdGlvbnNbb3B0aW9uTmFtZV0gIT09IHVuZGVmaW5lZCA/IGNvbmZpZ092ZXJyaWRlT3B0aW9uc1tvcHRpb25OYW1lXSA6IGNvbmZpZ1tjb25maWdPcHRpb25OYW1lIHx8IG9wdGlvbk5hbWVdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGNvbnRhaW5lciB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IEluZGV4IG9mIHRoZSBjb250YWluZXIgaW4gZWl0aGVyIGBzdGF0ZS5jb250YWluZXJzYCBvclxuICAgKiAgYHN0YXRlLmNvbnRhaW5lckdyb3Vwc2AgKHRoZSBvcmRlci9sZW5ndGggb2YgdGhlc2UgbGlzdHMgYXJlIHRoZSBzYW1lKTsgLTFcbiAgICogIGlmIHRoZSBlbGVtZW50IGlzbid0IGZvdW5kLlxuICAgKi9cbiAgdmFyIGZpbmRDb250YWluZXJJbmRleCA9IGZ1bmN0aW9uIGZpbmRDb250YWluZXJJbmRleChlbGVtZW50KSB7XG4gICAgLy8gTk9URTogc2VhcmNoIGBjb250YWluZXJHcm91cHNgIGJlY2F1c2UgaXQncyBwb3NzaWJsZSBhIGdyb3VwIGNvbnRhaW5zIG5vIHRhYmJhYmxlXG4gICAgLy8gIG5vZGVzLCBidXQgc3RpbGwgY29udGFpbnMgZm9jdXNhYmxlIG5vZGVzIChlLmcuIGlmIHRoZXkgYWxsIGhhdmUgYHRhYmluZGV4PS0xYClcbiAgICAvLyAgYW5kIHdlIHN0aWxsIG5lZWQgdG8gZmluZCB0aGUgZWxlbWVudCBpbiB0aGVyZVxuICAgIHJldHVybiBzdGF0ZS5jb250YWluZXJHcm91cHMuZmluZEluZGV4KGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gX3JlZi5jb250YWluZXIsXG4gICAgICAgIHRhYmJhYmxlTm9kZXMgPSBfcmVmLnRhYmJhYmxlTm9kZXM7XG4gICAgICByZXR1cm4gY29udGFpbmVyLmNvbnRhaW5zKGVsZW1lbnQpIHx8XG4gICAgICAvLyBmYWxsIGJhY2sgdG8gZXhwbGljaXQgdGFiYmFibGUgc2VhcmNoIHdoaWNoIHdpbGwgdGFrZSBpbnRvIGNvbnNpZGVyYXRpb24gYW55XG4gICAgICAvLyAgd2ViIGNvbXBvbmVudHMgaWYgdGhlIGB0YWJiYWJsZU9wdGlvbnMuZ2V0U2hhZG93Um9vdGAgb3B0aW9uIHdhcyB1c2VkIGZvclxuICAgICAgLy8gIHRoZSB0cmFwLCBlbmFibGluZyBzaGFkb3cgRE9NIHN1cHBvcnQgaW4gdGFiYmFibGUgKGBOb2RlLmNvbnRhaW5zKClgIGRvZXNuJ3RcbiAgICAgIC8vICBsb29rIGluc2lkZSB3ZWIgY29tcG9uZW50cyBldmVuIGlmIG9wZW4pXG4gICAgICB0YWJiYWJsZU5vZGVzLmZpbmQoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUgPT09IGVsZW1lbnQ7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgbm9kZSBmb3IgdGhlIGdpdmVuIG9wdGlvbiwgd2hpY2ggaXMgZXhwZWN0ZWQgdG8gYmUgYW4gb3B0aW9uIHRoYXRcbiAgICogIGNhbiBiZSBlaXRoZXIgYSBET00gbm9kZSwgYSBzdHJpbmcgdGhhdCBpcyBhIHNlbGVjdG9yIHRvIGdldCBhIG5vZGUsIGBmYWxzZWBcbiAgICogIChpZiBhIG5vZGUgaXMgZXhwbGljaXRseSBOT1QgZ2l2ZW4pLCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbnkgb2YgdGhlc2VcbiAgICogIHZhbHVlcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbk5hbWVcbiAgICogQHJldHVybnMge3VuZGVmaW5lZCB8IGZhbHNlIHwgSFRNTEVsZW1lbnQgfCBTVkdFbGVtZW50fSBSZXR1cm5zXG4gICAqICBgdW5kZWZpbmVkYCBpZiB0aGUgb3B0aW9uIGlzIG5vdCBzcGVjaWZpZWQ7IGBmYWxzZWAgaWYgdGhlIG9wdGlvblxuICAgKiAgcmVzb2x2ZWQgdG8gYGZhbHNlYCAobm9kZSBleHBsaWNpdGx5IG5vdCBnaXZlbik7IG90aGVyd2lzZSwgdGhlIHJlc29sdmVkXG4gICAqICBET00gbm9kZS5cbiAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBvcHRpb24gaXMgc2V0LCBub3QgYGZhbHNlYCwgYW5kIGlzIG5vdCwgb3IgZG9lcyBub3RcbiAgICogIHJlc29sdmUgdG8gYSBub2RlLlxuICAgKi9cbiAgdmFyIGdldE5vZGVGb3JPcHRpb24gPSBmdW5jdGlvbiBnZXROb2RlRm9yT3B0aW9uKG9wdGlvbk5hbWUpIHtcbiAgICB2YXIgb3B0aW9uVmFsdWUgPSBjb25maWdbb3B0aW9uTmFtZV07XG4gICAgaWYgKHR5cGVvZiBvcHRpb25WYWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBwYXJhbXMgPSBuZXcgQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBwYXJhbXNbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG4gICAgICBvcHRpb25WYWx1ZSA9IG9wdGlvblZhbHVlLmFwcGx5KHZvaWQgMCwgcGFyYW1zKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvblZhbHVlID09PSB0cnVlKSB7XG4gICAgICBvcHRpb25WYWx1ZSA9IHVuZGVmaW5lZDsgLy8gdXNlIGRlZmF1bHQgdmFsdWVcbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvblZhbHVlKSB7XG4gICAgICBpZiAob3B0aW9uVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25WYWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvblZhbHVlO1xuICAgICAgfVxuICAgICAgLy8gZWxzZSwgZW1wdHkgc3RyaW5nIChpbnZhbGlkKSwgbnVsbCAoaW52YWxpZCksIDAgKGludmFsaWQpXG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImBcIi5jb25jYXQob3B0aW9uTmFtZSwgXCJgIHdhcyBzcGVjaWZpZWQgYnV0IHdhcyBub3QgYSBub2RlLCBvciBkaWQgbm90IHJldHVybiBhIG5vZGVcIikpO1xuICAgIH1cbiAgICB2YXIgbm9kZSA9IG9wdGlvblZhbHVlOyAvLyBjb3VsZCBiZSBIVE1MRWxlbWVudCwgU1ZHRWxlbWVudCwgb3Igbm9uLWVtcHR5IHN0cmluZyBhdCB0aGlzIHBvaW50XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvblZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgbm9kZSA9IGRvYy5xdWVyeVNlbGVjdG9yKG9wdGlvblZhbHVlKTsgLy8gcmVzb2x2ZSB0byBub2RlLCBvciBudWxsIGlmIGZhaWxzXG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYFwiLmNvbmNhdChvcHRpb25OYW1lLCBcImAgYXMgc2VsZWN0b3IgcmVmZXJzIHRvIG5vIGtub3duIG5vZGVcIikpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcbiAgdmFyIGdldEluaXRpYWxGb2N1c05vZGUgPSBmdW5jdGlvbiBnZXRJbml0aWFsRm9jdXNOb2RlKCkge1xuICAgIHZhciBub2RlID0gZ2V0Tm9kZUZvck9wdGlvbignaW5pdGlhbEZvY3VzJyk7XG5cbiAgICAvLyBmYWxzZSBleHBsaWNpdGx5IGluZGljYXRlcyB3ZSB3YW50IG5vIGluaXRpYWxGb2N1cyBhdCBhbGxcbiAgICBpZiAobm9kZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKG5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gb3B0aW9uIG5vdCBzcGVjaWZpZWQ6IHVzZSBmYWxsYmFjayBvcHRpb25zXG4gICAgICBpZiAoZmluZENvbnRhaW5lckluZGV4KGRvYy5hY3RpdmVFbGVtZW50KSA+PSAwKSB7XG4gICAgICAgIG5vZGUgPSBkb2MuYWN0aXZlRWxlbWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmaXJzdFRhYmJhYmxlR3JvdXAgPSBzdGF0ZS50YWJiYWJsZUdyb3Vwc1swXTtcbiAgICAgICAgdmFyIGZpcnN0VGFiYmFibGVOb2RlID0gZmlyc3RUYWJiYWJsZUdyb3VwICYmIGZpcnN0VGFiYmFibGVHcm91cC5maXJzdFRhYmJhYmxlTm9kZTtcblxuICAgICAgICAvLyBOT1RFOiBgZmFsbGJhY2tGb2N1c2Agb3B0aW9uIGZ1bmN0aW9uIGNhbm5vdCByZXR1cm4gYGZhbHNlYCAobm90IHN1cHBvcnRlZClcbiAgICAgICAgbm9kZSA9IGZpcnN0VGFiYmFibGVOb2RlIHx8IGdldE5vZGVGb3JPcHRpb24oJ2ZhbGxiYWNrRm9jdXMnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFub2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgZm9jdXMtdHJhcCBuZWVkcyB0byBoYXZlIGF0IGxlYXN0IG9uZSBmb2N1c2FibGUgZWxlbWVudCcpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcbiAgdmFyIHVwZGF0ZVRhYmJhYmxlTm9kZXMgPSBmdW5jdGlvbiB1cGRhdGVUYWJiYWJsZU5vZGVzKCkge1xuICAgIHN0YXRlLmNvbnRhaW5lckdyb3VwcyA9IHN0YXRlLmNvbnRhaW5lcnMubWFwKGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgIHZhciB0YWJiYWJsZU5vZGVzID0gdGFiYmFibGUoY29udGFpbmVyLCBjb25maWcudGFiYmFibGVPcHRpb25zKTtcblxuICAgICAgLy8gTk9URTogaWYgd2UgaGF2ZSB0YWJiYWJsZSBub2Rlcywgd2UgbXVzdCBoYXZlIGZvY3VzYWJsZSBub2RlczsgZm9jdXNhYmxlIG5vZGVzXG4gICAgICAvLyAgYXJlIGEgc3VwZXJzZXQgb2YgdGFiYmFibGUgbm9kZXNcbiAgICAgIHZhciBmb2N1c2FibGVOb2RlcyA9IGZvY3VzYWJsZShjb250YWluZXIsIGNvbmZpZy50YWJiYWJsZU9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgIHRhYmJhYmxlTm9kZXM6IHRhYmJhYmxlTm9kZXMsXG4gICAgICAgIGZvY3VzYWJsZU5vZGVzOiBmb2N1c2FibGVOb2RlcyxcbiAgICAgICAgZmlyc3RUYWJiYWJsZU5vZGU6IHRhYmJhYmxlTm9kZXMubGVuZ3RoID4gMCA/IHRhYmJhYmxlTm9kZXNbMF0gOiBudWxsLFxuICAgICAgICBsYXN0VGFiYmFibGVOb2RlOiB0YWJiYWJsZU5vZGVzLmxlbmd0aCA+IDAgPyB0YWJiYWJsZU5vZGVzW3RhYmJhYmxlTm9kZXMubGVuZ3RoIC0gMV0gOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogRmluZHMgdGhlIF9fdGFiYmFibGVfXyBub2RlIHRoYXQgZm9sbG93cyB0aGUgZ2l2ZW4gbm9kZSBpbiB0aGUgc3BlY2lmaWVkIGRpcmVjdGlvbixcbiAgICAgICAgICogIGluIHRoaXMgY29udGFpbmVyLCBpZiBhbnkuXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbZm9yd2FyZF0gVHJ1ZSBpZiBnb2luZyBpbiBmb3J3YXJkIHRhYiBvcmRlcjsgZmFsc2UgaWYgZ29pbmdcbiAgICAgICAgICogIGluIHJldmVyc2UuXG4gICAgICAgICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHx1bmRlZmluZWR9IFRoZSBuZXh0IHRhYmJhYmxlIG5vZGUsIGlmIGFueS5cbiAgICAgICAgICovXG4gICAgICAgIG5leHRUYWJiYWJsZU5vZGU6IGZ1bmN0aW9uIG5leHRUYWJiYWJsZU5vZGUobm9kZSkge1xuICAgICAgICAgIHZhciBmb3J3YXJkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlO1xuICAgICAgICAgIC8vIE5PVEU6IElmIHRhYmluZGV4IGlzIHBvc2l0aXZlIChpbiBvcmRlciB0byBtYW5pcHVsYXRlIHRoZSB0YWIgb3JkZXIgc2VwYXJhdGVcbiAgICAgICAgICAvLyAgZnJvbSB0aGUgRE9NIG9yZGVyKSwgdGhpcyBfX3dpbGwgbm90IHdvcmtfXyBiZWNhdXNlIHRoZSBsaXN0IG9mIGZvY3VzYWJsZU5vZGVzLFxuICAgICAgICAgIC8vICB3aGlsZSBpdCBjb250YWlucyB0YWJiYWJsZSBub2RlcywgZG9lcyBub3Qgc29ydCBpdHMgbm9kZXMgaW4gYW55IG9yZGVyIG90aGVyXG4gICAgICAgICAgLy8gIHRoYW4gRE9NIG9yZGVyLCBiZWNhdXNlIGl0IGNhbid0OiBXaGVyZSB3b3VsZCB5b3UgcGxhY2UgZm9jdXNhYmxlIChidXQgbm90XG4gICAgICAgICAgLy8gIHRhYmJhYmxlKSBub2RlcyBpbiB0aGF0IG9yZGVyPyBUaGV5IGhhdmUgbm8gb3JkZXIsIGJlY2F1c2UgdGhleSBhcmVuJ3QgdGFiYmFsZS4uLlxuICAgICAgICAgIC8vIFN1cHBvcnQgZm9yIHBvc2l0aXZlIHRhYmluZGV4IGlzIGFscmVhZHkgYnJva2VuIGFuZCBoYXJkIHRvIG1hbmFnZSAocG9zc2libHlcbiAgICAgICAgICAvLyAgbm90IHN1cHBvcnRhYmxlLCBUQkQpLCBzbyB0aGlzIGlzbid0IGdvaW5nIHRvIG1ha2UgdGhpbmdzIHdvcnNlIHRoYW4gdGhleVxuICAgICAgICAgIC8vICBhbHJlYWR5IGFyZSwgYW5kIGF0IGxlYXN0IG1ha2VzIHRoaW5ncyBiZXR0ZXIgZm9yIHRoZSBtYWpvcml0eSBvZiBjYXNlcyB3aGVyZVxuICAgICAgICAgIC8vICB0YWJpbmRleCBpcyBlaXRoZXIgMC91bnNldCBvciBuZWdhdGl2ZS5cbiAgICAgICAgICAvLyBGWUksIHBvc2l0aXZlIHRhYmluZGV4IGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZm9jdXMtdHJhcC9mb2N1cy10cmFwL2lzc3Vlcy8zNzVcbiAgICAgICAgICB2YXIgbm9kZUlkeCA9IGZvY3VzYWJsZU5vZGVzLmZpbmRJbmRleChmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgcmV0dXJuIG4gPT09IG5vZGU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKG5vZGVJZHggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm9yd2FyZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZvY3VzYWJsZU5vZGVzLnNsaWNlKG5vZGVJZHggKyAxKS5maW5kKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpc1RhYmJhYmxlKG4sIGNvbmZpZy50YWJiYWJsZU9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmb2N1c2FibGVOb2Rlcy5zbGljZSgwLCBub2RlSWR4KS5yZXZlcnNlKCkuZmluZChmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgcmV0dXJuIGlzVGFiYmFibGUobiwgY29uZmlnLnRhYmJhYmxlT3B0aW9ucyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gICAgc3RhdGUudGFiYmFibGVHcm91cHMgPSBzdGF0ZS5jb250YWluZXJHcm91cHMuZmlsdGVyKGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgcmV0dXJuIGdyb3VwLnRhYmJhYmxlTm9kZXMubGVuZ3RoID4gMDtcbiAgICB9KTtcblxuICAgIC8vIHRocm93IGlmIG5vIGdyb3VwcyBoYXZlIHRhYmJhYmxlIG5vZGVzIGFuZCB3ZSBkb24ndCBoYXZlIGEgZmFsbGJhY2sgZm9jdXMgbm9kZSBlaXRoZXJcbiAgICBpZiAoc3RhdGUudGFiYmFibGVHcm91cHMubGVuZ3RoIDw9IDAgJiYgIWdldE5vZGVGb3JPcHRpb24oJ2ZhbGxiYWNrRm9jdXMnKSAvLyByZXR1cm5pbmcgZmFsc2Ugbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBvcHRpb25cbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91ciBmb2N1cy10cmFwIG11c3QgaGF2ZSBhdCBsZWFzdCBvbmUgY29udGFpbmVyIHdpdGggYXQgbGVhc3Qgb25lIHRhYmJhYmxlIG5vZGUgaW4gaXQgYXQgYWxsIHRpbWVzJyk7XG4gICAgfVxuICB9O1xuICB2YXIgdHJ5Rm9jdXMgPSBmdW5jdGlvbiB0cnlGb2N1cyhub2RlKSB7XG4gICAgaWYgKG5vZGUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChub2RlID09PSBkb2MuYWN0aXZlRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIW5vZGUgfHwgIW5vZGUuZm9jdXMpIHtcbiAgICAgIHRyeUZvY3VzKGdldEluaXRpYWxGb2N1c05vZGUoKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG5vZGUuZm9jdXMoe1xuICAgICAgcHJldmVudFNjcm9sbDogISFjb25maWcucHJldmVudFNjcm9sbFxuICAgIH0pO1xuICAgIHN0YXRlLm1vc3RSZWNlbnRseUZvY3VzZWROb2RlID0gbm9kZTtcbiAgICBpZiAoaXNTZWxlY3RhYmxlSW5wdXQobm9kZSkpIHtcbiAgICAgIG5vZGUuc2VsZWN0KCk7XG4gICAgfVxuICB9O1xuICB2YXIgZ2V0UmV0dXJuRm9jdXNOb2RlID0gZnVuY3Rpb24gZ2V0UmV0dXJuRm9jdXNOb2RlKHByZXZpb3VzQWN0aXZlRWxlbWVudCkge1xuICAgIHZhciBub2RlID0gZ2V0Tm9kZUZvck9wdGlvbignc2V0UmV0dXJuRm9jdXMnLCBwcmV2aW91c0FjdGl2ZUVsZW1lbnQpO1xuICAgIHJldHVybiBub2RlID8gbm9kZSA6IG5vZGUgPT09IGZhbHNlID8gZmFsc2UgOiBwcmV2aW91c0FjdGl2ZUVsZW1lbnQ7XG4gIH07XG5cbiAgLy8gVGhpcyBuZWVkcyB0byBiZSBkb25lIG9uIG1vdXNlZG93biBhbmQgdG91Y2hzdGFydCBpbnN0ZWFkIG9mIGNsaWNrXG4gIC8vIHNvIHRoYXQgaXQgcHJlY2VkZXMgdGhlIGZvY3VzIGV2ZW50LlxuICB2YXIgY2hlY2tQb2ludGVyRG93biA9IGZ1bmN0aW9uIGNoZWNrUG9pbnRlckRvd24oZSkge1xuICAgIHZhciB0YXJnZXQgPSBnZXRBY3R1YWxUYXJnZXQoZSk7XG4gICAgaWYgKGZpbmRDb250YWluZXJJbmRleCh0YXJnZXQpID49IDApIHtcbiAgICAgIC8vIGFsbG93IHRoZSBjbGljayBzaW5jZSBpdCBvY3VycmVkIGluc2lkZSB0aGUgdHJhcFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWVPckhhbmRsZXIoY29uZmlnLmNsaWNrT3V0c2lkZURlYWN0aXZhdGVzLCBlKSkge1xuICAgICAgLy8gaW1tZWRpYXRlbHkgZGVhY3RpdmF0ZSB0aGUgdHJhcFxuICAgICAgdHJhcC5kZWFjdGl2YXRlKHtcbiAgICAgICAgLy8gTk9URTogYnkgc2V0dGluZyBgcmV0dXJuRm9jdXM6IGZhbHNlYCwgZGVhY3RpdmF0ZSgpIHdpbGwgZG8gbm90aGluZyxcbiAgICAgICAgLy8gIHdoaWNoIHdpbGwgcmVzdWx0IGluIHRoZSBvdXRzaWRlIGNsaWNrIHNldHRpbmcgZm9jdXMgdG8gdGhlIG5vZGVcbiAgICAgICAgLy8gIHRoYXQgd2FzIGNsaWNrZWQgKGFuZCBpZiBub3QgZm9jdXNhYmxlLCB0byBcIm5vdGhpbmdcIik7IGJ5IHNldHRpbmdcbiAgICAgICAgLy8gIGByZXR1cm5Gb2N1czogdHJ1ZWAsIHdlJ2xsIGF0dGVtcHQgdG8gcmUtZm9jdXMgdGhlIG5vZGUgb3JpZ2luYWxseS1mb2N1c2VkXG4gICAgICAgIC8vICBvbiBhY3RpdmF0aW9uIChvciB0aGUgY29uZmlndXJlZCBgc2V0UmV0dXJuRm9jdXNgIG5vZGUpLCB3aGV0aGVyIHRoZVxuICAgICAgICAvLyAgb3V0c2lkZSBjbGljayB3YXMgb24gYSBmb2N1c2FibGUgbm9kZSBvciBub3RcbiAgICAgICAgcmV0dXJuRm9jdXM6IGNvbmZpZy5yZXR1cm5Gb2N1c09uRGVhY3RpdmF0ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIG1vYmlsZSBkZXZpY2VzLlxuICAgIC8vIChJZiB3ZSdsbCBvbmx5IGxldCBgY2xpY2tgIGV2ZW50cyB0aHJvdWdoLFxuICAgIC8vIHRoZW4gb24gbW9iaWxlIHRoZXkgd2lsbCBiZSBibG9ja2VkIGFueXdheXMgaWYgYHRvdWNoc3RhcnRgIGlzIGJsb2NrZWQuKVxuICAgIGlmICh2YWx1ZU9ySGFuZGxlcihjb25maWcuYWxsb3dPdXRzaWRlQ2xpY2ssIGUpKSB7XG4gICAgICAvLyBhbGxvdyB0aGUgY2xpY2sgb3V0c2lkZSB0aGUgdHJhcCB0byB0YWtlIHBsYWNlXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gb3RoZXJ3aXNlLCBwcmV2ZW50IHRoZSBjbGlja1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfTtcblxuICAvLyBJbiBjYXNlIGZvY3VzIGVzY2FwZXMgdGhlIHRyYXAgZm9yIHNvbWUgc3RyYW5nZSByZWFzb24sIHB1bGwgaXQgYmFjayBpbi5cbiAgdmFyIGNoZWNrRm9jdXNJbiA9IGZ1bmN0aW9uIGNoZWNrRm9jdXNJbihlKSB7XG4gICAgdmFyIHRhcmdldCA9IGdldEFjdHVhbFRhcmdldChlKTtcbiAgICB2YXIgdGFyZ2V0Q29udGFpbmVkID0gZmluZENvbnRhaW5lckluZGV4KHRhcmdldCkgPj0gMDtcblxuICAgIC8vIEluIEZpcmVmb3ggd2hlbiB5b3UgVGFiIG91dCBvZiBhbiBpZnJhbWUgdGhlIERvY3VtZW50IGlzIGJyaWVmbHkgZm9jdXNlZC5cbiAgICBpZiAodGFyZ2V0Q29udGFpbmVkIHx8IHRhcmdldCBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICBpZiAodGFyZ2V0Q29udGFpbmVkKSB7XG4gICAgICAgIHN0YXRlLm1vc3RSZWNlbnRseUZvY3VzZWROb2RlID0gdGFyZ2V0O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBlc2NhcGVkISBwdWxsIGl0IGJhY2sgaW4gdG8gd2hlcmUgaXQganVzdCBsZWZ0XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgdHJ5Rm9jdXMoc3RhdGUubW9zdFJlY2VudGx5Rm9jdXNlZE5vZGUgfHwgZ2V0SW5pdGlhbEZvY3VzTm9kZSgpKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gSGlqYWNrIGtleSBuYXYgZXZlbnRzIG9uIHRoZSBmaXJzdCBhbmQgbGFzdCBmb2N1c2FibGUgbm9kZXMgb2YgdGhlIHRyYXAsXG4gIC8vIGluIG9yZGVyIHRvIHByZXZlbnQgZm9jdXMgZnJvbSBlc2NhcGluZy4gSWYgaXQgZXNjYXBlcyBmb3IgZXZlbiBhXG4gIC8vIG1vbWVudCBpdCBjYW4gZW5kIHVwIHNjcm9sbGluZyB0aGUgcGFnZSBhbmQgY2F1c2luZyBjb25mdXNpb24gc28gd2VcbiAgLy8ga2luZCBvZiBuZWVkIHRvIGNhcHR1cmUgdGhlIGFjdGlvbiBhdCB0aGUga2V5ZG93biBwaGFzZS5cbiAgdmFyIGNoZWNrS2V5TmF2ID0gZnVuY3Rpb24gY2hlY2tLZXlOYXYoZXZlbnQpIHtcbiAgICB2YXIgaXNCYWNrd2FyZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG4gICAgdmFyIHRhcmdldCA9IGdldEFjdHVhbFRhcmdldChldmVudCk7XG4gICAgdXBkYXRlVGFiYmFibGVOb2RlcygpO1xuICAgIHZhciBkZXN0aW5hdGlvbk5vZGUgPSBudWxsO1xuICAgIGlmIChzdGF0ZS50YWJiYWJsZUdyb3Vwcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBtYWtlIHN1cmUgdGhlIHRhcmdldCBpcyBhY3R1YWxseSBjb250YWluZWQgaW4gYSBncm91cFxuICAgICAgLy8gTk9URTogdGhlIHRhcmdldCBtYXkgYWxzbyBiZSB0aGUgY29udGFpbmVyIGl0c2VsZiBpZiBpdCdzIGZvY3VzYWJsZVxuICAgICAgLy8gIHdpdGggdGFiSW5kZXg9Jy0xJyBhbmQgd2FzIGdpdmVuIGluaXRpYWwgZm9jdXNcbiAgICAgIHZhciBjb250YWluZXJJbmRleCA9IGZpbmRDb250YWluZXJJbmRleCh0YXJnZXQpO1xuICAgICAgdmFyIGNvbnRhaW5lckdyb3VwID0gY29udGFpbmVySW5kZXggPj0gMCA/IHN0YXRlLmNvbnRhaW5lckdyb3Vwc1tjb250YWluZXJJbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoY29udGFpbmVySW5kZXggPCAwKSB7XG4gICAgICAgIC8vIHRhcmdldCBub3QgZm91bmQgaW4gYW55IGdyb3VwOiBxdWl0ZSBwb3NzaWJsZSBmb2N1cyBoYXMgZXNjYXBlZCB0aGUgdHJhcCxcbiAgICAgICAgLy8gIHNvIGJyaW5nIGl0IGJhY2sgaW50by4uLlxuICAgICAgICBpZiAoaXNCYWNrd2FyZCkge1xuICAgICAgICAgIC8vIC4uLnRoZSBsYXN0IG5vZGUgaW4gdGhlIGxhc3QgZ3JvdXBcbiAgICAgICAgICBkZXN0aW5hdGlvbk5vZGUgPSBzdGF0ZS50YWJiYWJsZUdyb3Vwc1tzdGF0ZS50YWJiYWJsZUdyb3Vwcy5sZW5ndGggLSAxXS5sYXN0VGFiYmFibGVOb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIC4uLnRoZSBmaXJzdCBub2RlIGluIHRoZSBmaXJzdCBncm91cFxuICAgICAgICAgIGRlc3RpbmF0aW9uTm9kZSA9IHN0YXRlLnRhYmJhYmxlR3JvdXBzWzBdLmZpcnN0VGFiYmFibGVOb2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQmFja3dhcmQpIHtcbiAgICAgICAgLy8gUkVWRVJTRVxuXG4gICAgICAgIC8vIGlzIHRoZSB0YXJnZXQgdGhlIGZpcnN0IHRhYmJhYmxlIG5vZGUgaW4gYSBncm91cD9cbiAgICAgICAgdmFyIHN0YXJ0T2ZHcm91cEluZGV4ID0gZmluZEluZGV4KHN0YXRlLnRhYmJhYmxlR3JvdXBzLCBmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgICAgICB2YXIgZmlyc3RUYWJiYWJsZU5vZGUgPSBfcmVmMi5maXJzdFRhYmJhYmxlTm9kZTtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0ID09PSBmaXJzdFRhYmJhYmxlTm9kZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzdGFydE9mR3JvdXBJbmRleCA8IDAgJiYgKGNvbnRhaW5lckdyb3VwLmNvbnRhaW5lciA9PT0gdGFyZ2V0IHx8IGlzRm9jdXNhYmxlKHRhcmdldCwgY29uZmlnLnRhYmJhYmxlT3B0aW9ucykgJiYgIWlzVGFiYmFibGUodGFyZ2V0LCBjb25maWcudGFiYmFibGVPcHRpb25zKSAmJiAhY29udGFpbmVyR3JvdXAubmV4dFRhYmJhYmxlTm9kZSh0YXJnZXQsIGZhbHNlKSkpIHtcbiAgICAgICAgICAvLyBhbiBleGNlcHRpb24gY2FzZSB3aGVyZSB0aGUgdGFyZ2V0IGlzIGVpdGhlciB0aGUgY29udGFpbmVyIGl0c2VsZiwgb3JcbiAgICAgICAgICAvLyAgYSBub24tdGFiYmFibGUgbm9kZSB0aGF0IHdhcyBnaXZlbiBmb2N1cyAoaS5lLiB0YWJpbmRleCBpcyBuZWdhdGl2ZVxuICAgICAgICAgIC8vICBhbmQgdXNlciBjbGlja2VkIG9uIGl0IG9yIG5vZGUgd2FzIHByb2dyYW1tYXRpY2FsbHkgZ2l2ZW4gZm9jdXMpXG4gICAgICAgICAgLy8gIGFuZCBpcyBub3QgZm9sbG93ZWQgYnkgYW55IG90aGVyIHRhYmJhYmxlIG5vZGUsIGluIHdoaWNoXG4gICAgICAgICAgLy8gIGNhc2UsIHdlIHNob3VsZCBoYW5kbGUgc2hpZnQrdGFiIGFzIGlmIGZvY3VzIHdlcmUgb24gdGhlIGNvbnRhaW5lcidzXG4gICAgICAgICAgLy8gIGZpcnN0IHRhYmJhYmxlIG5vZGUsIGFuZCBnbyB0byB0aGUgbGFzdCB0YWJiYWJsZSBub2RlIG9mIHRoZSBMQVNUIGdyb3VwXG4gICAgICAgICAgc3RhcnRPZkdyb3VwSW5kZXggPSBjb250YWluZXJJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRPZkdyb3VwSW5kZXggPj0gMCkge1xuICAgICAgICAgIC8vIFlFUzogdGhlbiBzaGlmdCt0YWIgc2hvdWxkIGdvIHRvIHRoZSBsYXN0IHRhYmJhYmxlIG5vZGUgaW4gdGhlXG4gICAgICAgICAgLy8gIHByZXZpb3VzIGdyb3VwIChhbmQgd3JhcCBhcm91bmQgdG8gdGhlIGxhc3QgdGFiYmFibGUgbm9kZSBvZlxuICAgICAgICAgIC8vICB0aGUgTEFTVCBncm91cCBpZiBpdCdzIHRoZSBmaXJzdCB0YWJiYWJsZSBub2RlIG9mIHRoZSBGSVJTVCBncm91cClcbiAgICAgICAgICB2YXIgZGVzdGluYXRpb25Hcm91cEluZGV4ID0gc3RhcnRPZkdyb3VwSW5kZXggPT09IDAgPyBzdGF0ZS50YWJiYWJsZUdyb3Vwcy5sZW5ndGggLSAxIDogc3RhcnRPZkdyb3VwSW5kZXggLSAxO1xuICAgICAgICAgIHZhciBkZXN0aW5hdGlvbkdyb3VwID0gc3RhdGUudGFiYmFibGVHcm91cHNbZGVzdGluYXRpb25Hcm91cEluZGV4XTtcbiAgICAgICAgICBkZXN0aW5hdGlvbk5vZGUgPSBkZXN0aW5hdGlvbkdyb3VwLmxhc3RUYWJiYWJsZU5vZGU7XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzVGFiRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgLy8gdXNlciBtdXN0IGhhdmUgY3VzdG9taXplZCB0aGUgbmF2IGtleXMgc28gd2UgaGF2ZSB0byBtb3ZlIGZvY3VzIG1hbnVhbGx5IF93aXRoaW5fXG4gICAgICAgICAgLy8gIHRoZSBhY3RpdmUgZ3JvdXA6IGRvIHRoaXMgYmFzZWQgb24gdGhlIG9yZGVyIGRldGVybWluZWQgYnkgdGFiYmFibGUoKVxuICAgICAgICAgIGRlc3RpbmF0aW9uTm9kZSA9IGNvbnRhaW5lckdyb3VwLm5leHRUYWJiYWJsZU5vZGUodGFyZ2V0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZPUldBUkRcblxuICAgICAgICAvLyBpcyB0aGUgdGFyZ2V0IHRoZSBsYXN0IHRhYmJhYmxlIG5vZGUgaW4gYSBncm91cD9cbiAgICAgICAgdmFyIGxhc3RPZkdyb3VwSW5kZXggPSBmaW5kSW5kZXgoc3RhdGUudGFiYmFibGVHcm91cHMsIGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICAgIHZhciBsYXN0VGFiYmFibGVOb2RlID0gX3JlZjMubGFzdFRhYmJhYmxlTm9kZTtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0ID09PSBsYXN0VGFiYmFibGVOb2RlO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGxhc3RPZkdyb3VwSW5kZXggPCAwICYmIChjb250YWluZXJHcm91cC5jb250YWluZXIgPT09IHRhcmdldCB8fCBpc0ZvY3VzYWJsZSh0YXJnZXQsIGNvbmZpZy50YWJiYWJsZU9wdGlvbnMpICYmICFpc1RhYmJhYmxlKHRhcmdldCwgY29uZmlnLnRhYmJhYmxlT3B0aW9ucykgJiYgIWNvbnRhaW5lckdyb3VwLm5leHRUYWJiYWJsZU5vZGUodGFyZ2V0KSkpIHtcbiAgICAgICAgICAvLyBhbiBleGNlcHRpb24gY2FzZSB3aGVyZSB0aGUgdGFyZ2V0IGlzIHRoZSBjb250YWluZXIgaXRzZWxmLCBvclxuICAgICAgICAgIC8vICBhIG5vbi10YWJiYWJsZSBub2RlIHRoYXQgd2FzIGdpdmVuIGZvY3VzIChpLmUuIHRhYmluZGV4IGlzIG5lZ2F0aXZlXG4gICAgICAgICAgLy8gIGFuZCB1c2VyIGNsaWNrZWQgb24gaXQgb3Igbm9kZSB3YXMgcHJvZ3JhbW1hdGljYWxseSBnaXZlbiBmb2N1cylcbiAgICAgICAgICAvLyAgYW5kIGlzIG5vdCBmb2xsb3dlZCBieSBhbnkgb3RoZXIgdGFiYmFibGUgbm9kZSwgaW4gd2hpY2hcbiAgICAgICAgICAvLyAgY2FzZSwgd2Ugc2hvdWxkIGhhbmRsZSB0YWIgYXMgaWYgZm9jdXMgd2VyZSBvbiB0aGUgY29udGFpbmVyJ3NcbiAgICAgICAgICAvLyAgbGFzdCB0YWJiYWJsZSBub2RlLCBhbmQgZ28gdG8gdGhlIGZpcnN0IHRhYmJhYmxlIG5vZGUgb2YgdGhlIEZJUlNUIGdyb3VwXG4gICAgICAgICAgbGFzdE9mR3JvdXBJbmRleCA9IGNvbnRhaW5lckluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0T2ZHcm91cEluZGV4ID49IDApIHtcbiAgICAgICAgICAvLyBZRVM6IHRoZW4gdGFiIHNob3VsZCBnbyB0byB0aGUgZmlyc3QgdGFiYmFibGUgbm9kZSBpbiB0aGUgbmV4dFxuICAgICAgICAgIC8vICBncm91cCAoYW5kIHdyYXAgYXJvdW5kIHRvIHRoZSBmaXJzdCB0YWJiYWJsZSBub2RlIG9mIHRoZSBGSVJTVFxuICAgICAgICAgIC8vICBncm91cCBpZiBpdCdzIHRoZSBsYXN0IHRhYmJhYmxlIG5vZGUgb2YgdGhlIExBU1QgZ3JvdXApXG4gICAgICAgICAgdmFyIF9kZXN0aW5hdGlvbkdyb3VwSW5kZXggPSBsYXN0T2ZHcm91cEluZGV4ID09PSBzdGF0ZS50YWJiYWJsZUdyb3Vwcy5sZW5ndGggLSAxID8gMCA6IGxhc3RPZkdyb3VwSW5kZXggKyAxO1xuICAgICAgICAgIHZhciBfZGVzdGluYXRpb25Hcm91cCA9IHN0YXRlLnRhYmJhYmxlR3JvdXBzW19kZXN0aW5hdGlvbkdyb3VwSW5kZXhdO1xuICAgICAgICAgIGRlc3RpbmF0aW9uTm9kZSA9IF9kZXN0aW5hdGlvbkdyb3VwLmZpcnN0VGFiYmFibGVOb2RlO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc1RhYkV2ZW50KGV2ZW50KSkge1xuICAgICAgICAgIC8vIHVzZXIgbXVzdCBoYXZlIGN1c3RvbWl6ZWQgdGhlIG5hdiBrZXlzIHNvIHdlIGhhdmUgdG8gbW92ZSBmb2N1cyBtYW51YWxseSBfd2l0aGluX1xuICAgICAgICAgIC8vICB0aGUgYWN0aXZlIGdyb3VwOiBkbyB0aGlzIGJhc2VkIG9uIHRoZSBvcmRlciBkZXRlcm1pbmVkIGJ5IHRhYmJhYmxlKClcbiAgICAgICAgICBkZXN0aW5hdGlvbk5vZGUgPSBjb250YWluZXJHcm91cC5uZXh0VGFiYmFibGVOb2RlKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm8gZ3JvdXBzIGF2YWlsYWJsZVxuICAgICAgLy8gTk9URTogdGhlIGZhbGxiYWNrRm9jdXMgb3B0aW9uIGRvZXMgbm90IHN1cHBvcnQgcmV0dXJuaW5nIGZhbHNlIHRvIG9wdC1vdXRcbiAgICAgIGRlc3RpbmF0aW9uTm9kZSA9IGdldE5vZGVGb3JPcHRpb24oJ2ZhbGxiYWNrRm9jdXMnKTtcbiAgICB9XG4gICAgaWYgKGRlc3RpbmF0aW9uTm9kZSkge1xuICAgICAgaWYgKGlzVGFiRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgIC8vIHNpbmNlIHRhYiBuYXRpdmVseSBtb3ZlcyBmb2N1cywgd2Ugd291bGRuJ3QgaGF2ZSBhIGRlc3RpbmF0aW9uIG5vZGUgdW5sZXNzIHdlXG4gICAgICAgIC8vICB3ZXJlIG9uIHRoZSBlZGdlIG9mIGEgY29udGFpbmVyIGFuZCBoYWQgdG8gbW92ZSB0byB0aGUgbmV4dC9wcmV2aW91cyBlZGdlLCBpblxuICAgICAgICAvLyAgd2hpY2ggY2FzZSB3ZSB3YW50IHRvIHByZXZlbnQgZGVmYXVsdCB0byBrZWVwIHRoZSBicm93c2VyIGZyb20gbW92aW5nIGZvY3VzXG4gICAgICAgIC8vICB0byB3aGVyZSBpdCBub3JtYWxseSB3b3VsZFxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgdHJ5Rm9jdXMoZGVzdGluYXRpb25Ob2RlKTtcbiAgICB9XG4gICAgLy8gZWxzZSwgbGV0IHRoZSBicm93c2VyIHRha2UgY2FyZSBvZiBbc2hpZnQrXXRhYiBhbmQgbW92ZSB0aGUgZm9jdXNcbiAgfTtcblxuICB2YXIgY2hlY2tLZXkgPSBmdW5jdGlvbiBjaGVja0tleShldmVudCkge1xuICAgIGlmIChpc0VzY2FwZUV2ZW50KGV2ZW50KSAmJiB2YWx1ZU9ySGFuZGxlcihjb25maWcuZXNjYXBlRGVhY3RpdmF0ZXMsIGV2ZW50KSAhPT0gZmFsc2UpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0cmFwLmRlYWN0aXZhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5pc0tleUZvcndhcmQoZXZlbnQpIHx8IGNvbmZpZy5pc0tleUJhY2t3YXJkKGV2ZW50KSkge1xuICAgICAgY2hlY2tLZXlOYXYoZXZlbnQsIGNvbmZpZy5pc0tleUJhY2t3YXJkKGV2ZW50KSk7XG4gICAgfVxuICB9O1xuICB2YXIgY2hlY2tDbGljayA9IGZ1bmN0aW9uIGNoZWNrQ2xpY2soZSkge1xuICAgIHZhciB0YXJnZXQgPSBnZXRBY3R1YWxUYXJnZXQoZSk7XG4gICAgaWYgKGZpbmRDb250YWluZXJJbmRleCh0YXJnZXQpID49IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZhbHVlT3JIYW5kbGVyKGNvbmZpZy5jbGlja091dHNpZGVEZWFjdGl2YXRlcywgZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZhbHVlT3JIYW5kbGVyKGNvbmZpZy5hbGxvd091dHNpZGVDbGljaywgZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gIH07XG5cbiAgLy9cbiAgLy8gRVZFTlQgTElTVEVORVJTXG4gIC8vXG5cbiAgdmFyIGFkZExpc3RlbmVycyA9IGZ1bmN0aW9uIGFkZExpc3RlbmVycygpIHtcbiAgICBpZiAoIXN0YXRlLmFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRoZXJlIGNhbiBiZSBvbmx5IG9uZSBsaXN0ZW5pbmcgZm9jdXMgdHJhcCBhdCBhIHRpbWVcbiAgICBhY3RpdmVGb2N1c1RyYXBzLmFjdGl2YXRlVHJhcCh0cmFwU3RhY2ssIHRyYXApO1xuXG4gICAgLy8gRGVsYXkgZW5zdXJlcyB0aGF0IHRoZSBmb2N1c2VkIGVsZW1lbnQgZG9lc24ndCBjYXB0dXJlIHRoZSBldmVudFxuICAgIC8vIHRoYXQgY2F1c2VkIHRoZSBmb2N1cyB0cmFwIGFjdGl2YXRpb24uXG4gICAgc3RhdGUuZGVsYXlJbml0aWFsRm9jdXNUaW1lciA9IGNvbmZpZy5kZWxheUluaXRpYWxGb2N1cyA/IGRlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeUZvY3VzKGdldEluaXRpYWxGb2N1c05vZGUoKSk7XG4gICAgfSkgOiB0cnlGb2N1cyhnZXRJbml0aWFsRm9jdXNOb2RlKCkpO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgY2hlY2tGb2N1c0luLCB0cnVlKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2hlY2tQb2ludGVyRG93biwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBjaGVja1BvaW50ZXJEb3duLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0NsaWNrLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNoZWNrS2V5LCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gdHJhcDtcbiAgfTtcbiAgdmFyIHJlbW92ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycygpIHtcbiAgICBpZiAoIXN0YXRlLmFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGNoZWNrRm9jdXNJbiwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGNoZWNrUG9pbnRlckRvd24sIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgY2hlY2tQb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tDbGljaywgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjaGVja0tleSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHRyYXA7XG4gIH07XG5cbiAgLy9cbiAgLy8gVFJBUCBERUZJTklUSU9OXG4gIC8vXG5cbiAgdHJhcCA9IHtcbiAgICBnZXQgYWN0aXZlKCkge1xuICAgICAgcmV0dXJuIHN0YXRlLmFjdGl2ZTtcbiAgICB9LFxuICAgIGdldCBwYXVzZWQoKSB7XG4gICAgICByZXR1cm4gc3RhdGUucGF1c2VkO1xuICAgIH0sXG4gICAgYWN0aXZhdGU6IGZ1bmN0aW9uIGFjdGl2YXRlKGFjdGl2YXRlT3B0aW9ucykge1xuICAgICAgaWYgKHN0YXRlLmFjdGl2ZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHZhciBvbkFjdGl2YXRlID0gZ2V0T3B0aW9uKGFjdGl2YXRlT3B0aW9ucywgJ29uQWN0aXZhdGUnKTtcbiAgICAgIHZhciBvblBvc3RBY3RpdmF0ZSA9IGdldE9wdGlvbihhY3RpdmF0ZU9wdGlvbnMsICdvblBvc3RBY3RpdmF0ZScpO1xuICAgICAgdmFyIGNoZWNrQ2FuRm9jdXNUcmFwID0gZ2V0T3B0aW9uKGFjdGl2YXRlT3B0aW9ucywgJ2NoZWNrQ2FuRm9jdXNUcmFwJyk7XG4gICAgICBpZiAoIWNoZWNrQ2FuRm9jdXNUcmFwKSB7XG4gICAgICAgIHVwZGF0ZVRhYmJhYmxlTm9kZXMoKTtcbiAgICAgIH1cbiAgICAgIHN0YXRlLmFjdGl2ZSA9IHRydWU7XG4gICAgICBzdGF0ZS5wYXVzZWQgPSBmYWxzZTtcbiAgICAgIHN0YXRlLm5vZGVGb2N1c2VkQmVmb3JlQWN0aXZhdGlvbiA9IGRvYy5hY3RpdmVFbGVtZW50O1xuICAgICAgb25BY3RpdmF0ZSA9PT0gbnVsbCB8fCBvbkFjdGl2YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkFjdGl2YXRlKCk7XG4gICAgICB2YXIgZmluaXNoQWN0aXZhdGlvbiA9IGZ1bmN0aW9uIGZpbmlzaEFjdGl2YXRpb24oKSB7XG4gICAgICAgIGlmIChjaGVja0NhbkZvY3VzVHJhcCkge1xuICAgICAgICAgIHVwZGF0ZVRhYmJhYmxlTm9kZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBhZGRMaXN0ZW5lcnMoKTtcbiAgICAgICAgb25Qb3N0QWN0aXZhdGUgPT09IG51bGwgfHwgb25Qb3N0QWN0aXZhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uUG9zdEFjdGl2YXRlKCk7XG4gICAgICB9O1xuICAgICAgaWYgKGNoZWNrQ2FuRm9jdXNUcmFwKSB7XG4gICAgICAgIGNoZWNrQ2FuRm9jdXNUcmFwKHN0YXRlLmNvbnRhaW5lcnMuY29uY2F0KCkpLnRoZW4oZmluaXNoQWN0aXZhdGlvbiwgZmluaXNoQWN0aXZhdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgZmluaXNoQWN0aXZhdGlvbigpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBkZWFjdGl2YXRlOiBmdW5jdGlvbiBkZWFjdGl2YXRlKGRlYWN0aXZhdGVPcHRpb25zKSB7XG4gICAgICBpZiAoIXN0YXRlLmFjdGl2ZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHZhciBvcHRpb25zID0gX29iamVjdFNwcmVhZDIoe1xuICAgICAgICBvbkRlYWN0aXZhdGU6IGNvbmZpZy5vbkRlYWN0aXZhdGUsXG4gICAgICAgIG9uUG9zdERlYWN0aXZhdGU6IGNvbmZpZy5vblBvc3REZWFjdGl2YXRlLFxuICAgICAgICBjaGVja0NhblJldHVybkZvY3VzOiBjb25maWcuY2hlY2tDYW5SZXR1cm5Gb2N1c1xuICAgICAgfSwgZGVhY3RpdmF0ZU9wdGlvbnMpO1xuICAgICAgY2xlYXJUaW1lb3V0KHN0YXRlLmRlbGF5SW5pdGlhbEZvY3VzVGltZXIpOyAvLyBub29wIGlmIHVuZGVmaW5lZFxuICAgICAgc3RhdGUuZGVsYXlJbml0aWFsRm9jdXNUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgIHJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgc3RhdGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICBzdGF0ZS5wYXVzZWQgPSBmYWxzZTtcbiAgICAgIGFjdGl2ZUZvY3VzVHJhcHMuZGVhY3RpdmF0ZVRyYXAodHJhcFN0YWNrLCB0cmFwKTtcbiAgICAgIHZhciBvbkRlYWN0aXZhdGUgPSBnZXRPcHRpb24ob3B0aW9ucywgJ29uRGVhY3RpdmF0ZScpO1xuICAgICAgdmFyIG9uUG9zdERlYWN0aXZhdGUgPSBnZXRPcHRpb24ob3B0aW9ucywgJ29uUG9zdERlYWN0aXZhdGUnKTtcbiAgICAgIHZhciBjaGVja0NhblJldHVybkZvY3VzID0gZ2V0T3B0aW9uKG9wdGlvbnMsICdjaGVja0NhblJldHVybkZvY3VzJyk7XG4gICAgICB2YXIgcmV0dXJuRm9jdXMgPSBnZXRPcHRpb24ob3B0aW9ucywgJ3JldHVybkZvY3VzJywgJ3JldHVybkZvY3VzT25EZWFjdGl2YXRlJyk7XG4gICAgICBvbkRlYWN0aXZhdGUgPT09IG51bGwgfHwgb25EZWFjdGl2YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkRlYWN0aXZhdGUoKTtcbiAgICAgIHZhciBmaW5pc2hEZWFjdGl2YXRpb24gPSBmdW5jdGlvbiBmaW5pc2hEZWFjdGl2YXRpb24oKSB7XG4gICAgICAgIGRlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAocmV0dXJuRm9jdXMpIHtcbiAgICAgICAgICAgIHRyeUZvY3VzKGdldFJldHVybkZvY3VzTm9kZShzdGF0ZS5ub2RlRm9jdXNlZEJlZm9yZUFjdGl2YXRpb24pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb25Qb3N0RGVhY3RpdmF0ZSA9PT0gbnVsbCB8fCBvblBvc3REZWFjdGl2YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblBvc3REZWFjdGl2YXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIGlmIChyZXR1cm5Gb2N1cyAmJiBjaGVja0NhblJldHVybkZvY3VzKSB7XG4gICAgICAgIGNoZWNrQ2FuUmV0dXJuRm9jdXMoZ2V0UmV0dXJuRm9jdXNOb2RlKHN0YXRlLm5vZGVGb2N1c2VkQmVmb3JlQWN0aXZhdGlvbikpLnRoZW4oZmluaXNoRGVhY3RpdmF0aW9uLCBmaW5pc2hEZWFjdGl2YXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGZpbmlzaERlYWN0aXZhdGlvbigpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBwYXVzZTogZnVuY3Rpb24gcGF1c2UocGF1c2VPcHRpb25zKSB7XG4gICAgICBpZiAoc3RhdGUucGF1c2VkIHx8ICFzdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB2YXIgb25QYXVzZSA9IGdldE9wdGlvbihwYXVzZU9wdGlvbnMsICdvblBhdXNlJyk7XG4gICAgICB2YXIgb25Qb3N0UGF1c2UgPSBnZXRPcHRpb24ocGF1c2VPcHRpb25zLCAnb25Qb3N0UGF1c2UnKTtcbiAgICAgIHN0YXRlLnBhdXNlZCA9IHRydWU7XG4gICAgICBvblBhdXNlID09PSBudWxsIHx8IG9uUGF1c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uUGF1c2UoKTtcbiAgICAgIHJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgb25Qb3N0UGF1c2UgPT09IG51bGwgfHwgb25Qb3N0UGF1c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uUG9zdFBhdXNlKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHVucGF1c2U6IGZ1bmN0aW9uIHVucGF1c2UodW5wYXVzZU9wdGlvbnMpIHtcbiAgICAgIGlmICghc3RhdGUucGF1c2VkIHx8ICFzdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB2YXIgb25VbnBhdXNlID0gZ2V0T3B0aW9uKHVucGF1c2VPcHRpb25zLCAnb25VbnBhdXNlJyk7XG4gICAgICB2YXIgb25Qb3N0VW5wYXVzZSA9IGdldE9wdGlvbih1bnBhdXNlT3B0aW9ucywgJ29uUG9zdFVucGF1c2UnKTtcbiAgICAgIHN0YXRlLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgb25VbnBhdXNlID09PSBudWxsIHx8IG9uVW5wYXVzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25VbnBhdXNlKCk7XG4gICAgICB1cGRhdGVUYWJiYWJsZU5vZGVzKCk7XG4gICAgICBhZGRMaXN0ZW5lcnMoKTtcbiAgICAgIG9uUG9zdFVucGF1c2UgPT09IG51bGwgfHwgb25Qb3N0VW5wYXVzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25Qb3N0VW5wYXVzZSgpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICB1cGRhdGVDb250YWluZXJFbGVtZW50czogZnVuY3Rpb24gdXBkYXRlQ29udGFpbmVyRWxlbWVudHMoY29udGFpbmVyRWxlbWVudHMpIHtcbiAgICAgIHZhciBlbGVtZW50c0FzQXJyYXkgPSBbXS5jb25jYXQoY29udGFpbmVyRWxlbWVudHMpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIHN0YXRlLmNvbnRhaW5lcnMgPSBlbGVtZW50c0FzQXJyYXkubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycgPyBkb2MucXVlcnlTZWxlY3RvcihlbGVtZW50KSA6IGVsZW1lbnQ7XG4gICAgICB9KTtcbiAgICAgIGlmIChzdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgdXBkYXRlVGFiYmFibGVOb2RlcygpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIC8vIGluaXRpYWxpemUgY29udGFpbmVyIGVsZW1lbnRzXG4gIHRyYXAudXBkYXRlQ29udGFpbmVyRWxlbWVudHMoZWxlbWVudHMpO1xuICByZXR1cm4gdHJhcDtcbn07XG5cbmV4cG9ydCB7IGNyZWF0ZUZvY3VzVHJhcCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9jdXMtdHJhcC5lc20uanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5mdW5jdGlvbiBjcmVhdGVUaHVua01pZGRsZXdhcmUoZXh0cmFBcmd1bWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoO1xuICAgIHZhciBnZXRTdGF0ZSA9IF9yZWYuZ2V0U3RhdGU7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24oZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYUFyZ3VtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbnZhciB0aHVuayA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZSgpO1xudGh1bmsud2l0aEV4dHJhQXJndW1lbnQgPSBjcmVhdGVUaHVua01pZGRsZXdhcmU7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHRodW5rOyIsIi8qIVxuKiB0YWJiYWJsZSA2LjEuMVxuKiBAbGljZW5zZSBNSVQsIGh0dHBzOi8vZ2l0aHViLmNvbS9mb2N1cy10cmFwL3RhYmJhYmxlL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiovXG4vLyBOT1RFOiBzZXBhcmF0ZSBgOm5vdCgpYCBzZWxlY3RvcnMgaGFzIGJyb2FkZXIgYnJvd3NlciBzdXBwb3J0IHRoYW4gdGhlIG5ld2VyXG4vLyAgYDpub3QoW2luZXJ0XSwgW2luZXJ0XSAqKWAgKEZlYiAyMDIzKVxuLy8gQ0FSRUZVTDogSlNEb20gZG9lcyBub3Qgc3VwcG9ydCBgOm5vdChbaW5lcnRdICopYCBhcyBhIHNlbGVjdG9yOyB1c2luZyBpdCBjYXVzZXNcbi8vICB0aGUgZW50aXJlIHF1ZXJ5IHRvIGZhaWwsIHJlc3VsdGluZyBpbiBubyBub2RlcyBmb3VuZCwgd2hpY2ggd2lsbCBicmVhayBhIGxvdFxuLy8gIG9mIHRoaW5ncy4uLiBzbyB3ZSBoYXZlIHRvIHJlbHkgb24gSlMgdG8gaWRlbnRpZnkgbm9kZXMgaW5zaWRlIGFuIGluZXJ0IGNvbnRhaW5lclxudmFyIGNhbmRpZGF0ZVNlbGVjdG9ycyA9IFsnaW5wdXQ6bm90KFtpbmVydF0pJywgJ3NlbGVjdDpub3QoW2luZXJ0XSknLCAndGV4dGFyZWE6bm90KFtpbmVydF0pJywgJ2FbaHJlZl06bm90KFtpbmVydF0pJywgJ2J1dHRvbjpub3QoW2luZXJ0XSknLCAnW3RhYmluZGV4XTpub3Qoc2xvdCk6bm90KFtpbmVydF0pJywgJ2F1ZGlvW2NvbnRyb2xzXTpub3QoW2luZXJ0XSknLCAndmlkZW9bY29udHJvbHNdOm5vdChbaW5lcnRdKScsICdbY29udGVudGVkaXRhYmxlXTpub3QoW2NvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCJdKTpub3QoW2luZXJ0XSknLCAnZGV0YWlscz5zdW1tYXJ5OmZpcnN0LW9mLXR5cGU6bm90KFtpbmVydF0pJywgJ2RldGFpbHM6bm90KFtpbmVydF0pJ107XG52YXIgY2FuZGlkYXRlU2VsZWN0b3IgPSAvKiAjX19QVVJFX18gKi9jYW5kaWRhdGVTZWxlY3RvcnMuam9pbignLCcpO1xudmFyIE5vRWxlbWVudCA9IHR5cGVvZiBFbGVtZW50ID09PSAndW5kZWZpbmVkJztcbnZhciBtYXRjaGVzID0gTm9FbGVtZW50ID8gZnVuY3Rpb24gKCkge30gOiBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzIHx8IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcbnZhciBnZXRSb290Tm9kZSA9ICFOb0VsZW1lbnQgJiYgRWxlbWVudC5wcm90b3R5cGUuZ2V0Um9vdE5vZGUgPyBmdW5jdGlvbiAoZWxlbWVudCkge1xuICB2YXIgX2VsZW1lbnQkZ2V0Um9vdE5vZGU7XG4gIHJldHVybiBlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZWxlbWVudCRnZXRSb290Tm9kZSA9IGVsZW1lbnQuZ2V0Um9vdE5vZGUpID09PSBudWxsIHx8IF9lbGVtZW50JGdldFJvb3ROb2RlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZWxlbWVudCRnZXRSb290Tm9kZS5jYWxsKGVsZW1lbnQpO1xufSA6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQub3duZXJEb2N1bWVudDtcbn07XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIG5vZGUgaXMgaW5lcnQgb3IgaW4gYW4gaW5lcnQgYW5jZXN0b3IuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IFtub2RlXVxuICogQHBhcmFtIHtib29sZWFufSBbbG9va1VwXSBJZiB0cnVlIGFuZCBgbm9kZWAgaXMgbm90IGluZXJ0LCBsb29rcyB1cCBhdCBhbmNlc3RvcnMgdG9cbiAqICBzZWUgaWYgYW55IG9mIHRoZW0gYXJlIGluZXJ0LiBJZiBmYWxzZSwgb25seSBgbm9kZWAgaXRzZWxmIGlzIGNvbnNpZGVyZWQuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBpbmVydCBpdHNlbGYgb3IgYnkgd2F5IG9mIGJlaW5nIGluIGFuIGluZXJ0IGFuY2VzdG9yLlxuICogIEZhbHNlIGlmIGBub2RlYCBpcyBmYWxzeS5cbiAqL1xudmFyIGlzSW5lcnQgPSBmdW5jdGlvbiBpc0luZXJ0KG5vZGUsIGxvb2tVcCkge1xuICB2YXIgX25vZGUkZ2V0QXR0cmlidXRlO1xuICBpZiAobG9va1VwID09PSB2b2lkIDApIHtcbiAgICBsb29rVXAgPSB0cnVlO1xuICB9XG4gIC8vIENBUkVGVUw6IEpTRG9tIGRvZXMgbm90IHN1cHBvcnQgaW5lcnQgYXQgYWxsLCBzbyB3ZSBjYW4ndCB1c2UgdGhlIGBIVE1MRWxlbWVudC5pbmVydGBcbiAgLy8gIEpTIEFQSSBwcm9wZXJ0eTsgd2UgaGF2ZSB0byBjaGVjayB0aGUgYXR0cmlidXRlLCB3aGljaCBjYW4gZWl0aGVyIGJlIGVtcHR5IG9yICd0cnVlJztcbiAgLy8gIGlmIGl0J3MgYG51bGxgIChub3Qgc3BlY2lmaWVkKSBvciAnZmFsc2UnLCBpdCdzIGFuIGFjdGl2ZSBlbGVtZW50XG4gIHZhciBpbmVydEF0dCA9IG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9ub2RlJGdldEF0dHJpYnV0ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKSA9PT0gbnVsbCB8fCBfbm9kZSRnZXRBdHRyaWJ1dGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlJGdldEF0dHJpYnV0ZS5jYWxsKG5vZGUsICdpbmVydCcpO1xuICB2YXIgaW5lcnQgPSBpbmVydEF0dCA9PT0gJycgfHwgaW5lcnRBdHQgPT09ICd0cnVlJztcblxuICAvLyBOT1RFOiB0aGlzIGNvdWxkIGFsc28gYmUgaGFuZGxlZCB3aXRoIGBub2RlLm1hdGNoZXMoJ1tpbmVydF0sIDppcyhbaW5lcnRdICopJylgXG4gIC8vICBpZiBpdCB3ZXJlbid0IGZvciBgbWF0Y2hlcygpYCBub3QgYmVpbmcgYSBmdW5jdGlvbiBvbiBzaGFkb3cgcm9vdHM7IHRoZSBmb2xsb3dpbmdcbiAgLy8gIGNvZGUgd29ya3MgZm9yIGFueSBraW5kIG9mIG5vZGVcbiAgLy8gQ0FSRUZVTDogSlNEb20gZG9lcyBub3QgYXBwZWFyIHRvIHN1cHBvcnQgY2VydGFpbiBzZWxlY3RvcnMgbGlrZSBgOm5vdChbaW5lcnRdICopYFxuICAvLyAgc28gaXQgbGlrZWx5IHdvdWxkIG5vdCBzdXBwb3J0IGA6aXMoW2luZXJ0XSAqKWAgZWl0aGVyLi4uXG4gIHZhciByZXN1bHQgPSBpbmVydCB8fCBsb29rVXAgJiYgbm9kZSAmJiBpc0luZXJ0KG5vZGUucGFyZW50Tm9kZSk7IC8vIHJlY3Vyc2l2ZVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSBub2RlJ3MgY29udGVudCBpcyBlZGl0YWJsZS5cbiAqIEBwYXJhbSB7RWxlbWVudH0gW25vZGVdXG4gKiBAcmV0dXJucyBUcnVlIGlmIGl0J3MgY29udGVudC1lZGl0YWJsZTsgZmFsc2UgaWYgaXQncyBub3Qgb3IgYG5vZGVgIGlzIGZhbHN5LlxuICovXG52YXIgaXNDb250ZW50RWRpdGFibGUgPSBmdW5jdGlvbiBpc0NvbnRlbnRFZGl0YWJsZShub2RlKSB7XG4gIHZhciBfbm9kZSRnZXRBdHRyaWJ1dGUyO1xuICAvLyBDQVJFRlVMOiBKU0RvbSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBgSFRNTEVsZW1lbnQuaXNDb250ZW50RWRpdGFibGVgIEFQSSBzbyB3ZSBoYXZlXG4gIC8vICB0byB1c2UgdGhlIGF0dHJpYnV0ZSBkaXJlY3RseSB0byBjaGVjayBmb3IgdGhpcywgd2hpY2ggY2FuIGVpdGhlciBiZSBlbXB0eSBvciAndHJ1ZSc7XG4gIC8vICBpZiBpdCdzIGBudWxsYCAobm90IHNwZWNpZmllZCkgb3IgJ2ZhbHNlJywgaXQncyBhIG5vbi1lZGl0YWJsZSBlbGVtZW50XG4gIHZhciBhdHRWYWx1ZSA9IG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9ub2RlJGdldEF0dHJpYnV0ZTIgPSBub2RlLmdldEF0dHJpYnV0ZSkgPT09IG51bGwgfHwgX25vZGUkZ2V0QXR0cmlidXRlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25vZGUkZ2V0QXR0cmlidXRlMi5jYWxsKG5vZGUsICdjb250ZW50ZWRpdGFibGUnKTtcbiAgcmV0dXJuIGF0dFZhbHVlID09PSAnJyB8fCBhdHRWYWx1ZSA9PT0gJ3RydWUnO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsIGNvbnRhaW5lciB0byBjaGVjayBpblxuICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlQ29udGFpbmVyIGFkZCBjb250YWluZXIgdG8gY2hlY2tcbiAqIEBwYXJhbSB7KG5vZGU6IEVsZW1lbnQpID0+IGJvb2xlYW59IGZpbHRlciBmaWx0ZXIgY2FuZGlkYXRlc1xuICogQHJldHVybnMge0VsZW1lbnRbXX1cbiAqL1xudmFyIGdldENhbmRpZGF0ZXMgPSBmdW5jdGlvbiBnZXRDYW5kaWRhdGVzKGVsLCBpbmNsdWRlQ29udGFpbmVyLCBmaWx0ZXIpIHtcbiAgLy8gZXZlbiBpZiBgaW5jbHVkZUNvbnRhaW5lcj1mYWxzZWAsIHdlIHN0aWxsIGhhdmUgdG8gY2hlY2sgaXQgZm9yIGluZXJ0bmVzcyBiZWNhdXNlXG4gIC8vICBpZiBpdCdzIGluZXJ0LCBhbGwgaXRzIGNoaWxkcmVuIGFyZSBpbmVydFxuICBpZiAoaXNJbmVydChlbCkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgdmFyIGNhbmRpZGF0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoZWwucXVlcnlTZWxlY3RvckFsbChjYW5kaWRhdGVTZWxlY3RvcikpO1xuICBpZiAoaW5jbHVkZUNvbnRhaW5lciAmJiBtYXRjaGVzLmNhbGwoZWwsIGNhbmRpZGF0ZVNlbGVjdG9yKSkge1xuICAgIGNhbmRpZGF0ZXMudW5zaGlmdChlbCk7XG4gIH1cbiAgY2FuZGlkYXRlcyA9IGNhbmRpZGF0ZXMuZmlsdGVyKGZpbHRlcik7XG4gIHJldHVybiBjYW5kaWRhdGVzO1xufTtcblxuLyoqXG4gKiBAY2FsbGJhY2sgR2V0U2hhZG93Um9vdFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IHRvIGNoZWNrIGZvciBzaGFkb3cgcm9vdFxuICogQHJldHVybnMge1NoYWRvd1Jvb3R8Ym9vbGVhbn0gU2hhZG93Um9vdCBpZiBhdmFpbGFibGUgb3IgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIGEgc2hhZG93Um9vdCBpcyBhdHRhY2hlZCBidXQgbm90IGF2YWlsYWJsZS5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBTaGFkb3dSb290RmlsdGVyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHNoYWRvd0hvc3ROb2RlIHRoZSBlbGVtZW50IHdoaWNoIGNvbnRhaW5zIHNoYWRvdyBjb250ZW50XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBhIHNoYWRvdyByb290IGNvdWxkIHBvdGVudGlhbGx5IGNvbnRhaW4gdmFsaWQgY2FuZGlkYXRlcy5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENhbmRpZGF0ZVNjb3BlXG4gKiBAcHJvcGVydHkge0VsZW1lbnR9IHNjb3BlUGFyZW50IGNvbnRhaW5zIGlubmVyIGNhbmRpZGF0ZXNcbiAqIEBwcm9wZXJ0eSB7RWxlbWVudFtdfSBjYW5kaWRhdGVzIGxpc3Qgb2YgY2FuZGlkYXRlcyBmb3VuZCBpbiB0aGUgc2NvcGUgcGFyZW50XG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBJdGVyYXRpdmVPcHRpb25zXG4gKiBAcHJvcGVydHkge0dldFNoYWRvd1Jvb3R8Ym9vbGVhbn0gZ2V0U2hhZG93Um9vdCB0cnVlIGlmIHNoYWRvdyBzdXBwb3J0IGlzIGVuYWJsZWQ7IGZhbHN5IGlmIG5vdDtcbiAqICBpZiBhIGZ1bmN0aW9uLCBpbXBsaWVzIHNoYWRvdyBzdXBwb3J0IGlzIGVuYWJsZWQgYW5kIGVpdGhlciByZXR1cm5zIHRoZSBzaGFkb3cgcm9vdCBvZiBhbiBlbGVtZW50XG4gKiAgb3IgYSBib29sZWFuIHN0YXRpbmcgaWYgaXQgaGFzIGFuIHVuZGlzY2xvc2VkIHNoYWRvdyByb290XG4gKiBAcHJvcGVydHkgeyhub2RlOiBFbGVtZW50KSA9PiBib29sZWFufSBmaWx0ZXIgZmlsdGVyIGNhbmRpZGF0ZXNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZmxhdHRlbiBpZiB0cnVlIHRoZW4gcmVzdWx0IHdpbGwgZmxhdHRlbiBhbnkgQ2FuZGlkYXRlU2NvcGUgaW50byB0aGUgcmV0dXJuZWQgbGlzdFxuICogQHByb3BlcnR5IHtTaGFkb3dSb290RmlsdGVyfSBzaGFkb3dSb290RmlsdGVyIGZpbHRlciBzaGFkb3cgcm9vdHM7XG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnRbXX0gZWxlbWVudHMgbGlzdCBvZiBlbGVtZW50IGNvbnRhaW5lcnMgdG8gbWF0Y2ggY2FuZGlkYXRlcyBmcm9tXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVDb250YWluZXIgYWRkIGNvbnRhaW5lciBsaXN0IHRvIGNoZWNrXG4gKiBAcGFyYW0ge0l0ZXJhdGl2ZU9wdGlvbnN9IG9wdGlvbnNcbiAqIEByZXR1cm5zIHtBcnJheS48RWxlbWVudHxDYW5kaWRhdGVTY29wZT59XG4gKi9cbnZhciBnZXRDYW5kaWRhdGVzSXRlcmF0aXZlbHkgPSBmdW5jdGlvbiBnZXRDYW5kaWRhdGVzSXRlcmF0aXZlbHkoZWxlbWVudHMsIGluY2x1ZGVDb250YWluZXIsIG9wdGlvbnMpIHtcbiAgdmFyIGNhbmRpZGF0ZXMgPSBbXTtcbiAgdmFyIGVsZW1lbnRzVG9DaGVjayA9IEFycmF5LmZyb20oZWxlbWVudHMpO1xuICB3aGlsZSAoZWxlbWVudHNUb0NoZWNrLmxlbmd0aCkge1xuICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNUb0NoZWNrLnNoaWZ0KCk7XG4gICAgaWYgKGlzSW5lcnQoZWxlbWVudCwgZmFsc2UpKSB7XG4gICAgICAvLyBubyBuZWVkIHRvIGxvb2sgdXAgc2luY2Ugd2UncmUgZHJpbGxpbmcgZG93blxuICAgICAgLy8gYW55dGhpbmcgaW5zaWRlIHRoaXMgY29udGFpbmVyIHdpbGwgYWxzbyBiZSBpbmVydFxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdTTE9UJykge1xuICAgICAgLy8gYWRkIHNoYWRvdyBkb20gc2xvdCBzY29wZSAoc2xvdCBpdHNlbGYgY2Fubm90IGJlIGZvY3VzYWJsZSlcbiAgICAgIHZhciBhc3NpZ25lZCA9IGVsZW1lbnQuYXNzaWduZWRFbGVtZW50cygpO1xuICAgICAgdmFyIGNvbnRlbnQgPSBhc3NpZ25lZC5sZW5ndGggPyBhc3NpZ25lZCA6IGVsZW1lbnQuY2hpbGRyZW47XG4gICAgICB2YXIgbmVzdGVkQ2FuZGlkYXRlcyA9IGdldENhbmRpZGF0ZXNJdGVyYXRpdmVseShjb250ZW50LCB0cnVlLCBvcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLmZsYXR0ZW4pIHtcbiAgICAgICAgY2FuZGlkYXRlcy5wdXNoLmFwcGx5KGNhbmRpZGF0ZXMsIG5lc3RlZENhbmRpZGF0ZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgICAgICBzY29wZVBhcmVudDogZWxlbWVudCxcbiAgICAgICAgICBjYW5kaWRhdGVzOiBuZXN0ZWRDYW5kaWRhdGVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjaGVjayBjYW5kaWRhdGUgZWxlbWVudFxuICAgICAgdmFyIHZhbGlkQ2FuZGlkYXRlID0gbWF0Y2hlcy5jYWxsKGVsZW1lbnQsIGNhbmRpZGF0ZVNlbGVjdG9yKTtcbiAgICAgIGlmICh2YWxpZENhbmRpZGF0ZSAmJiBvcHRpb25zLmZpbHRlcihlbGVtZW50KSAmJiAoaW5jbHVkZUNvbnRhaW5lciB8fCAhZWxlbWVudHMuaW5jbHVkZXMoZWxlbWVudCkpKSB7XG4gICAgICAgIGNhbmRpZGF0ZXMucHVzaChlbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gaXRlcmF0ZSBvdmVyIHNoYWRvdyBjb250ZW50IGlmIHBvc3NpYmxlXG4gICAgICB2YXIgc2hhZG93Um9vdCA9IGVsZW1lbnQuc2hhZG93Um9vdCB8fFxuICAgICAgLy8gY2hlY2sgZm9yIGFuIHVuZGlzY2xvc2VkIHNoYWRvd1xuICAgICAgdHlwZW9mIG9wdGlvbnMuZ2V0U2hhZG93Um9vdCA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLmdldFNoYWRvd1Jvb3QoZWxlbWVudCk7XG5cbiAgICAgIC8vIG5vIGluZXJ0IGxvb2sgdXAgYmVjYXVzZSB3ZSdyZSBhbHJlYWR5IGRyaWxsaW5nIGRvd24gYW5kIGNoZWNraW5nIGZvciBpbmVydG5lc3NcbiAgICAgIC8vICBvbiB0aGUgd2F5IGRvd24sIHNvIGFsbCBjb250YWluZXJzIHRvIHRoaXMgcm9vdCBub2RlIHNob3VsZCBoYXZlIGFscmVhZHkgYmVlblxuICAgICAgLy8gIHZldHRlZCBhcyBub24taW5lcnRcbiAgICAgIHZhciB2YWxpZFNoYWRvd1Jvb3QgPSAhaXNJbmVydChzaGFkb3dSb290LCBmYWxzZSkgJiYgKCFvcHRpb25zLnNoYWRvd1Jvb3RGaWx0ZXIgfHwgb3B0aW9ucy5zaGFkb3dSb290RmlsdGVyKGVsZW1lbnQpKTtcbiAgICAgIGlmIChzaGFkb3dSb290ICYmIHZhbGlkU2hhZG93Um9vdCkge1xuICAgICAgICAvLyBhZGQgc2hhZG93IGRvbSBzY29wZSBJSUYgYSBzaGFkb3cgcm9vdCBub2RlIHdhcyBnaXZlbjsgb3RoZXJ3aXNlLCBhbiB1bmRpc2Nsb3NlZFxuICAgICAgICAvLyAgc2hhZG93IGV4aXN0cywgc28gbG9vayBhdCBsaWdodCBkb20gY2hpbGRyZW4gYXMgZmFsbGJhY2sgQlVUIGNyZWF0ZSBhIHNjb3BlIGZvciBhbnlcbiAgICAgICAgLy8gIGNoaWxkIGNhbmRpZGF0ZXMgZm91bmQgYmVjYXVzZSB0aGV5J3JlIGxpa2VseSBzbG90dGVkIGVsZW1lbnRzIChlbGVtZW50cyB0aGF0IGFyZVxuICAgICAgICAvLyAgY2hpbGRyZW4gb2YgdGhlIHdlYiBjb21wb25lbnQgZWxlbWVudCAod2hpY2ggaGFzIHRoZSBzaGFkb3cpLCBpbiB0aGUgbGlnaHQgZG9tLCBidXRcbiAgICAgICAgLy8gIHNsb3R0ZWQgc29tZXdoZXJlIF9pbnNpZGVfIHRoZSB1bmRpc2Nsb3NlZCBzaGFkb3cpIC0tIHRoZSBzY29wZSBpcyBjcmVhdGVkIGJlbG93LFxuICAgICAgICAvLyAgX2FmdGVyXyB3ZSByZXR1cm4gZnJvbSB0aGlzIHJlY3Vyc2l2ZSBjYWxsXG4gICAgICAgIHZhciBfbmVzdGVkQ2FuZGlkYXRlcyA9IGdldENhbmRpZGF0ZXNJdGVyYXRpdmVseShzaGFkb3dSb290ID09PSB0cnVlID8gZWxlbWVudC5jaGlsZHJlbiA6IHNoYWRvd1Jvb3QuY2hpbGRyZW4sIHRydWUsIG9wdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucy5mbGF0dGVuKSB7XG4gICAgICAgICAgY2FuZGlkYXRlcy5wdXNoLmFwcGx5KGNhbmRpZGF0ZXMsIF9uZXN0ZWRDYW5kaWRhdGVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goe1xuICAgICAgICAgICAgc2NvcGVQYXJlbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICBjYW5kaWRhdGVzOiBfbmVzdGVkQ2FuZGlkYXRlc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB0aGVyZSdzIG5vdCBzaGFkb3cgc28ganVzdCBkaWcgaW50byB0aGUgZWxlbWVudCdzIChsaWdodCBkb20pIGNoaWxkcmVuXG4gICAgICAgIC8vICBfX3dpdGhvdXRfXyBnaXZpbmcgdGhlIGVsZW1lbnQgc3BlY2lhbCBzY29wZSB0cmVhdG1lbnRcbiAgICAgICAgZWxlbWVudHNUb0NoZWNrLnVuc2hpZnQuYXBwbHkoZWxlbWVudHNUb0NoZWNrLCBlbGVtZW50LmNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNhbmRpZGF0ZXM7XG59O1xudmFyIGdldFRhYmluZGV4ID0gZnVuY3Rpb24gZ2V0VGFiaW5kZXgobm9kZSwgaXNTY29wZSkge1xuICBpZiAobm9kZS50YWJJbmRleCA8IDApIHtcbiAgICAvLyBpbiBDaHJvbWUsIDxkZXRhaWxzLz4sIDxhdWRpbyBjb250cm9scy8+IGFuZCA8dmlkZW8gY29udHJvbHMvPiBlbGVtZW50cyBnZXQgYSBkZWZhdWx0XG4gICAgLy8gYHRhYkluZGV4YCBvZiAtMSB3aGVuIHRoZSAndGFiaW5kZXgnIGF0dHJpYnV0ZSBpc24ndCBzcGVjaWZpZWQgaW4gdGhlIERPTSxcbiAgICAvLyB5ZXQgdGhleSBhcmUgc3RpbGwgcGFydCBvZiB0aGUgcmVndWxhciB0YWIgb3JkZXI7IGluIEZGLCB0aGV5IGdldCBhIGRlZmF1bHRcbiAgICAvLyBgdGFiSW5kZXhgIG9mIDA7IHNpbmNlIENocm9tZSBzdGlsbCBwdXRzIHRob3NlIGVsZW1lbnRzIGluIHRoZSByZWd1bGFyIHRhYlxuICAgIC8vIG9yZGVyLCBjb25zaWRlciB0aGVpciB0YWIgaW5kZXggdG8gYmUgMC5cbiAgICAvLyBBbHNvIGJyb3dzZXJzIGRvIG5vdCByZXR1cm4gYHRhYkluZGV4YCBjb3JyZWN0bHkgZm9yIGNvbnRlbnRFZGl0YWJsZSBub2RlcztcbiAgICAvLyBzbyBpZiB0aGV5IGRvbid0IGhhdmUgYSB0YWJpbmRleCBhdHRyaWJ1dGUgc3BlY2lmaWNhbGx5IHNldCwgYXNzdW1lIGl0J3MgMC5cbiAgICAvL1xuICAgIC8vIGlzU2NvcGUgaXMgcG9zaXRpdmUgZm9yIGN1c3RvbSBlbGVtZW50IHdpdGggc2hhZG93IHJvb3Qgb3Igc2xvdCB0aGF0IGJ5IGRlZmF1bHRcbiAgICAvLyBoYXZlIHRhYkluZGV4IC0xLCBidXQgbmVlZCB0byBiZSBzb3J0ZWQgYnkgZG9jdW1lbnQgb3JkZXIgaW4gb3JkZXIgZm9yIHRoZWlyXG4gICAgLy8gY29udGVudCB0byBiZSBpbnNlcnRlZCBpbiB0aGUgY29ycmVjdCBwb3NpdGlvblxuICAgIGlmICgoaXNTY29wZSB8fCAvXihBVURJT3xWSURFT3xERVRBSUxTKSQvLnRlc3Qobm9kZS50YWdOYW1lKSB8fCBpc0NvbnRlbnRFZGl0YWJsZShub2RlKSkgJiYgaXNOYU4ocGFyc2VJbnQobm9kZS5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JyksIDEwKSkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9kZS50YWJJbmRleDtcbn07XG52YXIgc29ydE9yZGVyZWRUYWJiYWJsZXMgPSBmdW5jdGlvbiBzb3J0T3JkZXJlZFRhYmJhYmxlcyhhLCBiKSB7XG4gIHJldHVybiBhLnRhYkluZGV4ID09PSBiLnRhYkluZGV4ID8gYS5kb2N1bWVudE9yZGVyIC0gYi5kb2N1bWVudE9yZGVyIDogYS50YWJJbmRleCAtIGIudGFiSW5kZXg7XG59O1xudmFyIGlzSW5wdXQgPSBmdW5jdGlvbiBpc0lucHV0KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUudGFnTmFtZSA9PT0gJ0lOUFVUJztcbn07XG52YXIgaXNIaWRkZW5JbnB1dCA9IGZ1bmN0aW9uIGlzSGlkZGVuSW5wdXQobm9kZSkge1xuICByZXR1cm4gaXNJbnB1dChub2RlKSAmJiBub2RlLnR5cGUgPT09ICdoaWRkZW4nO1xufTtcbnZhciBpc0RldGFpbHNXaXRoU3VtbWFyeSA9IGZ1bmN0aW9uIGlzRGV0YWlsc1dpdGhTdW1tYXJ5KG5vZGUpIHtcbiAgdmFyIHIgPSBub2RlLnRhZ05hbWUgPT09ICdERVRBSUxTJyAmJiBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkobm9kZS5jaGlsZHJlbikuc29tZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICByZXR1cm4gY2hpbGQudGFnTmFtZSA9PT0gJ1NVTU1BUlknO1xuICB9KTtcbiAgcmV0dXJuIHI7XG59O1xudmFyIGdldENoZWNrZWRSYWRpbyA9IGZ1bmN0aW9uIGdldENoZWNrZWRSYWRpbyhub2RlcywgZm9ybSkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG5vZGVzW2ldLmNoZWNrZWQgJiYgbm9kZXNbaV0uZm9ybSA9PT0gZm9ybSkge1xuICAgICAgcmV0dXJuIG5vZGVzW2ldO1xuICAgIH1cbiAgfVxufTtcbnZhciBpc1RhYmJhYmxlUmFkaW8gPSBmdW5jdGlvbiBpc1RhYmJhYmxlUmFkaW8obm9kZSkge1xuICBpZiAoIW5vZGUubmFtZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHZhciByYWRpb1Njb3BlID0gbm9kZS5mb3JtIHx8IGdldFJvb3ROb2RlKG5vZGUpO1xuICB2YXIgcXVlcnlSYWRpb3MgPSBmdW5jdGlvbiBxdWVyeVJhZGlvcyhuYW1lKSB7XG4gICAgcmV0dXJuIHJhZGlvU2NvcGUucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdW25hbWU9XCInICsgbmFtZSArICdcIl0nKTtcbiAgfTtcbiAgdmFyIHJhZGlvU2V0O1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5DU1MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuQ1NTLmVzY2FwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJhZGlvU2V0ID0gcXVlcnlSYWRpb3Mod2luZG93LkNTUy5lc2NhcGUobm9kZS5uYW1lKSk7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHtcbiAgICAgIHJhZGlvU2V0ID0gcXVlcnlSYWRpb3Mobm9kZS5uYW1lKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmVycm9yKCdMb29rcyBsaWtlIHlvdSBoYXZlIGEgcmFkaW8gYnV0dG9uIHdpdGggYSBuYW1lIGF0dHJpYnV0ZSBjb250YWluaW5nIGludmFsaWQgQ1NTIHNlbGVjdG9yIGNoYXJhY3RlcnMgYW5kIG5lZWQgdGhlIENTUy5lc2NhcGUgcG9seWZpbGw6ICVzJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICB2YXIgY2hlY2tlZCA9IGdldENoZWNrZWRSYWRpbyhyYWRpb1NldCwgbm9kZS5mb3JtKTtcbiAgcmV0dXJuICFjaGVja2VkIHx8IGNoZWNrZWQgPT09IG5vZGU7XG59O1xudmFyIGlzUmFkaW8gPSBmdW5jdGlvbiBpc1JhZGlvKG5vZGUpIHtcbiAgcmV0dXJuIGlzSW5wdXQobm9kZSkgJiYgbm9kZS50eXBlID09PSAncmFkaW8nO1xufTtcbnZhciBpc05vblRhYmJhYmxlUmFkaW8gPSBmdW5jdGlvbiBpc05vblRhYmJhYmxlUmFkaW8obm9kZSkge1xuICByZXR1cm4gaXNSYWRpbyhub2RlKSAmJiAhaXNUYWJiYWJsZVJhZGlvKG5vZGUpO1xufTtcblxuLy8gZGV0ZXJtaW5lcyBpZiBhIG5vZGUgaXMgdWx0aW1hdGVseSBhdHRhY2hlZCB0byB0aGUgd2luZG93J3MgZG9jdW1lbnRcbnZhciBpc05vZGVBdHRhY2hlZCA9IGZ1bmN0aW9uIGlzTm9kZUF0dGFjaGVkKG5vZGUpIHtcbiAgdmFyIF9ub2RlUm9vdDtcbiAgLy8gVGhlIHJvb3Qgbm9kZSBpcyB0aGUgc2hhZG93IHJvb3QgaWYgdGhlIG5vZGUgaXMgaW4gYSBzaGFkb3cgRE9NOyBzb21lIGRvY3VtZW50IG90aGVyd2lzZVxuICAvLyAgKGJ1dCBOT1QgX3RoZV8gZG9jdW1lbnQ7IHNlZSBzZWNvbmQgJ0lmJyBjb21tZW50IGJlbG93IGZvciBtb3JlKS5cbiAgLy8gSWYgcm9vdE5vZGUgaXMgc2hhZG93IHJvb3QsIGl0J2xsIGhhdmUgYSBob3N0LCB3aGljaCBpcyB0aGUgZWxlbWVudCB0byB3aGljaCB0aGUgc2hhZG93XG4gIC8vICBpcyBhdHRhY2hlZCwgYW5kIHRoZSBvbmUgd2UgbmVlZCB0byBjaGVjayBpZiBpdCdzIGluIHRoZSBkb2N1bWVudCBvciBub3QgKGJlY2F1c2UgdGhlXG4gIC8vICBzaGFkb3csIGFuZCBhbGwgbm9kZXMgaXQgY29udGFpbnMsIGlzIG5ldmVyIGNvbnNpZGVyZWQgaW4gdGhlIGRvY3VtZW50IHNpbmNlIHNoYWRvd3NcbiAgLy8gIGJlaGF2ZSBsaWtlIHNlbGYtY29udGFpbmVkIERPTXM7IGJ1dCBpZiB0aGUgc2hhZG93J3MgSE9TVCwgd2hpY2ggaXMgcGFydCBvZiB0aGUgZG9jdW1lbnQsXG4gIC8vICBpcyBoaWRkZW4sIG9yIGlzIG5vdCBpbiB0aGUgZG9jdW1lbnQgaXRzZWxmIGJ1dCBpcyBkZXRhY2hlZCwgaXQgd2lsbCBhZmZlY3QgdGhlIHNoYWRvdydzXG4gIC8vICB2aXNpYmlsaXR5LCBpbmNsdWRpbmcgYWxsIHRoZSBub2RlcyBpdCBjb250YWlucykuIFRoZSBob3N0IGNvdWxkIGJlIGFueSBub3JtYWwgbm9kZSxcbiAgLy8gIG9yIGEgY3VzdG9tIGVsZW1lbnQgKGkuZS4gd2ViIGNvbXBvbmVudCkuIEVpdGhlciB3YXksIHRoYXQncyB0aGUgb25lIHRoYXQgaXMgY29uc2lkZXJlZFxuICAvLyAgcGFydCBvZiB0aGUgZG9jdW1lbnQsIG5vdCB0aGUgc2hhZG93IHJvb3QsIG5vciBhbnkgb2YgaXRzIGNoaWxkcmVuIChpLmUuIHRoZSBub2RlIGJlaW5nXG4gIC8vICB0ZXN0ZWQpLlxuICAvLyBUbyBmdXJ0aGVyIGNvbXBsaWNhdGUgdGhpbmdzLCB3ZSBoYXZlIHRvIGxvb2sgYWxsIHRoZSB3YXkgdXAgdW50aWwgd2UgZmluZCBhIHNoYWRvdyBIT1NUXG4gIC8vICB0aGF0IGlzIGF0dGFjaGVkIChvciBmaW5kIG5vbmUpIGJlY2F1c2UgdGhlIG5vZGUgbWlnaHQgYmUgaW4gbmVzdGVkIHNoYWRvd3MuLi5cbiAgLy8gSWYgcm9vdE5vZGUgaXMgbm90IGEgc2hhZG93IHJvb3QsIGl0IHdvbid0IGhhdmUgYSBob3N0LCBhbmQgc28gcm9vdE5vZGUgc2hvdWxkIGJlIHRoZVxuICAvLyAgZG9jdW1lbnQgKHBlciB0aGUgZG9jcykgYW5kIHdoaWxlIGl0J3MgYSBEb2N1bWVudC10eXBlIG9iamVjdCwgdGhhdCBkb2N1bWVudCBkb2VzIG5vdFxuICAvLyAgYXBwZWFyIHRvIGJlIHRoZSBzYW1lIGFzIHRoZSBub2RlJ3MgYG93bmVyRG9jdW1lbnRgIGZvciBzb21lIHJlYXNvbiwgc28gaXQncyBzYWZlclxuICAvLyAgdG8gaWdub3JlIHRoZSByb290Tm9kZSBhdCB0aGlzIHBvaW50LCBhbmQgdXNlIGBub2RlLm93bmVyRG9jdW1lbnRgLiBPdGhlcndpc2UsXG4gIC8vICB1c2luZyBgcm9vdE5vZGUuY29udGFpbnMobm9kZSlgIHdpbGwgX2Fsd2F5c18gYmUgdHJ1ZSB3ZSdsbCBnZXQgZmFsc2UtcG9zaXRpdmVzIHdoZW5cbiAgLy8gIG5vZGUgaXMgYWN0dWFsbHkgZGV0YWNoZWQuXG4gIC8vIE5PVEU6IElmIGBub2RlUm9vdEhvc3RgIG9yIGBub2RlYCBoYXBwZW5zIHRvIGJlIHRoZSBgZG9jdW1lbnRgIGl0c2VsZiAod2hpY2ggaXMgcG9zc2libGVcbiAgLy8gIGlmIGEgdGFiYmFibGUvZm9jdXNhYmxlIG5vZGUgd2FzIHF1aWNrbHkgYWRkZWQgdG8gdGhlIERPTSwgZm9jdXNlZCwgYW5kIHRoZW4gcmVtb3ZlZFxuICAvLyAgZnJvbSB0aGUgRE9NIGFzIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9mb2N1cy10cmFwL2ZvY3VzLXRyYXAtcmVhY3QvaXNzdWVzLzkwNSksIHRoZW5cbiAgLy8gIGBvd25lckRvY3VtZW50YCB3aWxsIGJlIGBudWxsYCwgaGVuY2UgdGhlIG9wdGlvbmFsIGNoYWluaW5nIG9uIGl0LlxuICB2YXIgbm9kZVJvb3QgPSBub2RlICYmIGdldFJvb3ROb2RlKG5vZGUpO1xuICB2YXIgbm9kZVJvb3RIb3N0ID0gKF9ub2RlUm9vdCA9IG5vZGVSb290KSA9PT0gbnVsbCB8fCBfbm9kZVJvb3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlUm9vdC5ob3N0O1xuXG4gIC8vIGluIHNvbWUgY2FzZXMsIGEgZGV0YWNoZWQgbm9kZSB3aWxsIHJldHVybiBpdHNlbGYgYXMgdGhlIHJvb3QgaW5zdGVhZCBvZiBhIGRvY3VtZW50IG9yXG4gIC8vICBzaGFkb3cgcm9vdCBvYmplY3QsIGluIHdoaWNoIGNhc2UsIHdlIHNob3VsZG4ndCB0cnkgdG8gbG9vayBmdXJ0aGVyIHVwIHRoZSBob3N0IGNoYWluXG4gIHZhciBhdHRhY2hlZCA9IGZhbHNlO1xuICBpZiAobm9kZVJvb3QgJiYgbm9kZVJvb3QgIT09IG5vZGUpIHtcbiAgICB2YXIgX25vZGVSb290SG9zdCwgX25vZGVSb290SG9zdCRvd25lckRvLCBfbm9kZSRvd25lckRvY3VtZW50O1xuICAgIGF0dGFjaGVkID0gISEoKF9ub2RlUm9vdEhvc3QgPSBub2RlUm9vdEhvc3QpICE9PSBudWxsICYmIF9ub2RlUm9vdEhvc3QgIT09IHZvaWQgMCAmJiAoX25vZGVSb290SG9zdCRvd25lckRvID0gX25vZGVSb290SG9zdC5vd25lckRvY3VtZW50KSAhPT0gbnVsbCAmJiBfbm9kZVJvb3RIb3N0JG93bmVyRG8gIT09IHZvaWQgMCAmJiBfbm9kZVJvb3RIb3N0JG93bmVyRG8uY29udGFpbnMobm9kZVJvb3RIb3N0KSB8fCBub2RlICE9PSBudWxsICYmIG5vZGUgIT09IHZvaWQgMCAmJiAoX25vZGUkb3duZXJEb2N1bWVudCA9IG5vZGUub3duZXJEb2N1bWVudCkgIT09IG51bGwgJiYgX25vZGUkb3duZXJEb2N1bWVudCAhPT0gdm9pZCAwICYmIF9ub2RlJG93bmVyRG9jdW1lbnQuY29udGFpbnMobm9kZSkpO1xuICAgIHdoaWxlICghYXR0YWNoZWQgJiYgbm9kZVJvb3RIb3N0KSB7XG4gICAgICB2YXIgX25vZGVSb290MiwgX25vZGVSb290SG9zdDIsIF9ub2RlUm9vdEhvc3QyJG93bmVyRDtcbiAgICAgIC8vIHNpbmNlIGl0J3Mgbm90IGF0dGFjaGVkIGFuZCB3ZSBoYXZlIGEgcm9vdCBob3N0LCB0aGUgbm9kZSBNVVNUIGJlIGluIGEgbmVzdGVkIHNoYWRvdyBET00sXG4gICAgICAvLyAgd2hpY2ggbWVhbnMgd2UgbmVlZCB0byBnZXQgdGhlIGhvc3QncyBob3N0IGFuZCBjaGVjayBpZiB0aGF0IHBhcmVudCBob3N0IGlzIGNvbnRhaW5lZFxuICAgICAgLy8gIGluIChpLmUuIGF0dGFjaGVkIHRvKSB0aGUgZG9jdW1lbnRcbiAgICAgIG5vZGVSb290ID0gZ2V0Um9vdE5vZGUobm9kZVJvb3RIb3N0KTtcbiAgICAgIG5vZGVSb290SG9zdCA9IChfbm9kZVJvb3QyID0gbm9kZVJvb3QpID09PSBudWxsIHx8IF9ub2RlUm9vdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlUm9vdDIuaG9zdDtcbiAgICAgIGF0dGFjaGVkID0gISEoKF9ub2RlUm9vdEhvc3QyID0gbm9kZVJvb3RIb3N0KSAhPT0gbnVsbCAmJiBfbm9kZVJvb3RIb3N0MiAhPT0gdm9pZCAwICYmIChfbm9kZVJvb3RIb3N0MiRvd25lckQgPSBfbm9kZVJvb3RIb3N0Mi5vd25lckRvY3VtZW50KSAhPT0gbnVsbCAmJiBfbm9kZVJvb3RIb3N0MiRvd25lckQgIT09IHZvaWQgMCAmJiBfbm9kZVJvb3RIb3N0MiRvd25lckQuY29udGFpbnMobm9kZVJvb3RIb3N0KSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBhdHRhY2hlZDtcbn07XG52YXIgaXNaZXJvQXJlYSA9IGZ1bmN0aW9uIGlzWmVyb0FyZWEobm9kZSkge1xuICB2YXIgX25vZGUkZ2V0Qm91bmRpbmdDbGllID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICB3aWR0aCA9IF9ub2RlJGdldEJvdW5kaW5nQ2xpZS53aWR0aCxcbiAgICBoZWlnaHQgPSBfbm9kZSRnZXRCb3VuZGluZ0NsaWUuaGVpZ2h0O1xuICByZXR1cm4gd2lkdGggPT09IDAgJiYgaGVpZ2h0ID09PSAwO1xufTtcbnZhciBpc0hpZGRlbiA9IGZ1bmN0aW9uIGlzSGlkZGVuKG5vZGUsIF9yZWYpIHtcbiAgdmFyIGRpc3BsYXlDaGVjayA9IF9yZWYuZGlzcGxheUNoZWNrLFxuICAgIGdldFNoYWRvd1Jvb3QgPSBfcmVmLmdldFNoYWRvd1Jvb3Q7XG4gIC8vIE5PVEU6IHZpc2liaWxpdHkgd2lsbCBiZSBgdW5kZWZpbmVkYCBpZiBub2RlIGlzIGRldGFjaGVkIGZyb20gdGhlIGRvY3VtZW50XG4gIC8vICAoc2VlIG5vdGVzIGFib3V0IHRoaXMgZnVydGhlciBkb3duKSwgd2hpY2ggbWVhbnMgd2Ugd2lsbCBjb25zaWRlciBpdCB2aXNpYmxlXG4gIC8vICAodGhpcyBpcyBsZWdhY3kgYmVoYXZpb3IgZnJvbSBhIHZlcnkgbG9uZyB3YXkgYmFjaylcbiAgLy8gTk9URTogd2UgY2hlY2sgdGhpcyByZWdhcmRsZXNzIG9mIGBkaXNwbGF5Q2hlY2s9XCJub25lXCJgIGJlY2F1c2UgdGhpcyBpcyBhXG4gIC8vICBfdmlzaWJpbGl0eV8gY2hlY2ssIG5vdCBhIF9kaXNwbGF5XyBjaGVja1xuICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShub2RlKS52aXNpYmlsaXR5ID09PSAnaGlkZGVuJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHZhciBpc0RpcmVjdFN1bW1hcnkgPSBtYXRjaGVzLmNhbGwobm9kZSwgJ2RldGFpbHM+c3VtbWFyeTpmaXJzdC1vZi10eXBlJyk7XG4gIHZhciBub2RlVW5kZXJEZXRhaWxzID0gaXNEaXJlY3RTdW1tYXJ5ID8gbm9kZS5wYXJlbnRFbGVtZW50IDogbm9kZTtcbiAgaWYgKG1hdGNoZXMuY2FsbChub2RlVW5kZXJEZXRhaWxzLCAnZGV0YWlsczpub3QoW29wZW5dKSAqJykpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoIWRpc3BsYXlDaGVjayB8fCBkaXNwbGF5Q2hlY2sgPT09ICdmdWxsJyB8fCBkaXNwbGF5Q2hlY2sgPT09ICdsZWdhY3ktZnVsbCcpIHtcbiAgICBpZiAodHlwZW9mIGdldFNoYWRvd1Jvb3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIGZpZ3VyZSBvdXQgaWYgd2Ugc2hvdWxkIGNvbnNpZGVyIHRoZSBub2RlIHRvIGJlIGluIGFuIHVuZGlzY2xvc2VkIHNoYWRvdyBhbmQgdXNlIHRoZVxuICAgICAgLy8gICdub24temVyby1hcmVhJyBmYWxsYmFja1xuICAgICAgdmFyIG9yaWdpbmFsTm9kZSA9IG5vZGU7XG4gICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IG5vZGUucGFyZW50RWxlbWVudDtcbiAgICAgICAgdmFyIHJvb3ROb2RlID0gZ2V0Um9vdE5vZGUobm9kZSk7XG4gICAgICAgIGlmIChwYXJlbnRFbGVtZW50ICYmICFwYXJlbnRFbGVtZW50LnNoYWRvd1Jvb3QgJiYgZ2V0U2hhZG93Um9vdChwYXJlbnRFbGVtZW50KSA9PT0gdHJ1ZSAvLyBjaGVjayBpZiB0aGVyZSdzIGFuIHVuZGlzY2xvc2VkIHNoYWRvd1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBub2RlIGhhcyBhbiB1bmRpc2Nsb3NlZCBzaGFkb3cgd2hpY2ggbWVhbnMgd2UgY2FuIG9ubHkgdHJlYXQgaXQgYXMgYSBibGFjayBib3gsIHNvIHdlXG4gICAgICAgICAgLy8gIGZhbGwgYmFjayB0byBhIG5vbi16ZXJvLWFyZWEgdGVzdFxuICAgICAgICAgIHJldHVybiBpc1plcm9BcmVhKG5vZGUpO1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUuYXNzaWduZWRTbG90KSB7XG4gICAgICAgICAgLy8gaXRlcmF0ZSB1cCBzbG90XG4gICAgICAgICAgbm9kZSA9IG5vZGUuYXNzaWduZWRTbG90O1xuICAgICAgICB9IGVsc2UgaWYgKCFwYXJlbnRFbGVtZW50ICYmIHJvb3ROb2RlICE9PSBub2RlLm93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgICAvLyBjcm9zcyBzaGFkb3cgYm91bmRhcnlcbiAgICAgICAgICBub2RlID0gcm9vdE5vZGUuaG9zdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBpdGVyYXRlIHVwIG5vcm1hbCBkb21cbiAgICAgICAgICBub2RlID0gcGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbm9kZSA9IG9yaWdpbmFsTm9kZTtcbiAgICB9XG4gICAgLy8gZWxzZSwgYGdldFNoYWRvd1Jvb3RgIG1pZ2h0IGJlIHRydWUsIGJ1dCBhbGwgdGhhdCBkb2VzIGlzIGVuYWJsZSBzaGFkb3cgRE9NIHN1cHBvcnRcbiAgICAvLyAgKGkuZS4gaXQgZG9lcyBub3QgYWxzbyBwcmVzdW1lIHRoYXQgYWxsIG5vZGVzIG1pZ2h0IGhhdmUgdW5kaXNjbG9zZWQgc2hhZG93cyk7IG9yXG4gICAgLy8gIGl0IG1pZ2h0IGJlIGEgZmFsc3kgdmFsdWUsIHdoaWNoIG1lYW5zIHNoYWRvdyBET00gc3VwcG9ydCBpcyBkaXNhYmxlZFxuXG4gICAgLy8gU2luY2Ugd2UgZGlkbid0IGZpbmQgaXQgc2l0dGluZyBpbiBhbiB1bmRpc2Nsb3NlZCBzaGFkb3cgKG9yIHNoYWRvd3MgYXJlIGRpc2FibGVkKVxuICAgIC8vICBub3cgd2UgY2FuIGp1c3QgdGVzdCB0byBzZWUgaWYgaXQgd291bGQgbm9ybWFsbHkgYmUgdmlzaWJsZSBvciBub3QsIHByb3ZpZGVkIGl0J3NcbiAgICAvLyAgYXR0YWNoZWQgdG8gdGhlIG1haW4gZG9jdW1lbnQuXG4gICAgLy8gTk9URTogV2UgbXVzdCBjb25zaWRlciBjYXNlIHdoZXJlIG5vZGUgaXMgaW5zaWRlIGEgc2hhZG93IERPTSBhbmQgZ2l2ZW4gZGlyZWN0bHkgdG9cbiAgICAvLyAgYGlzVGFiYmFibGUoKWAgb3IgYGlzRm9jdXNhYmxlKClgIC0tIHJlZ2FyZGxlc3Mgb2YgYGdldFNoYWRvd1Jvb3RgIG9wdGlvbiBzZXR0aW5nLlxuXG4gICAgaWYgKGlzTm9kZUF0dGFjaGVkKG5vZGUpKSB7XG4gICAgICAvLyB0aGlzIHdvcmtzIHdoZXJldmVyIHRoZSBub2RlIGlzOiBpZiB0aGVyZSdzIGF0IGxlYXN0IG9uZSBjbGllbnQgcmVjdCwgaXQnc1xuICAgICAgLy8gIHNvbWVob3cgZGlzcGxheWVkOyBpdCBhbHNvIGNvdmVycyB0aGUgQ1NTICdkaXNwbGF5OiBjb250ZW50cycgY2FzZSB3aGVyZSB0aGVcbiAgICAgIC8vICBub2RlIGl0c2VsZiBpcyBoaWRkZW4gaW4gcGxhY2Ugb2YgaXRzIGNvbnRlbnRzOyBhbmQgdGhlcmUncyBubyBuZWVkIHRvIHNlYXJjaFxuICAgICAgLy8gIHVwIHRoZSBoaWVyYXJjaHkgZWl0aGVyXG4gICAgICByZXR1cm4gIW5vZGUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gRWxzZSwgdGhlIG5vZGUgaXNuJ3QgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50LCB3aGljaCBtZWFucyB0aGUgYGdldENsaWVudFJlY3RzKClgXG4gICAgLy8gIEFQSSB3aWxsIF9fYWx3YXlzX18gcmV0dXJuIHplcm8gcmVjdHMgKHRoaXMgY2FuIGhhcHBlbiwgZm9yIGV4YW1wbGUsIGlmIFJlYWN0XG4gICAgLy8gIGlzIHVzZWQgdG8gcmVuZGVyIG5vZGVzIG9udG8gYSBkZXRhY2hlZCB0cmVlLCBhcyBjb25maXJtZWQgaW4gdGhpcyB0aHJlYWQ6XG4gICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvOTExNyNpc3N1ZWNvbW1lbnQtMjg0MjI4ODcwKVxuICAgIC8vXG4gICAgLy8gSXQgYWxzbyBtZWFucyB0aGF0IGV2ZW4gd2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSkuZGlzcGxheSB3aWxsIHJldHVybiBgdW5kZWZpbmVkYFxuICAgIC8vICBiZWNhdXNlIHN0eWxlcyBhcmUgb25seSBjb21wdXRlZCBmb3Igbm9kZXMgdGhhdCBhcmUgaW4gdGhlIGRvY3VtZW50LlxuICAgIC8vXG4gICAgLy8gTk9URTogVEhJUyBIQVMgQkVFTiBUSEUgQ0FTRSBGT1IgWUVBUlMuIEl0IGlzIG5vdCBuZXcsIG5vciBpcyBpdCBjYXVzZWQgYnkgdGFiYmFibGVcbiAgICAvLyAgc29tZWhvdy4gVGhvdWdoIGl0IHdhcyBuZXZlciBzdGF0ZWQgb2ZmaWNpYWxseSwgYW55b25lIHdobyBoYXMgZXZlciB1c2VkIHRhYmJhYmxlXG4gICAgLy8gIEFQSXMgb24gbm9kZXMgaW4gZGV0YWNoZWQgY29udGFpbmVycyBoYXMgYWN0dWFsbHkgaW1wbGljaXRseSB1c2VkIHRhYmJhYmxlIGluIHdoYXRcbiAgICAvLyAgd2FzIGxhdGVyIChhcyBvZiB2NS4yLjAgb24gQXByIDksIDIwMjEpIGNhbGxlZCBgZGlzcGxheUNoZWNrPVwibm9uZVwiYCBtb2RlIC0tIGVzc2VudGlhbGx5XG4gICAgLy8gIGNvbnNpZGVyaW5nIF9fZXZlcnl0aGluZ19fIHRvIGJlIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgaW5uYWJpbGl0eSB0byBkZXRlcm1pbmUgc3R5bGVzLlxuICAgIC8vXG4gICAgLy8gdjYuMC4wOiBBcyBvZiB0aGlzIG1ham9yIHJlbGVhc2UsIHRoZSBkZWZhdWx0ICdmdWxsJyBvcHRpb24gX19ubyBsb25nZXIgdHJlYXRzIGRldGFjaGVkXG4gICAgLy8gIG5vZGVzIGFzIHZpc2libGUgd2l0aCB0aGUgJ25vbmUnIGZhbGxiYWNrLl9fXG4gICAgaWYgKGRpc3BsYXlDaGVjayAhPT0gJ2xlZ2FjeS1mdWxsJykge1xuICAgICAgcmV0dXJuIHRydWU7IC8vIGhpZGRlblxuICAgIH1cbiAgICAvLyBlbHNlLCBmYWxsYmFjayB0byAnbm9uZScgbW9kZSBhbmQgY29uc2lkZXIgdGhlIG5vZGUgdmlzaWJsZVxuICB9IGVsc2UgaWYgKGRpc3BsYXlDaGVjayA9PT0gJ25vbi16ZXJvLWFyZWEnKSB7XG4gICAgLy8gTk9URTogRXZlbiB0aG91Z2ggdGhpcyB0ZXN0cyB0aGF0IHRoZSBub2RlJ3MgY2xpZW50IHJlY3QgaXMgbm9uLXplcm8gdG8gZGV0ZXJtaW5lXG4gICAgLy8gIHdoZXRoZXIgaXQncyBkaXNwbGF5ZWQsIGFuZCB0aGF0IGEgZGV0YWNoZWQgbm9kZSB3aWxsIF9fYWx3YXlzX18gaGF2ZSBhIHplcm8tYXJlYVxuICAgIC8vICBjbGllbnQgcmVjdCwgd2UgZG9uJ3Qgc3BlY2lhbC1jYXNlIGZvciB3aGV0aGVyIHRoZSBub2RlIGlzIGF0dGFjaGVkIG9yIG5vdC4gSW5cbiAgICAvLyAgdGhpcyBtb2RlLCB3ZSBkbyB3YW50IHRvIGNvbnNpZGVyIG5vZGVzIHRoYXQgaGF2ZSBhIHplcm8gYXJlYSB0byBiZSBoaWRkZW4gYXQgYWxsXG4gICAgLy8gIHRpbWVzLCBhbmQgdGhhdCBpbmNsdWRlcyBhdHRhY2hlZCBvciBub3QuXG4gICAgcmV0dXJuIGlzWmVyb0FyZWEobm9kZSk7XG4gIH1cblxuICAvLyB2aXNpYmxlLCBhcyBmYXIgYXMgd2UgY2FuIHRlbGwsIG9yIHBlciBjdXJyZW50IGBkaXNwbGF5Q2hlY2s9bm9uZWAgbW9kZSwgd2UgYXNzdW1lXG4gIC8vICBpdCdzIHZpc2libGVcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLy8gZm9ybSBmaWVsZHMgKG5lc3RlZCkgaW5zaWRlIGEgZGlzYWJsZWQgZmllbGRzZXQgYXJlIG5vdCBmb2N1c2FibGUvdGFiYmFibGVcbi8vICB1bmxlc3MgdGhleSBhcmUgaW4gdGhlIF9maXJzdF8gPGxlZ2VuZD4gZWxlbWVudCBvZiB0aGUgdG9wLW1vc3QgZGlzYWJsZWRcbi8vICBmaWVsZHNldFxudmFyIGlzRGlzYWJsZWRGcm9tRmllbGRzZXQgPSBmdW5jdGlvbiBpc0Rpc2FibGVkRnJvbUZpZWxkc2V0KG5vZGUpIHtcbiAgaWYgKC9eKElOUFVUfEJVVFRPTnxTRUxFQ1R8VEVYVEFSRUEpJC8udGVzdChub2RlLnRhZ05hbWUpKSB7XG4gICAgdmFyIHBhcmVudE5vZGUgPSBub2RlLnBhcmVudEVsZW1lbnQ7XG4gICAgLy8gY2hlY2sgaWYgYG5vZGVgIGlzIGNvbnRhaW5lZCBpbiBhIGRpc2FibGVkIDxmaWVsZHNldD5cbiAgICB3aGlsZSAocGFyZW50Tm9kZSkge1xuICAgICAgaWYgKHBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ0ZJRUxEU0VUJyAmJiBwYXJlbnROb2RlLmRpc2FibGVkKSB7XG4gICAgICAgIC8vIGxvb2sgZm9yIHRoZSBmaXJzdCA8bGVnZW5kPiBhbW9uZyB0aGUgY2hpbGRyZW4gb2YgdGhlIGRpc2FibGVkIDxmaWVsZHNldD5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50Tm9kZS5jaGlsZHJlbi5pdGVtKGkpO1xuICAgICAgICAgIC8vIHdoZW4gdGhlIGZpcnN0IDxsZWdlbmQ+IChpbiBkb2N1bWVudCBvcmRlcikgaXMgZm91bmRcbiAgICAgICAgICBpZiAoY2hpbGQudGFnTmFtZSA9PT0gJ0xFR0VORCcpIHtcbiAgICAgICAgICAgIC8vIGlmIGl0cyBwYXJlbnQgPGZpZWxkc2V0PiBpcyBub3QgbmVzdGVkIGluIGFub3RoZXIgZGlzYWJsZWQgPGZpZWxkc2V0PixcbiAgICAgICAgICAgIC8vIHJldHVybiB3aGV0aGVyIGBub2RlYCBpcyBhIGRlc2NlbmRhbnQgb2YgaXRzIGZpcnN0IDxsZWdlbmQ+XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcy5jYWxsKHBhcmVudE5vZGUsICdmaWVsZHNldFtkaXNhYmxlZF0gKicpID8gdHJ1ZSA6ICFjaGlsZC5jb250YWlucyhub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhlIGRpc2FibGVkIDxmaWVsZHNldD4gY29udGFpbmluZyBgbm9kZWAgaGFzIG5vIDxsZWdlbmQ+XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50RWxlbWVudDtcbiAgICB9XG4gIH1cblxuICAvLyBlbHNlLCBub2RlJ3MgdGFiYmFibGUvZm9jdXNhYmxlIHN0YXRlIHNob3VsZCBub3QgYmUgYWZmZWN0ZWQgYnkgYSBmaWVsZHNldCdzXG4gIC8vICBlbmFibGVkL2Rpc2FibGVkIHN0YXRlXG4gIHJldHVybiBmYWxzZTtcbn07XG52YXIgaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZSA9IGZ1bmN0aW9uIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JGb2N1c2FibGUob3B0aW9ucywgbm9kZSkge1xuICBpZiAobm9kZS5kaXNhYmxlZCB8fFxuICAvLyB3ZSBtdXN0IGRvIGFuIGluZXJ0IGxvb2sgdXAgdG8gZmlsdGVyIG91dCBhbnkgZWxlbWVudHMgaW5zaWRlIGFuIGluZXJ0IGFuY2VzdG9yXG4gIC8vICBiZWNhdXNlIHdlJ3JlIGxpbWl0ZWQgaW4gdGhlIHR5cGUgb2Ygc2VsZWN0b3JzIHdlIGNhbiB1c2UgaW4gSlNEb20gKHNlZSByZWxhdGVkXG4gIC8vICBub3RlIHJlbGF0ZWQgdG8gYGNhbmRpZGF0ZVNlbGVjdG9yc2ApXG4gIGlzSW5lcnQobm9kZSkgfHwgaXNIaWRkZW5JbnB1dChub2RlKSB8fCBpc0hpZGRlbihub2RlLCBvcHRpb25zKSB8fFxuICAvLyBGb3IgYSBkZXRhaWxzIGVsZW1lbnQgd2l0aCBhIHN1bW1hcnksIHRoZSBzdW1tYXJ5IGVsZW1lbnQgZ2V0cyB0aGUgZm9jdXNcbiAgaXNEZXRhaWxzV2l0aFN1bW1hcnkobm9kZSkgfHwgaXNEaXNhYmxlZEZyb21GaWVsZHNldChub2RlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgaXNOb2RlTWF0Y2hpbmdTZWxlY3RvclRhYmJhYmxlID0gZnVuY3Rpb24gaXNOb2RlTWF0Y2hpbmdTZWxlY3RvclRhYmJhYmxlKG9wdGlvbnMsIG5vZGUpIHtcbiAgaWYgKGlzTm9uVGFiYmFibGVSYWRpbyhub2RlKSB8fCBnZXRUYWJpbmRleChub2RlKSA8IDAgfHwgIWlzTm9kZU1hdGNoaW5nU2VsZWN0b3JGb2N1c2FibGUob3B0aW9ucywgbm9kZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xudmFyIGlzVmFsaWRTaGFkb3dSb290VGFiYmFibGUgPSBmdW5jdGlvbiBpc1ZhbGlkU2hhZG93Um9vdFRhYmJhYmxlKHNoYWRvd0hvc3ROb2RlKSB7XG4gIHZhciB0YWJJbmRleCA9IHBhcnNlSW50KHNoYWRvd0hvc3ROb2RlLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSwgMTApO1xuICBpZiAoaXNOYU4odGFiSW5kZXgpIHx8IHRhYkluZGV4ID49IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvLyBJZiBhIGN1c3RvbSBlbGVtZW50IGhhcyBhbiBleHBsaWNpdCBuZWdhdGl2ZSB0YWJpbmRleCxcbiAgLy8gYnJvd3NlcnMgd2lsbCBub3QgYWxsb3cgdGFiIHRhcmdldGluZyBzYWlkIGVsZW1lbnQncyBjaGlsZHJlbi5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5LjxFbGVtZW50fENhbmRpZGF0ZVNjb3BlPn0gY2FuZGlkYXRlc1xuICogQHJldHVybnMgRWxlbWVudFtdXG4gKi9cbnZhciBzb3J0QnlPcmRlciA9IGZ1bmN0aW9uIHNvcnRCeU9yZGVyKGNhbmRpZGF0ZXMpIHtcbiAgdmFyIHJlZ3VsYXJUYWJiYWJsZXMgPSBbXTtcbiAgdmFyIG9yZGVyZWRUYWJiYWJsZXMgPSBbXTtcbiAgY2FuZGlkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7XG4gICAgdmFyIGlzU2NvcGUgPSAhIWl0ZW0uc2NvcGVQYXJlbnQ7XG4gICAgdmFyIGVsZW1lbnQgPSBpc1Njb3BlID8gaXRlbS5zY29wZVBhcmVudCA6IGl0ZW07XG4gICAgdmFyIGNhbmRpZGF0ZVRhYmluZGV4ID0gZ2V0VGFiaW5kZXgoZWxlbWVudCwgaXNTY29wZSk7XG4gICAgdmFyIGVsZW1lbnRzID0gaXNTY29wZSA/IHNvcnRCeU9yZGVyKGl0ZW0uY2FuZGlkYXRlcykgOiBlbGVtZW50O1xuICAgIGlmIChjYW5kaWRhdGVUYWJpbmRleCA9PT0gMCkge1xuICAgICAgaXNTY29wZSA/IHJlZ3VsYXJUYWJiYWJsZXMucHVzaC5hcHBseShyZWd1bGFyVGFiYmFibGVzLCBlbGVtZW50cykgOiByZWd1bGFyVGFiYmFibGVzLnB1c2goZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9yZGVyZWRUYWJiYWJsZXMucHVzaCh7XG4gICAgICAgIGRvY3VtZW50T3JkZXI6IGksXG4gICAgICAgIHRhYkluZGV4OiBjYW5kaWRhdGVUYWJpbmRleCxcbiAgICAgICAgaXRlbTogaXRlbSxcbiAgICAgICAgaXNTY29wZTogaXNTY29wZSxcbiAgICAgICAgY29udGVudDogZWxlbWVudHNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvcmRlcmVkVGFiYmFibGVzLnNvcnQoc29ydE9yZGVyZWRUYWJiYWJsZXMpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBzb3J0YWJsZSkge1xuICAgIHNvcnRhYmxlLmlzU2NvcGUgPyBhY2MucHVzaC5hcHBseShhY2MsIHNvcnRhYmxlLmNvbnRlbnQpIDogYWNjLnB1c2goc29ydGFibGUuY29udGVudCk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwgW10pLmNvbmNhdChyZWd1bGFyVGFiYmFibGVzKTtcbn07XG52YXIgdGFiYmFibGUgPSBmdW5jdGlvbiB0YWJiYWJsZShlbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGNhbmRpZGF0ZXM7XG4gIGlmIChvcHRpb25zLmdldFNoYWRvd1Jvb3QpIHtcbiAgICBjYW5kaWRhdGVzID0gZ2V0Q2FuZGlkYXRlc0l0ZXJhdGl2ZWx5KFtlbF0sIG9wdGlvbnMuaW5jbHVkZUNvbnRhaW5lciwge1xuICAgICAgZmlsdGVyOiBpc05vZGVNYXRjaGluZ1NlbGVjdG9yVGFiYmFibGUuYmluZChudWxsLCBvcHRpb25zKSxcbiAgICAgIGZsYXR0ZW46IGZhbHNlLFxuICAgICAgZ2V0U2hhZG93Um9vdDogb3B0aW9ucy5nZXRTaGFkb3dSb290LFxuICAgICAgc2hhZG93Um9vdEZpbHRlcjogaXNWYWxpZFNoYWRvd1Jvb3RUYWJiYWJsZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGNhbmRpZGF0ZXMgPSBnZXRDYW5kaWRhdGVzKGVsLCBvcHRpb25zLmluY2x1ZGVDb250YWluZXIsIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JUYWJiYWJsZS5iaW5kKG51bGwsIG9wdGlvbnMpKTtcbiAgfVxuICByZXR1cm4gc29ydEJ5T3JkZXIoY2FuZGlkYXRlcyk7XG59O1xudmFyIGZvY3VzYWJsZSA9IGZ1bmN0aW9uIGZvY3VzYWJsZShlbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGNhbmRpZGF0ZXM7XG4gIGlmIChvcHRpb25zLmdldFNoYWRvd1Jvb3QpIHtcbiAgICBjYW5kaWRhdGVzID0gZ2V0Q2FuZGlkYXRlc0l0ZXJhdGl2ZWx5KFtlbF0sIG9wdGlvbnMuaW5jbHVkZUNvbnRhaW5lciwge1xuICAgICAgZmlsdGVyOiBpc05vZGVNYXRjaGluZ1NlbGVjdG9yRm9jdXNhYmxlLmJpbmQobnVsbCwgb3B0aW9ucyksXG4gICAgICBmbGF0dGVuOiB0cnVlLFxuICAgICAgZ2V0U2hhZG93Um9vdDogb3B0aW9ucy5nZXRTaGFkb3dSb290XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY2FuZGlkYXRlcyA9IGdldENhbmRpZGF0ZXMoZWwsIG9wdGlvbnMuaW5jbHVkZUNvbnRhaW5lciwgaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZS5iaW5kKG51bGwsIG9wdGlvbnMpKTtcbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlcztcbn07XG52YXIgaXNUYWJiYWJsZSA9IGZ1bmN0aW9uIGlzVGFiYmFibGUobm9kZSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKCFub2RlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBub2RlIHByb3ZpZGVkJyk7XG4gIH1cbiAgaWYgKG1hdGNoZXMuY2FsbChub2RlLCBjYW5kaWRhdGVTZWxlY3RvcikgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBpc05vZGVNYXRjaGluZ1NlbGVjdG9yVGFiYmFibGUob3B0aW9ucywgbm9kZSk7XG59O1xudmFyIGZvY3VzYWJsZUNhbmRpZGF0ZVNlbGVjdG9yID0gLyogI19fUFVSRV9fICovY2FuZGlkYXRlU2VsZWN0b3JzLmNvbmNhdCgnaWZyYW1lJykuam9pbignLCcpO1xudmFyIGlzRm9jdXNhYmxlID0gZnVuY3Rpb24gaXNGb2N1c2FibGUobm9kZSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKCFub2RlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBub2RlIHByb3ZpZGVkJyk7XG4gIH1cbiAgaWYgKG1hdGNoZXMuY2FsbChub2RlLCBmb2N1c2FibGVDYW5kaWRhdGVTZWxlY3RvcikgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBpc05vZGVNYXRjaGluZ1NlbGVjdG9yRm9jdXNhYmxlKG9wdGlvbnMsIG5vZGUpO1xufTtcblxuZXhwb3J0IHsgZm9jdXNhYmxlLCBpc0ZvY3VzYWJsZSwgaXNUYWJiYWJsZSwgdGFiYmFibGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiJdLCJuYW1lcyI6WyJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiX3RvUHJvcGVydHlLZXkiLCJrZXkiLCJfc2V0UHJvdG90eXBlT2YiLCJvIiwicCIsInNldFByb3RvdHlwZU9mIiwiYmluZCIsIl9fcHJvdG9fXyIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJzaGFtIiwiUHJveHkiLCJCb29sZWFuIiwidmFsdWVPZiIsImNhbGwiLCJlIiwiX2NyZWF0ZVN1cGVySW50ZXJuYWwiLCJyZXN1bHQiLCJTdXBlciIsIl9nZXRQcm90b3R5cGVPZiIsIk5ld1RhcmdldCIsInRoaXMiLCJhcmd1bWVudHMiLCJhcHBseSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlR5cGVFcnJvciIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJSZWZlcmVuY2VFcnJvciIsImdldFByb3RvdHlwZU9mIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiU3RyaW5nIiwiTnVtYmVyIiwiUmVhY3QiLCJQcm9wVHlwZXMiLCJjcmVhdGVGb2N1c1RyYXAiLCJpc0ZvY3VzYWJsZSIsIkZvY3VzVHJhcCIsIl9SZWFjdCRDb21wb25lbnQiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJ2YWx1ZSIsIl9zdXBlciIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9kZWZpbmVQcm9wZXJ0eSIsIm9wdGlvbk5hbWUiLCJfdGhpcyRpbnRlcm5hbE9wdGlvbnMiLCJvcHRpb25WYWx1ZSIsImludGVybmFsT3B0aW9ucyIsIm9yaWdpbmFsT3B0aW9ucyIsIl9sZW4iLCJwYXJhbXMiLCJBcnJheSIsIl9rZXkiLCJFcnJvciIsImNvbmNhdCIsIl90aGlzJGdldERvY3VtZW50Iiwibm9kZSIsImdldERvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhhbmRsZURlYWN0aXZhdGUiLCJoYW5kbGVQb3N0RGVhY3RpdmF0ZSIsImhhbmRsZUNsaWNrT3V0c2lkZURlYWN0aXZhdGVzIiwicmV0dXJuRm9jdXNPbkRlYWN0aXZhdGUiLCJjaGVja0NhblJldHVybkZvY3VzIiwib25EZWFjdGl2YXRlIiwib25Qb3N0RGVhY3RpdmF0ZSIsImNsaWNrT3V0c2lkZURlYWN0aXZhdGVzIiwiZm9jdXNUcmFwT3B0aW9ucyIsImhhc093blByb3BlcnR5Iiwib3V0c2lkZUNsaWNrIiwiZm9jdXNUcmFwRWxlbWVudHMiLCJjb250YWluZXJFbGVtZW50cyIsInVwZGF0ZVByZXZpb3VzRWxlbWVudCIsIl9jcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImRvY3VtZW50IiwiZ2V0UmV0dXJuRm9jdXNOb2RlIiwiZ2V0Tm9kZUZvck9wdGlvbiIsInByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCIsImN1cnJlbnREb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJkZWFjdGl2YXRlVHJhcCIsImZvY3VzVHJhcCIsImFjdGl2ZSIsImRlYWN0aXZhdGUiLCJyZXR1cm5Gb2N1cyIsImV2ZW50IiwiYWxsb3dEZWFjdGl2YXRpb24iLCJfdGhpczIiLCJmaW5pc2hEZWFjdGl2YXRpb24iLCJyZXR1cm5Gb2N1c05vZGUiLCJjYW5SZXR1cm5Gb2N1cyIsImZvY3VzIiwidGFiYmFibGVPcHRpb25zIiwiX3RoaXMyJGludGVybmFsT3B0aW9uIiwicHJldmVudFNjcm9sbCIsInRoZW4iLCJzZXR1cEZvY3VzVHJhcCIsImFjdGl2YXRlIiwicGF1c2VkIiwicGF1c2UiLCJzb21lIiwiX2NyZWF0ZUZvY3VzVHJhcCIsImNvbXBvbmVudERpZE1vdW50IiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwidXBkYXRlQ29udGFpbmVyRWxlbWVudHMiLCJoYXNBY3RpdmF0ZWQiLCJoYXNEZWFjdGl2YXRlZCIsImhhc1BhdXNlZCIsImhhc1VucGF1c2VkIiwidW5wYXVzZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwicmVuZGVyIiwiX3RoaXMzIiwiY2hpbGQiLCJjaGlsZHJlbiIsIkNoaWxkcmVuIiwib25seSIsInR5cGUiLCJGcmFnbWVudCIsImNsb25lRWxlbWVudCIsInJlZiIsImNhbGxiYWNrUmVmIiwiZWxlbWVudCIsImN1cnJlbnQiLCJDb21wb25lbnQiLCJFbGVtZW50VHlwZSIsIkVsZW1lbnQiLCJGdW5jdGlvbiIsInByb3BUeXBlcyIsImJvb2wiLCJzaGFwZSIsIm9iamVjdCIsIm9uQWN0aXZhdGUiLCJmdW5jIiwib25Qb3N0QWN0aXZhdGUiLCJjaGVja0NhbkZvY3VzVHJhcCIsIm9uUGF1c2UiLCJvblBvc3RQYXVzZSIsIm9uVW5wYXVzZSIsIm9uUG9zdFVucGF1c2UiLCJpbml0aWFsRm9jdXMiLCJvbmVPZlR5cGUiLCJpbnN0YW5jZU9mIiwic3RyaW5nIiwiZmFsbGJhY2tGb2N1cyIsImVzY2FwZURlYWN0aXZhdGVzIiwic2V0UmV0dXJuRm9jdXMiLCJhbGxvd091dHNpZGVDbGljayIsImRpc3BsYXlDaGVjayIsIm9uZU9mIiwiZ2V0U2hhZG93Um9vdCIsInRyYXBTdGFjayIsImFycmF5IiwiaXNLZXlGb3J3YXJkIiwiaXNLZXlCYWNrd2FyZCIsImFycmF5T2YiLCJkZWZhdWx0UHJvcHMiLCJtb2R1bGUiLCJleHBvcnRzIiwib3duS2V5cyIsImVudW1lcmFibGVPbmx5Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsInN5bWJvbHMiLCJmaWx0ZXIiLCJzeW0iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJwdXNoIiwiX29iamVjdFNwcmVhZDIiLCJzb3VyY2UiLCJmb3JFYWNoIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJhY3RpdmVGb2N1c1RyYXBzIiwiYWN0aXZhdGVUcmFwIiwidHJhcCIsImFjdGl2ZVRyYXAiLCJ0cmFwSW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiaXNUYWJFdmVudCIsImtleUNvZGUiLCJzaGlmdEtleSIsImRlbGF5IiwiZm4iLCJzZXRUaW1lb3V0IiwiZmluZEluZGV4IiwiYXJyIiwiaWR4IiwiZXZlcnkiLCJ2YWx1ZU9ySGFuZGxlciIsImdldEFjdHVhbFRhcmdldCIsInNoYWRvd1Jvb3QiLCJjb21wb3NlZFBhdGgiLCJpbnRlcm5hbFRyYXBTdGFjayIsImVsZW1lbnRzIiwidXNlck9wdGlvbnMiLCJkb2MiLCJjb25maWciLCJkZWxheUluaXRpYWxGb2N1cyIsInN0YXRlIiwiY29udGFpbmVycyIsImNvbnRhaW5lckdyb3VwcyIsInRhYmJhYmxlR3JvdXBzIiwibm9kZUZvY3VzZWRCZWZvcmVBY3RpdmF0aW9uIiwibW9zdFJlY2VudGx5Rm9jdXNlZE5vZGUiLCJkZWxheUluaXRpYWxGb2N1c1RpbWVyIiwiZ2V0T3B0aW9uIiwiY29uZmlnT3ZlcnJpZGVPcHRpb25zIiwiY29uZmlnT3B0aW9uTmFtZSIsImZpbmRDb250YWluZXJJbmRleCIsIl9yZWYiLCJjb250YWluZXIiLCJ0YWJiYWJsZU5vZGVzIiwiY29udGFpbnMiLCJmaW5kIiwiX2xlbjIiLCJfa2V5MiIsImdldEluaXRpYWxGb2N1c05vZGUiLCJmaXJzdFRhYmJhYmxlR3JvdXAiLCJmaXJzdFRhYmJhYmxlTm9kZSIsInVwZGF0ZVRhYmJhYmxlTm9kZXMiLCJtYXAiLCJ0YWJiYWJsZSIsImZvY3VzYWJsZU5vZGVzIiwiZm9jdXNhYmxlIiwibGFzdFRhYmJhYmxlTm9kZSIsIm5leHRUYWJiYWJsZU5vZGUiLCJmb3J3YXJkIiwibm9kZUlkeCIsIm4iLCJzbGljZSIsImlzVGFiYmFibGUiLCJyZXZlcnNlIiwiZ3JvdXAiLCJ0cnlGb2N1cyIsImlzU2VsZWN0YWJsZUlucHV0IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwic2VsZWN0IiwicHJldmlvdXNBY3RpdmVFbGVtZW50IiwiY2hlY2tQb2ludGVyRG93biIsInByZXZlbnREZWZhdWx0IiwiY2hlY2tGb2N1c0luIiwidGFyZ2V0Q29udGFpbmVkIiwiRG9jdW1lbnQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJjaGVja0tleSIsImlzRXNjYXBlRXZlbnQiLCJjaGVja0tleU5hdiIsImlzQmFja3dhcmQiLCJkZXN0aW5hdGlvbk5vZGUiLCJjb250YWluZXJJbmRleCIsImNvbnRhaW5lckdyb3VwIiwic3RhcnRPZkdyb3VwSW5kZXgiLCJfcmVmMiIsImRlc3RpbmF0aW9uR3JvdXBJbmRleCIsImxhc3RPZkdyb3VwSW5kZXgiLCJfcmVmMyIsIl9kZXN0aW5hdGlvbkdyb3VwSW5kZXgiLCJjaGVja0NsaWNrIiwiYWRkTGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhcHR1cmUiLCJwYXNzaXZlIiwicmVtb3ZlTGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFjdGl2YXRlT3B0aW9ucyIsImZpbmlzaEFjdGl2YXRpb24iLCJkZWFjdGl2YXRlT3B0aW9ucyIsIm9wdGlvbnMiLCJjbGVhclRpbWVvdXQiLCJwYXVzZU9wdGlvbnMiLCJ1bnBhdXNlT3B0aW9ucyIsImVsZW1lbnRzQXNBcnJheSIsImNyZWF0ZVRodW5rTWlkZGxld2FyZSIsImV4dHJhQXJndW1lbnQiLCJkaXNwYXRjaCIsImdldFN0YXRlIiwibmV4dCIsImFjdGlvbiIsIl9fZXNNb2R1bGUiLCJ0aHVuayIsIndpdGhFeHRyYUFyZ3VtZW50IiwiY2FuZGlkYXRlU2VsZWN0b3JzIiwiY2FuZGlkYXRlU2VsZWN0b3IiLCJqb2luIiwiTm9FbGVtZW50IiwibWF0Y2hlcyIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwiZ2V0Um9vdE5vZGUiLCJfZWxlbWVudCRnZXRSb290Tm9kZSIsIm93bmVyRG9jdW1lbnQiLCJpc0luZXJ0IiwibG9va1VwIiwiX25vZGUkZ2V0QXR0cmlidXRlIiwiaW5lcnRBdHQiLCJnZXRBdHRyaWJ1dGUiLCJwYXJlbnROb2RlIiwiZ2V0Q2FuZGlkYXRlcyIsImVsIiwiaW5jbHVkZUNvbnRhaW5lciIsImNhbmRpZGF0ZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidW5zaGlmdCIsImdldENhbmRpZGF0ZXNJdGVyYXRpdmVseSIsImVsZW1lbnRzVG9DaGVjayIsImZyb20iLCJzaGlmdCIsImFzc2lnbmVkIiwiYXNzaWduZWRFbGVtZW50cyIsIm5lc3RlZENhbmRpZGF0ZXMiLCJmbGF0dGVuIiwic2NvcGVQYXJlbnQiLCJpbmNsdWRlcyIsInZhbGlkU2hhZG93Um9vdCIsInNoYWRvd1Jvb3RGaWx0ZXIiLCJfbmVzdGVkQ2FuZGlkYXRlcyIsImdldFRhYmluZGV4IiwiaXNTY29wZSIsInRhYkluZGV4IiwidGVzdCIsImlzQ29udGVudEVkaXRhYmxlIiwiX25vZGUkZ2V0QXR0cmlidXRlMiIsImF0dFZhbHVlIiwiaXNOYU4iLCJwYXJzZUludCIsInNvcnRPcmRlcmVkVGFiYmFibGVzIiwiYSIsImIiLCJkb2N1bWVudE9yZGVyIiwiaXNJbnB1dCIsImlzTm9uVGFiYmFibGVSYWRpbyIsImlzUmFkaW8iLCJpc1RhYmJhYmxlUmFkaW8iLCJuYW1lIiwicmFkaW9TZXQiLCJyYWRpb1Njb3BlIiwiZm9ybSIsInF1ZXJ5UmFkaW9zIiwid2luZG93IiwiQ1NTIiwiZXNjYXBlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsImNoZWNrZWQiLCJnZXRDaGVja2VkUmFkaW8iLCJub2RlcyIsImlzWmVyb0FyZWEiLCJfbm9kZSRnZXRCb3VuZGluZ0NsaWUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImlzSGlkZGVuIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInZpc2liaWxpdHkiLCJub2RlVW5kZXJEZXRhaWxzIiwicGFyZW50RWxlbWVudCIsIm9yaWdpbmFsTm9kZSIsInJvb3ROb2RlIiwiYXNzaWduZWRTbG90IiwiaG9zdCIsImlzTm9kZUF0dGFjaGVkIiwiX25vZGVSb290IiwiX25vZGVSb290SG9zdCIsIl9ub2RlUm9vdEhvc3Qkb3duZXJEbyIsIl9ub2RlJG93bmVyRG9jdW1lbnQiLCJub2RlUm9vdCIsIm5vZGVSb290SG9zdCIsImF0dGFjaGVkIiwiX25vZGVSb290MiIsIl9ub2RlUm9vdEhvc3QyIiwiX25vZGVSb290SG9zdDIkb3duZXJEIiwiZ2V0Q2xpZW50UmVjdHMiLCJpc05vZGVNYXRjaGluZ1NlbGVjdG9yRm9jdXNhYmxlIiwiZGlzYWJsZWQiLCJpc0hpZGRlbklucHV0IiwiaXNEZXRhaWxzV2l0aFN1bW1hcnkiLCJpc0Rpc2FibGVkRnJvbUZpZWxkc2V0IiwiaXRlbSIsImlzTm9kZU1hdGNoaW5nU2VsZWN0b3JUYWJiYWJsZSIsImlzVmFsaWRTaGFkb3dSb290VGFiYmFibGUiLCJzaGFkb3dIb3N0Tm9kZSIsInNvcnRCeU9yZGVyIiwicmVndWxhclRhYmJhYmxlcyIsIm9yZGVyZWRUYWJiYWJsZXMiLCJjYW5kaWRhdGVUYWJpbmRleCIsImNvbnRlbnQiLCJzb3J0IiwicmVkdWNlIiwiYWNjIiwic29ydGFibGUiLCJmb2N1c2FibGVDYW5kaWRhdGVTZWxlY3RvciJdLCJzb3VyY2VSb290IjoiIn0=