"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[7126],{"./src/code-studio/hashEmail.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function _default(options){var email=normalizeEmail((0,_jquery.default)(options.email_selector).val());if(""!==email&&EMAIL_REGEX.test(email)){var hashed_email=hashEmail(email);(0,_jquery.default)(options.hashed_email_selector).val(hashed_email),options.skip_clear_email||(!options.age_selector||(0,_jquery.default)(options.age_selector).val()<13)&&(0,_jquery.default)(options.email_selector).val("")}},exports.hashEmail=hashEmail;var _jquery=_interopRequireDefault(__webpack_require__("./node_modules/jquery/dist/jquery.js")),_md=_interopRequireDefault(__webpack_require__("./node_modules/md5/md5.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EMAIL_REGEX=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i;function hashEmail(cleartextEmail){return(0,_md.default)(normalizeEmail(cleartextEmail))}function normalizeEmail(rawEmail){return rawEmail.toLowerCase().trim()}},"./src/lib/ui/accounts/ChangeEmailModal.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_hashEmail=__webpack_require__("./src/code-studio/hashEmail.js"),_BaseDialog=_interopRequireDefault(__webpack_require__("./src/templates/BaseDialog.jsx")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_formatValidation=__webpack_require__("./src/util/formatValidation.js"),_SystemDialog=__webpack_require__("./src/lib/ui/SystemDialog/SystemDialog.jsx"),_ChangeEmailForm=_interopRequireDefault(__webpack_require__("./src/lib/ui/accounts/ChangeEmailForm.jsx"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ChangeEmailModal=function(_React$Component){function ChangeEmailModal(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_assertThisInitialized(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this),"state",{saveState:"initial",values:{newEmail:"",currentPassword:"",emailOptIn:""},serverErrors:{newEmail:"",currentPassword:"",emailOptIn:""}}),_defineProperty(_assertThisInitialized(_this),"save",(function(){if(_this.isFormValid(_this.getValidationErrors())){var values=_this.state.values;_this.setState({saveState:"saving"}),_this.props.handleSubmit(values).catch(_this.onSubmitFailure)}})),_defineProperty(_assertThisInitialized(_this),"cancel",(function(){return _this.props.handleCancel()})),_defineProperty(_assertThisInitialized(_this),"onSubmitFailure",(function(error){error&&Object.prototype.hasOwnProperty.call(error,"serverErrors")?_this.setState({saveState:"initial",serverErrors:error.serverErrors},(function(){return _this.changeEmailForm.focusOnAnError()})):_this.setState({saveState:"unknown-error"})})),_defineProperty(_assertThisInitialized(_this),"getNewEmailValidationError",(function(){var newEmail=_this.state.values.newEmail,currentHashedEmail=_this.props.currentHashedEmail;return 0===newEmail.trim().length?_locale.default.changeEmailModal_newEmail_isRequired():(0,_formatValidation.isEmail)(newEmail.trim())?currentHashedEmail===(0,_hashEmail.hashEmail)(newEmail)?_locale.default.changeEmailModal_newEmail_mustBeDifferent():null:_locale.default.changeEmailModal_newEmail_invalid()})),_defineProperty(_assertThisInitialized(_this),"getCurrentPasswordValidationError",(function(){var currentPassword=_this.state.values.currentPassword;return _this.props.isPasswordRequired&&0===currentPassword.length?_locale.default.changeEmailModal_currentPassword_isRequired():null})),_defineProperty(_assertThisInitialized(_this),"getEmailOptInValidationError",(function(){var userType=_this.props.userType,emailOptIn=_this.state.values.emailOptIn;return"teacher"===userType&&0===emailOptIn.length?_locale.default.changeEmailModal_emailOptIn_isRequired():null})),_defineProperty(_assertThisInitialized(_this),"onFormChange",(function(newValues){var _this$state=_this.state,oldValues=_this$state.values,newServerErrors=function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},_this$state.serverErrors);["newEmail","currentPassword","emailOptIn"].forEach((function(fieldName){newValues[fieldName]!==oldValues[fieldName]&&(newServerErrors[fieldName]=void 0)})),_this.setState({values:newValues,serverErrors:newServerErrors})})),_defineProperty(_assertThisInitialized(_this),"render",(function(){var _this$props=_this.props,userType=_this$props.userType,isPasswordRequired=_this$props.isPasswordRequired,_this$state2=_this.state,saveState=_this$state2.saveState,values=_this$state2.values,validationErrors=_this.getValidationErrors(),isFormValid=_this.isFormValid(validationErrors);return _react.default.createElement(_BaseDialog.default,{useUpdatedStyles:!0,isOpen:!0,handleClose:_this.cancel,uncloseable:"saving"===saveState},_react.default.createElement("div",{style:styles.container},_react.default.createElement(_SystemDialog.Header,{text:_locale.default.changeEmailModal_title()}),_react.default.createElement(_ChangeEmailForm.default,{ref:function ref(x){return _this.changeEmailForm=x},values,validationErrors,disabled:"saving"===saveState,userType,isPasswordRequired,onChange:_this.onFormChange,onSubmit:_this.save}),_react.default.createElement(_SystemDialog.ConfirmCancelFooter,{confirmText:_locale.default.changeEmailModal_save(),onConfirm:_this.save,onCancel:_this.cancel,disableConfirm:"saving"===saveState||!isFormValid,disableCancel:"saving"===saveState,tabIndex:"2"},"saving"===saveState&&_react.default.createElement("em",null,_locale.default.saving()),"unknown-error"===saveState&&_react.default.createElement("em",null,_locale.default.changeEmailModal_unexpectedError()))))})),_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(ChangeEmailModal,_React$Component);var _proto=ChangeEmailModal.prototype;return _proto.isFormValid=function isFormValid(validationErrors){return Object.keys(validationErrors).every((function(key){return!validationErrors[key]}))},_proto.getValidationErrors=function getValidationErrors(){var serverErrors=this.state.serverErrors;return{newEmail:serverErrors.newEmail||this.getNewEmailValidationError(),currentPassword:serverErrors.currentPassword||this.getCurrentPasswordValidationError(),emailOptIn:serverErrors.emailOptIn||this.getEmailOptInValidationError()}},ChangeEmailModal}(_react.default.Component);exports.default=ChangeEmailModal,_defineProperty(ChangeEmailModal,"propTypes",{handleSubmit:_propTypes.default.func.isRequired,handleCancel:_propTypes.default.func.isRequired,userType:_propTypes.default.oneOf(["student","teacher"]).isRequired,isPasswordRequired:_propTypes.default.bool.isRequired,currentHashedEmail:_propTypes.default.string});var styles={container:{margin:20,color:_color.default.charcoal}};module.exports=exports.default},"./src/templates/BaseDialog.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_constants=__webpack_require__("./src/constants.js"),_Button=_interopRequireDefault(__webpack_require__("./src/templates/Button.jsx")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var BaseDialog=function(_React$Component){function BaseDialog(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_assertThisInitialized(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this),"handleKeyDown",(function(event){"Escape"===event.key&&_this.closeDialog(),_this.props.handleKeyDown&&_this.props.handleKeyDown(event)})),_defineProperty(_assertThisInitialized(_this),"closeDialog",(function(){!_this.props.uncloseable&&_this.props.handleClose&&(_this.props.handleClose(),_this.props.soundPlayer&&_this.props.soundPlayer.stopAllAudio())})),_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(BaseDialog,_React$Component);var _proto=BaseDialog.prototype;return _proto.componentDidMount=function componentDidMount(){this.focusDialog()},_proto.componentDidUpdate=function componentDidUpdate(){this.focusDialog()},_proto.getTabbableElements=function getTabbableElements(){return[].slice.call(this.refs.dialog.querySelectorAll("a,button,input"))},_proto.focusDialog=function focusDialog(){var descendantIsActive=document.activeElement&&this.refs.dialog&&this.refs.dialog.contains(document.activeElement);this.props.isOpen&&!descendantIsActive&&this.refs.dialog.focus()},_proto.render=function render(){if(!this.props.isOpen&&!this.props.hideBackdrop)return _react.default.createElement("div",null);var bodyStyle,modalBodyStyle,xCloseStyle;this.props.fullWidth&&(bodyStyle=_objectSpread(_objectSpread({},bodyStyle),{},{width:"90%",marginLeft:"-45%"})),this.props.fullHeight&&(bodyStyle=_objectSpread(_objectSpread({},bodyStyle),{},{height:"80%"}),modalBodyStyle=_objectSpread(_objectSpread({},modalBodyStyle),{},{boxSizing:"border-box"}));var wrapperClassNames="",modalClassNames="modal",modalBodyClassNames="modal-body",overflowX=this.props.overflow||"hidden",overflowY=this.props.overflow||(this.props.fixedHeight||this.props.fullHeight?"hidden":"auto");this.props.useUpdatedStyles?(wrapperClassNames="dashboard-styles",modalBodyClassNames="",modalBodyStyle={background:"#fff",height:this.props.fixedHeight,maxHeight:!this.props.fixedHeight&&"80vh",overflowX,overflowY,borderRadius:4},this.props.useFlexbox&&(modalBodyStyle=_objectSpread(_objectSpread({},modalBodyStyle),{},{display:"flex",flexDirection:"column"})),bodyStyle=_objectSpread(_objectSpread({},bodyStyle),{},{width:this.props.fixedWidth||_constants.BASE_DIALOG_WIDTH,marginLeft:-this.props.fixedWidth/2||-350})):this.props.noModalStyles&&(modalClassNames="",modalBodyClassNames=""),bodyStyle=_objectSpread(_objectSpread(_objectSpread({},bodyStyle),this.props.hideBackdrop&&{position:"initial",marginLeft:0}),this.props.style),xCloseStyle={position:"absolute",top:0,right:0,padding:0,color:_color.default.neutral_dark30,cursor:"pointer",fontSize:24,border:"none"},modalBodyClassNames=[modalBodyClassNames,this.props.bodyClassName].filter((function(className){return!!className})).join(" ");var body=_react.default.createElement("div",{style:bodyStyle,tabIndex:"-1",className:modalClassNames,ref:"dialog",onKeyDown:this.handleKeyDown},_react.default.createElement("div",{style:modalBodyStyle,id:this.props.bodyId,className:modalBodyClassNames},!this.props.uncloseable&&!this.props.hideCloseButton&&_react.default.createElement(_Button.default,{id:"x-close",onClick:this.closeDialog,icon:"fa-solid fa-xmark",style:xCloseStyle,color:"white","aria-label":_locale.default.closeDialog()}),this.props.children));return this.props.hideBackdrop?body:_react.default.createElement("div",{className:wrapperClassNames},_react.default.createElement("div",{className:"modal-backdrop",style:this.props.backdropStyle,onClick:this.closeDialog}),body)},BaseDialog}(_react.default.Component);exports.default=BaseDialog,_defineProperty(BaseDialog,"propTypes",{isOpen:_propTypes.default.bool,handleClose:_propTypes.default.func,uncloseable:_propTypes.default.bool,hideCloseButton:_propTypes.default.bool,handleKeyDown:_propTypes.default.func,hideBackdrop:_propTypes.default.bool,fullWidth:_propTypes.default.bool,fullHeight:_propTypes.default.bool,useUpdatedStyles:_propTypes.default.bool,noModalStyles:_propTypes.default.bool,children:_propTypes.default.node,fixedWidth:_propTypes.default.number,fixedHeight:_propTypes.default.number,useFlexbox:_propTypes.default.bool,bodyId:_propTypes.default.string,bodyClassName:_propTypes.default.string,style:_propTypes.default.object,soundPlayer:_propTypes.default.object,overflow:_propTypes.default.string,backdropStyle:_propTypes.default.object}),module.exports=exports.default},"./src/util/formatValidation.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.isZipCode=exports.isPercent=exports.isInt=exports.isEmail=void 0;var EMAIL_REGEX=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;exports.isEmail=function isEmail(value){return EMAIL_REGEX.test(value)};var ZIP_CODE_REGEX=/^\d{5}([\W-]?\d{4})?$/;exports.isZipCode=function isZipCode(value){return ZIP_CODE_REGEX.test(value)};exports.isInt=function isInt(value){var newValue=value.replace(/,/g,"");return parseInt(newValue,10).toString()===newValue};exports.isPercent=function isPercent(value){var percent=parseFloat(value);return 0<=percent&&percent<=100}},"./src/lib/ui/accounts/ChangeEmailModal.story.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TeacherView=exports.StudentView=void 0;var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_ChangeEmailModal=_interopRequireDefault(__webpack_require__("./src/lib/ui/accounts/ChangeEmailModal.jsx")),_addonActions=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var DEFAULT_PROPS={handleSubmit:(0,_addonActions.action)("handleSubmit callback"),handleCancel:(0,_addonActions.action)("handleCancel callback"),isPasswordRequired:!0},_default={component:_ChangeEmailModal.default};exports.default=_default;var container={margin:"auto",width:"50%",padding:"10px"},Template=function Template(args){return _react.default.createElement("div",{style:container},_react.default.createElement(_ChangeEmailModal.default,_extends({},DEFAULT_PROPS,args)))},StudentView=Template.bind({});exports.StudentView=StudentView,StudentView.args={userType:"student"};var TeacherView=Template.bind({});exports.TeacherView=TeacherView,TeacherView.args={userType:"teacher"}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliLXVpLWFjY291bnRzLUNoYW5nZUVtYWlsTW9kYWwtc3RvcnkuODhhZmY3ODEuaWZyYW1lLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiNlBBS2UsU0FBUyxTQUFDQSxTQUV2QixJQUFNQyxNQUFRQyxnQkFBZSxFQUFBQyxRQUFBQSxTQUFFSCxRQUFRSSxnQkFBZ0JDLE9BQ3ZELEdBQWMsS0FBVkosT0FBZ0JLLFlBQVlDLEtBQUtOLE9BQVEsQ0FDM0MsSUFBTU8sYUFBZUMsVUFBVVIsUUFDL0IsRUFBQUUsUUFBQUEsU0FBRUgsUUFBUVUsdUJBQXVCTCxJQUFJRyxjQUdoQ1IsUUFBUVcsb0JBRU5YLFFBQVFZLGVBQWdCLEVBQUFULFFBQUFBLFNBQUVILFFBQVFZLGNBQWNQLE1BQVEsTUFDM0QsRUFBQUYsUUFBQUEsU0FBRUgsUUFBUUksZ0JBQWdCQyxJQUFJLEdBR25DLENBQ0YsRSw0QkFwQkQsZ0dBQ0EsNkUsa0ZBRUEsSUFBTUMsWUFBYywyQ0FtQmIsU0FBU0csVUFBVUksZ0JBQ3hCLE9BQU8sRUFBQUMsSUFBQUEsU0FBSVosZUFBZVcsZ0JBQzNCLENBRUQsU0FBU1gsZUFBZWEsVUFDdEIsT0FBT0EsU0FBU0MsY0FBY0MsTUFDL0IsQyxvS0M1QkQsaUdBQ0Esb0ZBQ0EsMEZBQ0EsaUVBQ0EsMEZBQ0EsMEVBQ0Esd0VBQ0EsZ0ZBQ0EsMEcsczNCQUVBLElBSXFCQyxpQkFBQUEsU0FBQUEsa0IsNlFBZVgsQ0FDTkMsVUFwQmtCLFVBcUJsQkMsT0FBUSxDQUNOQyxTQUFVLEdBQ1ZDLGdCQUFpQixHQUNqQkMsV0FBWSxJQUVkQyxhQUFjLENBQ1pILFNBQVUsR0FDVkMsZ0JBQWlCLEdBQ2pCQyxXQUFZLE0sc0RBSVQsV0FHTCxHQUFLLE1BQUtFLFlBQVksTUFBS0MsdUJBQTNCLENBSUEsSUFBT04sT0FBVSxNQUFLTyxNQUFmUCxPQUNQLE1BQUtRLFNBQVMsQ0FBQ1QsVUF4Q0UsV0F5Q2pCLE1BQUtVLE1BQU1DLGFBQWFWLFFBQXhCLE1BQXNDLE1BQUtXLGdCQUoxQyxD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QUNBLDRHQUNBLDJGLHNYQUVBLElBQU1FLGNBQWdCLENBQ3BCM0osY0FBYyxFQUFBNEosY0FBQUEsUUFBTyx5QkFDckIxSixjQUFjLEVBQUEwSixjQUFBQSxRQUFPLHlCQUNyQjNJLG9CQUFvQixHLFNBR1AsQ0FDYjRJLFVBQVd6SyxrQkFBQUEsUyx5QkFHYixJQUFNK0MsVUFBWSxDQUNoQm9DLE9BQVEsT0FDUjRCLE1BQU8sTUFDUHdCLFFBQVMsUUFHTG1DLFNBQVcsU0FBWEEsU0FBV0MsTUFBSSxPQUNuQixvQ0FBSzlILE1BQU9FLFdBQ1YsNkJBQUMsMEJBQUQsWUFBc0J3SCxjQUFtQkksT0FGeEIsRUFNUkMsWUFBY0YsU0FBU0csS0FBSyxDQUFDLEcsZ0NBQzFDRCxZQUFZRCxLQUFPLENBQ2pCNUksU0FBVSxXQUdMLElBQU0rSSxZQUFjSixTQUFTRyxLQUFLLENBQUMsRyxnQ0FDMUNDLFlBQVlILEtBQU8sQ0FDakI1SSxTQUFVLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvY29kZS1zdHVkaW8vaGFzaEVtYWlsLmpzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy9saWIvdWkvYWNjb3VudHMvQ2hhbmdlRW1haWxNb2RhbC5qc3giLCJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL3RlbXBsYXRlcy9CYXNlRGlhbG9nLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvdXRpbC9mb3JtYXRWYWxpZGF0aW9uLmpzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy9saWIvdWkvYWNjb3VudHMvQ2hhbmdlRW1haWxNb2RhbC5zdG9yeS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBtZDUgZnJvbSAnbWQ1JztcblxuY29uc3QgRU1BSUxfUkVHRVggPSAvXltBLVowLTkuXyUrLV0rQFtBLVowLTkuLV0rXFwuW0EtWl17Mix9JC9pO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAvLyBIYXNoIHRoZSBlbWFpbCwgaWYgaXQgaXMgYW4gZW1haWwuXG4gIGNvbnN0IGVtYWlsID0gbm9ybWFsaXplRW1haWwoJChvcHRpb25zLmVtYWlsX3NlbGVjdG9yKS52YWwoKSk7XG4gIGlmIChlbWFpbCAhPT0gJycgJiYgRU1BSUxfUkVHRVgudGVzdChlbWFpbCkpIHtcbiAgICBjb25zdCBoYXNoZWRfZW1haWwgPSBoYXNoRW1haWwoZW1haWwpO1xuICAgICQob3B0aW9ucy5oYXNoZWRfZW1haWxfc2VsZWN0b3IpLnZhbChoYXNoZWRfZW1haWwpO1xuXG4gICAgLy8gVW5sZXNzIHdlIHdhbnQgdG8gZGVsaWJlcmF0ZWx5IHNraXAgdGhlIHN0ZXAgb2YgY2xlYXJpbmcgdGhlIGVtYWlsLlxuICAgIGlmICghb3B0aW9ucy5za2lwX2NsZWFyX2VtYWlsKSB7XG4gICAgICAvLyBJZiBhZ2UgPCAxMywgZG9uJ3Qgc2VuZCB0aGUgcGxhaW50ZXh0IGVtYWlsLlxuICAgICAgaWYgKCFvcHRpb25zLmFnZV9zZWxlY3RvciB8fCAkKG9wdGlvbnMuYWdlX3NlbGVjdG9yKS52YWwoKSA8IDEzKSB7XG4gICAgICAgICQob3B0aW9ucy5lbWFpbF9zZWxlY3RvcikudmFsKCcnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc2hFbWFpbChjbGVhcnRleHRFbWFpbCkge1xuICByZXR1cm4gbWQ1KG5vcm1hbGl6ZUVtYWlsKGNsZWFydGV4dEVtYWlsKSk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUVtYWlsKHJhd0VtYWlsKSB7XG4gIHJldHVybiByYXdFbWFpbC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbn1cbiIsImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGkxOG4gZnJvbSAnQGNkby9sb2NhbGUnO1xuaW1wb3J0IHtoYXNoRW1haWx9IGZyb20gJy4uLy4uLy4uL2NvZGUtc3R1ZGlvL2hhc2hFbWFpbCc7XG5pbXBvcnQgQmFzZURpYWxvZyBmcm9tICcuLi8uLi8uLi90ZW1wbGF0ZXMvQmFzZURpYWxvZyc7XG5pbXBvcnQgY29sb3IgZnJvbSAnLi4vLi4vLi4vdXRpbC9jb2xvcic7XG5pbXBvcnQge2lzRW1haWx9IGZyb20gJy4uLy4uLy4uL3V0aWwvZm9ybWF0VmFsaWRhdGlvbic7XG5pbXBvcnQge0hlYWRlciwgQ29uZmlybUNhbmNlbEZvb3Rlcn0gZnJvbSAnLi4vU3lzdGVtRGlhbG9nL1N5c3RlbURpYWxvZyc7XG5pbXBvcnQgQ2hhbmdlRW1haWxGb3JtIGZyb20gJy4vQ2hhbmdlRW1haWxGb3JtJztcblxuY29uc3QgU1RBVEVfSU5JVElBTCA9ICdpbml0aWFsJztcbmNvbnN0IFNUQVRFX1NBVklORyA9ICdzYXZpbmcnO1xuY29uc3QgU1RBVEVfVU5LTk9XTl9FUlJPUiA9ICd1bmtub3duLWVycm9yJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhbmdlRW1haWxNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKHtuZXdFbWFpbDogc3RyaW5nLCBjdXJyZW50UGFzc3dvcmQ6IHN0cmluZ30pOlByb21pc2V9XG4gICAgICovXG4gICAgaGFuZGxlU3VibWl0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtmdW5jdGlvbigpfVxuICAgICAqL1xuICAgIGhhbmRsZUNhbmNlbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB1c2VyVHlwZTogUHJvcFR5cGVzLm9uZU9mKFsnc3R1ZGVudCcsICd0ZWFjaGVyJ10pLmlzUmVxdWlyZWQsXG4gICAgaXNQYXNzd29yZFJlcXVpcmVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIGN1cnJlbnRIYXNoZWRFbWFpbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgfTtcblxuICBzdGF0ZSA9IHtcbiAgICBzYXZlU3RhdGU6IFNUQVRFX0lOSVRJQUwsXG4gICAgdmFsdWVzOiB7XG4gICAgICBuZXdFbWFpbDogJycsXG4gICAgICBjdXJyZW50UGFzc3dvcmQ6ICcnLFxuICAgICAgZW1haWxPcHRJbjogJycsXG4gICAgfSxcbiAgICBzZXJ2ZXJFcnJvcnM6IHtcbiAgICAgIG5ld0VtYWlsOiAnJyxcbiAgICAgIGN1cnJlbnRQYXNzd29yZDogJycsXG4gICAgICBlbWFpbE9wdEluOiAnJyxcbiAgICB9LFxuICB9O1xuXG4gIHNhdmUgPSAoKSA9PiB7XG4gICAgLy8gTm8tb3AgaWYgd2Uga25vdyB0aGUgZm9ybSBpcyBpbnZhbGlkLCBjbGllbnQtc2lkZS5cbiAgICAvLyBUaGlzIGJsb2NrcyByZXR1cm4ta2V5IHN1Ym1pc3Npb24gd2hlbiB0aGUgZm9ybSBpcyBpbnZhbGlkLlxuICAgIGlmICghdGhpcy5pc0Zvcm1WYWxpZCh0aGlzLmdldFZhbGlkYXRpb25FcnJvcnMoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7dmFsdWVzfSA9IHRoaXMuc3RhdGU7XG4gICAgdGhpcy5zZXRTdGF0ZSh7c2F2ZVN0YXRlOiBTVEFURV9TQVZJTkd9KTtcbiAgICB0aGlzLnByb3BzLmhhbmRsZVN1Ym1pdCh2YWx1ZXMpLmNhdGNoKHRoaXMub25TdWJtaXRGYWlsdXJlKTtcbiAgfTtcblxuICBjYW5jZWwgPSAoKSA9PiB0aGlzLnByb3BzLmhhbmRsZUNhbmNlbCgpO1xuXG4gIG9uU3VibWl0RmFpbHVyZSA9IGVycm9yID0+IHtcbiAgICBpZiAoZXJyb3IgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVycm9yLCAnc2VydmVyRXJyb3JzJykpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICAgIHtcbiAgICAgICAgICBzYXZlU3RhdGU6IFNUQVRFX0lOSVRJQUwsXG4gICAgICAgICAgc2VydmVyRXJyb3JzOiBlcnJvci5zZXJ2ZXJFcnJvcnMsXG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHRoaXMuY2hhbmdlRW1haWxGb3JtLmZvY3VzT25BbkVycm9yKClcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NhdmVTdGF0ZTogU1RBVEVfVU5LTk9XTl9FUlJPUn0pO1xuICAgIH1cbiAgfTtcblxuICBpc0Zvcm1WYWxpZCh2YWxpZGF0aW9uRXJyb3JzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbGlkYXRpb25FcnJvcnMpLmV2ZXJ5KGtleSA9PiAhdmFsaWRhdGlvbkVycm9yc1trZXldKTtcbiAgfVxuXG4gIGdldFZhbGlkYXRpb25FcnJvcnMoKSB7XG4gICAgY29uc3Qge3NlcnZlckVycm9yc30gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiB7XG4gICAgICBuZXdFbWFpbDogc2VydmVyRXJyb3JzLm5ld0VtYWlsIHx8IHRoaXMuZ2V0TmV3RW1haWxWYWxpZGF0aW9uRXJyb3IoKSxcbiAgICAgIGN1cnJlbnRQYXNzd29yZDpcbiAgICAgICAgc2VydmVyRXJyb3JzLmN1cnJlbnRQYXNzd29yZCB8fFxuICAgICAgICB0aGlzLmdldEN1cnJlbnRQYXNzd29yZFZhbGlkYXRpb25FcnJvcigpLFxuICAgICAgZW1haWxPcHRJbjpcbiAgICAgICAgc2VydmVyRXJyb3JzLmVtYWlsT3B0SW4gfHwgdGhpcy5nZXRFbWFpbE9wdEluVmFsaWRhdGlvbkVycm9yKCksXG4gICAgfTtcbiAgfVxuXG4gIGdldE5ld0VtYWlsVmFsaWRhdGlvbkVycm9yID0gKCkgPT4ge1xuICAgIGNvbnN0IHtuZXdFbWFpbH0gPSB0aGlzLnN0YXRlLnZhbHVlcztcbiAgICBjb25zdCB7Y3VycmVudEhhc2hlZEVtYWlsfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKG5ld0VtYWlsLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBpMThuLmNoYW5nZUVtYWlsTW9kYWxfbmV3RW1haWxfaXNSZXF1aXJlZCgpO1xuICAgIH1cbiAgICBpZiAoIWlzRW1haWwobmV3RW1haWwudHJpbSgpKSkge1xuICAgICAgcmV0dXJuIGkxOG4uY2hhbmdlRW1haWxNb2RhbF9uZXdFbWFpbF9pbnZhbGlkKCk7XG4gICAgfVxuICAgIGlmIChjdXJyZW50SGFzaGVkRW1haWwgPT09IGhhc2hFbWFpbChuZXdFbWFpbCkpIHtcbiAgICAgIHJldHVybiBpMThuLmNoYW5nZUVtYWlsTW9kYWxfbmV3RW1haWxfbXVzdEJlRGlmZmVyZW50KCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGdldEN1cnJlbnRQYXNzd29yZFZhbGlkYXRpb25FcnJvciA9ICgpID0+IHtcbiAgICBjb25zdCB7Y3VycmVudFBhc3N3b3JkfSA9IHRoaXMuc3RhdGUudmFsdWVzO1xuICAgIGlmICh0aGlzLnByb3BzLmlzUGFzc3dvcmRSZXF1aXJlZCAmJiBjdXJyZW50UGFzc3dvcmQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaTE4bi5jaGFuZ2VFbWFpbE1vZGFsX2N1cnJlbnRQYXNzd29yZF9pc1JlcXVpcmVkKCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGdldEVtYWlsT3B0SW5WYWxpZGF0aW9uRXJyb3IgPSAoKSA9PiB7XG4gICAgY29uc3Qge3VzZXJUeXBlfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge2VtYWlsT3B0SW59ID0gdGhpcy5zdGF0ZS52YWx1ZXM7XG4gICAgaWYgKHVzZXJUeXBlID09PSAndGVhY2hlcicgJiYgZW1haWxPcHRJbi5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBpMThuLmNoYW5nZUVtYWlsTW9kYWxfZW1haWxPcHRJbl9pc1JlcXVpcmVkKCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIG9uRm9ybUNoYW5nZSA9IG5ld1ZhbHVlcyA9PiB7XG4gICAgY29uc3Qge3ZhbHVlczogb2xkVmFsdWVzLCBzZXJ2ZXJFcnJvcnN9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBuZXdTZXJ2ZXJFcnJvcnMgPSB7Li4uc2VydmVyRXJyb3JzfTtcbiAgICBbJ25ld0VtYWlsJywgJ2N1cnJlbnRQYXNzd29yZCcsICdlbWFpbE9wdEluJ10uZm9yRWFjaChmaWVsZE5hbWUgPT4ge1xuICAgICAgaWYgKG5ld1ZhbHVlc1tmaWVsZE5hbWVdICE9PSBvbGRWYWx1ZXNbZmllbGROYW1lXSkge1xuICAgICAgICBuZXdTZXJ2ZXJFcnJvcnNbZmllbGROYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlczogbmV3VmFsdWVzLFxuICAgICAgc2VydmVyRXJyb3JzOiBuZXdTZXJ2ZXJFcnJvcnMsXG4gICAgfSk7XG4gIH07XG5cbiAgcmVuZGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IHt1c2VyVHlwZSwgaXNQYXNzd29yZFJlcXVpcmVkfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge3NhdmVTdGF0ZSwgdmFsdWVzfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IHRoaXMuZ2V0VmFsaWRhdGlvbkVycm9ycygpO1xuICAgIGNvbnN0IGlzRm9ybVZhbGlkID0gdGhpcy5pc0Zvcm1WYWxpZCh2YWxpZGF0aW9uRXJyb3JzKTtcbiAgICByZXR1cm4gKFxuICAgICAgPEJhc2VEaWFsb2dcbiAgICAgICAgdXNlVXBkYXRlZFN0eWxlc1xuICAgICAgICBpc09wZW5cbiAgICAgICAgaGFuZGxlQ2xvc2U9e3RoaXMuY2FuY2VsfVxuICAgICAgICB1bmNsb3NlYWJsZT17U1RBVEVfU0FWSU5HID09PSBzYXZlU3RhdGV9XG4gICAgICA+XG4gICAgICAgIDxkaXYgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAgICAgIDxIZWFkZXIgdGV4dD17aTE4bi5jaGFuZ2VFbWFpbE1vZGFsX3RpdGxlKCl9IC8+XG4gICAgICAgICAgPENoYW5nZUVtYWlsRm9ybVxuICAgICAgICAgICAgcmVmPXt4ID0+ICh0aGlzLmNoYW5nZUVtYWlsRm9ybSA9IHgpfVxuICAgICAgICAgICAgdmFsdWVzPXt2YWx1ZXN9XG4gICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXt2YWxpZGF0aW9uRXJyb3JzfVxuICAgICAgICAgICAgZGlzYWJsZWQ9e1NUQVRFX1NBVklORyA9PT0gc2F2ZVN0YXRlfVxuICAgICAgICAgICAgdXNlclR5cGU9e3VzZXJUeXBlfVxuICAgICAgICAgICAgaXNQYXNzd29yZFJlcXVpcmVkPXtpc1Bhc3N3b3JkUmVxdWlyZWR9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkZvcm1DaGFuZ2V9XG4gICAgICAgICAgICBvblN1Ym1pdD17dGhpcy5zYXZlfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPENvbmZpcm1DYW5jZWxGb290ZXJcbiAgICAgICAgICAgIGNvbmZpcm1UZXh0PXtpMThuLmNoYW5nZUVtYWlsTW9kYWxfc2F2ZSgpfVxuICAgICAgICAgICAgb25Db25maXJtPXt0aGlzLnNhdmV9XG4gICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5jYW5jZWx9XG4gICAgICAgICAgICBkaXNhYmxlQ29uZmlybT17U1RBVEVfU0FWSU5HID09PSBzYXZlU3RhdGUgfHwgIWlzRm9ybVZhbGlkfVxuICAgICAgICAgICAgZGlzYWJsZUNhbmNlbD17U1RBVEVfU0FWSU5HID09PSBzYXZlU3RhdGV9XG4gICAgICAgICAgICB0YWJJbmRleD1cIjJcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtTVEFURV9TQVZJTkcgPT09IHNhdmVTdGF0ZSAmJiA8ZW0+e2kxOG4uc2F2aW5nKCl9PC9lbT59XG4gICAgICAgICAgICB7U1RBVEVfVU5LTk9XTl9FUlJPUiA9PT0gc2F2ZVN0YXRlICYmIChcbiAgICAgICAgICAgICAgPGVtPntpMThuLmNoYW5nZUVtYWlsTW9kYWxfdW5leHBlY3RlZEVycm9yKCl9PC9lbT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9Db25maXJtQ2FuY2VsRm9vdGVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQmFzZURpYWxvZz5cbiAgICApO1xuICB9O1xufVxuXG5jb25zdCBzdHlsZXMgPSB7XG4gIGNvbnRhaW5lcjoge1xuICAgIG1hcmdpbjogMjAsXG4gICAgY29sb3I6IGNvbG9yLmNoYXJjb2FsLFxuICB9LFxufTtcbiIsImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtCQVNFX0RJQUxPR19XSURUSH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi9CdXR0b24nO1xuaW1wb3J0IGNvbG9yIGZyb20gJy4uL3V0aWwvY29sb3InO1xuaW1wb3J0IGkxOG4gZnJvbSAnQGNkby9sb2NhbGUnO1xuXG4vKipcbiAqIEJhc2VEaWFsb2dcbiAqIEEgZ2VuZXJpYyBtb2RhbCBkaWFsb2cgdGhhdCBoYXMgYW4geC1jbG9zZSBpbiB0aGUgdXBwZXIgcmlnaHQsIGFuZCBhXG4gKiBzZW1pLXRyYW5zcGFyZW50IGJhY2tkcm9wLiBDYW4gYmUgY2xvc2VkIGJ5IGNsaWNraW5nIHRoZSB4LCBjbGlja2luZyB0aGVcbiAqIGJhY2tkcm9wLCBvciBwcmVzc2luZyBlc2MuXG4gKlxuICogVG8gdXNlIGEgc3R5bGVkIHZlcnNpb24gb2YgdGhpcyBjb21wb25lbnQgdGhhdCBmb2xsb3dzIG91ciBzdHlsZSBndWlkZSxcbiAqIHVzZSBTdHlsaXplZEJhc2VEaWFsb2cuanN4LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlRGlhbG9nIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBpc09wZW46IFByb3BUeXBlcy5ib29sLFxuICAgIGhhbmRsZUNsb3NlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB1bmNsb3NlYWJsZTogUHJvcFR5cGVzLmJvb2wsXG4gICAgaGlkZUNsb3NlQnV0dG9uOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBoYW5kbGVLZXlEb3duOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvLyBGb3IgdXNlIGluIHJlYWN0LXN0b3J5Ym9vazsgYWxsb3dzIHJlbmRlcmluZyBkaWFsb2cgaW5saW5lIGluIHN0b3J5IHRhYmxlcy5cbiAgICBoaWRlQmFja2Ryb3A6IFByb3BUeXBlcy5ib29sLFxuICAgIGZ1bGxXaWR0aDogUHJvcFR5cGVzLmJvb2wsXG4gICAgZnVsbEhlaWdodDogUHJvcFR5cGVzLmJvb2wsXG4gICAgdXNlVXBkYXRlZFN0eWxlczogUHJvcFR5cGVzLmJvb2wsXG4gICAgbm9Nb2RhbFN0eWxlczogUHJvcFR5cGVzLmJvb2wsXG4gICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuICAgIGZpeGVkV2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgZml4ZWRIZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgdXNlRmxleGJveDogUHJvcFR5cGVzLmJvb2wsXG4gICAgYm9keUlkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGJvZHlDbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgc3R5bGU6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgc291bmRQbGF5ZXI6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgb3ZlcmZsb3c6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgLy8gVGVtcG9yYXJ5IHByb3AgdW50aWwgQW5pbWF0aW9uUGlja2VyQm9keSBpcyByZWRlc2lnbmVkXG4gICAgYmFja2Ryb3BTdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgfTtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmZvY3VzRGlhbG9nKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5mb2N1c0RpYWxvZygpO1xuICB9XG5cbiAgaGFuZGxlS2V5RG93biA9IGV2ZW50ID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLmhhbmRsZUtleURvd24gJiYgdGhpcy5wcm9wcy5oYW5kbGVLZXlEb3duKGV2ZW50KTtcbiAgfTtcblxuICBjbG9zZURpYWxvZyA9ICgpID0+IHtcbiAgICBpZiAoIXRoaXMucHJvcHMudW5jbG9zZWFibGUgJiYgdGhpcy5wcm9wcy5oYW5kbGVDbG9zZSkge1xuICAgICAgdGhpcy5wcm9wcy5oYW5kbGVDbG9zZSgpO1xuICAgICAgaWYgKHRoaXMucHJvcHMuc291bmRQbGF5ZXIpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5zb3VuZFBsYXllci5zdG9wQWxsQXVkaW8oKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqIEByZXR1cm5zIHtBcnJheS48RWxlbWVudD59ICovXG4gIGdldFRhYmJhYmxlRWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwodGhpcy5yZWZzLmRpYWxvZy5xdWVyeVNlbGVjdG9yQWxsKCdhLGJ1dHRvbixpbnB1dCcpKTtcbiAgfVxuXG4gIGZvY3VzRGlhbG9nKCkge1xuICAgIC8vIERvbid0IHN0ZWFsIGZvY3VzIGlmIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBhbHJlYWR5IGEgZGVzY2VuZGFudCBvZiB0aGVcbiAgICAvLyBkaWFsb2cgLSBwcmV2ZW50cyBmb2N1cyBsb3NzIG9uIHVwZGF0ZXMgb2Ygb3BlbiBCYXNlRGlhbG9nIGNvbXBvbmVudHMuXG4gICAgY29uc3QgZGVzY2VuZGFudElzQWN0aXZlID1cbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiZcbiAgICAgIHRoaXMucmVmcy5kaWFsb2cgJiZcbiAgICAgIHRoaXMucmVmcy5kaWFsb2cuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG4gICAgaWYgKHRoaXMucHJvcHMuaXNPcGVuICYmICFkZXNjZW5kYW50SXNBY3RpdmUpIHtcbiAgICAgIHRoaXMucmVmcy5kaWFsb2cuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmlzT3BlbiAmJiAhdGhpcy5wcm9wcy5oaWRlQmFja2Ryb3ApIHtcbiAgICAgIHJldHVybiA8ZGl2IC8+O1xuICAgIH1cblxuICAgIGxldCBib2R5U3R5bGUsIG1vZGFsQm9keVN0eWxlLCB4Q2xvc2VTdHlsZTtcbiAgICBpZiAodGhpcy5wcm9wcy5mdWxsV2lkdGgpIHtcbiAgICAgIGJvZHlTdHlsZSA9IHtcbiAgICAgICAgLi4uYm9keVN0eWxlLFxuICAgICAgICB3aWR0aDogJzkwJScsXG4gICAgICAgIG1hcmdpbkxlZnQ6ICctNDUlJyxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLmZ1bGxIZWlnaHQpIHtcbiAgICAgIGJvZHlTdHlsZSA9IHtcbiAgICAgICAgLi4uYm9keVN0eWxlLFxuICAgICAgICBoZWlnaHQ6ICc4MCUnLFxuICAgICAgfTtcbiAgICAgIG1vZGFsQm9keVN0eWxlID0ge1xuICAgICAgICAuLi5tb2RhbEJvZHlTdHlsZSxcbiAgICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGxldCB3cmFwcGVyQ2xhc3NOYW1lcyA9ICcnO1xuICAgIGxldCBtb2RhbENsYXNzTmFtZXMgPSAnbW9kYWwnO1xuICAgIGxldCBtb2RhbEJvZHlDbGFzc05hbWVzID0gJ21vZGFsLWJvZHknO1xuICAgIGxldCBtb2RhbEJhY2tkcm9wQ2xhc3NOYW1lcyA9ICdtb2RhbC1iYWNrZHJvcCc7XG4gICAgY29uc3Qgb3ZlcmZsb3dYID0gdGhpcy5wcm9wcy5vdmVyZmxvdyB8fCAnaGlkZGVuJztcbiAgICBjb25zdCBvdmVyZmxvd1kgPVxuICAgICAgdGhpcy5wcm9wcy5vdmVyZmxvdyB8fFxuICAgICAgKHRoaXMucHJvcHMuZml4ZWRIZWlnaHQgfHwgdGhpcy5wcm9wcy5mdWxsSGVpZ2h0ID8gJ2hpZGRlbicgOiAnYXV0bycpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudXNlVXBkYXRlZFN0eWxlcykge1xuICAgICAgd3JhcHBlckNsYXNzTmFtZXMgPSAnZGFzaGJvYXJkLXN0eWxlcyc7XG4gICAgICBtb2RhbEJvZHlDbGFzc05hbWVzID0gJyc7XG4gICAgICBtb2RhbEJvZHlTdHlsZSA9IHtcbiAgICAgICAgYmFja2dyb3VuZDogJyNmZmYnLFxuICAgICAgICBoZWlnaHQ6IHRoaXMucHJvcHMuZml4ZWRIZWlnaHQsXG4gICAgICAgIG1heEhlaWdodDogIXRoaXMucHJvcHMuZml4ZWRIZWlnaHQgJiYgJzgwdmgnLFxuICAgICAgICBvdmVyZmxvd1g6IG92ZXJmbG93WCxcbiAgICAgICAgb3ZlcmZsb3dZOiBvdmVyZmxvd1ksXG4gICAgICAgIGJvcmRlclJhZGl1czogNCxcbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5wcm9wcy51c2VGbGV4Ym94KSB7XG4gICAgICAgIG1vZGFsQm9keVN0eWxlID0ge1xuICAgICAgICAgIC4uLm1vZGFsQm9keVN0eWxlLFxuICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGJvZHlTdHlsZSA9IHtcbiAgICAgICAgLi4uYm9keVN0eWxlLFxuICAgICAgICB3aWR0aDogdGhpcy5wcm9wcy5maXhlZFdpZHRoIHx8IEJBU0VfRElBTE9HX1dJRFRILFxuICAgICAgICBtYXJnaW5MZWZ0OiAtdGhpcy5wcm9wcy5maXhlZFdpZHRoIC8gMiB8fCAtMzUwLFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMubm9Nb2RhbFN0eWxlcykge1xuICAgICAgbW9kYWxDbGFzc05hbWVzID0gJyc7XG4gICAgICBtb2RhbEJvZHlDbGFzc05hbWVzID0gJyc7XG4gICAgfVxuXG4gICAgYm9keVN0eWxlID0ge1xuICAgICAgLi4uYm9keVN0eWxlLFxuICAgICAgLi4uKHRoaXMucHJvcHMuaGlkZUJhY2tkcm9wICYmIHtcbiAgICAgICAgcG9zaXRpb246ICdpbml0aWFsJyxcbiAgICAgICAgbWFyZ2luTGVmdDogMCxcbiAgICAgIH0pLFxuICAgICAgLi4udGhpcy5wcm9wcy5zdHlsZSxcbiAgICB9O1xuICAgIHhDbG9zZVN0eWxlID0ge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICB0b3A6IDAsXG4gICAgICByaWdodDogMCxcbiAgICAgIHBhZGRpbmc6IDAsXG4gICAgICBjb2xvcjogY29sb3IubmV1dHJhbF9kYXJrMzAsXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIGZvbnRTaXplOiAyNCxcbiAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgIH07XG5cbiAgICBtb2RhbEJvZHlDbGFzc05hbWVzID0gW21vZGFsQm9keUNsYXNzTmFtZXMsIHRoaXMucHJvcHMuYm9keUNsYXNzTmFtZV1cbiAgICAgIC5maWx0ZXIoY2xhc3NOYW1lID0+ICEhY2xhc3NOYW1lKVxuICAgICAgLmpvaW4oJyAnKTtcblxuICAgIGxldCBib2R5ID0gKFxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT17Ym9keVN0eWxlfVxuICAgICAgICB0YWJJbmRleD1cIi0xXCJcbiAgICAgICAgY2xhc3NOYW1lPXttb2RhbENsYXNzTmFtZXN9XG4gICAgICAgIHJlZj1cImRpYWxvZ1wiXG4gICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVLZXlEb3dufVxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9e21vZGFsQm9keVN0eWxlfVxuICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmJvZHlJZH1cbiAgICAgICAgICBjbGFzc05hbWU9e21vZGFsQm9keUNsYXNzTmFtZXN9XG4gICAgICAgID5cbiAgICAgICAgICB7IXRoaXMucHJvcHMudW5jbG9zZWFibGUgJiYgIXRoaXMucHJvcHMuaGlkZUNsb3NlQnV0dG9uICYmIChcbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgaWQ9XCJ4LWNsb3NlXCJcbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jbG9zZURpYWxvZ31cbiAgICAgICAgICAgICAgaWNvbj1cImZhLXNvbGlkIGZhLXhtYXJrXCJcbiAgICAgICAgICAgICAgc3R5bGU9e3hDbG9zZVN0eWxlfVxuICAgICAgICAgICAgICBjb2xvcj1cIndoaXRlXCJcbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD17aTE4bi5jbG9zZURpYWxvZygpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5oaWRlQmFja2Ryb3ApIHtcbiAgICAgIHJldHVybiBib2R5O1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17d3JhcHBlckNsYXNzTmFtZXN9PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXttb2RhbEJhY2tkcm9wQ2xhc3NOYW1lc31cbiAgICAgICAgICBzdHlsZT17dGhpcy5wcm9wcy5iYWNrZHJvcFN0eWxlfVxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xvc2VEaWFsb2d9XG4gICAgICAgIC8+XG4gICAgICAgIHtib2R5fVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuIiwiLy8gUkZDIDUzMjIgT2ZmaWNpYWwgU3RhbmRhcmQgZW1haWwgcmVnZXhcbi8vIFNvdXJjZTogaHR0cDovL2VtYWlscmVnZXguY29tL1xuXG5jb25zdCBFTUFJTF9SRUdFWCA9XG4gIC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuZXhwb3J0IGNvbnN0IGlzRW1haWwgPSB2YWx1ZSA9PiBFTUFJTF9SRUdFWC50ZXN0KHZhbHVlKTtcblxuY29uc3QgWklQX0NPREVfUkVHRVggPSAvXlxcZHs1fShbXFxXLV0/XFxkezR9KT8kLztcbmV4cG9ydCBjb25zdCBpc1ppcENvZGUgPSB2YWx1ZSA9PiBaSVBfQ09ERV9SRUdFWC50ZXN0KHZhbHVlKTtcblxuZXhwb3J0IGNvbnN0IGlzSW50ID0gdmFsdWUgPT4ge1xuICAvLyBTdWIgb3V0IGNvbW1hc1xuICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlLnJlcGxhY2UoLywvZywgJycpO1xuICByZXR1cm4gcGFyc2VJbnQobmV3VmFsdWUsIDEwKS50b1N0cmluZygpID09PSBuZXdWYWx1ZTtcbn07XG5leHBvcnQgY29uc3QgaXNQZXJjZW50ID0gdmFsdWUgPT4ge1xuICBsZXQgcGVyY2VudCA9IHBhcnNlRmxvYXQodmFsdWUpO1xuXG4gIHJldHVybiAwIDw9IHBlcmNlbnQgJiYgcGVyY2VudCA8PSAxMDA7XG59O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBDaGFuZ2VFbWFpbE1vZGFsIGZyb20gJy4vQ2hhbmdlRW1haWxNb2RhbCc7XG5pbXBvcnQge2FjdGlvbn0gZnJvbSAnQHN0b3J5Ym9vay9hZGRvbi1hY3Rpb25zJztcblxuY29uc3QgREVGQVVMVF9QUk9QUyA9IHtcbiAgaGFuZGxlU3VibWl0OiBhY3Rpb24oJ2hhbmRsZVN1Ym1pdCBjYWxsYmFjaycpLFxuICBoYW5kbGVDYW5jZWw6IGFjdGlvbignaGFuZGxlQ2FuY2VsIGNhbGxiYWNrJyksXG4gIGlzUGFzc3dvcmRSZXF1aXJlZDogdHJ1ZSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50OiBDaGFuZ2VFbWFpbE1vZGFsLFxufTtcblxuY29uc3QgY29udGFpbmVyID0ge1xuICBtYXJnaW46ICdhdXRvJyxcbiAgd2lkdGg6ICc1MCUnLFxuICBwYWRkaW5nOiAnMTBweCcsXG59O1xuXG5jb25zdCBUZW1wbGF0ZSA9IGFyZ3MgPT4gKFxuICA8ZGl2IHN0eWxlPXtjb250YWluZXJ9PlxuICAgIDxDaGFuZ2VFbWFpbE1vZGFsIHsuLi5ERUZBVUxUX1BST1BTfSB7Li4uYXJnc30gLz5cbiAgPC9kaXY+XG4pO1xuXG5leHBvcnQgY29uc3QgU3R1ZGVudFZpZXcgPSBUZW1wbGF0ZS5iaW5kKHt9KTtcblN0dWRlbnRWaWV3LmFyZ3MgPSB7XG4gIHVzZXJUeXBlOiAnc3R1ZGVudCcsXG59O1xuXG5leHBvcnQgY29uc3QgVGVhY2hlclZpZXcgPSBUZW1wbGF0ZS5iaW5kKHt9KTtcblRlYWNoZXJWaWV3LmFyZ3MgPSB7XG4gIHVzZXJUeXBlOiAndGVhY2hlcicsXG59O1xuIl0sIm5hbWVzIjpbIm9wdGlvbnMiLCJlbWFpbCIsIm5vcm1hbGl6ZUVtYWlsIiwiJCIsImVtYWlsX3NlbGVjdG9yIiwidmFsIiwiRU1BSUxfUkVHRVgiLCJ0ZXN0IiwiaGFzaGVkX2VtYWlsIiwiaGFzaEVtYWlsIiwiaGFzaGVkX2VtYWlsX3NlbGVjdG9yIiwic2tpcF9jbGVhcl9lbWFpbCIsImFnZV9zZWxlY3RvciIsImNsZWFydGV4dEVtYWlsIiwibWQ1IiwicmF3RW1haWwiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJDaGFuZ2VFbWFpbE1vZGFsIiwic2F2ZVN0YXRlIiwidmFsdWVzIiwibmV3RW1haWwiLCJjdXJyZW50UGFzc3dvcmQiLCJlbWFpbE9wdEluIiwic2VydmVyRXJyb3JzIiwiaXNGb3JtVmFsaWQiLCJnZXRWYWxpZGF0aW9uRXJyb3JzIiwic3RhdGUiLCJzZXRTdGF0ZSIsInByb3BzIiwiaGFuZGxlU3VibWl0Iiwib25TdWJtaXRGYWlsdXJlIiwiaGFuZGxlQ2FuY2VsIiwiZXJyb3IiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjaGFuZ2VFbWFpbEZvcm0iLCJmb2N1c09uQW5FcnJvciIsImN1cnJlbnRIYXNoZWRFbWFpbCIsImxlbmd0aCIsImkxOG4iLCJjaGFuZ2VFbWFpbE1vZGFsX25ld0VtYWlsX2lzUmVxdWlyZWQiLCJpc0VtYWlsIiwiY2hhbmdlRW1haWxNb2RhbF9uZXdFbWFpbF9tdXN0QmVEaWZmZXJlbnQiLCJjaGFuZ2VFbWFpbE1vZGFsX25ld0VtYWlsX2ludmFsaWQiLCJpc1Bhc3N3b3JkUmVxdWlyZWQiLCJjaGFuZ2VFbWFpbE1vZGFsX2N1cnJlbnRQYXNzd29yZF9pc1JlcXVpcmVkIiwidXNlclR5cGUiLCJjaGFuZ2VFbWFpbE1vZGFsX2VtYWlsT3B0SW5faXNSZXF1aXJlZCIsIm5ld1ZhbHVlcyIsIm9sZFZhbHVlcyIsIm5ld1NlcnZlckVycm9ycyIsImZvckVhY2giLCJmaWVsZE5hbWUiLCJ1bmRlZmluZWQiLCJ2YWxpZGF0aW9uRXJyb3JzIiwidXNlVXBkYXRlZFN0eWxlcyIsImlzT3BlbiIsImhhbmRsZUNsb3NlIiwiY2FuY2VsIiwidW5jbG9zZWFibGUiLCJzdHlsZSIsInN0eWxlcyIsImNvbnRhaW5lciIsIkhlYWRlciIsInRleHQiLCJjaGFuZ2VFbWFpbE1vZGFsX3RpdGxlIiwicmVmIiwieCIsImRpc2FibGVkIiwib25DaGFuZ2UiLCJvbkZvcm1DaGFuZ2UiLCJvblN1Ym1pdCIsInNhdmUiLCJDb25maXJtQ2FuY2VsRm9vdGVyIiwiY29uZmlybVRleHQiLCJjaGFuZ2VFbWFpbE1vZGFsX3NhdmUiLCJvbkNvbmZpcm0iLCJvbkNhbmNlbCIsImRpc2FibGVDb25maXJtIiwiZGlzYWJsZUNhbmNlbCIsInRhYkluZGV4Iiwic2F2aW5nIiwiY2hhbmdlRW1haWxNb2RhbF91bmV4cGVjdGVkRXJyb3IiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJ0aGlzIiwiZ2V0TmV3RW1haWxWYWxpZGF0aW9uRXJyb3IiLCJnZXRDdXJyZW50UGFzc3dvcmRWYWxpZGF0aW9uRXJyb3IiLCJnZXRFbWFpbE9wdEluVmFsaWRhdGlvbkVycm9yIiwiUmVhY3QiLCJDb21wb25lbnQiLCJQcm9wVHlwZXMiLCJmdW5jIiwiaXNSZXF1aXJlZCIsIm9uZU9mIiwiYm9vbCIsInN0cmluZyIsIm1hcmdpbiIsImNvbG9yIiwiY2hhcmNvYWwiLCJCYXNlRGlhbG9nIiwiZXZlbnQiLCJjbG9zZURpYWxvZyIsImhhbmRsZUtleURvd24iLCJzb3VuZFBsYXllciIsInN0b3BBbGxBdWRpbyIsImNvbXBvbmVudERpZE1vdW50IiwiZm9jdXNEaWFsb2ciLCJjb21wb25lbnREaWRVcGRhdGUiLCJnZXRUYWJiYWJsZUVsZW1lbnRzIiwic2xpY2UiLCJyZWZzIiwiZGlhbG9nIiwicXVlcnlTZWxlY3RvckFsbCIsImRlc2NlbmRhbnRJc0FjdGl2ZSIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsImNvbnRhaW5zIiwiZm9jdXMiLCJyZW5kZXIiLCJoaWRlQmFja2Ryb3AiLCJib2R5U3R5bGUiLCJtb2RhbEJvZHlTdHlsZSIsInhDbG9zZVN0eWxlIiwiZnVsbFdpZHRoIiwid2lkdGgiLCJtYXJnaW5MZWZ0IiwiZnVsbEhlaWdodCIsImhlaWdodCIsImJveFNpemluZyIsIndyYXBwZXJDbGFzc05hbWVzIiwibW9kYWxDbGFzc05hbWVzIiwibW9kYWxCb2R5Q2xhc3NOYW1lcyIsIm92ZXJmbG93WCIsIm92ZXJmbG93Iiwib3ZlcmZsb3dZIiwiZml4ZWRIZWlnaHQiLCJiYWNrZ3JvdW5kIiwibWF4SGVpZ2h0IiwiYm9yZGVyUmFkaXVzIiwidXNlRmxleGJveCIsImRpc3BsYXkiLCJmbGV4RGlyZWN0aW9uIiwiZml4ZWRXaWR0aCIsIkJBU0VfRElBTE9HX1dJRFRIIiwibm9Nb2RhbFN0eWxlcyIsInBvc2l0aW9uIiwidG9wIiwicmlnaHQiLCJwYWRkaW5nIiwibmV1dHJhbF9kYXJrMzAiLCJjdXJzb3IiLCJmb250U2l6ZSIsImJvcmRlciIsImJvZHlDbGFzc05hbWUiLCJmaWx0ZXIiLCJjbGFzc05hbWUiLCJqb2luIiwiYm9keSIsIm9uS2V5RG93biIsImlkIiwiYm9keUlkIiwiaGlkZUNsb3NlQnV0dG9uIiwib25DbGljayIsImljb24iLCJjaGlsZHJlbiIsImJhY2tkcm9wU3R5bGUiLCJub2RlIiwibnVtYmVyIiwib2JqZWN0IiwidmFsdWUiLCJaSVBfQ09ERV9SRUdFWCIsImlzWmlwQ29kZSIsImlzSW50IiwibmV3VmFsdWUiLCJyZXBsYWNlIiwicGFyc2VJbnQiLCJ0b1N0cmluZyIsImlzUGVyY2VudCIsInBlcmNlbnQiLCJwYXJzZUZsb2F0IiwiREVGQVVMVF9QUk9QUyIsImFjdGlvbiIsImNvbXBvbmVudCIsIlRlbXBsYXRlIiwiYXJncyIsIlN0dWRlbnRWaWV3IiwiYmluZCIsIlRlYWNoZXJWaWV3Il0sInNvdXJjZVJvb3QiOiIifQ==