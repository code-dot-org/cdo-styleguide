"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[3419],{"./src/code-studio/browserNavigation.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.canChangeLevelInPage=function canChangeLevelInPage(currentLevel,newLevel){if(new URL(document.location).pathname.split("/").includes("summary"))return!1;return(null==currentLevel?void 0:currentLevel.usesLab2)&&(null==newLevel?void 0:newLevel.usesLab2)},exports.setWindowTitle=setWindowTitle,exports.setupNavigationHandler=function setupNavigationHandler(lessonData){window.addEventListener("popstate",(function(event){var path=new URL(document.location).pathname;if(path){var values=path.split("/",9);if(!(values.length<7)){var sublevelNumber,levelNumber=Number(values[6]);if(Number.isInteger(levelNumber)&&!(levelNumber<=0))values.length>8&&(sublevelNumber=Number(values[8]),(!Number.isInteger(sublevelNumber)||sublevelNumber<=0)&&(sublevelNumber=void 0)),(0,_redux.getStore)().dispatch((0,_progressRedux.onLevelIndexChange)(levelNumber-1,sublevelNumber&&sublevelNumber-1))}}}))},exports.updateBrowserForLevelNavigation=function updateBrowserForLevelNavigation(progressStoreState,levelPath,levelId){window.history.pushState({},"",levelPath+window.location.search),setWindowTitle(progressStoreState,levelId)};var _progressRedux=__webpack_require__("./src/code-studio/progressRedux.ts"),_redux=__webpack_require__("./src/redux.js");function setWindowTitle(progressStoreState,newLevelId){var lesson=progressStoreState.lessons.find((function(lesson){return lesson.id===progressStoreState.currentLessonId})),numLessons=lesson.num_script_lessons,lessonName=lesson.name,lessonIndex=lesson.levels.findIndex((function(level){return level.activeId===newLevelId}))+1,scriptDisplayName=progressStoreState.scriptDisplayName;document.title=numLessons>1?"".concat(lessonName," #").concat(lessonIndex," | ").concat(scriptDisplayName," - Code.org"):"".concat(lessonName," #").concat(lessonIndex," - Code.org")}},"./src/code-studio/progressReduxSelectors.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.progressionsFromLevels=exports.nextLevelId=exports.levelsForLessonId=exports.levelsByLesson=exports.levelCount=exports.levelById=exports.lessons=exports.lessonExtrasUrl=exports.isPerfect=exports.hasLockableLessons=exports.hasGroups=exports.groupedLessons=exports.getProgressLevelType=exports.getLevelPropertiesPath=exports.getCurrentScriptLevelId=exports.getCurrentLevels=exports.getCurrentLevel=exports.__testonly__=exports.ProgressLevelType=void 0;var _lodash=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/lodash/lodash.js")),_constants=__webpack_require__("./src/constants.js"),_progressHelpers=__webpack_require__("./src/templates/progress/progressHelpers.js"),_sharedConstants=__webpack_require__("./generated-scripts/sharedConstants.js"),_activityUtils=__webpack_require__("./src/code-studio/activityUtils.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.hasLockableLessons=function hasLockableLessons(state){return state.lessons.some((function(lesson){return lesson.lockable}))},exports.hasGroups=function hasGroups(state){return Object.keys(groupedLessons(state)).length>1};var lessonFromLessonAtIndex=function lessonFromLessonAtIndex(state,lessonIndex){return _objectSpread(_objectSpread({},lessonFromLesson(state.lessons[lessonIndex])),{},{isFocusArea:state.focusAreaLessonIds.includes(state.lessons[lessonIndex].id)})},lessonFromLesson=function lessonFromLesson(lesson){return _lodash.default.pick(lesson,["name","id","lockable","lessonNumber","lessonStartUrl","lesson_plan_html_url","lesson_feedback_url","student_lesson_plan_html_url","description_student","description_teacher"])},peerReviewLesson=(exports.lessons=function lessons(state){return state.lessons.map((function(_,index){return lessonFromLessonAtIndex(state,index)}))},function peerReviewLesson(state){return _objectSpread(_objectSpread({},lessonFromLesson(state.peerReviewLessonInfo)),{},{id:-1,lockable:!1,isFocusArea:!1})}),peerReviewLevels=function peerReviewLevels(state){return state.peerReviewLessonInfo.levels.map((function(level,index){return _objectSpread(_objectSpread({},level),{},{id:(-1).toString(),isLocked:level.locked,status:level.status||_sharedConstants.LevelStatus.not_tried,levelNumber:index+1})}))},ProgressLevelType=exports.ProgressLevelType={SCRIPT_LEVEL:"script_level",LEVEL:"level"},getProgressLevelType=exports.getProgressLevelType=function getProgressLevelType(state){return state.progress.lessons?ProgressLevelType.SCRIPT_LEVEL:state.progress.currentLevelId?ProgressLevelType.LEVEL:void 0},levelWithProgress=(exports.getLevelPropertiesPath=function getLevelPropertiesPath(state){if(state.progress.lessons){var _state$progress$lesso,levelPosition,sublevelPosition,scriptName=state.progress.scriptName,lessonPosition=null===(_state$progress$lesso=state.progress.lessons)||void 0===_state$progress$lesso?void 0:_state$progress$lesso.find((function(lesson){return lesson.id===state.progress.currentLessonId})).relative_position,currentLevel=getCurrentLevel(state);if(levelPosition=currentLevel.levelNumber,currentLevel.parentLevelId)levelPosition=levelById(state.progress,state.progress.currentLessonId,currentLevel.parentLevelId).levelNumber,sublevelPosition=currentLevel.levelNumber;return"/s/".concat(scriptName,"/lessons/").concat(lessonPosition,"/levels/").concat(levelPosition,"/").concat(void 0===sublevelPosition?"":"sublevel/".concat(sublevelPosition,"/"),"level_properties")}if(null!==state.progress.currentLevelId){var levelId=state.progress.currentLevelId;return"/levels/".concat(levelId,"/level_properties")}},function levelWithProgress(_ref,level,isLockable,parentLevelId){var _levelProgress,_level$ids,_level$sublevels,levelResults=_ref.levelResults,unitProgress=_ref.unitProgress,_ref$levelPairing=_ref.levelPairing,levelPairing=void 0===_ref$levelPairing?{}:_ref$levelPairing,currentLevelId=_ref.currentLevelId,normalizedLevel=(0,_progressHelpers.processedLevel)(level,parentLevelId);level.ids&&(normalizedLevel.id=function bestResultLevelId(levelIds,progressData){if(1===levelIds.length)return levelIds[0];var attemptedIds=levelIds.filter((function(id){return progressData[id]}));if(0===attemptedIds.length)return levelIds[0];var bestId=attemptedIds[0],bestResult=progressData[bestId];return attemptedIds.forEach((function(id){var result=progressData[id];result>bestResult&&(bestId=id,bestResult=result)})),bestId}(level.ids,levelResults));var status=_sharedConstants.LevelStatus.not_tried,locked=isLockable,teacherFeedbackReviewState=null,levelProgress=unitProgress[normalizedLevel.id];null!==(_levelProgress=levelProgress)&&void 0!==_levelProgress&&_levelProgress.pages&&(levelProgress=levelProgress.pages[normalizedLevel.pageNumber-1]),levelProgress?(status=levelProgress.status,locked=levelProgress.locked,teacherFeedbackReviewState=levelProgress.teacherFeedbackReviewState):level.kind!==_sharedConstants.LevelKind.assessment&&(status=(0,_activityUtils.activityCssClass)(levelResults[normalizedLevel.id]));var isCurrent=normalizedLevel.id===currentLevelId||!(null===(_level$ids=level.ids)||void 0===_level$ids||!_level$ids.includes[currentLevelId]);return _objectSpread(_objectSpread({},normalizedLevel),{},{status,isCurrentLevel:isCurrent,paired:levelPairing[level.activeId],isLocked:locked,teacherFeedbackReviewState,sublevels:null===(_level$sublevels=level.sublevels)||void 0===_level$sublevels?void 0:_level$sublevels.map((function(sublevel){return levelWithProgress({levelResults,unitProgress,levelPairing,currentLevelId},sublevel,isLockable,normalizedLevel.id)}))})}),levelsByLesson=exports.levelsByLesson=function levelsByLesson(_ref2){var lessons=_ref2.lessons,levelResults=_ref2.levelResults,unitProgress=_ref2.unitProgress,levelPairing=_ref2.levelPairing,currentLevelId=_ref2.currentLevelId;return lessons.map((function(lesson){return lesson.levels.map((function(level){return levelWithProgress({levelResults,unitProgress,levelPairing,currentLevelId},level,lesson.lockable)}))}))},levelsForLessonId=exports.levelsForLessonId=function levelsForLessonId(state,lessonId){var _state$lessons,lesson=null===(_state$lessons=state.lessons)||void 0===_state$lessons?void 0:_state$lessons.find((function(lesson){return lesson.id===lessonId}));return null==lesson?void 0:lesson.levels.map((function(level){return levelWithProgress(state,level,lesson.lockable)}))},levelById=exports.levelById=function levelById(state,lessonId,levelId){var _levelsForLessonId,_levelsForLessonId$fl;return null===(_levelsForLessonId=levelsForLessonId(state,lessonId))||void 0===_levelsForLessonId||null===(_levelsForLessonId$fl=_levelsForLessonId.flatMap((function(level){return[level].concat(_toConsumableArray((null==level?void 0:level.sublevels)||[]))})))||void 0===_levelsForLessonId$fl?void 0:_levelsForLessonId$fl.find((function(level){return level.id===levelId}))},getCurrentLevel=exports.getCurrentLevel=function getCurrentLevel(state){var _getCurrentLevels,_getCurrentLevels$fla;return null===(_getCurrentLevels=getCurrentLevels(state))||void 0===_getCurrentLevels||null===(_getCurrentLevels$fla=_getCurrentLevels.flatMap((function(level){return[level].concat(_toConsumableArray((null==level?void 0:level.sublevels)||[]))})))||void 0===_getCurrentLevels$fla?void 0:_getCurrentLevels$fla.find((function(level){return level.isCurrentLevel}))},getCurrentLevels=exports.getCurrentLevels=function getCurrentLevels(state){return levelsForLessonId(state.progress,state.progress.currentLessonId)},groupedLessons=(exports.getCurrentScriptLevelId=function getCurrentScriptLevelId(state){var _levelById,currentLevel=getCurrentLevel(state);if(currentLevel)return currentLevel.parentLevelId?null===(_levelById=levelById(state.progress,state.progress.currentLessonId,currentLevel.parentLevelId))||void 0===_levelById?void 0:_levelById.scriptLevelId:currentLevel.scriptLevelId},exports.nextLevelId=function nextLevelId(state){if(getProgressLevelType(state)===ProgressLevelType.SCRIPT_LEVEL){var levels=levelsForLessonId(state.progress,state.progress.currentLessonId),currentLevel=getCurrentLevel(state);if(currentLevel.parentLevelId)return currentLevel.parentLevelId;var currentLevelIndex=currentLevel.levelNumber-1;if(currentLevelIndex!==levels.length-1)return levels[currentLevelIndex+1].id}},exports.levelCount=function levelCount(state){return getProgressLevelType(state)===ProgressLevelType.LEVEL?1:getProgressLevelType(state)===ProgressLevelType.SCRIPT_LEVEL?getCurrentLevels(state).length:0},exports.lessonExtrasUrl=function lessonExtrasUrl(state,lessonId){return state.lessonExtrasEnabled?state.lessons.find((function(lesson){return lesson.id===lessonId})).lesson_extras_level_url:""},exports.isPerfect=function isPerfect(state,levelId){return!!state.levelResults&&state.levelResults[levelId]>=_constants.TestResults.MINIMUM_OPTIMAL_RESULT},exports.groupedLessons=function groupedLessons(state){var includeBonusLevels=arguments.length>1&&void 0!==arguments[1]&&arguments[1],byGroup={},allLevels=levelsByLesson(state);return state.lessonGroups.forEach((function(lessonGroup){byGroup[lessonGroup.display_name]={lessonGroup:{id:lessonGroup.id,userFacing:lessonGroup.user_facing,displayName:lessonGroup.display_name,description:lessonGroup.description,bigQuestions:lessonGroup.big_questions},lessons:[],levelsByLesson:[]}})),state.lessons.forEach((function(lesson,index){var group=lesson.lesson_group_display_name,lessonAtIndex=lessonFromLessonAtIndex(state,index),lessonLevels=allLevels[index];includeBonusLevels||(lessonLevels=lessonLevels.filter((function(level){return!level.bonus}))),byGroup[group]&&(byGroup[group].lessons.push(lessonAtIndex),byGroup[group].levelsByLesson.push(lessonLevels))})),state.peerReviewLessonInfo&&(byGroup[state.peerReviewLessonInfo.lesson_group_display_name]={group:state.peerReviewLessonInfo.lesson_group_display_name,lessonGroup:{id:null,displayName:state.peerReviewLessonInfo.lesson_group_display_name,description:null,bigQuestions:null},lessons:[peerReviewLesson(state)],levelsByLesson:[peerReviewLevels(state)]}),_lodash.default.values(byGroup)});exports.progressionsFromLevels=function progressionsFromLevels(levels){var progressions=[];if(0===levels.length)return progressions;var currentProgression={start:0,name:levels[0].progression||levels[0].name,displayName:levels[0].progressionDisplayName||levels[0].name,levels:[levels[0]]};return levels.slice(1).forEach((function(level,index){(level.progression||level.name)===currentProgression.name?currentProgression.levels.push(level):(progressions.push(currentProgression),currentProgression={start:index+1,name:level.progression||level.name,displayName:level.progressionDisplayName||level.name,levels:[level]})})),progressions.push(currentProgression),progressions};exports.__testonly__={}},"./src/code-studio/verifiedInstructorRedux.js":(__unused_webpack_module,exports)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function verifiedInstructor(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments.length>1?arguments[1]:void 0;if(action.type===SET_VERIFIED)return _objectSpread(_objectSpread({},state),{},{isVerified:!0});if(action.type===SET_VERIFIED_RESOURCES)return _objectSpread(_objectSpread({},state),{},{hasVerifiedResources:!0});return _objectSpread({},state)},exports.setVerifiedResources=exports.setVerified=void 0;var SET_VERIFIED="verifiedInstructor/SET_VERIFIED",SET_VERIFIED_RESOURCES="verifiedInstructor/SET_VERIFIED_RESOURCES",initialState=(exports.setVerified=function setVerified(){return{type:SET_VERIFIED}},exports.setVerifiedResources=function setVerifiedResources(hasVerifiedResources){return{type:SET_VERIFIED_RESOURCES}},{isVerified:!1,hasVerifiedResources:!1})},"./src/code-studio/progressRedux.ts":function(__unused_webpack_module,exports,__webpack_require__){var _a,_b,__assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.__testonly__=exports.setViewAsUserId=exports.setLessonExtrasEnabled=exports.setScriptCompleted=exports.setCurrentLessonId=exports.setStudentDefaultsSummaryView=exports.setIsMiniView=exports.setIsSummaryView=exports.setIsAge13Required=exports.disablePostMilestone=exports.updateFocusArea=exports.mergePeerReviewProgress=exports.overwriteResults=exports.mergeResults=exports.useDbProgress=exports.clearResults=exports.setScriptProgress=exports.setCurrentLevelId=exports.initProgress=exports.sendSubmitReport=exports.sendPredictLevelReport=exports.queryUserProgress=void 0,exports.navigateToLevelId=navigateToLevelId,exports.onLevelIndexChange=function onLevelIndexChange(levelIndex,sublevelIndex){return function(dispatch,getState){var levels=(0,progressReduxSelectors_1.getCurrentLevels)(getState());if(levels&&0!==levels.length){var level=levels[levelIndex];if(void 0!==sublevelIndex&&level.sublevels&&sublevelIndex<level.sublevels.length){var newLevelId=level.sublevels[sublevelIndex].id;dispatch((0,exports.setCurrentLevelId)(newLevelId))}else{newLevelId=level.id;dispatch((0,exports.setCurrentLevelId)(newLevelId))}}}},exports.navigateToNextLevel=function navigateToNextLevel(){return function(dispatch,getState){var levelId=(0,progressReduxSelectors_1.nextLevelId)(getState());void 0!==levelId&&dispatch(navigateToLevelId(levelId))}},exports.sendSuccessReport=function sendSuccessReport(appType){return function(dispatch,getState){sendReportHelper(appType,constants_1.TestResults.ALL_PASS,dispatch,getState)}},exports.processedLessons=processedLessons;var toolkit_1=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),jquery_1=__importDefault(__webpack_require__("./node_modules/jquery/dist/jquery.js")),lodash_1=__importDefault(__webpack_require__("./node_modules/lodash/lodash.js")),verifiedInstructorRedux_1=__webpack_require__("./src/code-studio/verifiedInstructorRedux.js"),constants_1=__webpack_require__("./src/constants.js"),progressHelpers_1=__webpack_require__("./src/templates/progress/progressHelpers.js"),progressTypes_1=__webpack_require__("./src/types/progressTypes.ts"),BubbleFactory_1=__webpack_require__("./src/templates/progress/BubbleFactory.jsx"),utils_1=__webpack_require__("./src/utils.js"),activityUtils_1=__webpack_require__("./src/code-studio/activityUtils.js"),browserNavigation_1=__webpack_require__("./src/code-studio/browserNavigation.js"),lessonLockRedux_1=__webpack_require__("./src/code-studio/lessonLockRedux.js"),progressReduxSelectors_1=__webpack_require__("./src/code-studio/progressReduxSelectors.js"),viewAsRedux_1=__webpack_require__("./src/code-studio/viewAsRedux.js"),initialState={currentLevelId:null,currentLessonId:void 0,deeperLearningCourse:null,saveAnswersBeforeNavigation:null,lessons:null,lessonGroups:null,scriptId:null,viewAsUserId:null,scriptName:null,scriptDisplayName:void 0,unitTitle:null,courseId:null,isLessonExtras:!1,unitProgress:{},unitProgressHasLoaded:!1,levelResults:{},focusAreaLessonIds:[],peerReviewLessonInfo:null,peerReviewsPerformed:[],postMilestoneDisabled:!1,isAge13Required:!1,studentDefaultsSummaryView:!0,isSummaryView:!0,isMiniView:!1,hasFullProgress:!1,lessonExtrasEnabled:!1,usingDbProgress:!1,currentPageNumber:progressTypes_1.PUZZLE_PAGE_NONE,courseVersionId:void 0,unitDescription:void 0,unitStudentDescription:void 0,changeFocusAreaPath:void 0,unitCompleted:void 0},progressSlice=(0,toolkit_1.createSlice)({name:"progress",initialState,reducers:{initProgress:function(state,action){var lessons=action.payload.lessons,currentLessonId=state.currentLessonId||(1===lessons.length?lessons[0].id:void 0);state.currentLevelId||(state.currentLevelId=action.payload.currentLevelId),state.deeperLearningCourse=action.payload.deeperLearningCourse,state.saveAnswersBeforeNavigation=action.payload.saveAnswersBeforeNavigation,state.lessons=processedLessons(lessons,action.payload.deeperLearningCourse),state.lessonGroups=action.payload.lessonGroups,state.peerReviewLessonInfo=action.payload.peerReviewLessonInfo,state.scriptId=action.payload.scriptId,state.scriptName=action.payload.scriptName,state.scriptDisplayName=action.payload.scriptDisplayName,state.unitTitle=action.payload.unitTitle,state.unitDescription=action.payload.unitDescription,state.unitStudentDescription=action.payload.unitStudentDescription,state.courseId=action.payload.courseId,state.courseVersionId=action.payload.courseVersionId,state.currentLessonId=currentLessonId,state.hasFullProgress=action.payload.isFullProgress,state.isLessonExtras=action.payload.isLessonExtras,state.currentPageNumber=action.payload.currentPageNumber},setCurrentLevelId:function(state,action){state.currentLevelId=action.payload},setScriptProgress:function(state,action){state.unitProgress=(0,progressHelpers_1.processServerStudentProgress)(action.payload),state.unitProgressHasLoaded=!0},clearResults:function(state){state.levelResults=initialState.levelResults},useDbProgress:function(state){state.usingDbProgress=!0},mergeResults:function(state,action){var newLevelResults={};Object.keys(__assign(__assign({},state.levelResults),action.payload)).forEach((function(key){var levelId=parseInt(key);newLevelResults[levelId]=(0,activityUtils_1.mergeActivityResult)(state.levelResults[levelId],action.payload[levelId])})),state.levelResults=newLevelResults},overwriteResults:function(state,action){state.levelResults=action.payload},mergePeerReviewProgress:function(state,action){state.peerReviewLessonInfo&&(state.peerReviewLessonInfo=__assign(__assign({},state.peerReviewLessonInfo),{levels:state.peerReviewLessonInfo.levels.map((function(level,index){return __assign(__assign({},level),action.payload[index])}))}))},updateFocusArea:{reducer:function(state,action){state.changeFocusAreaPath=action.payload.changeFocusAreaPath,state.focusAreaLessonIds=action.payload.focusAreaLessonIds},prepare:function(changeFocusAreaPath,focusAreaLessonIds){return{payload:{changeFocusAreaPath,focusAreaLessonIds}}}},disablePostMilestone:function(state){state.postMilestoneDisabled=!0},setIsAge13Required:function(state,action){state.isAge13Required=action.payload},setIsSummaryView:function(state,action){state.isSummaryView=action.payload},setIsMiniView:function(state,action){state.isMiniView=action.payload},setStudentDefaultsSummaryView:function(state,action){state.studentDefaultsSummaryView=action.payload},setCurrentLessonId:function(state,action){state.currentLessonId||(state.currentLessonId=action.payload)},setScriptCompleted:function(state){state.unitCompleted=!0},setLessonExtrasEnabled:function(state,action){state.lessonExtrasEnabled=action.payload},setViewAsUserId:function(state,action){state.viewAsUserId=action.payload}},extraReducers:(_a={},_a[viewAsRedux_1.SET_VIEW_TYPE]=function(state,action){state.isSummaryView=action.viewType===progressTypes_1.ViewType.Participant&&state.studentDefaultsSummaryView},_a)});function navigateToLevelId(levelId){return function(dispatch,getState){var state=getState().progress;if(state.currentLessonId&&state.currentLevelId){var newLevel=(0,progressReduxSelectors_1.levelById)(state,state.currentLessonId,levelId);if(newLevel){var currentLevel=(0,progressReduxSelectors_1.getCurrentLevel)(getState());if((0,browserNavigation_1.canChangeLevelInPage)(currentLevel,newLevel))(0,browserNavigation_1.updateBrowserForLevelNavigation)(state,newLevel.path,levelId),dispatch((0,exports.setCurrentLevelId)(levelId));else{var url=(0,BubbleFactory_1.getBubbleUrl)(newLevel.path,void 0,void 0,!0);(0,utils_1.navigateToHref)(url)}}}}}function sendReportHelper(appType,result,dispatch,getState,extraData){var state=getState().progress,levelId=state.currentLevelId;if(state.currentLessonId&&levelId){var scriptLevelId=(0,progressReduxSelectors_1.getCurrentScriptLevelId)(getState());if(scriptLevelId){var data=__assign({app:appType,result:!0,testResult:result},extraData=extraData||{});fetch("/milestone/".concat(0,"/").concat(scriptLevelId,"/").concat(levelId),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(data)}).then((function(response){var _a;response.ok&&null!==levelId&&dispatch((0,exports.mergeResults)(((_a={})[levelId]=result,_a)))}))}}}exports.queryUserProgress=function(userId,mergeProgress){return void 0===mergeProgress&&(mergeProgress=!0),function(dispatch,getState){var state=getState().progress;return userProgressFromServer(state,dispatch,userId,mergeProgress)}},exports.sendPredictLevelReport=(0,toolkit_1.createAsyncThunk)("progress/sendPredictLevelReport",(function(payload,thunkAPI){return __awaiter(void 0,void 0,void 0,(function(){var extraPayload;return __generator(this,(function(_a){return extraPayload={program:payload.predictResponse},sendReportHelper(payload.appType,constants_1.TestResults.CONTAINED_LEVEL_RESULT,thunkAPI.dispatch,thunkAPI.getState,extraPayload),[2]}))}))})),exports.sendSubmitReport=(0,toolkit_1.createAsyncThunk)("progress/sendSubmitReport",(function(payload,thunkAPI){return __awaiter(void 0,void 0,void 0,(function(){var extraPayload,result;return __generator(this,(function(_a){switch(_a.label){case 0:return extraPayload={submitted:payload.submitted.toString()},result=payload.submitted?constants_1.TestResults.SUBMITTED_RESULT:constants_1.TestResults.UNSUBMITTED_ATTEMPT,[4,sendReportHelper(payload.appType,result,thunkAPI.dispatch,thunkAPI.getState,extraPayload)];case 1:return _a.sent(),thunkAPI.dispatch((0,exports.queryUserProgress)(thunkAPI.getState().currentUser.userId.toString())),[2]}}))}))}));var userProgressFromServer=function(state,dispatch,userId,mergeProgress){if(void 0===userId&&(userId=null),!state.scriptName){var message="Could not request progress for user ID ".concat(userId," from server: scriptName must be present in progress redux.");throw new Error(message)}return userId&&dispatch((0,exports.clearResults)()),jquery_1.default.ajax({url:"/api/user_progress/".concat(state.scriptName),method:"GET",data:{user_id:userId}}).done((function(data){if(data&&!lodash_1.default.isEmpty(data)){data.isVerifiedInstructor&&dispatch((0,verifiedInstructorRedux_1.setVerified)());var onOverviewPage=!state.currentLevelId;if((data.isInstructor||data.teacherViewingStudent)&&!data.deeperLearningCourse&&onOverviewPage&&dispatch((0,exports.setIsSummaryView)(data.teacherViewingStudent)),data.focusAreaLessonIds&&dispatch((0,exports.updateFocusArea)(data.changeFocusAreaPath,data.focusAreaLessonIds)),dispatch((0,lessonLockRedux_1.authorizeLockable)(data.lockableAuthorized)),data.completed&&dispatch((0,exports.setScriptCompleted)()),data.progress){if(dispatch((0,exports.setScriptProgress)(data.progress)),mergeProgress){var levelResults=lodash_1.default.mapValues(data.progress,progressHelpers_1.getLevelResult);dispatch((0,exports.mergeResults)(levelResults))}data.peerReviewsPerformed&&dispatch((0,exports.mergePeerReviewProgress)(data.peerReviewsPerformed)),data.current_lesson&&dispatch((0,exports.setCurrentLessonId)(data.current_lesson))}}}))};function processedLessons(lessons,isPlc){var numLessonsWithLessonPlan=0;return lessons.map((function(lesson){var lessonNumber;return!isPlc&&lesson.numberedLesson&&(lessonNumber=++numLessonsWithLessonPlan),__assign(__assign({},lodash_1.default.omit(lesson,"hidden")),{lessonNumber})}))}exports.initProgress=(_b=progressSlice.actions).initProgress,exports.setCurrentLevelId=_b.setCurrentLevelId,exports.setScriptProgress=_b.setScriptProgress,exports.clearResults=_b.clearResults,exports.useDbProgress=_b.useDbProgress,exports.mergeResults=_b.mergeResults,exports.overwriteResults=_b.overwriteResults,exports.mergePeerReviewProgress=_b.mergePeerReviewProgress,exports.updateFocusArea=_b.updateFocusArea,exports.disablePostMilestone=_b.disablePostMilestone,exports.setIsAge13Required=_b.setIsAge13Required,exports.setIsSummaryView=_b.setIsSummaryView,exports.setIsMiniView=_b.setIsMiniView,exports.setStudentDefaultsSummaryView=_b.setStudentDefaultsSummaryView,exports.setCurrentLessonId=_b.setCurrentLessonId,exports.setScriptCompleted=_b.setScriptCompleted,exports.setLessonExtrasEnabled=_b.setLessonExtrasEnabled,exports.setViewAsUserId=_b.setViewAsUserId,exports.default=progressSlice.reducer,exports.__testonly__={}},"./src/types/progressTypes.ts":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewType=exports.ReviewStates=exports.PUZZLE_PAGE_NONE=void 0,exports.PUZZLE_PAGE_NONE=-1,exports.ReviewStates={completed:"completed",keepWorking:"keepWorking",awaitingReview:"awaitingReview"},exports.ViewType={Participant:"Participant",Instructor:"Instructor"}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0JBQ3BCLFFBQUFDLG1CQUFrQixzQkFDbEIsUUFBQUMsaUJBQWdCLG9CQUNoQixRQUFBQyxjQUFhLGlCQUNiLFFBQUFDLDhCQUE2QixpQ0FDN0IsUUFBQUMsbUJBQWtCLHNCQUNsQixRQUFBQyxtQkFBa0Isc0JBQ2xCLFFBQUFDLHVCQUFzQiwwQkFDdEIsUUFBQUMsZ0JBQWUsbUJBR2pCLGdCQUFlNUIsY0FBY2tCLFFBR2hCLFFBQUFzRSxhQUlULENBQUMsQyxrTUN6bEJRLFFBQUE5RixrQkFBb0IsRUEwR3BCLFFBQUErRixhQUFlLENBQzFCWCxVQUFXLFlBQ1hZLFlBQWEsY0FDYkMsZUFBZ0Isa0JBMEJMLFFBQUEzRCxTQUFXLENBQ3RCQyxZQUFhLGNBQ2IyRCxXQUFZLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvY29kZS1zdHVkaW8vYnJvd3Nlck5hdmlnYXRpb24uanMiLCJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL2NvZGUtc3R1ZGlvL3Byb2dyZXNzUmVkdXhTZWxlY3RvcnMuanMiLCJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL2NvZGUtc3R1ZGlvL3ZlcmlmaWVkSW5zdHJ1Y3RvclJlZHV4LmpzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy9jb2RlLXN0dWRpby9wcm9ncmVzc1JlZHV4LnRzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy90eXBlcy9wcm9ncmVzc1R5cGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGJyb3dzZXJOYXZpZ2F0aW9uXG4vL1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIHNvbWUgZnVuY3Rpb25hbGl0eSByZWxhdGVkIHRvIG5hdmlnYXRpbmcgdGhyb3VnaFxuLy8gbGV2ZWxzIHdpdGhvdXQgZG9pbmcgcGFnZSByZWxvYWRzLlxuXG5pbXBvcnQge29uTGV2ZWxJbmRleENoYW5nZX0gZnJvbSAnQGNkby9hcHBzL2NvZGUtc3R1ZGlvL3Byb2dyZXNzUmVkdXgnO1xuXG5pbXBvcnQge2dldFN0b3JlfSBmcm9tICcuLi9yZWR1eCc7XG5cbi8vIFJldHVybnMgd2hldGhlciB3ZSBjYW4gc2FmZWx5IG5hdmlnYXRlIGJldHdlZW4gdGhlIHR3byBnaXZlbiBsZXZlbHNcbi8vIHdpdGhvdXQgcmVsb2FkaW5nIHRoZSB3aG9sZSBwYWdlLlxuZXhwb3J0IGZ1bmN0aW9uIGNhbkNoYW5nZUxldmVsSW5QYWdlKGN1cnJlbnRMZXZlbCwgbmV3TGV2ZWwpIHtcbiAgLy8gSWYgd2UgYXJlIG9uIHRoZSBzdW1tYXJ5IHBhZ2UsIHdlIGNhbid0IG5hdmlnYXRlIHRvIGEgbmV3IGxldmVsIHdpdGhvdXRcbiAgLy8gcmVsb2FkaW5nIHRoZSBwYWdlLiBTdW1tYXJ5IGlzIHVzZWQgZm9yIHZpZXdpbmcgc3R1ZGVudCByZXNwb25zZXMgdG9cbiAgLy8gcHJlZGljdCBsZXZlbHMuXG4gIGNvbnN0IHBhdGggPSBuZXcgVVJMKGRvY3VtZW50LmxvY2F0aW9uKS5wYXRobmFtZTtcbiAgY29uc3QgcGF0aENvbXBvbmVudHMgPSBwYXRoLnNwbGl0KCcvJyk7XG4gIGlmIChwYXRoQ29tcG9uZW50cy5pbmNsdWRlcygnc3VtbWFyeScpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIE90aGVyd2lzZSwgd2UgY2FuIG5hdmlnYXRlIGJldHdlZW4gYW55IDIgbGFiMiBsZXZlbHMuXG4gIHJldHVybiBjdXJyZW50TGV2ZWw/LnVzZXNMYWIyICYmIG5ld0xldmVsPy51c2VzTGFiMjtcbn1cblxuLy8gQ2FsbGVkIG9uY2Ugb24gcGFnZSBsb2FkIGZvciBhIHNjcmlwdC1sZXZlbCBvbmx5LCB0aGlzIHNldHMgdXAgYVxuLy8gaGFuZGxlciwgZm9yIHVzZXItaW5pdGlhdGVkIGJyb3dzZXIgYmFjayAmIGZvcndhcmQgYnV0dG9uXG4vLyBwcmVzc2VzLCB3aGljaCBpcyBmaXJlZCB3aGVuIGFycml2aW5nIG9uIGEgcGFnZSB0aGF0IHdlIHB1c2hlZCBvbnRvIHRoZVxuLy8gYnJvd3NlciBzZXNzaW9uIGhpc3Rvcnkgc3RhY2suXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBOYXZpZ2F0aW9uSGFuZGxlcihsZXNzb25EYXRhKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIEEgcGF0aCBsb29rcyBsaWtlIHRoaXM6IC9zL2FsbHRoZXRoaW5ncy9sZXNzb25zLzQ2L2xldmVscy8yKC9zdWJsZXZlbHMvMSlcbiAgICAvLyBUaGUgbGV2ZWwgbnVtYmVyIHdpbGwgYmUgYXQgaW5kZXggNiBvZiBhIHN0cmluZyBzcGxpdCBvbiAnLycuXG4gICAgLy8gVGhlIHN1YmxldmVsIG51bWJlciB3aWxsIGJlIGF0IGluZGV4IDggaWYgcHJlc2VudFxuICAgIGNvbnN0IGxldmVsTnVtYmVyU3RyaW5nSW5kZXggPSA2O1xuICAgIGNvbnN0IHN1YmxldmVsTnVtYmVyU3RyaW5nSW5kZXggPSA4O1xuXG4gICAgY29uc3QgcGF0aCA9IG5ldyBVUkwoZG9jdW1lbnQubG9jYXRpb24pLnBhdGhuYW1lO1xuICAgIGlmICghcGF0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZhbHVlcyA9IHBhdGguc3BsaXQoJy8nLCBzdWJsZXZlbE51bWJlclN0cmluZ0luZGV4ICsgMSk7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPCBsZXZlbE51bWJlclN0cmluZ0luZGV4ICsgMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxldmVsTnVtYmVyID0gTnVtYmVyKHZhbHVlc1s2XSk7XG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGxldmVsTnVtYmVyKSB8fCBsZXZlbE51bWJlciA8PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHN1YmxldmVsTnVtYmVyO1xuICAgIGlmICh2YWx1ZXMubGVuZ3RoID4gc3VibGV2ZWxOdW1iZXJTdHJpbmdJbmRleCkge1xuICAgICAgc3VibGV2ZWxOdW1iZXIgPSBOdW1iZXIodmFsdWVzW3N1YmxldmVsTnVtYmVyU3RyaW5nSW5kZXhdKTtcbiAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihzdWJsZXZlbE51bWJlcikgfHwgc3VibGV2ZWxOdW1iZXIgPD0gMCkge1xuICAgICAgICBzdWJsZXZlbE51bWJlciA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIHByb2dyZXNzIHJlZHV4IHN0b3JlLlxuICAgIGdldFN0b3JlKCkuZGlzcGF0Y2goXG4gICAgICBvbkxldmVsSW5kZXhDaGFuZ2UobGV2ZWxOdW1iZXIgLSAxLCBzdWJsZXZlbE51bWJlciAmJiBzdWJsZXZlbE51bWJlciAtIDEpXG4gICAgKTtcbiAgfSk7XG59XG5cbi8vIEhhbmRsZXMgYSB1c2VyIG5hdmlnYXRpb24gdG8gYSBuZXcgbGV2ZWwsIGJ5IHB1c2hpbmcgdGhpcyBuZXcgbGV2ZWwncyBVUkxcbi8vIG9udG8gdGhlIGJyb3dzZXIgc2Vzc2lvbiBoaXN0b3J5IHN0YWNrLCBhbmQgdXBkYXRpbmcgdGhlIHdpbmRvdyB0aXRsZS5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVCcm93c2VyRm9yTGV2ZWxOYXZpZ2F0aW9uKFxuICBwcm9ncmVzc1N0b3JlU3RhdGUsXG4gIGxldmVsUGF0aCxcbiAgbGV2ZWxJZFxuKSB7XG4gIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsIGxldmVsUGF0aCArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICBzZXRXaW5kb3dUaXRsZShwcm9ncmVzc1N0b3JlU3RhdGUsIGxldmVsSWQpO1xufVxuXG4vLyBJZiB3ZSBhcmUgb24gYSBuZXcgbGV2ZWwgd2l0aG91dCBkb2luZyBhIHBhZ2UgcmVsb2FkLCB0aGVuIHdlIHNob3VsZCBzZXQgdGhlIHRpdGxlXG4vLyB0byBtYXRjaCB3aGF0IGxldmVsc19oZWxwZXIucmIncyBsZXZlbF90aXRsZSBmdW5jdGlvbiB3b3VsZCBoYXZlIGRvbmUuXG5leHBvcnQgZnVuY3Rpb24gc2V0V2luZG93VGl0bGUocHJvZ3Jlc3NTdG9yZVN0YXRlLCBuZXdMZXZlbElkKSB7XG4gIGNvbnN0IGxlc3NvbiA9IHByb2dyZXNzU3RvcmVTdGF0ZS5sZXNzb25zLmZpbmQoXG4gICAgbGVzc29uID0+IGxlc3Nvbi5pZCA9PT0gcHJvZ3Jlc3NTdG9yZVN0YXRlLmN1cnJlbnRMZXNzb25JZFxuICApO1xuICBjb25zdCBudW1MZXNzb25zID0gbGVzc29uLm51bV9zY3JpcHRfbGVzc29ucztcbiAgY29uc3QgbGVzc29uTmFtZSA9IGxlc3Nvbi5uYW1lO1xuICBjb25zdCBsZXNzb25JbmRleCA9XG4gICAgbGVzc29uLmxldmVscy5maW5kSW5kZXgobGV2ZWwgPT4gbGV2ZWwuYWN0aXZlSWQgPT09IG5ld0xldmVsSWQpICsgMTtcbiAgY29uc3Qgc2NyaXB0RGlzcGxheU5hbWUgPSBwcm9ncmVzc1N0b3JlU3RhdGUuc2NyaXB0RGlzcGxheU5hbWU7XG5cbiAgZG9jdW1lbnQudGl0bGUgPVxuICAgIG51bUxlc3NvbnMgPiAxXG4gICAgICA/IGAke2xlc3Nvbk5hbWV9ICMke2xlc3NvbkluZGV4fSB8ICR7c2NyaXB0RGlzcGxheU5hbWV9IC0gQ29kZS5vcmdgXG4gICAgICA6IGAke2xlc3Nvbk5hbWV9ICMke2xlc3NvbkluZGV4fSAtIENvZGUub3JnYDtcbn1cbiIsIi8vIFNlbGVjdG9ycyBhbmQgcmVsYXRlZCBoZWxwZXJzIGZvciBwcm9ncmVzc1JlZHV4LiBUaGVzZSBhcmUgaW4gdGhlaXIgb3duIGZpbGVcbi8vIGJlY2F1c2UgdGhleSBhcmUgcXVpdGUgY29tcGxleCBhbmQgcHJvZ3Jlc3NSZWR1eC5qcyBpcyBhbHJlYWR5IHF1aXRlIGxhcmdlLlxuXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1Rlc3RSZXN1bHRzfSBmcm9tICdAY2RvL2FwcHMvY29uc3RhbnRzJztcbmltcG9ydCB7cHJvY2Vzc2VkTGV2ZWx9IGZyb20gJ0BjZG8vYXBwcy90ZW1wbGF0ZXMvcHJvZ3Jlc3MvcHJvZ3Jlc3NIZWxwZXJzJztcbmltcG9ydCB7TGV2ZWxTdGF0dXMsIExldmVsS2luZH0gZnJvbSAnQGNkby9nZW5lcmF0ZWQtc2NyaXB0cy9zaGFyZWRDb25zdGFudHMnO1xuXG5pbXBvcnQge2FjdGl2aXR5Q3NzQ2xhc3N9IGZyb20gJy4vYWN0aXZpdHlVdGlscyc7XG5cbmNvbnN0IFBFRVJfUkVWSUVXX0lEID0gLTE7XG5cbi8vIFNlbGVjdG9yc1xuXG4vLyBEbyB3ZSBoYXZlIG9uZSBvciBtb3JlIGxvY2thYmxlIGxlc3NvbnNcbmV4cG9ydCBjb25zdCBoYXNMb2NrYWJsZUxlc3NvbnMgPSBzdGF0ZSA9PlxuICBzdGF0ZS5sZXNzb25zLnNvbWUobGVzc29uID0+IGxlc3Nvbi5sb2NrYWJsZSk7XG5cbmV4cG9ydCBjb25zdCBoYXNHcm91cHMgPSBzdGF0ZSA9PiBPYmplY3Qua2V5cyhncm91cGVkTGVzc29ucyhzdGF0ZSkpLmxlbmd0aCA+IDE7XG5cbi8qKlxuICogRXh0cmFjdCB0aGUgcmVsZXZhbnQgcG9ydGlvbnMgb2YgYSBwYXJ0aWN1bGFyIGxlc3NvbiBmcm9tIHRoZSBzdG9yZS5cbiAqIE5vdGUsIHRoYXQgdGhpcyBkb2VzIG5vdCBpbmNsdWRlIGxldmVsc1xuICogQHBhcmFtIHtvYmplY3R9IHN0YXRlIC0gVGhlIHByb2dyZXNzIHN0YXRlIGluIG91ciByZWR1eCBzdG9yZVxuICogQHBhcmFtIHtudW1iZXJ9IGxlc3NvbkluZGV4IC0gVGhlIGluZGV4IGludG8gb3VyIGxlc3NvbnMgd2UgY2FyZSBhYm91dFxuICogQHJldHVybnMge0xlc3Nvbn1cbiAqL1xuY29uc3QgbGVzc29uRnJvbUxlc3NvbkF0SW5kZXggPSAoc3RhdGUsIGxlc3NvbkluZGV4KSA9PiAoe1xuICAuLi5sZXNzb25Gcm9tTGVzc29uKHN0YXRlLmxlc3NvbnNbbGVzc29uSW5kZXhdKSxcbiAgaXNGb2N1c0FyZWE6IHN0YXRlLmZvY3VzQXJlYUxlc3Nvbklkcy5pbmNsdWRlcyhzdGF0ZS5sZXNzb25zW2xlc3NvbkluZGV4XS5pZCksXG59KTtcblxuY29uc3QgbGVzc29uRnJvbUxlc3NvbiA9IGxlc3NvbiA9PlxuICBfLnBpY2sobGVzc29uLCBbXG4gICAgJ25hbWUnLFxuICAgICdpZCcsXG4gICAgJ2xvY2thYmxlJyxcbiAgICAnbGVzc29uTnVtYmVyJyxcbiAgICAnbGVzc29uU3RhcnRVcmwnLFxuICAgICdsZXNzb25fcGxhbl9odG1sX3VybCcsXG4gICAgJ2xlc3Nvbl9mZWVkYmFja191cmwnLFxuICAgICdzdHVkZW50X2xlc3Nvbl9wbGFuX2h0bWxfdXJsJyxcbiAgICAnZGVzY3JpcHRpb25fc3R1ZGVudCcsXG4gICAgJ2Rlc2NyaXB0aW9uX3RlYWNoZXInLFxuICBdKTtcbmV4cG9ydCBjb25zdCBsZXNzb25zID0gc3RhdGUgPT5cbiAgc3RhdGUubGVzc29ucy5tYXAoKF8sIGluZGV4KSA9PiBsZXNzb25Gcm9tTGVzc29uQXRJbmRleChzdGF0ZSwgaW5kZXgpKTtcblxuLyoqXG4gKiBFeHRyYWN0IGxlc3NvbiBmcm9tIG91ciBwZWVyUmV2aWV3TGVzc29uSW5mbyBpZiB3ZSBoYXZlIG9uZS4gV2Ugd2FudCB0aGlzIHRvIGVuZCB1cFxuICogaGF2aW5nIHRoZSBzYW1lIGZpZWxkcyBhcyBvdXIgbm9uLXBlZXIgcmV2aWV3IGxlc3NvbnMuXG4gKi9cbmNvbnN0IHBlZXJSZXZpZXdMZXNzb24gPSBzdGF0ZSA9PiAoe1xuICAuLi5sZXNzb25Gcm9tTGVzc29uKHN0YXRlLnBlZXJSZXZpZXdMZXNzb25JbmZvKSxcbiAgLy8gYWRkIHNvbWUgZmllbGRzIHRoYXQgYXJlIG1pc3NpbmcgZm9yIHRoaXMgbGVzc29uIGJ1dCByZXF1aXJlZCBmb3IgbGVzc29uVHlwZVxuICBpZDogUEVFUl9SRVZJRVdfSUQsXG4gIGxvY2thYmxlOiBmYWxzZSxcbiAgaXNGb2N1c0FyZWE6IGZhbHNlLFxufSk7XG5cbi8qKlxuICogRXh0cmFjdCBsZXZlbHMgZnJvbSBvdXIgcGVlclJldmlld0xlc3NvbkluZm8sIG1ha2luZyBzdXJlIHRoZSBsZXZlbHMgaGF2ZSB0aGUgc2FtZVxuICogc2V0IG9mIGZpZWxkcyBhcyBvdXIgbm9uLXBlZXIgcmV2aWV3IGxldmVscy5cbiAqL1xuY29uc3QgcGVlclJldmlld0xldmVscyA9IHN0YXRlID0+XG4gIHN0YXRlLnBlZXJSZXZpZXdMZXNzb25JbmZvLmxldmVscy5tYXAoKGxldmVsLCBpbmRleCkgPT4gKHtcbiAgICAvLyBUaGVzZSBhcmVuJ3QgdHJ1ZSBsZXZlbHMgKGkuZS4gd2Ugd29uJ3QgaGF2ZSBhbiBlbnRyeSBpbiBsZXZlbFJlc3VsdHMpLFxuICAgIC8vIHNvIGFsd2F5cyB1c2UgYSBzcGVjaWZpYyBpZCB0aGF0IHdvbid0IGNvbGxpZGUgd2l0aCByZWFsIGxldmVsc1xuICAgIC4uLmxldmVsLFxuICAgIGlkOiBQRUVSX1JFVklFV19JRC50b1N0cmluZygpLFxuICAgIGlzTG9ja2VkOiBsZXZlbC5sb2NrZWQsXG4gICAgc3RhdHVzOiBsZXZlbC5zdGF0dXMgfHwgTGV2ZWxTdGF0dXMubm90X3RyaWVkLFxuICAgIGxldmVsTnVtYmVyOiBpbmRleCArIDEsXG4gIH0pKTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgd2UgYXBwZWFyIHRvIGJlIGluIGEgc2NyaXB0IGxldmVsIG9yIGEgc3RhbmRhbG9uZSBsZXZlbC5cbiAqIEEgc2NyaXB0IGxldmVsIGlzIGlkZW50aWZpZWQgYmVjYXVzZSBpdCBoYXMgbGVzc29ucy5cbiAqIEEgc3RhbmRhbG9uZSBsZXZlbCBkb2Vzbid0IGhhdmUgbGVzc29ucywgYnV0IGl0IGRvZXMgaGF2ZSBhIGxldmVsIElELlxuICovXG5leHBvcnQgY29uc3QgUHJvZ3Jlc3NMZXZlbFR5cGUgPSB7XG4gIFNDUklQVF9MRVZFTDogJ3NjcmlwdF9sZXZlbCcsXG4gIExFVkVMOiAnbGV2ZWwnLFxufTtcblxuZXhwb3J0IGNvbnN0IGdldFByb2dyZXNzTGV2ZWxUeXBlID0gc3RhdGUgPT4ge1xuICBpZiAoc3RhdGUucHJvZ3Jlc3MubGVzc29ucykge1xuICAgIHJldHVybiBQcm9ncmVzc0xldmVsVHlwZS5TQ1JJUFRfTEVWRUw7XG4gIH0gZWxzZSBpZiAoc3RhdGUucHJvZ3Jlc3MuY3VycmVudExldmVsSWQpIHtcbiAgICByZXR1cm4gUHJvZ3Jlc3NMZXZlbFR5cGUuTEVWRUw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkYXNoYm9hcmQgVVJMIHBhdGggdG8gcmV0cmlldmUgdGhlIGxldmVsIHByb3BlcnRpZXMgZm9yIGEgc2NyaXB0XG4gKiBsZXZlbCAoaWYgd2UgaGF2ZSBsZXNzb25zKSBvciBhIGxldmVsIChpZiB3ZSBkb24ndCBoYXZlIGxlc3NvbnMpLiBJZiB3ZSBkb24ndFxuICogaGF2ZSBhIGN1cnJlbnQgbGV2ZWwsIHRoaXMgcmV0dXJucyB1bmRlZmluZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRMZXZlbFByb3BlcnRpZXNQYXRoID0gc3RhdGUgPT4ge1xuICBpZiAoc3RhdGUucHJvZ3Jlc3MubGVzc29ucykge1xuICAgIGNvbnN0IHNjcmlwdE5hbWUgPSBzdGF0ZS5wcm9ncmVzcy5zY3JpcHROYW1lO1xuICAgIGNvbnN0IGxlc3NvblBvc2l0aW9uID0gc3RhdGUucHJvZ3Jlc3MubGVzc29ucz8uZmluZChcbiAgICAgIGxlc3NvbiA9PiBsZXNzb24uaWQgPT09IHN0YXRlLnByb2dyZXNzLmN1cnJlbnRMZXNzb25JZFxuICAgICkucmVsYXRpdmVfcG9zaXRpb247XG5cbiAgICBsZXQgbGV2ZWxQb3NpdGlvbiwgc3VibGV2ZWxQb3NpdGlvbjtcbiAgICBjb25zdCBjdXJyZW50TGV2ZWwgPSBnZXRDdXJyZW50TGV2ZWwoc3RhdGUpO1xuICAgIGxldmVsUG9zaXRpb24gPSBjdXJyZW50TGV2ZWwubGV2ZWxOdW1iZXI7XG5cbiAgICAvLyBVc2UgdGhlIHN1YmxldmVsIHBvc2l0aW9uIGlmIHdlJ3JlIG9uIGEgc3VibGV2ZWxcbiAgICBpZiAoY3VycmVudExldmVsLnBhcmVudExldmVsSWQpIHtcbiAgICAgIGNvbnN0IHBhcmVudExldmVsID0gbGV2ZWxCeUlkKFxuICAgICAgICBzdGF0ZS5wcm9ncmVzcyxcbiAgICAgICAgc3RhdGUucHJvZ3Jlc3MuY3VycmVudExlc3NvbklkLFxuICAgICAgICBjdXJyZW50TGV2ZWwucGFyZW50TGV2ZWxJZFxuICAgICAgKTtcbiAgICAgIGxldmVsUG9zaXRpb24gPSBwYXJlbnRMZXZlbC5sZXZlbE51bWJlcjtcbiAgICAgIHN1YmxldmVsUG9zaXRpb24gPSBjdXJyZW50TGV2ZWwubGV2ZWxOdW1iZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAvcy8ke3NjcmlwdE5hbWV9L2xlc3NvbnMvJHtsZXNzb25Qb3NpdGlvbn0vbGV2ZWxzLyR7bGV2ZWxQb3NpdGlvbn0vJHtcbiAgICAgIHN1YmxldmVsUG9zaXRpb24gPT09IHVuZGVmaW5lZCA/ICcnIDogYHN1YmxldmVsLyR7c3VibGV2ZWxQb3NpdGlvbn0vYFxuICAgIH1sZXZlbF9wcm9wZXJ0aWVzYDtcbiAgfSBlbHNlIGlmIChzdGF0ZS5wcm9ncmVzcy5jdXJyZW50TGV2ZWxJZCAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGxldmVsSWQgPSBzdGF0ZS5wcm9ncmVzcy5jdXJyZW50TGV2ZWxJZDtcbiAgICByZXR1cm4gYC9sZXZlbHMvJHtsZXZlbElkfS9sZXZlbF9wcm9wZXJ0aWVzYDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBsZXZlbCBvYmplY3QgcGFzc2VkIGRvd24gdG8gdXNlIHZpYSB0aGUgc2VydmVyIChhbmQgc3RvcmVkIGluIGxlc3Nvbi5sZXNzb25zLmxldmVscylcbiAqIGNvbnRhaW5zIG1vcmUgZGF0YSB0aGFuIHdlIG5lZWQuIFRoaXMgKGEpIGZpbHRlcnMgdG8gdGhlIHBhcnRzIG91ciB2aWV3cyBjYXJlXG4gKiBhYm91dCBhbmQgKGIpIGRldGVybWluZXMgY3VycmVudCBzdGF0dXMgYmFzZWQgb24gdGhlIGN1cnJlbnQgc3RhdGUgb2ZcbiAqIHN0YXRlLmxldmVsUmVzdWx0c1xuICovXG5jb25zdCBsZXZlbFdpdGhQcm9ncmVzcyA9IChcbiAge2xldmVsUmVzdWx0cywgdW5pdFByb2dyZXNzLCBsZXZlbFBhaXJpbmcgPSB7fSwgY3VycmVudExldmVsSWR9LFxuICBsZXZlbCxcbiAgaXNMb2NrYWJsZSxcbiAgcGFyZW50TGV2ZWxJZFxuKSA9PiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWRMZXZlbCA9IHByb2Nlc3NlZExldmVsKGxldmVsLCBwYXJlbnRMZXZlbElkKTtcbiAgaWYgKGxldmVsLmlkcykge1xuICAgIC8vIG1ha2Ugc3VyZSB3ZSdyZSB1c2luZyB0aGUgaWQgd2l0aCBiZXN0IHByb2dyZXNzXG4gICAgbm9ybWFsaXplZExldmVsLmlkID0gYmVzdFJlc3VsdExldmVsSWQobGV2ZWwuaWRzLCBsZXZlbFJlc3VsdHMpO1xuICB9XG5cbiAgLy8gZGVmYXVsdCB2YWx1ZXNcbiAgbGV0IHN0YXR1cyA9IExldmVsU3RhdHVzLm5vdF90cmllZDtcbiAgbGV0IGxvY2tlZCA9IGlzTG9ja2FibGU7XG4gIGxldCB0ZWFjaGVyRmVlZGJhY2tSZXZpZXdTdGF0ZSA9IG51bGw7XG5cbiAgbGV0IGxldmVsUHJvZ3Jlc3MgPSB1bml0UHJvZ3Jlc3Nbbm9ybWFsaXplZExldmVsLmlkXTtcbiAgaWYgKGxldmVsUHJvZ3Jlc3M/LnBhZ2VzKSB7XG4gICAgbGV2ZWxQcm9ncmVzcyA9IGxldmVsUHJvZ3Jlc3MucGFnZXNbbm9ybWFsaXplZExldmVsLnBhZ2VOdW1iZXIgLSAxXTtcbiAgfVxuICBpZiAobGV2ZWxQcm9ncmVzcykge1xuICAgIC8vIGlmIHdlIGhhdmUgbGV2ZWxQcm9ncmVzcywgb3ZlcndyaXRlIGRlZmF1bHQgdmFsdWVzXG4gICAgc3RhdHVzID0gbGV2ZWxQcm9ncmVzcy5zdGF0dXM7XG4gICAgbG9ja2VkID0gbGV2ZWxQcm9ncmVzcy5sb2NrZWQ7XG4gICAgdGVhY2hlckZlZWRiYWNrUmV2aWV3U3RhdGUgPSBsZXZlbFByb2dyZXNzLnRlYWNoZXJGZWVkYmFja1Jldmlld1N0YXRlO1xuICB9IGVsc2UgaWYgKGxldmVsLmtpbmQgIT09IExldmVsS2luZC5hc3Nlc3NtZW50KSB7XG4gICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBsZXZlbFByb2dyZXNzLCBnZXQgdGhlIHN0YXR1cyBmcm9tIGBsZXZlbFJlc3VsdHNgLlxuICAgIC8vIGhvd2V2ZXIsIGBsZXZlbFJlc3VsdHNgIGRvZXNuJ3QgdHJhY2sgcGVyLXBhZ2UgcmVzdWx0cyBmb3IgbXVsdGktcGFnZVxuICAgIC8vIGFzc2Vzc21lbnRzLCBzbyBmb3IgYXNzZXNzbWVudHMgd2UgbGVhdmUgZGVmYXVsdCB2YWx1ZXMuXG4gICAgLy9cbiAgICAvLyBub3RlOiBpZiB3ZSdyZSBub3QgdXNpbmcgbGV2ZWxQcm9ncmVzcywgYGlzTG9ja2VkYCB3aWxsIGFsd2F5cyBiZSBmYWxzZS5cbiAgICBzdGF0dXMgPSBhY3Rpdml0eUNzc0NsYXNzKGxldmVsUmVzdWx0c1tub3JtYWxpemVkTGV2ZWwuaWRdKTtcbiAgfVxuICBjb25zdCBpc0N1cnJlbnQgPVxuICAgIG5vcm1hbGl6ZWRMZXZlbC5pZCA9PT0gY3VycmVudExldmVsSWQgfHxcbiAgICAhIWxldmVsLmlkcz8uaW5jbHVkZXNbY3VycmVudExldmVsSWRdO1xuXG4gIHJldHVybiB7XG4gICAgLi4ubm9ybWFsaXplZExldmVsLFxuICAgIHN0YXR1czogc3RhdHVzLFxuICAgIGlzQ3VycmVudExldmVsOiBpc0N1cnJlbnQsXG4gICAgcGFpcmVkOiBsZXZlbFBhaXJpbmdbbGV2ZWwuYWN0aXZlSWRdLFxuICAgIGlzTG9ja2VkOiBsb2NrZWQsXG4gICAgdGVhY2hlckZlZWRiYWNrUmV2aWV3U3RhdGU6IHRlYWNoZXJGZWVkYmFja1Jldmlld1N0YXRlLFxuICAgIHN1YmxldmVsczogbGV2ZWwuc3VibGV2ZWxzPy5tYXAoc3VibGV2ZWwgPT5cbiAgICAgIGxldmVsV2l0aFByb2dyZXNzKFxuICAgICAgICB7bGV2ZWxSZXN1bHRzLCB1bml0UHJvZ3Jlc3MsIGxldmVsUGFpcmluZywgY3VycmVudExldmVsSWR9LFxuICAgICAgICBzdWJsZXZlbCxcbiAgICAgICAgaXNMb2NrYWJsZSxcbiAgICAgICAgbm9ybWFsaXplZExldmVsLmlkXG4gICAgICApXG4gICAgKSxcbiAgfTtcbn07XG5cbi8qKlxuICogR2V0IGxldmVsIGRhdGEgZm9yIGFsbCBsZXNzb25zXG4gKi9cbmV4cG9ydCBjb25zdCBsZXZlbHNCeUxlc3NvbiA9ICh7XG4gIGxlc3NvbnMsXG4gIGxldmVsUmVzdWx0cyxcbiAgdW5pdFByb2dyZXNzLFxuICBsZXZlbFBhaXJpbmcsXG4gIGN1cnJlbnRMZXZlbElkLFxufSkgPT5cbiAgbGVzc29ucy5tYXAobGVzc29uID0+XG4gICAgbGVzc29uLmxldmVscy5tYXAobGV2ZWwgPT4ge1xuICAgICAgbGV0IHN0YXR1c0xldmVsID0gbGV2ZWxXaXRoUHJvZ3Jlc3MoXG4gICAgICAgIHtsZXZlbFJlc3VsdHMsIHVuaXRQcm9ncmVzcywgbGV2ZWxQYWlyaW5nLCBjdXJyZW50TGV2ZWxJZH0sXG4gICAgICAgIGxldmVsLFxuICAgICAgICBsZXNzb24ubG9ja2FibGVcbiAgICAgICk7XG4gICAgICByZXR1cm4gc3RhdHVzTGV2ZWw7XG4gICAgfSlcbiAgKTtcblxuLyoqXG4gKiBHZXQgZGF0YSBmb3IgYSBwYXJ0aWN1bGFyIGxlc3NvblxuICovXG5leHBvcnQgY29uc3QgbGV2ZWxzRm9yTGVzc29uSWQgPSAoc3RhdGUsIGxlc3NvbklkKSA9PiB7XG4gIGNvbnN0IGxlc3NvbiA9IHN0YXRlLmxlc3NvbnM/LmZpbmQobGVzc29uID0+IGxlc3Nvbi5pZCA9PT0gbGVzc29uSWQpO1xuICByZXR1cm4gbGVzc29uPy5sZXZlbHMubWFwKGxldmVsID0+XG4gICAgbGV2ZWxXaXRoUHJvZ3Jlc3Moc3RhdGUsIGxldmVsLCBsZXNzb24ubG9ja2FibGUpXG4gICk7XG59O1xuXG4vKipcbiAqIEdpdmVuIGEgbGVzc29uIElELCBhbmQgYSBsZXZlbCBJRCwgcmV0dXJucyB0aGUgcmVxdWVzdGVkIGxldmVsLlxuICovXG5leHBvcnQgY29uc3QgbGV2ZWxCeUlkID0gKHN0YXRlLCBsZXNzb25JZCwgbGV2ZWxJZCkgPT4ge1xuICByZXR1cm4gbGV2ZWxzRm9yTGVzc29uSWQoc3RhdGUsIGxlc3NvbklkKVxuICAgID8uZmxhdE1hcChsZXZlbCA9PiBbbGV2ZWwsIC4uLihsZXZlbD8uc3VibGV2ZWxzIHx8IFtdKV0pXG4gICAgPy5maW5kKGxldmVsID0+IGxldmVsLmlkID09PSBsZXZlbElkKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50TGV2ZWwgPSBzdGF0ZSA9PiB7XG4gIHJldHVybiBnZXRDdXJyZW50TGV2ZWxzKHN0YXRlKVxuICAgID8uZmxhdE1hcChsZXZlbCA9PiBbbGV2ZWwsIC4uLihsZXZlbD8uc3VibGV2ZWxzIHx8IFtdKV0pXG4gICAgPy5maW5kKGxldmVsID0+IGxldmVsLmlzQ3VycmVudExldmVsKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50TGV2ZWxzID0gc3RhdGUgPT4ge1xuICByZXR1cm4gbGV2ZWxzRm9yTGVzc29uSWQoc3RhdGUucHJvZ3Jlc3MsIHN0YXRlLnByb2dyZXNzLmN1cnJlbnRMZXNzb25JZCk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgc2NyaXB0IGxldmVsIElEIG9mIHRoZSBjdXJyZW50IGxldmVsLiBJZiB0aGUgY3VycmVudCBsZXZlbCBpcyBhIHN1YmxldmVsLFxuICogKGFuZCB0aGVyZWZvcmUgbm90IGEgc2NyaXB0IGxldmVsKSByZXR1cm4gdGhlIHBhcmVudCBzY3JpcHQgbGV2ZWwgSUQuXG4gKiBSZXR1cm5zIHVuZGVmaW5lZCBpZiB0aGVyZSBpcyBubyBjdXJyZW50IGxldmVsLlxuICovXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFNjcmlwdExldmVsSWQgPSBzdGF0ZSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRMZXZlbCA9IGdldEN1cnJlbnRMZXZlbChzdGF0ZSk7XG4gIGlmICghY3VycmVudExldmVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGN1cnJlbnRMZXZlbC5wYXJlbnRMZXZlbElkKSB7XG4gICAgcmV0dXJuIGxldmVsQnlJZChcbiAgICAgIHN0YXRlLnByb2dyZXNzLFxuICAgICAgc3RhdGUucHJvZ3Jlc3MuY3VycmVudExlc3NvbklkLFxuICAgICAgY3VycmVudExldmVsLnBhcmVudExldmVsSWRcbiAgICApPy5zY3JpcHRMZXZlbElkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjdXJyZW50TGV2ZWwuc2NyaXB0TGV2ZWxJZDtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIG5leHQgbGV2ZWwgSUQgaW4gdGhlIHByb2dyZXNzaW9uIGlmIGl0IGV4aXN0cy5cbiAqIFJldHVybnMgdW5kZWZpbmVkIGlmIG5vdCBjdXJyZW50bHkgaW4gYSBzY3JpcHQgbGV2ZWwgb3JcbiAqIGN1cnJlbnRseSBvbiB0aGUgbGFzdCBsZXZlbC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5leHRMZXZlbElkID0gc3RhdGUgPT4ge1xuICBpZiAoZ2V0UHJvZ3Jlc3NMZXZlbFR5cGUoc3RhdGUpICE9PSBQcm9ncmVzc0xldmVsVHlwZS5TQ1JJUFRfTEVWRUwpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgbGV2ZWxzID0gbGV2ZWxzRm9yTGVzc29uSWQoXG4gICAgc3RhdGUucHJvZ3Jlc3MsXG4gICAgc3RhdGUucHJvZ3Jlc3MuY3VycmVudExlc3NvbklkXG4gICk7XG4gIGNvbnN0IGN1cnJlbnRMZXZlbCA9IGdldEN1cnJlbnRMZXZlbChzdGF0ZSk7XG4gIC8vIElmIHdlIGFyZSBvbiBhIHN1YmxldmVsLCBuYXZpZ2F0ZSBiYWNrIHRvIHRoZSBwYXJlbnQgbGV2ZWwuXG4gIGlmIChjdXJyZW50TGV2ZWwucGFyZW50TGV2ZWxJZCkge1xuICAgIHJldHVybiBjdXJyZW50TGV2ZWwucGFyZW50TGV2ZWxJZDtcbiAgfVxuICBjb25zdCBjdXJyZW50TGV2ZWxJbmRleCA9IGN1cnJlbnRMZXZlbC5sZXZlbE51bWJlciAtIDE7XG4gIGlmIChjdXJyZW50TGV2ZWxJbmRleCA9PT0gbGV2ZWxzLmxlbmd0aCAtIDEpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgbmV4dExldmVsID0gbGV2ZWxzW2N1cnJlbnRMZXZlbEluZGV4ICsgMV07XG4gIHJldHVybiBuZXh0TGV2ZWwuaWQ7XG59O1xuXG5leHBvcnQgY29uc3QgbGV2ZWxDb3VudCA9IHN0YXRlID0+IHtcbiAgaWYgKGdldFByb2dyZXNzTGV2ZWxUeXBlKHN0YXRlKSA9PT0gUHJvZ3Jlc3NMZXZlbFR5cGUuTEVWRUwpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICBpZiAoZ2V0UHJvZ3Jlc3NMZXZlbFR5cGUoc3RhdGUpID09PSBQcm9ncmVzc0xldmVsVHlwZS5TQ1JJUFRfTEVWRUwpIHtcbiAgICByZXR1cm4gZ2V0Q3VycmVudExldmVscyhzdGF0ZSkubGVuZ3RoO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuZXhwb3J0IGNvbnN0IGxlc3NvbkV4dHJhc1VybCA9IChzdGF0ZSwgbGVzc29uSWQpID0+XG4gIHN0YXRlLmxlc3NvbkV4dHJhc0VuYWJsZWRcbiAgICA/IHN0YXRlLmxlc3NvbnMuZmluZChsZXNzb24gPT4gbGVzc29uLmlkID09PSBsZXNzb25JZClcbiAgICAgICAgLmxlc3Nvbl9leHRyYXNfbGV2ZWxfdXJsXG4gICAgOiAnJztcblxuZXhwb3J0IGNvbnN0IGlzUGVyZmVjdCA9IChzdGF0ZSwgbGV2ZWxJZCkgPT5cbiAgISFzdGF0ZS5sZXZlbFJlc3VsdHMgJiZcbiAgc3RhdGUubGV2ZWxSZXN1bHRzW2xldmVsSWRdID49IFRlc3RSZXN1bHRzLk1JTklNVU1fT1BUSU1BTF9SRVNVTFQ7XG5cbi8qKlxuICogR3JvdXBzIGxlc3NvbnMgYWNjb3JkaW5nIHRvIExlc3Nvbkdyb3VwLlxuICogQHJldHVybnMge09iamVjdFtdfVxuICoge3N0cmluZ30gT2JqZWN0Lm5hbWVcbiAqIHtzdHJpbmdbXX0gT2JqZWN0Lmxlc3Nvbk5hbWVzXG4gKiB7T2JqZWN0W119IE9iamVjdC5sZXNzb25MZXZlbHNcbiAqL1xuZXhwb3J0IGNvbnN0IGdyb3VwZWRMZXNzb25zID0gKHN0YXRlLCBpbmNsdWRlQm9udXNMZXZlbHMgPSBmYWxzZSkgPT4ge1xuICBsZXQgYnlHcm91cCA9IHt9O1xuXG4gIGNvbnN0IGFsbExldmVscyA9IGxldmVsc0J5TGVzc29uKHN0YXRlKTtcblxuICBzdGF0ZS5sZXNzb25Hcm91cHMuZm9yRWFjaChsZXNzb25Hcm91cCA9PiB7XG4gICAgYnlHcm91cFtsZXNzb25Hcm91cC5kaXNwbGF5X25hbWVdID0ge1xuICAgICAgbGVzc29uR3JvdXA6IHtcbiAgICAgICAgaWQ6IGxlc3Nvbkdyb3VwLmlkLFxuICAgICAgICB1c2VyRmFjaW5nOiBsZXNzb25Hcm91cC51c2VyX2ZhY2luZyxcbiAgICAgICAgZGlzcGxheU5hbWU6IGxlc3Nvbkdyb3VwLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGxlc3Nvbkdyb3VwLmRlc2NyaXB0aW9uLFxuICAgICAgICBiaWdRdWVzdGlvbnM6IGxlc3Nvbkdyb3VwLmJpZ19xdWVzdGlvbnMsXG4gICAgICB9LFxuICAgICAgbGVzc29uczogW10sXG4gICAgICBsZXZlbHNCeUxlc3NvbjogW10sXG4gICAgfTtcbiAgfSk7XG5cbiAgc3RhdGUubGVzc29ucy5mb3JFYWNoKChsZXNzb24sIGluZGV4KSA9PiB7XG4gICAgY29uc3QgZ3JvdXAgPSBsZXNzb24ubGVzc29uX2dyb3VwX2Rpc3BsYXlfbmFtZTtcbiAgICBjb25zdCBsZXNzb25BdEluZGV4ID0gbGVzc29uRnJvbUxlc3NvbkF0SW5kZXgoc3RhdGUsIGluZGV4KTtcbiAgICBsZXQgbGVzc29uTGV2ZWxzID0gYWxsTGV2ZWxzW2luZGV4XTtcbiAgICBpZiAoIWluY2x1ZGVCb251c0xldmVscykge1xuICAgICAgbGVzc29uTGV2ZWxzID0gbGVzc29uTGV2ZWxzLmZpbHRlcihsZXZlbCA9PiAhbGV2ZWwuYm9udXMpO1xuICAgIH1cblxuICAgIGlmIChieUdyb3VwW2dyb3VwXSkge1xuICAgICAgYnlHcm91cFtncm91cF0ubGVzc29ucy5wdXNoKGxlc3NvbkF0SW5kZXgpO1xuICAgICAgYnlHcm91cFtncm91cF0ubGV2ZWxzQnlMZXNzb24ucHVzaChsZXNzb25MZXZlbHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUGVlciByZXZpZXdzIGdldCB0aGVpciBvd24gZ3JvdXAsIGJ1dCB0aGVzZSBsZXZlbHMvbGVzc29uIGFyZSBzdG9yZWRcbiAgLy8gc2VwYXJhdGVseSBmcm9tIG91ciBvdGhlciBsZXZlbHMvbGVzc29ucyBpbiByZWR1eCAoc2luY2UgdGhleSdyZSBzbGlnaHRseVxuICAvLyBkaWZmZXJlbnQpXG4gIGlmIChzdGF0ZS5wZWVyUmV2aWV3TGVzc29uSW5mbykge1xuICAgIGJ5R3JvdXBbc3RhdGUucGVlclJldmlld0xlc3NvbkluZm8ubGVzc29uX2dyb3VwX2Rpc3BsYXlfbmFtZV0gPSB7XG4gICAgICBncm91cDogc3RhdGUucGVlclJldmlld0xlc3NvbkluZm8ubGVzc29uX2dyb3VwX2Rpc3BsYXlfbmFtZSxcbiAgICAgIGxlc3Nvbkdyb3VwOiB7XG4gICAgICAgIGlkOiBudWxsLCAvL1BlZXIgcmV2aWV3cyBkbyBub3QgaGF2ZSBkZXNjcmlwdGlvbnMgb3IgYmlnIHF1ZXN0aW9ucyBzbyB0aGV5IHdvbid0IG5lZWQgYW4gaWQgdG8gdHJhY2sgY2xpY2tzXG4gICAgICAgIGRpc3BsYXlOYW1lOiBzdGF0ZS5wZWVyUmV2aWV3TGVzc29uSW5mby5sZXNzb25fZ3JvdXBfZGlzcGxheV9uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgYmlnUXVlc3Rpb25zOiBudWxsLFxuICAgICAgfSxcbiAgICAgIGxlc3NvbnM6IFtwZWVyUmV2aWV3TGVzc29uKHN0YXRlKV0sXG4gICAgICBsZXZlbHNCeUxlc3NvbjogW3BlZXJSZXZpZXdMZXZlbHMoc3RhdGUpXSxcbiAgICB9O1xuICB9XG5cbiAgLy8gV2Ugd2FudCB0byByZXR1cm4gYW4gYXJyYXkgb2YgY2F0ZWdvcmllc1xuICByZXR1cm4gXy52YWx1ZXMoYnlHcm91cCk7XG59O1xuXG4vKipcbiAqIEdpdmVuIGEgc2V0IG9mIGxldmVscywgZ3JvdXBzIHRoZW0gaW4gc2V0cyBvZiBwcm9ncmVzc2lvbnMsIHdoZXJlIGVhY2hcbiAqIHByb2dyZXNzaW9uIGlzIGEgc2V0IG9mIGFkamFjZW50IGxldmVscyBzaGFyaW5nIHRoZSBzYW1lIHByb2dyZXNzaW9uIG5hbWVcbiAqIEFueSBnaXZlbiBsZXZlbCdzIHByb2dyZXNzaW9uIG5hbWUgaXMgZGV0ZXJtaW5lZCBieSBmaXJzdCBsb29raW5nIHRvIHNlZSBpZlxuICogdGhlIHNlcnZlciBwcm92aWRlZCB1cyBvbmUgYXMgbGV2ZWwucHJvZ3Jlc3Npb24sIG90aGVyd2lzZSB3ZSBmYWxsIGJhY2sgdG9cbiAqIGp1c3QgbGV2ZWwubmFtZVxuICogQHBhcmFtIHtMZXZlbFtdfSBsZXZlbHNcbiAqIEByZXR1cm5zIHtvYmplY3RbXX0gQW4gYXJyYXkgb2YgcHJvZ3Jlc3Npb25zLCB3aGVyZSBlYWNoIGNvbnNpc3RzIG9mIGEgbmFtZSxcbiAqICAgdGhlIHBvc2l0aW9uIG9mIHRoZSBwcm9ncmVzc2lvbiBpbiB0aGUgaW5wdXQgYXJyYXksIGFuZCB0aGUgc2V0IG9mIGxldmVsc1xuICogICBpbiB0aGUgcHJvZ3Jlc3Npb25cbiAqL1xuZXhwb3J0IGNvbnN0IHByb2dyZXNzaW9uc0Zyb21MZXZlbHMgPSBsZXZlbHMgPT4ge1xuICBjb25zdCBwcm9ncmVzc2lvbnMgPSBbXTtcbiAgaWYgKGxldmVscy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gcHJvZ3Jlc3Npb25zO1xuICB9XG4gIGxldCBjdXJyZW50UHJvZ3Jlc3Npb24gPSB7XG4gICAgc3RhcnQ6IDAsXG4gICAgbmFtZTogbGV2ZWxzWzBdLnByb2dyZXNzaW9uIHx8IGxldmVsc1swXS5uYW1lLFxuICAgIGRpc3BsYXlOYW1lOiBsZXZlbHNbMF0ucHJvZ3Jlc3Npb25EaXNwbGF5TmFtZSB8fCBsZXZlbHNbMF0ubmFtZSxcbiAgICBsZXZlbHM6IFtsZXZlbHNbMF1dLFxuICB9O1xuICBsZXZlbHMuc2xpY2UoMSkuZm9yRWFjaCgobGV2ZWwsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgcHJvZ3Jlc3Npb25OYW1lID0gbGV2ZWwucHJvZ3Jlc3Npb24gfHwgbGV2ZWwubmFtZTtcbiAgICBpZiAocHJvZ3Jlc3Npb25OYW1lID09PSBjdXJyZW50UHJvZ3Jlc3Npb24ubmFtZSkge1xuICAgICAgY3VycmVudFByb2dyZXNzaW9uLmxldmVscy5wdXNoKGxldmVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvZ3Jlc3Npb25zLnB1c2goY3VycmVudFByb2dyZXNzaW9uKTtcbiAgICAgIGN1cnJlbnRQcm9ncmVzc2lvbiA9IHtcbiAgICAgICAgLy8gKyAxIGJlY2F1c2Ugd2Ugc2xpY2VkIG9mZiB0aGUgZmlyc3QgZWxlbWVudFxuICAgICAgICBzdGFydDogaW5kZXggKyAxLFxuICAgICAgICBuYW1lOiBsZXZlbC5wcm9ncmVzc2lvbiB8fCBsZXZlbC5uYW1lLFxuICAgICAgICBkaXNwbGF5TmFtZTogbGV2ZWwucHJvZ3Jlc3Npb25EaXNwbGF5TmFtZSB8fCBsZXZlbC5uYW1lLFxuICAgICAgICBsZXZlbHM6IFtsZXZlbF0sXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG4gIHByb2dyZXNzaW9ucy5wdXNoKGN1cnJlbnRQcm9ncmVzc2lvbik7XG4gIHJldHVybiBwcm9ncmVzc2lvbnM7XG59O1xuXG4vLyBIZWxwZXJzXG5cbi8qKlxuICogUmV0dXJuIHRoZSBsZXZlbCB3aXRoIHRoZSBoaWdoZXN0IHByb2dyZXNzLCBvciB0aGUgZmlyc3QgbGV2ZWwgaWYgbm9uZSBoYXZlXG4gKiBiZWVuIGF0dGVtcHRlZFxuICogQHBhcmFtIHtudW1iZXJbXX0gbGV2ZWxJZHNcbiAqIEBwYXJhbSB7T2JqZWN0LjxudW1iZXIsbnVtYmVyPn0gLSBNYXBwaW5nIGZyb20gbGV2ZWwgaWQgdG8gcHJvZ3Jlc3MgcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGJlc3RSZXN1bHRMZXZlbElkKGxldmVsSWRzLCBwcm9ncmVzc0RhdGEpIHtcbiAgLy8gVGhlIHVzdWFsIGNhc2VcbiAgaWYgKGxldmVsSWRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBsZXZlbElkc1swXTtcbiAgfVxuXG4gIC8vIFJldHVybiB0aGUgbGV2ZWwgd2l0aCB0aGUgaGlnaGVzdCByZXN1bHRcbiAgdmFyIGF0dGVtcHRlZElkcyA9IGxldmVsSWRzLmZpbHRlcihpZCA9PiBwcm9ncmVzc0RhdGFbaWRdKTtcbiAgaWYgKGF0dGVtcHRlZElkcy5sZW5ndGggPT09IDApIHtcbiAgICAvLyBOb25lIG9mIHRoZW0gaGF2ZSBiZWVuIGF0dGVtcHRlZCwganVzdCByZXR1cm4gdGhlIGZpcnN0XG4gICAgcmV0dXJuIGxldmVsSWRzWzBdO1xuICB9XG4gIHZhciBiZXN0SWQgPSBhdHRlbXB0ZWRJZHNbMF07XG4gIHZhciBiZXN0UmVzdWx0ID0gcHJvZ3Jlc3NEYXRhW2Jlc3RJZF07XG4gIGF0dGVtcHRlZElkcy5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciByZXN1bHQgPSBwcm9ncmVzc0RhdGFbaWRdO1xuICAgIGlmIChyZXN1bHQgPiBiZXN0UmVzdWx0KSB7XG4gICAgICBiZXN0SWQgPSBpZDtcbiAgICAgIGJlc3RSZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGJlc3RJZDtcbn1cblxuLy8gZXhwb3J0IHByaXZhdGUgZnVuY3Rpb24ocykgdG8gZXhwb3NlIHRvIHVuaXQgdGVzdGluZ1xuZXhwb3J0IGNvbnN0IF9fdGVzdG9ubHlfXyA9IElOX1VOSVRfVEVTVFxuICA/IHtcbiAgICAgIGJlc3RSZXN1bHRMZXZlbElkLFxuICAgICAgcGVlclJldmlld0xlc3NvbixcbiAgICAgIHBlZXJSZXZpZXdMZXZlbHMsXG4gICAgICBQRUVSX1JFVklFV19JRCxcbiAgICB9XG4gIDoge307XG4iLCJjb25zdCBTRVRfVkVSSUZJRUQgPSAndmVyaWZpZWRJbnN0cnVjdG9yL1NFVF9WRVJJRklFRCc7XG5jb25zdCBTRVRfVkVSSUZJRURfUkVTT1VSQ0VTID0gJ3ZlcmlmaWVkSW5zdHJ1Y3Rvci9TRVRfVkVSSUZJRURfUkVTT1VSQ0VTJztcblxuZXhwb3J0IGNvbnN0IHNldFZlcmlmaWVkID0gKCkgPT4gKHt0eXBlOiBTRVRfVkVSSUZJRUR9KTtcbmV4cG9ydCBjb25zdCBzZXRWZXJpZmllZFJlc291cmNlcyA9IGhhc1ZlcmlmaWVkUmVzb3VyY2VzID0+ICh7XG4gIHR5cGU6IFNFVF9WRVJJRklFRF9SRVNPVVJDRVMsXG59KTtcblxuY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICBpc1ZlcmlmaWVkOiBmYWxzZSxcbiAgLy8gVHJ1ZSBpZiBhIHBhZ2UgKGNvdXJzZS9zY3JpcHQpIGhhcyByZXNvdXJjZXMgdGhhdCBhcmUgb25seSBhdmFpbGFibGUgdG9cbiAgLy8gdmVyaWZpZWQgdGVhY2hlcnNcbiAgaGFzVmVyaWZpZWRSZXNvdXJjZXM6IGZhbHNlLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdmVyaWZpZWRJbnN0cnVjdG9yKHN0YXRlID0gaW5pdGlhbFN0YXRlLCBhY3Rpb24pIHtcbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfVkVSSUZJRUQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBpc1ZlcmlmaWVkOiB0cnVlLFxuICAgIH07XG4gIH1cblxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFNFVF9WRVJJRklFRF9SRVNPVVJDRVMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBoYXNWZXJpZmllZFJlc291cmNlczogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0ZSxcbiAgfTtcbn1cbiIsImltcG9ydCB7XG4gIEFueUFjdGlvbixcbiAgUGF5bG9hZEFjdGlvbixcbiAgVGh1bmtBY3Rpb24sXG4gIFRodW5rRGlzcGF0Y2gsXG4gIGNyZWF0ZUFzeW5jVGh1bmssXG4gIGNyZWF0ZVNsaWNlLFxufSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge3NldFZlcmlmaWVkfSBmcm9tICdAY2RvL2FwcHMvY29kZS1zdHVkaW8vdmVyaWZpZWRJbnN0cnVjdG9yUmVkdXgnO1xuaW1wb3J0IHtUZXN0UmVzdWx0c30gZnJvbSAnQGNkby9hcHBzL2NvbnN0YW50cyc7XG5pbXBvcnQge1xuICBwcm9jZXNzU2VydmVyU3R1ZGVudFByb2dyZXNzLFxuICBnZXRMZXZlbFJlc3VsdCxcbn0gZnJvbSAnQGNkby9hcHBzL3RlbXBsYXRlcy9wcm9ncmVzcy9wcm9ncmVzc0hlbHBlcnMnO1xuaW1wb3J0IHtcbiAgTGVzc29uLFxuICBMZXNzb25Hcm91cCxcbiAgVW5pdFByb2dyZXNzLFxuICBQZWVyUmV2aWV3TGVzc29uSW5mbyxcbiAgUGVlclJldmlld1N1bW1hcnksXG4gIFBVWlpMRV9QQUdFX05PTkUsXG4gIEluaXRQcm9ncmVzc1BheWxvYWQsXG4gIExldmVsUmVzdWx0cyxcbiAgVmlld1R5cGUsXG4gIFBlZXJSZXZpZXdMZXZlbEluZm8sXG4gIExldmVsV2l0aFByb2dyZXNzLFxufSBmcm9tICdAY2RvL2FwcHMvdHlwZXMvcHJvZ3Jlc3NUeXBlcyc7XG5pbXBvcnQge1Jvb3RTdGF0ZX0gZnJvbSAnQGNkby9hcHBzL3R5cGVzL3JlZHV4JztcblxuaW1wb3J0IHtnZXRCdWJibGVVcmx9IGZyb20gJy4uL3RlbXBsYXRlcy9wcm9ncmVzcy9CdWJibGVGYWN0b3J5JztcbmltcG9ydCB7QXBwRGlzcGF0Y2h9IGZyb20gJy4uL3V0aWwvcmVkdXhIb29rcyc7XG5pbXBvcnQge25hdmlnYXRlVG9IcmVmfSBmcm9tICcuLi91dGlscyc7XG5cbmltcG9ydCB7bWVyZ2VBY3Rpdml0eVJlc3VsdH0gZnJvbSAnLi9hY3Rpdml0eVV0aWxzJztcbmltcG9ydCB7XG4gIGNhbkNoYW5nZUxldmVsSW5QYWdlLFxuICB1cGRhdGVCcm93c2VyRm9yTGV2ZWxOYXZpZ2F0aW9uLFxufSBmcm9tICcuL2Jyb3dzZXJOYXZpZ2F0aW9uJztcbmltcG9ydCB7YXV0aG9yaXplTG9ja2FibGV9IGZyb20gJy4vbGVzc29uTG9ja1JlZHV4JztcbmltcG9ydCB7XG4gIGdldEN1cnJlbnRMZXZlbCxcbiAgZ2V0Q3VycmVudExldmVscyxcbiAgZ2V0Q3VycmVudFNjcmlwdExldmVsSWQsXG4gIGxldmVsQnlJZCxcbiAgbmV4dExldmVsSWQsXG59IGZyb20gJy4vcHJvZ3Jlc3NSZWR1eFNlbGVjdG9ycyc7XG5pbXBvcnQge1NFVF9WSUVXX1RZUEV9IGZyb20gJy4vdmlld0FzUmVkdXgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzU3RhdGUge1xuICBjdXJyZW50TGV2ZWxJZDogc3RyaW5nIHwgbnVsbDtcbiAgY3VycmVudExlc3NvbklkOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIGRlZXBlckxlYXJuaW5nQ291cnNlOiBib29sZWFuIHwgbnVsbDtcbiAgc2F2ZUFuc3dlcnNCZWZvcmVOYXZpZ2F0aW9uOiBib29sZWFuIHwgbnVsbDtcbiAgbGVzc29uczogTGVzc29uW10gfCBudWxsO1xuICBsZXNzb25Hcm91cHM6IExlc3Nvbkdyb3VwW10gfCBudWxsO1xuICBzY3JpcHRJZDogbnVtYmVyIHwgbnVsbDtcbiAgdmlld0FzVXNlcklkOiBzdHJpbmcgfCBudWxsO1xuICBzY3JpcHROYW1lOiBzdHJpbmcgfCBudWxsO1xuICBzY3JpcHREaXNwbGF5TmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICB1bml0VGl0bGU6IHN0cmluZyB8IG51bGw7XG4gIGNvdXJzZUlkOiBudW1iZXIgfCBudWxsO1xuICBpc0xlc3NvbkV4dHJhczogYm9vbGVhbjtcbiAgdW5pdFByb2dyZXNzOiB7XG4gICAgW2tleTogbnVtYmVyXTogVW5pdFByb2dyZXNzO1xuICB9O1xuICB1bml0UHJvZ3Jlc3NIYXNMb2FkZWQ6IGJvb2xlYW47XG4gIGxldmVsUmVzdWx0czogTGV2ZWxSZXN1bHRzO1xuICBmb2N1c0FyZWFMZXNzb25JZHM6IG51bWJlcltdO1xuICBwZWVyUmV2aWV3TGVzc29uSW5mbzogUGVlclJldmlld0xlc3NvbkluZm8gfCBudWxsO1xuICBwZWVyUmV2aWV3c1BlcmZvcm1lZDogUGVlclJldmlld1N1bW1hcnlbXTtcbiAgcG9zdE1pbGVzdG9uZURpc2FibGVkOiBib29sZWFuO1xuICBpc0FnZTEzUmVxdWlyZWQ6IGJvb2xlYW47XG4gIHN0dWRlbnREZWZhdWx0c1N1bW1hcnlWaWV3OiBib29sZWFuO1xuICBpc1N1bW1hcnlWaWV3OiBib29sZWFuO1xuICBpc01pbmlWaWV3OiBib29sZWFuO1xuICBoYXNGdWxsUHJvZ3Jlc3M6IGJvb2xlYW47XG4gIGxlc3NvbkV4dHJhc0VuYWJsZWQ6IGJvb2xlYW47XG4gIHVzaW5nRGJQcm9ncmVzczogYm9vbGVhbjtcbiAgY3VycmVudFBhZ2VOdW1iZXI6IG51bWJlcjtcbiAgY291cnNlVmVyc2lvbklkOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHVuaXREZXNjcmlwdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICB1bml0U3R1ZGVudERlc2NyaXB0aW9uOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGNoYW5nZUZvY3VzQXJlYVBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgdW5pdENvbXBsZXRlZDogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNaWxlc3RvbmVSZXBvcnQgZXh0ZW5kcyBPcHRpb25hbE1pbGVzdG9uZURhdGEge1xuICBhcHA6IHN0cmluZztcbiAgcmVzdWx0OiBib29sZWFuO1xuICB0ZXN0UmVzdWx0OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBPcHRpb25hbE1pbGVzdG9uZURhdGEge1xuICBwcm9ncmFtPzogc3RyaW5nO1xuICAvLyBTdWJtaXR0ZWQgaXMgYSBib29sZWFuLCB3aGljaCB0aGUgc2VydmVyIGV4cGVjdHMgYXMgYSBzdHJpbmcuXG4gIHN1Ym1pdHRlZD86IHN0cmluZztcbn1cblxuY29uc3QgaW5pdGlhbFN0YXRlOiBQcm9ncmVzc1N0YXRlID0ge1xuICBjdXJyZW50TGV2ZWxJZDogbnVsbCxcblxuICAvLyBUaGVzZSBmaXJzdCBmaWVsZHMgbmV2ZXIgY2hhbmdlIGFmdGVyIGluaXRpYWxpemF0aW9uLlxuXG4gIGN1cnJlbnRMZXNzb25JZDogdW5kZWZpbmVkLFxuICBkZWVwZXJMZWFybmluZ0NvdXJzZTogbnVsbCxcbiAgLy8gdXNlZCBvbiBtdWx0aS1wYWdlIGFzc2Vzc21lbnRzXG4gIHNhdmVBbnN3ZXJzQmVmb3JlTmF2aWdhdGlvbjogbnVsbCxcbiAgbGVzc29uczogbnVsbCxcbiAgbGVzc29uR3JvdXBzOiBudWxsLFxuICBzY3JpcHRJZDogbnVsbCxcbiAgdmlld0FzVXNlcklkOiBudWxsLFxuICBzY3JpcHROYW1lOiBudWxsLFxuICBzY3JpcHREaXNwbGF5TmFtZTogdW5kZWZpbmVkLFxuICB1bml0VGl0bGU6IG51bGwsXG4gIGNvdXJzZUlkOiBudWxsLFxuICBpc0xlc3NvbkV4dHJhczogZmFsc2UsXG5cbiAgLy8gVGhlIHJlbWFpbmluZyBmaWVsZHMgZG8gY2hhbmdlIGFmdGVyIGluaXRpYWxpemF0aW9uLlxuXG4gIC8vIHVuaXRQcm9ncmVzcyBpcyBvZiB0eXBlIHVuaXRQcm9ncmVzc1R5cGUgKGEgbWFwIG9mIGxldmVsSWQgLT5cbiAgLy8gc3R1ZGVudExldmVsUHJvZ3Jlc3NUeXBlKVxuICB1bml0UHJvZ3Jlc3M6IHt9LFxuICB1bml0UHJvZ3Jlc3NIYXNMb2FkZWQ6IGZhbHNlLFxuICAvLyBub3RlOiBldmVudHVhbGx5LCB3ZSBleHBlY3QgdXNhZ2Ugb2YgdGhpcyBmaWVsZCB0byBiZSByZXBsYWNlZCB3aXRoIHVuaXRQcm9ncmVzc1xuICBsZXZlbFJlc3VsdHM6IHt9LFxuICBmb2N1c0FyZWFMZXNzb25JZHM6IFtdLFxuICBwZWVyUmV2aWV3TGVzc29uSW5mbzogbnVsbCxcbiAgcGVlclJldmlld3NQZXJmb3JtZWQ6IFtdLFxuICBwb3N0TWlsZXN0b25lRGlzYWJsZWQ6IGZhbHNlLFxuICBpc0FnZTEzUmVxdWlyZWQ6IGZhbHNlLFxuICAvLyBEbyBzdHVkZW50cyBzZWUgc3VtbWFyeSB2aWV3IGJ5IGRlZmF1bHQ/XG4gIHN0dWRlbnREZWZhdWx0c1N1bW1hcnlWaWV3OiB0cnVlLFxuICBpc1N1bW1hcnlWaWV3OiB0cnVlLFxuICBpc01pbmlWaWV3OiBmYWxzZSxcbiAgaGFzRnVsbFByb2dyZXNzOiBmYWxzZSxcbiAgbGVzc29uRXh0cmFzRW5hYmxlZDogZmFsc2UsXG4gIC8vIE5vdGU6IHVzaW5nRGJQcm9ncmVzcyA9PT0gXCJ1c2VyIGlzIGxvZ2dlZCBpblwiLiBIb3dldmVyLCBpdCBpc1xuICAvLyBwb3NzaWJsZSB0aGF0IHdlIGNhbiBnZXQgdGhlIHVzZXIgcHJvZ3Jlc3MgYmFjayBmcm9tIHRoZSBEQlxuICAvLyBwcmlvciB0byBoYXZpbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIgbG9naW4gc3RhdGUuXG4gIC8vIFRPRE86IFVzZSBzaWduIGluIHN0YXRlIHRvIGRldGVybWluZSB3aGVyZSB0byBzb3VyY2UgdXNlciBwcm9ncmVzcyBmcm9tXG4gIHVzaW5nRGJQcm9ncmVzczogZmFsc2UsXG4gIGN1cnJlbnRQYWdlTnVtYmVyOiBQVVpaTEVfUEFHRV9OT05FLFxuICBjb3Vyc2VWZXJzaW9uSWQ6IHVuZGVmaW5lZCxcbiAgdW5pdERlc2NyaXB0aW9uOiB1bmRlZmluZWQsXG4gIHVuaXRTdHVkZW50RGVzY3JpcHRpb246IHVuZGVmaW5lZCxcbiAgY2hhbmdlRm9jdXNBcmVhUGF0aDogdW5kZWZpbmVkLFxuICB1bml0Q29tcGxldGVkOiB1bmRlZmluZWQsXG59O1xuXG5jb25zdCBwcm9ncmVzc1NsaWNlID0gY3JlYXRlU2xpY2Uoe1xuICBuYW1lOiAncHJvZ3Jlc3MnLFxuICBpbml0aWFsU3RhdGUsXG4gIHJlZHVjZXJzOiB7XG4gICAgaW5pdFByb2dyZXNzKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248SW5pdFByb2dyZXNzUGF5bG9hZD4pIHtcbiAgICAgIGNvbnN0IGxlc3NvbnMgPSBhY3Rpb24ucGF5bG9hZC5sZXNzb25zO1xuICAgICAgLy8gUmUtaW5pdGlhbGl6aW5nIHdpdGggZnVsbCBzZXQgb2YgbGVzc29ucyBzaG91bGRuJ3QgYmxvdyBhd2F5IGN1cnJlbnRMZXNzb25JZFxuICAgICAgY29uc3QgY3VycmVudExlc3NvbklkID1cbiAgICAgICAgc3RhdGUuY3VycmVudExlc3NvbklkIHx8XG4gICAgICAgIChsZXNzb25zLmxlbmd0aCA9PT0gMSA/IGxlc3NvbnNbMF0uaWQgOiB1bmRlZmluZWQpO1xuICAgICAgc3RhdGUuY3VycmVudExldmVsSWQgfHw9IGFjdGlvbi5wYXlsb2FkLmN1cnJlbnRMZXZlbElkO1xuICAgICAgc3RhdGUuZGVlcGVyTGVhcm5pbmdDb3Vyc2UgPSBhY3Rpb24ucGF5bG9hZC5kZWVwZXJMZWFybmluZ0NvdXJzZTtcbiAgICAgIHN0YXRlLnNhdmVBbnN3ZXJzQmVmb3JlTmF2aWdhdGlvbiA9XG4gICAgICAgIGFjdGlvbi5wYXlsb2FkLnNhdmVBbnN3ZXJzQmVmb3JlTmF2aWdhdGlvbjtcbiAgICAgIHN0YXRlLmxlc3NvbnMgPSBwcm9jZXNzZWRMZXNzb25zKFxuICAgICAgICBsZXNzb25zLFxuICAgICAgICBhY3Rpb24ucGF5bG9hZC5kZWVwZXJMZWFybmluZ0NvdXJzZVxuICAgICAgKTtcbiAgICAgIHN0YXRlLmxlc3Nvbkdyb3VwcyA9IGFjdGlvbi5wYXlsb2FkLmxlc3Nvbkdyb3VwcztcbiAgICAgIHN0YXRlLnBlZXJSZXZpZXdMZXNzb25JbmZvID0gYWN0aW9uLnBheWxvYWQucGVlclJldmlld0xlc3NvbkluZm87XG4gICAgICBzdGF0ZS5zY3JpcHRJZCA9IGFjdGlvbi5wYXlsb2FkLnNjcmlwdElkO1xuICAgICAgc3RhdGUuc2NyaXB0TmFtZSA9IGFjdGlvbi5wYXlsb2FkLnNjcmlwdE5hbWU7XG4gICAgICBzdGF0ZS5zY3JpcHREaXNwbGF5TmFtZSA9IGFjdGlvbi5wYXlsb2FkLnNjcmlwdERpc3BsYXlOYW1lO1xuICAgICAgc3RhdGUudW5pdFRpdGxlID0gYWN0aW9uLnBheWxvYWQudW5pdFRpdGxlO1xuICAgICAgc3RhdGUudW5pdERlc2NyaXB0aW9uID0gYWN0aW9uLnBheWxvYWQudW5pdERlc2NyaXB0aW9uO1xuICAgICAgc3RhdGUudW5pdFN0dWRlbnREZXNjcmlwdGlvbiA9IGFjdGlvbi5wYXlsb2FkLnVuaXRTdHVkZW50RGVzY3JpcHRpb247XG4gICAgICBzdGF0ZS5jb3Vyc2VJZCA9IGFjdGlvbi5wYXlsb2FkLmNvdXJzZUlkO1xuICAgICAgc3RhdGUuY291cnNlVmVyc2lvbklkID0gYWN0aW9uLnBheWxvYWQuY291cnNlVmVyc2lvbklkO1xuICAgICAgc3RhdGUuY3VycmVudExlc3NvbklkID0gY3VycmVudExlc3NvbklkO1xuICAgICAgc3RhdGUuaGFzRnVsbFByb2dyZXNzID0gYWN0aW9uLnBheWxvYWQuaXNGdWxsUHJvZ3Jlc3M7XG4gICAgICBzdGF0ZS5pc0xlc3NvbkV4dHJhcyA9IGFjdGlvbi5wYXlsb2FkLmlzTGVzc29uRXh0cmFzO1xuICAgICAgc3RhdGUuY3VycmVudFBhZ2VOdW1iZXIgPSBhY3Rpb24ucGF5bG9hZC5jdXJyZW50UGFnZU51bWJlcjtcbiAgICB9LFxuICAgIHNldEN1cnJlbnRMZXZlbElkKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248c3RyaW5nPikge1xuICAgICAgc3RhdGUuY3VycmVudExldmVsSWQgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICB9LFxuICAgIHNldFNjcmlwdFByb2dyZXNzKFxuICAgICAgc3RhdGUsXG4gICAgICBhY3Rpb246IFBheWxvYWRBY3Rpb248e1xuICAgICAgICBbbGV2ZWxJZDogbnVtYmVyXTogVW5pdFByb2dyZXNzO1xuICAgICAgfT5cbiAgICApIHtcbiAgICAgIHN0YXRlLnVuaXRQcm9ncmVzcyA9IHByb2Nlc3NTZXJ2ZXJTdHVkZW50UHJvZ3Jlc3MoYWN0aW9uLnBheWxvYWQpO1xuICAgICAgc3RhdGUudW5pdFByb2dyZXNzSGFzTG9hZGVkID0gdHJ1ZTtcbiAgICB9LFxuICAgIGNsZWFyUmVzdWx0cyhzdGF0ZSkge1xuICAgICAgc3RhdGUubGV2ZWxSZXN1bHRzID0gaW5pdGlhbFN0YXRlLmxldmVsUmVzdWx0cztcbiAgICB9LFxuICAgIHVzZURiUHJvZ3Jlc3Moc3RhdGUpIHtcbiAgICAgIHN0YXRlLnVzaW5nRGJQcm9ncmVzcyA9IHRydWU7XG4gICAgfSxcbiAgICBtZXJnZVJlc3VsdHMoc3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxMZXZlbFJlc3VsdHM+KSB7XG4gICAgICBjb25zdCBuZXdMZXZlbFJlc3VsdHM6IExldmVsUmVzdWx0cyA9IHt9O1xuICAgICAgY29uc3QgY29tYmluZWRMZXZlbHMgPSBPYmplY3Qua2V5cyh7XG4gICAgICAgIC4uLnN0YXRlLmxldmVsUmVzdWx0cyxcbiAgICAgICAgLi4uYWN0aW9uLnBheWxvYWQsXG4gICAgICB9KTtcbiAgICAgIGNvbWJpbmVkTGV2ZWxzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgY29uc3QgbGV2ZWxJZCA9IHBhcnNlSW50KGtleSk7XG4gICAgICAgIG5ld0xldmVsUmVzdWx0c1tsZXZlbElkXSA9IG1lcmdlQWN0aXZpdHlSZXN1bHQoXG4gICAgICAgICAgc3RhdGUubGV2ZWxSZXN1bHRzW2xldmVsSWRdLFxuICAgICAgICAgIGFjdGlvbi5wYXlsb2FkW2xldmVsSWRdXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIHN0YXRlLmxldmVsUmVzdWx0cyA9IG5ld0xldmVsUmVzdWx0cztcbiAgICB9LFxuICAgIG92ZXJ3cml0ZVJlc3VsdHMoc3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxMZXZlbFJlc3VsdHM+KSB7XG4gICAgICBzdGF0ZS5sZXZlbFJlc3VsdHMgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICB9LFxuICAgIG1lcmdlUGVlclJldmlld1Byb2dyZXNzKFxuICAgICAgc3RhdGUsXG4gICAgICBhY3Rpb246IFBheWxvYWRBY3Rpb248UGVlclJldmlld0xldmVsSW5mb1tdPlxuICAgICkge1xuICAgICAgaWYgKHN0YXRlLnBlZXJSZXZpZXdMZXNzb25JbmZvKSB7XG4gICAgICAgIHN0YXRlLnBlZXJSZXZpZXdMZXNzb25JbmZvID0ge1xuICAgICAgICAgIC4uLnN0YXRlLnBlZXJSZXZpZXdMZXNzb25JbmZvLFxuICAgICAgICAgIGxldmVsczogc3RhdGUucGVlclJldmlld0xlc3NvbkluZm8ubGV2ZWxzLm1hcCgobGV2ZWwsIGluZGV4KSA9PiAoe1xuICAgICAgICAgICAgLi4ubGV2ZWwsXG4gICAgICAgICAgICAuLi5hY3Rpb24ucGF5bG9hZFtpbmRleF0sXG4gICAgICAgICAgfSkpLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlRm9jdXNBcmVhOiB7XG4gICAgICByZWR1Y2VyKFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPHtcbiAgICAgICAgICBjaGFuZ2VGb2N1c0FyZWFQYXRoOiBzdHJpbmc7XG4gICAgICAgICAgZm9jdXNBcmVhTGVzc29uSWRzOiBudW1iZXJbXTtcbiAgICAgICAgfT5cbiAgICAgICkge1xuICAgICAgICBzdGF0ZS5jaGFuZ2VGb2N1c0FyZWFQYXRoID0gYWN0aW9uLnBheWxvYWQuY2hhbmdlRm9jdXNBcmVhUGF0aDtcbiAgICAgICAgc3RhdGUuZm9jdXNBcmVhTGVzc29uSWRzID0gYWN0aW9uLnBheWxvYWQuZm9jdXNBcmVhTGVzc29uSWRzO1xuICAgICAgfSxcbiAgICAgIHByZXBhcmUoY2hhbmdlRm9jdXNBcmVhUGF0aDogc3RyaW5nLCBmb2N1c0FyZWFMZXNzb25JZHM6IG51bWJlcltdKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgY2hhbmdlRm9jdXNBcmVhUGF0aCxcbiAgICAgICAgICAgIGZvY3VzQXJlYUxlc3NvbklkcyxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICAgIGRpc2FibGVQb3N0TWlsZXN0b25lKHN0YXRlKSB7XG4gICAgICBzdGF0ZS5wb3N0TWlsZXN0b25lRGlzYWJsZWQgPSB0cnVlO1xuICAgIH0sXG4gICAgc2V0SXNBZ2UxM1JlcXVpcmVkKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248Ym9vbGVhbj4pIHtcbiAgICAgIHN0YXRlLmlzQWdlMTNSZXF1aXJlZCA9IGFjdGlvbi5wYXlsb2FkO1xuICAgIH0sXG4gICAgc2V0SXNTdW1tYXJ5VmlldyhzdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPGJvb2xlYW4+KSB7XG4gICAgICBzdGF0ZS5pc1N1bW1hcnlWaWV3ID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgfSxcbiAgICBzZXRJc01pbmlWaWV3KHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248Ym9vbGVhbj4pIHtcbiAgICAgIHN0YXRlLmlzTWluaVZpZXcgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICB9LFxuICAgIHNldFN0dWRlbnREZWZhdWx0c1N1bW1hcnlWaWV3KHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248Ym9vbGVhbj4pIHtcbiAgICAgIHN0YXRlLnN0dWRlbnREZWZhdWx0c1N1bW1hcnlWaWV3ID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgfSxcbiAgICBzZXRDdXJyZW50TGVzc29uSWQoc3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxudW1iZXI+KSB7XG4gICAgICAvLyBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBjdXJyZW50TGVzc29uSWQsIHRoYXQgbWVhbnMgd2UncmUgb24gYSBwdXp6bGUgcGFnZSxcbiAgICAgIC8vIGFuZCB3ZSB3YW50IGN1cnJlbnRMZXNzb25JZCB0byByZW1haW4gdGhlIHNhbWUgKHJhdGhlciB0aGFuIHJlZmxlY3RpbmdcbiAgICAgIC8vIHRoZSBsYXN0IGxlc3NvbiB0aGUgdXNlciBoYXMgbWFkZSBwcm9ncmVzcyBvbikuXG4gICAgICBpZiAoIXN0YXRlLmN1cnJlbnRMZXNzb25JZCkge1xuICAgICAgICBzdGF0ZS5jdXJyZW50TGVzc29uSWQgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNldFNjcmlwdENvbXBsZXRlZChzdGF0ZSkge1xuICAgICAgc3RhdGUudW5pdENvbXBsZXRlZCA9IHRydWU7XG4gICAgfSxcbiAgICBzZXRMZXNzb25FeHRyYXNFbmFibGVkKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248Ym9vbGVhbj4pIHtcbiAgICAgIHN0YXRlLmxlc3NvbkV4dHJhc0VuYWJsZWQgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICB9LFxuICAgIHNldFZpZXdBc1VzZXJJZChzdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPHN0cmluZz4pIHtcbiAgICAgIHN0YXRlLnZpZXdBc1VzZXJJZCA9IGFjdGlvbi5wYXlsb2FkO1xuICAgIH0sXG4gIH0sXG4gIGV4dHJhUmVkdWNlcnM6IHtcbiAgICAvLyBUT0RPOiBXaGVuIHdlIGNvbnZlcnQgdmlld0FzUmVkdXggdG8gcmVkdXgtdG9vbGtpdCwgd2Ugd2lsbCBuZWVkIHRvIHVzZVxuICAgIC8vIGNyZWF0ZUFjdGlvbiB0aGVyZSBpbnN0ZWFkIG9mIHJlZmVyZW5jaW5nIHRoZSBzdHJpbmcgaGVyZS5cbiAgICBbU0VUX1ZJRVdfVFlQRV06IChzdGF0ZSwgYWN0aW9uOiB7dmlld1R5cGU6IGtleW9mIHR5cGVvZiBWaWV3VHlwZX0pID0+IHtcbiAgICAgIHN0YXRlLmlzU3VtbWFyeVZpZXcgPVxuICAgICAgICBhY3Rpb24udmlld1R5cGUgPT09IFZpZXdUeXBlLlBhcnRpY2lwYW50ICYmXG4gICAgICAgIHN0YXRlLnN0dWRlbnREZWZhdWx0c1N1bW1hcnlWaWV3O1xuICAgIH0sXG4gIH0sXG59KTtcblxuLy8gVGh1bmtzXG50eXBlIFByb2dyZXNzVGh1bmtBY3Rpb24gPSBUaHVua0FjdGlvbjx2b2lkLCBSb290U3RhdGUsIHVuZGVmaW5lZCwgQW55QWN0aW9uPjtcblxuZXhwb3J0IGNvbnN0IHF1ZXJ5VXNlclByb2dyZXNzID1cbiAgKHVzZXJJZDogc3RyaW5nLCBtZXJnZVByb2dyZXNzOiBib29sZWFuID0gdHJ1ZSk6IFByb2dyZXNzVGh1bmtBY3Rpb24gPT5cbiAgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKS5wcm9ncmVzcztcbiAgICByZXR1cm4gdXNlclByb2dyZXNzRnJvbVNlcnZlcihzdGF0ZSwgZGlzcGF0Y2gsIHVzZXJJZCwgbWVyZ2VQcm9ncmVzcyk7XG4gIH07XG5cbi8vIFRoZSB1c2VyIGhhcyBuYXZpZ2F0ZWQgdG8gYSBuZXcgbGV2ZWwgaW4gdGhlIGN1cnJlbnQgbGVzc29uLFxuLy8gc28gd2Ugc2hvdWxkIHVwZGF0ZSB0aGUgYnJvd3NlciBhbmQgYWxzbyBzZXQgdGhpcyBhcyB0aGUgbmV3XG4vLyBjdXJyZW50IGxldmVsLlxuZXhwb3J0IGZ1bmN0aW9uIG5hdmlnYXRlVG9MZXZlbElkKGxldmVsSWQ6IHN0cmluZyk6IFByb2dyZXNzVGh1bmtBY3Rpb24ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKS5wcm9ncmVzcztcbiAgICBpZiAoIXN0YXRlLmN1cnJlbnRMZXNzb25JZCB8fCAhc3RhdGUuY3VycmVudExldmVsSWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbmV3TGV2ZWwgPSBsZXZlbEJ5SWQoc3RhdGUsIHN0YXRlLmN1cnJlbnRMZXNzb25JZCwgbGV2ZWxJZCk7XG4gICAgaWYgKCFuZXdMZXZlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRMZXZlbCA9IGdldEN1cnJlbnRMZXZlbChnZXRTdGF0ZSgpKTtcblxuICAgIGlmIChjYW5DaGFuZ2VMZXZlbEluUGFnZShjdXJyZW50TGV2ZWwsIG5ld0xldmVsKSkge1xuICAgICAgdXBkYXRlQnJvd3NlckZvckxldmVsTmF2aWdhdGlvbihzdGF0ZSwgbmV3TGV2ZWwucGF0aCwgbGV2ZWxJZCk7XG4gICAgICBkaXNwYXRjaChzZXRDdXJyZW50TGV2ZWxJZChsZXZlbElkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVybCA9IGdldEJ1YmJsZVVybChuZXdMZXZlbC5wYXRoLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICBuYXZpZ2F0ZVRvSHJlZih1cmwpO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gVXBkYXRlcyB0aGUgY3VycmVudCBsZXZlbCBJRCBpbiB0aGUgc3RvcmUgd2hlbiB0aGUgbGV2ZWxcbi8vIChhbmQgcG9zc2libHkgc3VibGV2ZWwpIGluZGV4IGNoYW5nZXMuXG4vLyBUeXBpY2FsbHkgaGFwcGVucyB3aGVuIHRoZSB1c2VyIHByZXNzZXMgdGhlIGJyb3dzZXIgYmFjay9mb3J3YXJkIGJ1dHRvblxuLy8gaW4gYSBsZXZlbCBwcm9ncmVzc2lvbiB0aGF0IGRvZXNuJ3QgcmVxdWlyZSBwYWdlIHJlbG9hZHMuXG5leHBvcnQgZnVuY3Rpb24gb25MZXZlbEluZGV4Q2hhbmdlKFxuICBsZXZlbEluZGV4OiBudW1iZXIsXG4gIHN1YmxldmVsSW5kZXg/OiBudW1iZXJcbik6IFByb2dyZXNzVGh1bmtBY3Rpb24ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxldmVsczogTGV2ZWxXaXRoUHJvZ3Jlc3NbXSA9IGdldEN1cnJlbnRMZXZlbHMoZ2V0U3RhdGUoKSk7XG4gICAgaWYgKCFsZXZlbHMgfHwgbGV2ZWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxldmVsID0gbGV2ZWxzW2xldmVsSW5kZXhdO1xuICAgIGlmIChcbiAgICAgIHN1YmxldmVsSW5kZXggIT09IHVuZGVmaW5lZCAmJlxuICAgICAgbGV2ZWwuc3VibGV2ZWxzICYmXG4gICAgICBzdWJsZXZlbEluZGV4IDwgbGV2ZWwuc3VibGV2ZWxzLmxlbmd0aFxuICAgICkge1xuICAgICAgY29uc3QgbmV3TGV2ZWxJZCA9IGxldmVsLnN1YmxldmVsc1tzdWJsZXZlbEluZGV4XS5pZDtcbiAgICAgIGRpc3BhdGNoKHNldEN1cnJlbnRMZXZlbElkKG5ld0xldmVsSWQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3TGV2ZWxJZCA9IGxldmVsLmlkO1xuICAgICAgZGlzcGF0Y2goc2V0Q3VycmVudExldmVsSWQobmV3TGV2ZWxJZCkpO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gTmF2aWdhdGUgdG8gdGhlIG5leHQgbGV2ZWwgaW4gdGhlIHByb2dyZXNzaW9uLCBpZiBpdCBleGlzdHMuXG5leHBvcnQgZnVuY3Rpb24gbmF2aWdhdGVUb05leHRMZXZlbCgpOiBQcm9ncmVzc1RodW5rQWN0aW9uIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBsZXZlbElkID0gbmV4dExldmVsSWQoZ2V0U3RhdGUoKSk7XG4gICAgaWYgKGxldmVsSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkaXNwYXRjaChuYXZpZ2F0ZVRvTGV2ZWxJZChsZXZlbElkKSk7XG4gIH07XG59XG5cbi8vIFRoZSB1c2VyIGhhcyBzdWNjZXNzZnVsbHkgY29tcGxldGVkIHRoZSBsZXZlbCBhbmQgdGhlIHBhZ2Vcbi8vIHdpbGwgbm90IGJlIHJlbG9hZGluZy4gQ3VycmVudGx5IG9ubHkgdXNlZCBieSBMYWIyIGxhYnMuXG5leHBvcnQgZnVuY3Rpb24gc2VuZFN1Y2Nlc3NSZXBvcnQoYXBwVHlwZTogc3RyaW5nKTogUHJvZ3Jlc3NUaHVua0FjdGlvbiB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgc2VuZFJlcG9ydEhlbHBlcihhcHBUeXBlLCBUZXN0UmVzdWx0cy5BTExfUEFTUywgZGlzcGF0Y2gsIGdldFN0YXRlKTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IHNlbmRQcmVkaWN0TGV2ZWxSZXBvcnQgPSBjcmVhdGVBc3luY1RodW5rPFxuICB2b2lkLFxuICB7YXBwVHlwZTogc3RyaW5nOyBwcmVkaWN0UmVzcG9uc2U6IHN0cmluZ30sXG4gIHtcbiAgICBkaXNwYXRjaDogQXBwRGlzcGF0Y2g7XG4gICAgc3RhdGU6IFJvb3RTdGF0ZTtcbiAgfVxuPigncHJvZ3Jlc3Mvc2VuZFByZWRpY3RMZXZlbFJlcG9ydCcsIGFzeW5jIChwYXlsb2FkLCB0aHVua0FQSSkgPT4ge1xuICBjb25zdCBleHRyYVBheWxvYWQgPSB7XG4gICAgcHJvZ3JhbTogcGF5bG9hZC5wcmVkaWN0UmVzcG9uc2UsXG4gIH07XG4gIHNlbmRSZXBvcnRIZWxwZXIoXG4gICAgcGF5bG9hZC5hcHBUeXBlLFxuICAgIFRlc3RSZXN1bHRzLkNPTlRBSU5FRF9MRVZFTF9SRVNVTFQsXG4gICAgdGh1bmtBUEkuZGlzcGF0Y2gsXG4gICAgdGh1bmtBUEkuZ2V0U3RhdGUsXG4gICAgZXh0cmFQYXlsb2FkXG4gICk7XG59KTtcblxuZXhwb3J0IGNvbnN0IHNlbmRTdWJtaXRSZXBvcnQgPSBjcmVhdGVBc3luY1RodW5rPFxuICB2b2lkLFxuICB7YXBwVHlwZTogc3RyaW5nOyBzdWJtaXR0ZWQ6IGJvb2xlYW59LFxuICB7XG4gICAgZGlzcGF0Y2g6IEFwcERpc3BhdGNoO1xuICAgIHN0YXRlOiBSb290U3RhdGU7XG4gIH1cbj4oJ3Byb2dyZXNzL3NlbmRTdWJtaXRSZXBvcnQnLCBhc3luYyAocGF5bG9hZCwgdGh1bmtBUEkpID0+IHtcbiAgY29uc3QgZXh0cmFQYXlsb2FkID0ge1xuICAgIHN1Ym1pdHRlZDogcGF5bG9hZC5zdWJtaXR0ZWQudG9TdHJpbmcoKSxcbiAgfTtcbiAgY29uc3QgcmVzdWx0ID0gcGF5bG9hZC5zdWJtaXR0ZWRcbiAgICA/IFRlc3RSZXN1bHRzLlNVQk1JVFRFRF9SRVNVTFRcbiAgICA6IFRlc3RSZXN1bHRzLlVOU1VCTUlUVEVEX0FUVEVNUFQ7XG4gIGF3YWl0IHNlbmRSZXBvcnRIZWxwZXIoXG4gICAgcGF5bG9hZC5hcHBUeXBlLFxuICAgIHJlc3VsdCxcbiAgICB0aHVua0FQSS5kaXNwYXRjaCxcbiAgICB0aHVua0FQSS5nZXRTdGF0ZSxcbiAgICBleHRyYVBheWxvYWRcbiAgKTtcbiAgLy8gU3VibWl0IHN0YXR1cyBpc24ndCBwcm9wZXJseSB1cGRhdGVkIGJ5IGp1c3Qgc2F2aW5nIHRoZSBzdGF0dXMgY29kZSwgc28gcmUtcXVlcnlcbiAgLy8gdXNlciBwcm9ncmVzcyB0byBmb3JjZSB0aGUgYnViYmxlIHRvIHVwZGF0ZS5cbiAgdGh1bmtBUEkuZGlzcGF0Y2goXG4gICAgcXVlcnlVc2VyUHJvZ3Jlc3ModGh1bmtBUEkuZ2V0U3RhdGUoKS5jdXJyZW50VXNlci51c2VySWQudG9TdHJpbmcoKSlcbiAgKTtcbn0pO1xuXG4vLyBIZWxwZXJzXG5cbmZ1bmN0aW9uIHNlbmRSZXBvcnRIZWxwZXIoXG4gIGFwcFR5cGU6IHN0cmluZyxcbiAgcmVzdWx0OiBudW1iZXIsXG4gIGRpc3BhdGNoOiBUaHVua0Rpc3BhdGNoPFJvb3RTdGF0ZSwgdW5kZWZpbmVkLCBBbnlBY3Rpb24+LFxuICBnZXRTdGF0ZTogKCkgPT4gUm9vdFN0YXRlLFxuICBleHRyYURhdGE/OiBPcHRpb25hbE1pbGVzdG9uZURhdGFcbikge1xuICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCkucHJvZ3Jlc3M7XG4gIGNvbnN0IGxldmVsSWQgPSBzdGF0ZS5jdXJyZW50TGV2ZWxJZDtcbiAgaWYgKCFzdGF0ZS5jdXJyZW50TGVzc29uSWQgfHwgIWxldmVsSWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgc2NyaXB0TGV2ZWxJZCA9IGdldEN1cnJlbnRTY3JpcHRMZXZlbElkKGdldFN0YXRlKCkpO1xuICBpZiAoIXNjcmlwdExldmVsSWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBUaGUgc2VydmVyIGRvZXMgbm90IGFwcGVhciB0byB1c2UgdGhlIHVzZXIgSUQgcGFyYW1ldGVyLFxuICAvLyBzbyBqdXN0IHBhc3MgMCwgbGlrZSBzb21lIG90aGVyIG1pbGVzdG9uZSBwb3N0cyBkby5cbiAgY29uc3QgdXNlcklkID0gMDtcbiAgZXh0cmFEYXRhID0gZXh0cmFEYXRhIHx8IHt9O1xuXG4gIGNvbnN0IGRhdGE6IE1pbGVzdG9uZVJlcG9ydCA9IHtcbiAgICBhcHA6IGFwcFR5cGUsXG4gICAgcmVzdWx0OiB0cnVlLFxuICAgIHRlc3RSZXN1bHQ6IHJlc3VsdCxcbiAgICAuLi5leHRyYURhdGEsXG4gIH07XG5cbiAgZmV0Y2goYC9taWxlc3RvbmUvJHt1c2VySWR9LyR7c2NyaXB0TGV2ZWxJZH0vJHtsZXZlbElkfWAsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gIH0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgIGlmIChyZXNwb25zZS5vayAmJiBsZXZlbElkICE9PSBudWxsKSB7XG4gICAgICAvLyBVcGRhdGUgdGhlIHByb2dyZXNzIHN0b3JlIGJ5IG1lcmdpbmcgaW4gdGhpc1xuICAgICAgLy8gcGFydGljdWxhciByZXN1bHQgaW1tZWRpYXRlbHkuXG4gICAgICBkaXNwYXRjaChtZXJnZVJlc3VsdHMoe1tsZXZlbElkXTogcmVzdWx0fSkpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogUmVxdWVzdHMgdXNlciBwcm9ncmVzcyBmcm9tIHRoZSBzZXJ2ZXIgYW5kIGRpc3BhdGNoZXMgb3RoZXIgcmVkdXggYWN0aW9uc1xuICogYmFzZWQgb24gdGhlIHNlcnZlcidzIHJlc3BvbnNlIGRhdGEuXG4gKi9cbmNvbnN0IHVzZXJQcm9ncmVzc0Zyb21TZXJ2ZXIgPSAoXG4gIHN0YXRlOiBQcm9ncmVzc1N0YXRlLFxuICBkaXNwYXRjaDogVGh1bmtEaXNwYXRjaDx7cHJvZ3Jlc3M6IFByb2dyZXNzU3RhdGV9LCB1bmRlZmluZWQsIEFueUFjdGlvbj4sXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbCA9IG51bGwsXG4gIG1lcmdlUHJvZ3Jlc3M6IGJvb2xlYW5cbikgPT4ge1xuICBpZiAoIXN0YXRlLnNjcmlwdE5hbWUpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYENvdWxkIG5vdCByZXF1ZXN0IHByb2dyZXNzIGZvciB1c2VyIElEICR7dXNlcklkfSBmcm9tIHNlcnZlcjogc2NyaXB0TmFtZSBtdXN0IGJlIHByZXNlbnQgaW4gcHJvZ3Jlc3MgcmVkdXguYDtcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH1cblxuICAvLyBJZiB3ZSBoYXZlIGEgdXNlcklkLCB3ZSBjYW4gY2xlYXIgYW55IHByb2dyZXNzIGluIHJlZHV4IGFuZCByZXF1ZXN0IGFsbCBwcm9ncmVzc1xuICAvLyBmcm9tIHRoZSBzZXJ2ZXIuXG4gIGlmICh1c2VySWQpIHtcbiAgICBkaXNwYXRjaChjbGVhclJlc3VsdHMoKSk7XG4gIH1cblxuICByZXR1cm4gJC5hamF4KHtcbiAgICB1cmw6IGAvYXBpL3VzZXJfcHJvZ3Jlc3MvJHtzdGF0ZS5zY3JpcHROYW1lfWAsXG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBkYXRhOiB7dXNlcl9pZDogdXNlcklkfSxcbiAgfSkuZG9uZShkYXRhID0+IHtcbiAgICBpZiAoIWRhdGEgfHwgXy5pc0VtcHR5KGRhdGEpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuaXNWZXJpZmllZEluc3RydWN0b3IpIHtcbiAgICAgIGRpc3BhdGNoKHNldFZlcmlmaWVkKCkpO1xuICAgIH1cblxuICAgIC8vIFdlIGFyZSBvbiBhbiBvdmVydmlldyBwYWdlIGlmIGN1cnJlbnRMZXZlbElkIGlzIHVuZGVmaW5lZC5cbiAgICBjb25zdCBvbk92ZXJ2aWV3UGFnZSA9ICFzdGF0ZS5jdXJyZW50TGV2ZWxJZDtcbiAgICAvLyBTaG93IGxlc3NvbiBwbGFuIGxpbmtzIGFuZCBvdGhlciB0ZWFjaGVyIGluZm8gaWYgaW5zdHJ1Y3RvciBhbmQgb24gdW5pdCBvdmVydmlldyBwYWdlLlxuICAgIGlmIChcbiAgICAgIChkYXRhLmlzSW5zdHJ1Y3RvciB8fCBkYXRhLnRlYWNoZXJWaWV3aW5nU3R1ZGVudCkgJiZcbiAgICAgICFkYXRhLmRlZXBlckxlYXJuaW5nQ291cnNlICYmXG4gICAgICBvbk92ZXJ2aWV3UGFnZVxuICAgICkge1xuICAgICAgLy8gRGVmYXVsdCB0byBzdW1tYXJ5IHZpZXcgaWYgdGVhY2hlciBpcyB2aWV3aW5nIHRoZWlyIHN0dWRlbnQsIG90aGVyd2lzZSBkZWZhdWx0IHRvIGRldGFpbCB2aWV3LlxuICAgICAgZGlzcGF0Y2goc2V0SXNTdW1tYXJ5VmlldyhkYXRhLnRlYWNoZXJWaWV3aW5nU3R1ZGVudCkpO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmZvY3VzQXJlYUxlc3Nvbklkcykge1xuICAgICAgZGlzcGF0Y2goXG4gICAgICAgIHVwZGF0ZUZvY3VzQXJlYShkYXRhLmNoYW5nZUZvY3VzQXJlYVBhdGgsIGRhdGEuZm9jdXNBcmVhTGVzc29uSWRzKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBkaXNwYXRjaChhdXRob3JpemVMb2NrYWJsZShkYXRhLmxvY2thYmxlQXV0aG9yaXplZCkpO1xuXG4gICAgaWYgKGRhdGEuY29tcGxldGVkKSB7XG4gICAgICBkaXNwYXRjaChzZXRTY3JpcHRDb21wbGV0ZWQoKSk7XG4gICAgfVxuXG4gICAgLy8gTWVyZ2UgcHJvZ3Jlc3MgZnJvbSBzZXJ2ZXJcbiAgICBpZiAoZGF0YS5wcm9ncmVzcykge1xuICAgICAgZGlzcGF0Y2goc2V0U2NyaXB0UHJvZ3Jlc3MoZGF0YS5wcm9ncmVzcykpO1xuXG4gICAgICBpZiAobWVyZ2VQcm9ncmVzcykge1xuICAgICAgICAvLyBOb3RlIHRoYXQgd2Ugc2V0IHRoZSBmdWxsIHByb2dyZXNzIG9iamVjdCBhYm92ZSBpbiByZWR1eCBidXQgYWxzbyBzZXRcbiAgICAgICAgLy8gYSBtYXAgY29udGFpbmluZyBqdXN0IGxldmVsIHJlc3VsdHMuIFRoaXMgaXMgdGhlIGxlZ2FjeSBjb2RlIHBhdGggYW5kXG4gICAgICAgIC8vIHRoZSBnb2FsIGlzIHRvIGV2ZW50dWFsbHkgdXBkYXRlIGFsbCBjb2RlIHBhdGhzIHRvIHVzZSB1bml0UHJvZ3Jlc3NcbiAgICAgICAgLy8gaW5zdGVhZCBvZiBsZXZlbFJlc3VsdHMuXG4gICAgICAgIGNvbnN0IGxldmVsUmVzdWx0cyA9IF8ubWFwVmFsdWVzKGRhdGEucHJvZ3Jlc3MsIGdldExldmVsUmVzdWx0KTtcbiAgICAgICAgZGlzcGF0Y2gobWVyZ2VSZXN1bHRzKGxldmVsUmVzdWx0cykpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5wZWVyUmV2aWV3c1BlcmZvcm1lZCkge1xuICAgICAgICBkaXNwYXRjaChtZXJnZVBlZXJSZXZpZXdQcm9ncmVzcyhkYXRhLnBlZXJSZXZpZXdzUGVyZm9ybWVkKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmN1cnJlbnRfbGVzc29uKSB7XG4gICAgICAgIGRpc3BhdGNoKHNldEN1cnJlbnRMZXNzb25JZChkYXRhLmN1cnJlbnRfbGVzc29uKSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogRG9lcyBzb21lIHByb2Nlc3Npbmcgb2Ygb3VyIHBhc3NlZCBpbiBsZXNzb24sIG5hbWVseVxuICogLSBSZW1vdmVzICdoaWRkZW4nIGZpZWxkXG4gKiAtIEFkZHMgJ2xlc3Nvbk51bWJlcicgZmllbGQgZm9yIG5vbi1QTEMgbGVzc29ucyB3aGljaFxuICogYXJlIG5vdCBsb2NrYWJsZSBvciBoYXZlIGEgbGVzc29uIHBsYW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NlZExlc3NvbnMobGVzc29uczogTGVzc29uW10sIGlzUGxjOiBib29sZWFuKSB7XG4gIGxldCBudW1MZXNzb25zV2l0aExlc3NvblBsYW4gPSAwO1xuXG4gIHJldHVybiBsZXNzb25zLm1hcChsZXNzb24gPT4ge1xuICAgIGxldCBsZXNzb25OdW1iZXI7XG4gICAgaWYgKCFpc1BsYyAmJiBsZXNzb24ubnVtYmVyZWRMZXNzb24pIHtcbiAgICAgIG51bUxlc3NvbnNXaXRoTGVzc29uUGxhbisrO1xuICAgICAgbGVzc29uTnVtYmVyID0gbnVtTGVzc29uc1dpdGhMZXNzb25QbGFuO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4uXy5vbWl0KGxlc3NvbiwgJ2hpZGRlbicpLFxuICAgICAgbGVzc29uTnVtYmVyLFxuICAgIH07XG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3Qge1xuICBpbml0UHJvZ3Jlc3MsXG4gIHNldEN1cnJlbnRMZXZlbElkLFxuICBzZXRTY3JpcHRQcm9ncmVzcyxcbiAgY2xlYXJSZXN1bHRzLFxuICB1c2VEYlByb2dyZXNzLFxuICBtZXJnZVJlc3VsdHMsXG4gIG92ZXJ3cml0ZVJlc3VsdHMsXG4gIG1lcmdlUGVlclJldmlld1Byb2dyZXNzLFxuICB1cGRhdGVGb2N1c0FyZWEsXG4gIGRpc2FibGVQb3N0TWlsZXN0b25lLFxuICBzZXRJc0FnZTEzUmVxdWlyZWQsXG4gIHNldElzU3VtbWFyeVZpZXcsXG4gIHNldElzTWluaVZpZXcsXG4gIHNldFN0dWRlbnREZWZhdWx0c1N1bW1hcnlWaWV3LFxuICBzZXRDdXJyZW50TGVzc29uSWQsXG4gIHNldFNjcmlwdENvbXBsZXRlZCxcbiAgc2V0TGVzc29uRXh0cmFzRW5hYmxlZCxcbiAgc2V0Vmlld0FzVXNlcklkLFxufSA9IHByb2dyZXNzU2xpY2UuYWN0aW9ucztcblxuZXhwb3J0IGRlZmF1bHQgcHJvZ3Jlc3NTbGljZS5yZWR1Y2VyO1xuXG4vLyBleHBvcnQgcHJpdmF0ZSBmdW5jdGlvbihzKSB0byBleHBvc2UgdG8gdW5pdCB0ZXN0aW5nXG5leHBvcnQgY29uc3QgX190ZXN0b25seV9fID0gSU5fVU5JVF9URVNUXG4gID8ge1xuICAgICAgdXNlclByb2dyZXNzRnJvbVNlcnZlcixcbiAgICB9XG4gIDoge307XG4iLCIvLyBUeXBlc2NyaXB0IGRlZmluaXRpb25zIGZvciB0eXBlcyByZWxhdGluZyB0byBwcm9ncmVzcy4gTm90ZSB0aGF0IG1hbnlcbi8vIG9mIHRoZXNlIGFyZSBcImR1cGxpY2F0ZWRcIiBieSBgL3RlbXBsYXRlcy9wcm9ncmVzcy9wcm9ncmVzc1R5cGVzLCB3aGljaCBkZWZpbmVkXG4vLyB0aGVzZSB1c2luZyBQcm9wVHlwZXMgZm9yIHVzYWdlIGluIEphdmFzY3JpcHQgUmVhY3QgY29tcG9uZW50cy4gQXMgd2UgbW92ZSB0b3dhcmRzXG4vLyB0eXBlc2NyaXB0IHdlIGNhbiBkZXByZWNhdGUgdGhlIFByb3BUeXBlcyBkZWZpbml0aW9ucyBhbmQgdXNlIHRoZXNlIGluc3RlYWQuXG5cbi8qKlxuICogU2VlIEFwcGxpY2F0aW9uSGVscGVyOjpQVVpaTEVfUEFHRV9OT05FLlxuICovXG5leHBvcnQgY29uc3QgUFVaWkxFX1BBR0VfTk9ORSA9IC0xO1xuXG5leHBvcnQgaW50ZXJmYWNlIExlc3NvbiB7XG4gIGFzc2Vzc21lbnQ6IGJvb2xlYW47XG4gIGRlc2NyaXB0aW9uX3N0dWRlbnQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb25fdGVhY2hlcjogc3RyaW5nO1xuICBoYXNMZXNzb25QbGFuOiBib29sZWFuO1xuICBpZDogbnVtYmVyO1xuICBrZXk6IHN0cmluZztcbiAgbGVzc29uRWRpdFBhdGg6IHN0cmluZztcbiAgbGVzc29uTnVtYmVyOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIGxlc3NvblN0YXJ0VXJsOiBzdHJpbmc7XG4gIGxlc3Nvbl9leHRyYXNfbGV2ZWxfdXJsOiBzdHJpbmc7XG4gIGxlc3Nvbl9ncm91cF9kaXNwbGF5X25hbWU6IHN0cmluZztcbiAgbGV2ZWxzOiBMZXZlbFtdO1xuICBsb2NrYWJsZTogYm9vbGVhbjtcbiAgbmFtZTogc3RyaW5nO1xuICBudW1fc2NyaXB0X2xlc3NvbnM6IG51bWJlcjtcbiAgbnVtYmVyZWRMZXNzb246IGJvb2xlYW47XG4gIHBvc2l0aW9uOiBudW1iZXI7XG4gIHJlbGF0aXZlX3Bvc2l0aW9uOiBudW1iZXI7XG4gIHNjcmlwdF9pZDogbnVtYmVyO1xuICBzY3JpcHRfbmFtZTogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICB1bnBsdWdnZWQ6IGJvb2xlYW4gfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlc3Nvbkdyb3VwIHtcbiAgYmlnX3F1ZXN0aW9uczogc3RyaW5nIHwgbnVsbDtcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG4gIGRpc3BsYXlfbmFtZTogc3RyaW5nO1xuICBpZDogbnVtYmVyO1xuICBrZXk6IHN0cmluZztcbiAgcG9zaXRpb246IG51bWJlcjtcbiAgdXNlcl9mYWNpbmc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGV2ZWwge1xuICBhY3RpdmVJZDogc3RyaW5nO1xuICBhcHA6IHN0cmluZztcbiAgYm9udXM6IGJvb2xlYW47XG4gIGRpc3BsYXlfYXNfdW5wbHVnZ2VkOiBib29sZWFuO1xuICBmcmVlUGxheTogYm9vbGVhbjtcbiAgaWNvbjogc3RyaW5nIHwgbnVsbDtcbiAgaWQ6IHN0cmluZztcbiAgaWRzOiBzdHJpbmdbXTtcbiAgaW5hY3RpdmVJZHM6IHN0cmluZ1tdO1xuICBpc19jb25jZXB0X2xldmVsOiBib29sZWFuO1xuICBraW5kOiBzdHJpbmc7XG4gIGxldmVsTnVtYmVyOiBudW1iZXI7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG4gIHRpdGxlOiBudW1iZXI7XG4gIHVybDogc3RyaW5nO1xuICBwYXRoOiBzdHJpbmc7XG4gIHNjcmlwdExldmVsSWQ6IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBzdWJsZXZlbHM/OiBMZXZlbFtdO1xuICB1c2VzTGFiMjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMZXZlbFdpdGhQcm9ncmVzcyBleHRlbmRzIExldmVsIHtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIHBhaXJlZD86IGJvb2xlYW47XG4gIGlzTG9ja2VkPzogYm9vbGVhbjtcbiAgaXNDdXJyZW50TGV2ZWw/OiBib29sZWFuO1xuICBzdWJsZXZlbHM/OiBMZXZlbFdpdGhQcm9ncmVzc1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVuaXRQcm9ncmVzcyB7XG4gIGxhc3RUaW1lc3RhbXA6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgbG9ja2VkOiBib29sZWFuO1xuICBwYWdlczogVW5pdFByb2dyZXNzW10gfCBudWxsO1xuICBwYWlyZWQ6IGJvb2xlYW47XG4gIHJlc3VsdDogbnVtYmVyO1xuICBzdGF0dXM6IHN0cmluZztcbiAgdGVhY2hlckZlZWRiYWNrUmV2aWV3U3RhdGU6IGtleW9mIHR5cGVvZiBSZXZpZXdTdGF0ZXMgfCB1bmRlZmluZWQ7XG4gIHRlYWNoZXJGZWVkYmFja05ldzogYm9vbGVhbjtcbiAgdGltZVNwZW50OiBudW1iZXIgfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVlclJldmlld0xlc3NvbkluZm8ge1xuICBuYW1lOiBzdHJpbmc7XG4gIGxlc3Nvbl9ncm91cF9kaXNwbGF5X25hbWU6IHN0cmluZztcbiAgbGV2ZWxzOiBQZWVyUmV2aWV3TGV2ZWxJbmZvW107XG4gIGxvY2thYmxlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlZXJSZXZpZXdMZXZlbEluZm8ge1xuICBpZDogbnVtYmVyO1xuICBraW5kOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGljb246IHN0cmluZztcbiAgbG9ja2VkOiBib29sZWFuO1xuICBzdGF0dXM/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVlclJldmlld1N1bW1hcnkge1xuICBzdGF0dXM6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICByZXN1bHQ6IHN0cmluZztcbiAgaWNvbjogc3RyaW5nO1xuICBsb2NrZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBSZXZpZXdTdGF0ZXMgPSB7XG4gIGNvbXBsZXRlZDogJ2NvbXBsZXRlZCcsXG4gIGtlZXBXb3JraW5nOiAna2VlcFdvcmtpbmcnLFxuICBhd2FpdGluZ1JldmlldzogJ2F3YWl0aW5nUmV2aWV3Jyxcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdFByb2dyZXNzUGF5bG9hZCB7XG4gIGN1cnJlbnRMZXZlbElkOiBzdHJpbmcgfCBudWxsO1xuICBkZWVwZXJMZWFybmluZ0NvdXJzZTogYm9vbGVhbjtcbiAgc2F2ZUFuc3dlcnNCZWZvcmVOYXZpZ2F0aW9uOiBib29sZWFuIHwgbnVsbDtcbiAgbGVzc29uczogTGVzc29uW107XG4gIGxlc3Nvbkdyb3VwczogTGVzc29uR3JvdXBbXSB8IG51bGw7XG4gIHNjcmlwdElkOiBudW1iZXIgfCBudWxsO1xuICBzY3JpcHROYW1lOiBzdHJpbmcgfCBudWxsO1xuICBzY3JpcHREaXNwbGF5TmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICB1bml0VGl0bGU6IHN0cmluZyB8IG51bGw7XG4gIHVuaXREZXNjcmlwdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICB1bml0U3R1ZGVudERlc2NyaXB0aW9uOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGNvdXJzZUlkOiBudW1iZXIgfCBudWxsO1xuICBjb3Vyc2VWZXJzaW9uSWQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgaXNMZXNzb25FeHRyYXM6IGJvb2xlYW47XG4gIHBlZXJSZXZpZXdMZXNzb25JbmZvOiBQZWVyUmV2aWV3TGVzc29uSW5mbyB8IG51bGw7XG4gIGlzRnVsbFByb2dyZXNzOiBib29sZWFuO1xuICBjdXJyZW50UGFnZU51bWJlcjogbnVtYmVyO1xufVxuXG4vLyBMZXZlbFJlc3VsdHMgaXMgYSBtYXAgb2YgbGV2ZWxJZCAtPiBUZXN0UmVzdWx0LiBUZXN0UmVzdWx0IGlzIGEgbnVtYmVyLlxuZXhwb3J0IHR5cGUgTGV2ZWxSZXN1bHRzID0ge1trZXk6IG51bWJlcl06IG51bWJlcn07XG5cbmV4cG9ydCBjb25zdCBWaWV3VHlwZSA9IHtcbiAgUGFydGljaXBhbnQ6ICdQYXJ0aWNpcGFudCcsXG4gIEluc3RydWN0b3I6ICdJbnN0cnVjdG9yJyxcbn07XG4iXSwibmFtZXMiOlsiY2FuQ2hhbmdlTGV2ZWxJblBhZ2UiLCJjdXJyZW50TGV2ZWwiLCJuZXdMZXZlbCIsIlVSTCIsImRvY3VtZW50IiwibG9jYXRpb24iLCJwYXRobmFtZSIsInNwbGl0IiwiaW5jbHVkZXMiLCJ1c2VzTGFiMiIsInNldHVwTmF2aWdhdGlvbkhhbmRsZXIiLCJsZXNzb25EYXRhIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicGF0aCIsInZhbHVlcyIsInN1YmxldmVsTnVtYmVyU3RyaW5nSW5kZXgiLCJsZW5ndGgiLCJsZXZlbE51bWJlclN0cmluZ0luZGV4Iiwic3VibGV2ZWxOdW1iZXIiLCJsZXZlbE51bWJlciIsIk51bWJlciIsImlzSW50ZWdlciIsInVuZGVmaW5lZCIsImdldFN0b3JlIiwiZGlzcGF0Y2giLCJvbkxldmVsSW5kZXhDaGFuZ2UiLCJ1cGRhdGVCcm93c2VyRm9yTGV2ZWxOYXZpZ2F0aW9uIiwicHJvZ3Jlc3NTdG9yZVN0YXRlIiwibGV2ZWxQYXRoIiwibGV2ZWxJZCIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJzZWFyY2giLCJzZXRXaW5kb3dUaXRsZSIsIl9wcm9ncmVzc1JlZHV4IiwicmVxdWlyZSIsIl9yZWR1eCIsIm5ld0xldmVsSWQiLCJsZXNzb24iLCJsZXNzb25zIiwiZmluZCIsImlkIiwiY3VycmVudExlc3NvbklkIiwibnVtTGVzc29ucyIsIm51bV9zY3JpcHRfbGVzc29ucyIsImxlc3Nvbk5hbWUiLCJuYW1lIiwibGVzc29uSW5kZXgiLCJsZXZlbHMiLCJmaW5kSW5kZXgiLCJsZXZlbCIsImFjdGl2ZUlkIiwic2NyaXB0RGlzcGxheU5hbWUiLCJ0aXRsZSIsImNvbmNhdCIsIl9sb2Rhc2giLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsIl9jb25zdGFudHMiLCJfcHJvZ3Jlc3NIZWxwZXJzIiwiX3NoYXJlZENvbnN0YW50cyIsIl9hY3Rpdml0eVV0aWxzIiwiX3R5cGVvZiIsIm8iLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiQXJyYXkiLCJpc0FycmF5IiwiX2FycmF5TGlrZVRvQXJyYXkiLCJfaXRlcmFibGVUb0FycmF5IiwiaXRlciIsImZyb20iLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJtaW5MZW4iLCJuIiwiT2JqZWN0IiwidG9TdHJpbmciLCJjYWxsIiwic2xpY2UiLCJ0ZXN0IiwiX25vbkl0ZXJhYmxlU3ByZWFkIiwiVHlwZUVycm9yIiwibGVuIiwiaSIsImFycjIiLCJvd25LZXlzIiwiZSIsInIiLCJ0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiX3RvUHJpbWl0aXZlIiwidG9QcmltaXRpdmUiLCJTdHJpbmciLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImV4cG9ydHMiLCJoYXNMb2NrYWJsZUxlc3NvbnMiLCJzdGF0ZSIsInNvbWUiLCJsb2NrYWJsZSIsImhhc0dyb3VwcyIsImdyb3VwZWRMZXNzb25zIiwibGVzc29uRnJvbUxlc3NvbkF0SW5kZXgiLCJsZXNzb25Gcm9tTGVzc29uIiwiaXNGb2N1c0FyZWEiLCJmb2N1c0FyZWFMZXNzb25JZHMiLCJfIiwicGljayIsInBlZXJSZXZpZXdMZXNzb24iLCJtYXAiLCJpbmRleCIsInBlZXJSZXZpZXdMZXNzb25JbmZvIiwicGVlclJldmlld0xldmVscyIsImlzTG9ja2VkIiwibG9ja2VkIiwic3RhdHVzIiwiTGV2ZWxTdGF0dXMiLCJub3RfdHJpZWQiLCJQcm9ncmVzc0xldmVsVHlwZSIsIlNDUklQVF9MRVZFTCIsIkxFVkVMIiwiZ2V0UHJvZ3Jlc3NMZXZlbFR5cGUiLCJwcm9ncmVzcyIsImN1cnJlbnRMZXZlbElkIiwibGV2ZWxXaXRoUHJvZ3Jlc3MiLCJnZXRMZXZlbFByb3BlcnRpZXNQYXRoIiwiX3N0YXRlJHByb2dyZXNzJGxlc3NvIiwibGV2ZWxQb3NpdGlvbiIsInN1YmxldmVsUG9zaXRpb24iLCJzY3JpcHROYW1lIiwibGVzc29uUG9zaXRpb24iLCJyZWxhdGl2ZV9wb3NpdGlvbiIsImdldEN1cnJlbnRMZXZlbCIsInBhcmVudExldmVsSWQiLCJsZXZlbEJ5SWQiLCJfcmVmIiwiaXNMb2NrYWJsZSIsIl9sZXZlbFByb2dyZXNzIiwiX2xldmVsJGlkcyIsIl9sZXZlbCRzdWJsZXZlbHMiLCJsZXZlbFJlc3VsdHMiLCJ1bml0UHJvZ3Jlc3MiLCJfcmVmJGxldmVsUGFpcmluZyIsImxldmVsUGFpcmluZyIsIm5vcm1hbGl6ZWRMZXZlbCIsInByb2Nlc3NlZExldmVsIiwiaWRzIiwiYmVzdFJlc3VsdExldmVsSWQiLCJsZXZlbElkcyIsInByb2dyZXNzRGF0YSIsImF0dGVtcHRlZElkcyIsImJlc3RJZCIsImJlc3RSZXN1bHQiLCJyZXN1bHQiLCJ0ZWFjaGVyRmVlZGJhY2tSZXZpZXdTdGF0ZSIsImxldmVsUHJvZ3Jlc3MiLCJwYWdlcyIsInBhZ2VOdW1iZXIiLCJraW5kIiwiTGV2ZWxLaW5kIiwiYXNzZXNzbWVudCIsImFjdGl2aXR5Q3NzQ2xhc3MiLCJpc0N1cnJlbnQiLCJpc0N1cnJlbnRMZXZlbCIsInBhaXJlZCIsInN1YmxldmVscyIsInN1YmxldmVsIiwibGV2ZWxzQnlMZXNzb24iLCJfcmVmMiIsImxldmVsc0Zvckxlc3NvbklkIiwibGVzc29uSWQiLCJfc3RhdGUkbGVzc29ucyIsIl9sZXZlbHNGb3JMZXNzb25JZCIsIl9sZXZlbHNGb3JMZXNzb25JZCRmbCIsImZsYXRNYXAiLCJfZ2V0Q3VycmVudExldmVscyIsIl9nZXRDdXJyZW50TGV2ZWxzJGZsYSIsImdldEN1cnJlbnRMZXZlbHMiLCJnZXRDdXJyZW50U2NyaXB0TGV2ZWxJZCIsIl9sZXZlbEJ5SWQiLCJzY3JpcHRMZXZlbElkIiwibmV4dExldmVsSWQiLCJjdXJyZW50TGV2ZWxJbmRleCIsImxldmVsQ291bnQiLCJsZXNzb25FeHRyYXNVcmwiLCJsZXNzb25FeHRyYXNFbmFibGVkIiwibGVzc29uX2V4dHJhc19sZXZlbF91cmwiLCJpc1BlcmZlY3QiLCJUZXN0UmVzdWx0cyIsIk1JTklNVU1fT1BUSU1BTF9SRVNVTFQiLCJpbmNsdWRlQm9udXNMZXZlbHMiLCJieUdyb3VwIiwiYWxsTGV2ZWxzIiwibGVzc29uR3JvdXBzIiwibGVzc29uR3JvdXAiLCJkaXNwbGF5X25hbWUiLCJ1c2VyRmFjaW5nIiwidXNlcl9mYWNpbmciLCJkaXNwbGF5TmFtZSIsImRlc2NyaXB0aW9uIiwiYmlnUXVlc3Rpb25zIiwiYmlnX3F1ZXN0aW9ucyIsImdyb3VwIiwibGVzc29uX2dyb3VwX2Rpc3BsYXlfbmFtZSIsImxlc3NvbkF0SW5kZXgiLCJsZXNzb25MZXZlbHMiLCJib251cyIsInByb2dyZXNzaW9uc0Zyb21MZXZlbHMiLCJwcm9ncmVzc2lvbnMiLCJjdXJyZW50UHJvZ3Jlc3Npb24iLCJzdGFydCIsInByb2dyZXNzaW9uIiwicHJvZ3Jlc3Npb25EaXNwbGF5TmFtZSIsInZlcmlmaWVkSW5zdHJ1Y3RvciIsImluaXRpYWxTdGF0ZSIsImFjdGlvbiIsInR5cGUiLCJTRVRfVkVSSUZJRUQiLCJpc1ZlcmlmaWVkIiwiU0VUX1ZFUklGSUVEX1JFU09VUkNFUyIsImhhc1ZlcmlmaWVkUmVzb3VyY2VzIiwic2V0VmVyaWZpZWQiLCJzZXRWZXJpZmllZFJlc291cmNlcyIsImxldmVsSW5kZXgiLCJzdWJsZXZlbEluZGV4IiwiZ2V0U3RhdGUiLCJzZXRDdXJyZW50TGV2ZWxJZCIsIm5hdmlnYXRlVG9OZXh0TGV2ZWwiLCJuYXZpZ2F0ZVRvTGV2ZWxJZCIsInNlbmRTdWNjZXNzUmVwb3J0IiwiYXBwVHlwZSIsInNlbmRSZXBvcnRIZWxwZXIiLCJBTExfUEFTUyIsImRlZXBlckxlYXJuaW5nQ291cnNlIiwic2F2ZUFuc3dlcnNCZWZvcmVOYXZpZ2F0aW9uIiwic2NyaXB0SWQiLCJ2aWV3QXNVc2VySWQiLCJ1bml0VGl0bGUiLCJjb3Vyc2VJZCIsImlzTGVzc29uRXh0cmFzIiwidW5pdFByb2dyZXNzSGFzTG9hZGVkIiwicGVlclJldmlld3NQZXJmb3JtZWQiLCJwb3N0TWlsZXN0b25lRGlzYWJsZWQiLCJpc0FnZTEzUmVxdWlyZWQiLCJzdHVkZW50RGVmYXVsdHNTdW1tYXJ5VmlldyIsImlzU3VtbWFyeVZpZXciLCJpc01pbmlWaWV3IiwiaGFzRnVsbFByb2dyZXNzIiwidXNpbmdEYlByb2dyZXNzIiwiY3VycmVudFBhZ2VOdW1iZXIiLCJQVVpaTEVfUEFHRV9OT05FIiwiY291cnNlVmVyc2lvbklkIiwidW5pdERlc2NyaXB0aW9uIiwidW5pdFN0dWRlbnREZXNjcmlwdGlvbiIsImNoYW5nZUZvY3VzQXJlYVBhdGgiLCJ1bml0Q29tcGxldGVkIiwicHJvZ3Jlc3NTbGljZSIsImNyZWF0ZVNsaWNlIiwicmVkdWNlcnMiLCJpbml0UHJvZ3Jlc3MiLCJwYXlsb2FkIiwicHJvY2Vzc2VkTGVzc29ucyIsImlzRnVsbFByb2dyZXNzIiwic2V0U2NyaXB0UHJvZ3Jlc3MiLCJwcm9jZXNzU2VydmVyU3R1ZGVudFByb2dyZXNzIiwiY2xlYXJSZXN1bHRzIiwidXNlRGJQcm9ncmVzcyIsIm1lcmdlUmVzdWx0cyIsIm5ld0xldmVsUmVzdWx0cyIsInBhcnNlSW50IiwibWVyZ2VBY3Rpdml0eVJlc3VsdCIsIm92ZXJ3cml0ZVJlc3VsdHMiLCJtZXJnZVBlZXJSZXZpZXdQcm9ncmVzcyIsInVwZGF0ZUZvY3VzQXJlYSIsInJlZHVjZXIiLCJwcmVwYXJlIiwiZGlzYWJsZVBvc3RNaWxlc3RvbmUiLCJzZXRJc0FnZTEzUmVxdWlyZWQiLCJzZXRJc1N1bW1hcnlWaWV3Iiwic2V0SXNNaW5pVmlldyIsInNldFN0dWRlbnREZWZhdWx0c1N1bW1hcnlWaWV3Iiwic2V0Q3VycmVudExlc3NvbklkIiwic2V0U2NyaXB0Q29tcGxldGVkIiwic2V0TGVzc29uRXh0cmFzRW5hYmxlZCIsInNldFZpZXdBc1VzZXJJZCIsImV4dHJhUmVkdWNlcnMiLCJTRVRfVklFV19UWVBFIiwidmlld1R5cGUiLCJWaWV3VHlwZSIsIlBhcnRpY2lwYW50IiwidXJsIiwiZ2V0QnViYmxlVXJsIiwibmF2aWdhdGVUb0hyZWYiLCJleHRyYURhdGEiLCJkYXRhIiwiYXBwIiwidGVzdFJlc3VsdCIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJxdWVyeVVzZXJQcm9ncmVzcyIsInVzZXJJZCIsIm1lcmdlUHJvZ3Jlc3MiLCJ1c2VyUHJvZ3Jlc3NGcm9tU2VydmVyIiwic2VuZFByZWRpY3RMZXZlbFJlcG9ydCIsImNyZWF0ZUFzeW5jVGh1bmsiLCJ0aHVua0FQSSIsImV4dHJhUGF5bG9hZCIsInByb2dyYW0iLCJwcmVkaWN0UmVzcG9uc2UiLCJDT05UQUlORURfTEVWRUxfUkVTVUxUIiwic2VuZFN1Ym1pdFJlcG9ydCIsInN1Ym1pdHRlZCIsIlNVQk1JVFRFRF9SRVNVTFQiLCJVTlNVQk1JVFRFRF9BVFRFTVBUIiwiY3VycmVudFVzZXIiLCJtZXNzYWdlIiwiRXJyb3IiLCJhamF4IiwidXNlcl9pZCIsImRvbmUiLCJpc0VtcHR5IiwiaXNWZXJpZmllZEluc3RydWN0b3IiLCJvbk92ZXJ2aWV3UGFnZSIsImlzSW5zdHJ1Y3RvciIsInRlYWNoZXJWaWV3aW5nU3R1ZGVudCIsImF1dGhvcml6ZUxvY2thYmxlIiwibG9ja2FibGVBdXRob3JpemVkIiwiY29tcGxldGVkIiwibWFwVmFsdWVzIiwiZ2V0TGV2ZWxSZXN1bHQiLCJjdXJyZW50X2xlc3NvbiIsImlzUGxjIiwibnVtTGVzc29uc1dpdGhMZXNzb25QbGFuIiwibGVzc29uTnVtYmVyIiwibnVtYmVyZWRMZXNzb24iLCJvbWl0IiwiYWN0aW9ucyIsIl9fdGVzdG9ubHlfXyIsIlJldmlld1N0YXRlcyIsImtlZXBXb3JraW5nIiwiYXdhaXRpbmdSZXZpZXciLCJJbnN0cnVjdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==