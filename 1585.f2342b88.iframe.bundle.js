"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[1585],{"./src/templates/manageStudents/manageStudentsRedux.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertStudentServerData=exports.convertStudentDataToArray=exports.cancelStudentTransfer=exports.cancelEditingStudent=exports.blankStudentTransferStatus=exports.blankStudentTransfer=exports.addStudentsSuccess=exports.addStudentsFull=exports.addStudentsFailure=exports.addStudents=exports.addMultipleRows=exports.addMultipleAddRows=exports.TransferType=exports.TransferStatus=exports.RowType=exports.PrintLoginCardsButtonMetricsCategory=exports.ParentLetterButtonMetricsCategory=exports.AddStatus=void 0,exports.default=function manageStudents(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments.length>1?arguments[1]:void 0;if(action.type===SET_LOGIN_TYPE){var addRowInitialization={};return action.loginType!==_sharedConstants.SectionLoginType.word&&action.loginType!==_sharedConstants.SectionLoginType.picture||(addRowInitialization={studentData:_defineProperty({},addRowId,_objectSpread(_objectSpread({},blankAddRow),{},{loginType:action.loginType})),editingData:_defineProperty({},addRowId,_objectSpread(_objectSpread({},blankAddRow),{},{loginType:action.loginType}))}),_objectSpread(_objectSpread({},state),{},{loginType:action.loginType},addRowInitialization)}if(action.type===SET_STUDENTS){var studentData=_objectSpread({},action.studentData);return state.loginType!==_sharedConstants.SectionLoginType.word&&state.loginType!==_sharedConstants.SectionLoginType.picture||(studentData[addRowId]=_objectSpread(_objectSpread({},blankAddRow),{},{loginType:state.loginType})),_objectSpread(_objectSpread({},state),{},{studentData,addStatus:{status:null,numStudents:null},isLoadingStudents:!1})}if(action.type===SET_SECTION_INFO)return _objectSpread(_objectSpread({},state),{},{sectionId:action.sectionId});if(action.type===START_EDITING_STUDENT)return _objectSpread(_objectSpread({},state),{},{studentData:_objectSpread(_objectSpread({},state.studentData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread({},state.studentData[action.studentId]),{},{isEditing:!0}))),editingData:_objectSpread(_objectSpread({},state.editingData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread({},state.studentData[action.studentId]),{},{id:action.studentId})))});if(action.type===CANCEL_EDITING_STUDENT)return _objectSpread(_objectSpread({},state),{},{studentData:_objectSpread(_objectSpread({},state.studentData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread({},state.studentData[action.studentId]),{},{isEditing:!1}))),editingData:_lodash.default.omit(state.editingData,action.studentId)});if(action.type===START_SAVING_STUDENT)return _objectSpread(_objectSpread({},state),{},{studentData:_objectSpread(_objectSpread({},state.studentData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread({},state.studentData[action.studentId]),{},{isSaving:!0}))),editingData:_objectSpread(_objectSpread({},state.editingData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread({},state.editingData[action.studentId]),{},{isSaving:!0})))});if(action.type===SAVE_STUDENT_SUCCESS)return _objectSpread(_objectSpread({},state),{},{studentData:_objectSpread(_objectSpread({},state.studentData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread(_objectSpread({},state.studentData[action.studentId]),state.editingData[action.studentId]),{},{isEditing:!1,isSaving:!1,rowType:RowType.STUDENT}))),editingData:_lodash.default.omit(state.editingData,action.studentId)});if(action.type===ADD_STUDENT_FAILURE){for(var newState=_objectSpread(_objectSpread({},state),{},{addStatus:{status:AddStatus.FAIL,numStudents:action.numStudents}}),i=0;i<action.studentIds.length;i++)newState.studentData[action.studentIds[i]]=_objectSpread(_objectSpread({},state.studentData[action.studentIds[i]]),{},{isSaving:!1}),newState.editingData[action.studentIds[i]]=_objectSpread(_objectSpread({},state.editingData[action.studentIds[i]]),{},{isSaving:!1});return newState}if(action.type===ADD_STUDENT_FULL){for(var _newState=_objectSpread(_objectSpread({},state),{},{addStatus:_objectSpread(_objectSpread({},state.addStatus),{},{status:AddStatus.FULL,numStudents:action.numStudents,sectionCapacity:action.sectionCapacity,sectionCode:action.sectionCode,sectionStudentCount:action.sectionStudentCount})}),_i=0;_i<action.studentIds.length;_i++)_newState.studentData[action.studentIds[_i]]=_objectSpread(_objectSpread({},state.studentData[action.studentIds[_i]]),{},{isSaving:!1}),_newState.editingData[action.studentIds[_i]]=_objectSpread(_objectSpread({},state.editingData[action.studentIds[_i]]),{},{isSaving:!1});return _newState}if(action.type===ADD_STUDENT_SUCCESS){return _objectSpread(_objectSpread({},state),{},{studentData:_objectSpread(_objectSpread(_objectSpread({},_lodash.default.omit(state.studentData,action.rowIds)),action.studentData),{},_defineProperty({},addRowId,_objectSpread(_objectSpread({},blankAddRow),{},{loginType:state.loginType}))),editingData:_objectSpread(_objectSpread({},_lodash.default.omit(state.editingData,action.rowIds)),{},_defineProperty({},addRowId,_objectSpread(_objectSpread({},blankAddRow),{},{loginType:state.loginType}))),addStatus:{status:AddStatus.SUCCESS,numStudents:action.numStudents}})}if(action.type===SET_SHARING_DEFAULT){var sharingDisabled=state.editingData[action.studentId].age<13;return _objectSpread(_objectSpread({},state),{},{editingData:_objectSpread(_objectSpread({},state.editingData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread({},state.editingData[action.studentId]),{},{id:action.studentId,sharingDisabled})))})}if(action.type===EDIT_STUDENT)return _objectSpread(_objectSpread({},state),{},{editingData:_objectSpread(_objectSpread({},state.editingData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread(_objectSpread({},state.editingData[action.studentId]),action.studentData),{},{id:action.studentId})))});if(action.type===EDIT_ALL){var _newState3=_objectSpread({},state);for(var studentKey in state.studentData){var student=state.studentData[studentKey];_newState3.studentData[student.id].isEditing=!0,_newState3.editingData[student.id]=_objectSpread(_objectSpread({},_newState3.studentData[student.id]),state.editingData[student.id])}return _newState3}if(action.type===UPDATE_ALL_SHARE_SETTING){var _newState4=_objectSpread({},state);for(var _studentKey in state.studentData){var _student=state.studentData[_studentKey];_newState4.editingData[_student.id].sharingDisabled=action.disable}return _newState4}if(action.type===SET_SECRET_IMAGE)return _objectSpread(_objectSpread({},state),{},{studentData:_objectSpread(_objectSpread({},state.studentData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread({},state.studentData[action.studentId]),{},{secretPicturePath:action.image})))});if(action.type===SET_SECRET_WORDS)return _objectSpread(_objectSpread({},state),{},{studentData:_objectSpread(_objectSpread({},state.studentData),{},_defineProperty({},action.studentId,_objectSpread(_objectSpread({},state.studentData[action.studentId]),{},{secretWords:action.words})))});if(action.type===REMOVE_STUDENT){var studentId=action.studentId;if(!state.studentData[studentId])throw new Error("student does not exist");return _objectSpread(_objectSpread({},state),{},{studentData:_lodash.default.omit(state.studentData,studentId),editingData:_lodash.default.omit(state.editingData,studentId)})}if(action.type===ADD_MULTIPLE_ROWS)return _objectSpread(_objectSpread({},state),{},{studentData:_objectSpread(_objectSpread({},state.studentData),action.studentData),editingData:_objectSpread(_objectSpread({},state.editingData),action.studentData)});if(action.type===SET_SHOW_SHARING_COLUMN)return _objectSpread(_objectSpread({},state),{},{showSharingColumn:!!action.visible});if(action.type===UPDATE_STUDENT_TRANSFER)return _objectSpread(_objectSpread({},state),{},{transferData:_objectSpread(_objectSpread({},state.transferData),action.transferData),transferStatus:blankStudentTransferStatus});if(action.type===CANCEL_STUDENT_TRANSFER)return _objectSpread(_objectSpread({},state),{},{transferData:blankStudentTransfer,transferStatus:_objectSpread(_objectSpread({},state.transferStatus),{},{error:null})});if(action.type===TRANSFER_STUDENTS_SUCCESS)return _objectSpread(_objectSpread({},state),{},{transferStatus:_objectSpread(_objectSpread({},state.transferStatus),{},{status:TransferStatus.SUCCESS,type:action.transferType,numStudents:action.numStudents,sectionDisplay:action.sectionDisplay})});if(action.type===TRANSFER_STUDENTS_FULL)return _objectSpread(_objectSpread({},state),{},{transferStatus:_objectSpread(_objectSpread({},state.transferStatus),{},{status:TransferStatus.FULL,sectionCapacity:action.sectionCapacity,numStudents:action.numStudents,sectionCode:action.sectionCode,sectionStudentCount:action.sectionStudentCount,verb:action.verb})});if(action.type===TRANSFER_STUDENTS_FAILURE)return _objectSpread(_objectSpread({},state),{},{transferStatus:_objectSpread(_objectSpread({},state.transferStatus),{},{status:TransferStatus.FAIL,error:action.error})});if(action.type===TRANSFER_STUDENTS_PENDING)return _objectSpread(_objectSpread({},state),{},{transferStatus:_objectSpread(_objectSpread({},state.transferStatus),{},{status:TransferStatus.PENDING})});if(action.type===START_LOADING_STUDENTS)return _objectSpread(_objectSpread({},state),{},{isLoadingStudents:!0});if(action.type===FINISH_LOADING_STUDENTS)return _objectSpread(_objectSpread({},state),{},{isLoadingStudents:!1});return state},exports.updateStudentTransfer=exports.updateAllShareSetting=exports.transferStudentsSuccess=exports.transferStudentsPending=exports.transferStudentsFull=exports.transferStudentsFailure=exports.transferStudents=exports.startSavingStudent=exports.startLoadingStudents=exports.startEditingStudent=exports.setStudents=exports.setShowSharingColumn=exports.setSharingDefault=exports.setSectionInfo=exports.setSecretWords=exports.setSecretImage=exports.setLoginType=exports.saveStudentSuccess=exports.saveStudent=exports.saveAllStudents=exports.removeStudent=exports.loadSectionStudentData=exports.handleShareSetting=exports.getStudentCount=exports.finishLoadingStudents=exports.filterAgeGatedStudents=exports.editStudent=exports.editAll=void 0;var _jquery=_interopRequireDefault(__webpack_require__("./node_modules/jquery/dist/jquery.js")),_lodash=_interopRequireDefault(__webpack_require__("./node_modules/lodash/lodash.js")),_teacherSectionsRedux=__webpack_require__("./src/templates/teacherDashboard/teacherSectionsRedux.js"),_teacherSectionsReduxSelectors=__webpack_require__("./src/templates/teacherDashboard/teacherSectionsReduxSelectors.js"),_sharedConstants=__webpack_require__("./generated-scripts/sharedConstants.ts");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.ParentLetterButtonMetricsCategory={ABOVE_TABLE:"above-table",BELOW_TABLE:"below-table"},exports.PrintLoginCardsButtonMetricsCategory={MANAGE_STUDENTS:"manage-students",LOGIN_INFO:"section-login-info"};var AddStatus=exports.AddStatus={SUCCESS:"success",FAIL:"fail",FULL:"full"},RowType=exports.RowType={ADD:"addRow",NEW_STUDENT:"newStudentRow",STUDENT:"studentRow"},TransferStatus=exports.TransferStatus={SUCCESS:"success",FAIL:"fail",FULL:"full",PENDING:"pending"},TransferType=exports.TransferType={MOVE_STUDENTS:"moveStudents",COPY_STUDENTS:"copyStudents"},blankStudentTransfer=exports.blankStudentTransfer={studentIds:[],sectionId:null,otherTeacher:!1,otherTeacherSection:"",copyStudents:!0},blankStudentTransferStatus=exports.blankStudentTransferStatus={status:null,type:null,error:null,numStudents:0,sectionDisplay:""},addRowId=0,addRowIdCounter=-1,blankAddRow={id:addRowId,name:"",age:"",gender:"",username:"",loginType:"",sharingDisabled:!0,isEditing:!0,rowType:RowType.ADD},blankNewStudentRow={id:addRowId,name:"",age:"",gender:"",username:"",loginType:"",sharingDisabled:!0,isEditing:!0,rowType:RowType.NEW_STUDENT},initialState={loginType:"",sectionId:null,studentData:{},editingData:{},showSharingColumn:!1,addStatus:{status:null,numStudents:null},transferData:_objectSpread({},blankStudentTransfer),transferStatus:_objectSpread({},blankStudentTransferStatus),isLoadingStudents:!0},SET_LOGIN_TYPE="manageStudents/SET_LOGIN_TYPE",SET_STUDENTS="manageStudents/SET_STUDENTS",SET_SECTION_INFO="manageStudents/SET_SECTION_INFO",START_EDITING_STUDENT="manageStudents/START_EDITING_STUDENT",CANCEL_EDITING_STUDENT="manageStudents/CANCEL_EDITING_STUDENT",REMOVE_STUDENT="manageStudents/REMOVE_STUDENT",SET_SECRET_IMAGE="manageStudents/SET_SECRET_IMAGE",SET_SECRET_WORDS="manageStudents/SET_SECRET_WORDS",EDIT_STUDENT="manageStudents/EDIT_STUDENT",START_SAVING_STUDENT="manageStudents/START_SAVING_STUDENT",SAVE_STUDENT_SUCCESS="manageStudents/SAVE_STUDENT_SUCCESS",ADD_STUDENT_SUCCESS="manageStudents/ADD_STUDENT_SUCCESS",ADD_STUDENT_FAILURE="manageStudents/ADD_STUDENT_FAILURE",ADD_STUDENT_FULL="manageStudents/ADD_STUDENT_FULL",ADD_MULTIPLE_ROWS="manageStudents/ADD_MULTIPLE_ROWS",SET_SHOW_SHARING_COLUMN="manageStudents/SET_SHOW_SHARING_COLUMN",EDIT_ALL="manageStudents/EDIT_ALL",UPDATE_ALL_SHARE_SETTING="manageStudents/UPDATE_ALL_SHARE_SETTING",SET_SHARING_DEFAULT="manageStudents/SET_SHARING_DEFAULT",UPDATE_STUDENT_TRANSFER="manageStudents/UPDATE_STUDENT_TRANSFER",CANCEL_STUDENT_TRANSFER="manageStudents/CANCEL_STUDENT_TRANSFER",TRANSFER_STUDENTS_SUCCESS="manageStudents/TRANSFER_STUDENTS_SUCCESS",TRANSFER_STUDENTS_FAILURE="manageStudents/TRANSFER_STUDENTS_FAILURE",TRANSFER_STUDENTS_PENDING="manageStudents/TRANSFER_STUDENTS_PENDING",TRANSFER_STUDENTS_FULL="manageStudents/TRANSFER_STUDENTS_FULL",START_LOADING_STUDENTS="manageStudents/START_LOADING_STUDENTS",FINISH_LOADING_STUDENTS="manageStudents/FINISH_LOADING_STUDENTS",startLoadingStudents=exports.startLoadingStudents=function startLoadingStudents(){return{type:START_LOADING_STUDENTS}},finishLoadingStudents=exports.finishLoadingStudents=function finishLoadingStudents(){return{type:FINISH_LOADING_STUDENTS}},setStudents=(exports.setLoginType=function setLoginType(loginType){return{type:SET_LOGIN_TYPE,loginType}},exports.setStudents=function setStudents(studentData){return{type:SET_STUDENTS,studentData}}),setSectionInfo=exports.setSectionInfo=function setSectionInfo(sectionId){return{type:SET_SECTION_INFO,sectionId}},removeStudent=(exports.startEditingStudent=function startEditingStudent(studentId){return{type:START_EDITING_STUDENT,studentId}},exports.cancelEditingStudent=function cancelEditingStudent(studentId){return{type:CANCEL_EDITING_STUDENT,studentId}},exports.removeStudent=function removeStudent(studentId){return{type:REMOVE_STUDENT,studentId}}),editAll=(exports.setSecretImage=function setSecretImage(studentId,image){return{type:SET_SECRET_IMAGE,studentId,image}},exports.setSecretWords=function setSecretWords(studentId,words){return{type:SET_SECRET_WORDS,studentId,words}},exports.editStudent=function editStudent(studentId,studentData){return{type:EDIT_STUDENT,studentId,studentData}},exports.setSharingDefault=function setSharingDefault(studentId){return{type:SET_SHARING_DEFAULT,studentId}},exports.editAll=function editAll(){return{type:EDIT_ALL}}),updateAllShareSetting=exports.updateAllShareSetting=function updateAllShareSetting(disable){return{type:UPDATE_ALL_SHARE_SETTING,disable}},startSavingStudent=exports.startSavingStudent=function startSavingStudent(studentId){return{type:START_SAVING_STUDENT,studentId}},saveStudentSuccess=exports.saveStudentSuccess=function saveStudentSuccess(studentId){return{type:SAVE_STUDENT_SUCCESS,studentId}},transferStudentsSuccess=(exports.updateStudentTransfer=function updateStudentTransfer(transferData){return{type:UPDATE_STUDENT_TRANSFER,transferData}},exports.cancelStudentTransfer=function cancelStudentTransfer(){return{type:CANCEL_STUDENT_TRANSFER}},exports.transferStudentsSuccess=function transferStudentsSuccess(transferType,numStudents,sectionDisplay){return{type:TRANSFER_STUDENTS_SUCCESS,transferType,numStudents,sectionDisplay}}),transferStudentsFailure=exports.transferStudentsFailure=function transferStudentsFailure(error){return{type:TRANSFER_STUDENTS_FAILURE,error}},transferStudentsPending=exports.transferStudentsPending=function transferStudentsPending(){return{type:TRANSFER_STUDENTS_PENDING}},transferStudentsFull=exports.transferStudentsFull=function transferStudentsFull(_ref,copy){var sectionCapacity=_ref.sectionCapacity,numStudents=_ref.numStudents,sectionCode=_ref.sectionCode,sectionStudentCount=_ref.sectionStudentCount;return{type:TRANSFER_STUDENTS_FULL,sectionCapacity,numStudents,sectionStudentCount,sectionCode,verb:copy?"copy":"move"}},addStudentsSuccess=exports.addStudentsSuccess=function addStudentsSuccess(numStudents,rowIds,studentData){return{type:ADD_STUDENT_SUCCESS,numStudents,rowIds,studentData}},addStudentsFailure=exports.addStudentsFailure=function addStudentsFailure(numStudents,error,studentIds){return{type:ADD_STUDENT_FAILURE,numStudents,error,studentIds}},addStudentsFull=exports.addStudentsFull=function addStudentsFull(_ref2,studentIds){var sectionCapacity=_ref2.sectionCapacity,numStudents=_ref2.numStudents,sectionCode=_ref2.sectionCode,sectionStudentCount=_ref2.sectionStudentCount;return{type:ADD_STUDENT_FULL,sectionCapacity,numStudents,sectionStudentCount,sectionCode,studentIds}},addMultipleRows=exports.addMultipleRows=function addMultipleRows(studentData){return{type:ADD_MULTIPLE_ROWS,studentData}},saveStudent=(exports.setShowSharingColumn=function setShowSharingColumn(visible){return{type:SET_SHOW_SHARING_COLUMN,visible}},exports.handleShareSetting=function handleShareSetting(disable){return function(dispatch,getState){dispatch(editAll()),dispatch(updateAllShareSetting(disable))}},exports.saveStudent=function saveStudent(studentId){return function(dispatch,getState){var state=getState().manageStudents,sectionId=getState().teacherSections.selectedSectionId;dispatch(startSavingStudent(studentId)),updateStudentOnServer(state.editingData[studentId],sectionId,(function(error,data){error&&console.error(error),dispatch(saveStudentSuccess(studentId)),dispatch((0,_teacherSectionsRedux.asyncLoadSectionData)(sectionId))}))}}),addStudents=(exports.saveAllStudents=function saveAllStudents(){return function(dispatch,getState){var state=getState().manageStudents;Object.values(state.editingData).filter((function(student){return student.rowType===RowType.STUDENT})).forEach((function(student){""!==student.name&&dispatch(saveStudent(student.id))}));var newStudentsToAdd=Object.values(state.editingData).filter((function(student){return student.rowType===RowType.NEW_STUDENT&&!student.isSaving})).map((function(student){return student.id}));newStudentsToAdd.length>0&&dispatch(addStudents(newStudentsToAdd))}},exports.addStudents=function addStudents(studentIds){return function(dispatch,getState){for(var state=getState().manageStudents,sectionId=getState().teacherSections.selectedSectionId,numStudentsToAdd=studentIds.length,i=0;i<studentIds.length;i++)dispatch(startSavingStudent(studentIds[i]));var filteredData=Object.values(state.editingData).filter((function(student){return studentIds.includes(student.id)}));addStudentOnServer(filteredData,sectionId,(function(error,data){error&&data&&data.result===AddStatus.FULL?dispatch(addStudentsFull(data,studentIds)):error?(dispatch(addStudentsFailure(numStudentsToAdd,error,studentIds)),console.error(error)):(dispatch(addStudentsSuccess(numStudentsToAdd,studentIds,convertStudentServerData(data,state.loginType,sectionId))),dispatch((0,_teacherSectionsRedux.asyncLoadSectionData)(sectionId)))}))}});exports.addMultipleAddRows=function addMultipleAddRows(studentDataArray){return function(dispatch,getState){var studentData=studentDataArray.filter((function(data){return data.name})).reduce((function(accumulator,data){var newId=addRowIdCounter--;return _objectSpread(_objectSpread({},accumulator),{},_defineProperty({},newId,_objectSpread(_objectSpread({},blankNewStudentRow),{},{name:data.name,familyName:data.familyName,id:newId})))}),{});dispatch(addMultipleRows(studentData))}},exports.transferStudents=function transferStudents(onComplete){return function(dispatch,getState){dispatch(transferStudentsPending());var newSectionCode,state=getState(),currentSectionCode=(0,_teacherSectionsReduxSelectors.sectionCode)(state,state.teacherSections.selectedSectionId),_state$manageStudents=state.manageStudents.transferData,studentIds=_state$manageStudents.studentIds,newSectionId=_state$manageStudents.sectionId,otherTeacher=_state$manageStudents.otherTeacher,otherTeacherSection=_state$manageStudents.otherTeacherSection,copyStudents=_state$manageStudents.copyStudents;newSectionCode=otherTeacher&&otherTeacherSection?otherTeacherSection:(0,_teacherSectionsReduxSelectors.sectionCode)(state,newSectionId),transferStudentsOnServer(studentIds,currentSectionCode,newSectionCode,copyStudents,(function(error,data){if(error&&data&&data.result===TransferStatus.FULL)dispatch(transferStudentsFull(data,copyStudents)),onComplete();else if(error)dispatch(transferStudentsFailure(data&&data.error||error));else{copyStudents&&otherTeacher||studentIds.forEach((function(id){dispatch(removeStudent(id))}));var transferType=copyStudents?TransferType.COPY_STUDENTS:TransferType.MOVE_STUDENTS,sectionDisplay=otherTeacher?otherTeacherSection:(0,_teacherSectionsReduxSelectors.sectionName)(state,newSectionId);dispatch(transferStudentsSuccess(transferType,studentIds.length,sectionDisplay)),onComplete(),dispatch((0,_teacherSectionsRedux.asyncLoadSectionData)(state.teacherSections.selectedSectionId))}}))}};exports.getStudentCount=function getStudentCount(state){var studentData=_objectSpread({},state.manageStudents.studentData);return delete studentData[0],Object.keys(studentData).length};var convertStudentServerData=exports.convertStudentServerData=function convertStudentServerData(studentData,loginType,sectionId){for(var studentLookup={},i=0;i<studentData.length;i++){var student=studentData[i];studentLookup[student.id]={id:student.id,name:student.name,familyName:student.family_name,username:student.username,email:student.email,age:student.age||"",gender:student.gender||"",genderTeacherInput:student.gender_teacher_input||"",secretWords:student.secret_words,secretPicturePath:student.secret_picture_path,loginType,sectionId,sharingDisabled:student.sharing_disabled,hasEverSignedIn:student.has_ever_signed_in,dependsOnThisSectionForLogin:student.depends_on_this_section_for_login,isEditing:!1,isSaving:!1,rowType:RowType.STUDENT,userType:student.user_type,atRiskAgeGatedStudent:student.at_risk_age_gated,childAccountComplianceState:student.child_account_compliance_state,latestPermissionRequestSentAt:student.latest_permission_request_sent_at&&new Date(student.latest_permission_request_sent_at)}}return studentLookup},updateStudentOnServer=(exports.convertStudentDataToArray=function convertStudentDataToArray(studentData){return Object.values(studentData).reverse()},function updateStudentOnServer(updatedStudentInfo,sectionId,onComplete){var dataToUpdate={student:{id:updatedStudentInfo.id,name:updatedStudentInfo.name,family_name:updatedStudentInfo.familyName,age:updatedStudentInfo.age,gender:updatedStudentInfo.gender,gender_teacher_input:updatedStudentInfo.genderTeacherInput,sharing_disabled:updatedStudentInfo.sharingDisabled}};_jquery.default.ajax({url:"/dashboardapi/sections/".concat(sectionId,"/students/").concat(dataToUpdate.student.id),method:"PATCH",type:"json",contentType:"application/json;charset=UTF-8",data:JSON.stringify(dataToUpdate)}).done((function(data){onComplete(null,data)})).fail((function(jqXhr,status){onComplete(status,null)}))}),addStudentOnServer=function addStudentOnServer(updatedStudentsInfo,sectionId,onComplete){for(var studentsToAdd=[],i=0;i<updatedStudentsInfo.length;i++)studentsToAdd[i]={editing:!0,name:updatedStudentsInfo[i].name,family_name:updatedStudentsInfo[i].familyName,age:updatedStudentsInfo[i].age,gender:updatedStudentsInfo[i].gender,gender_teacher_input:updatedStudentsInfo[i].genderTeacherInput,sharing_disabled:updatedStudentsInfo[i].sharingDisabled};var students={students:studentsToAdd};_jquery.default.ajax({url:"/dashboardapi/sections/".concat(sectionId,"/students/bulk_add"),method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(students)}).done((function(data){onComplete(null,data)})).fail((function(jqXhr,status){onComplete(status,jqXhr.responseJSON||null)}))},transferStudentsOnServer=function transferStudentsOnServer(studentIds,currentSectionCode,newSectionCode,stayEnrolledInCurrentSection,onComplete){var payload={student_ids:studentIds,current_section_code:currentSectionCode,new_section_code:newSectionCode,stay_enrolled_in_current_section:stayEnrolledInCurrentSection};_jquery.default.ajax({url:"/dashboardapi/sections/transfers",method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(payload)}).done((function(data){onComplete(null,data)})).fail((function(jqXhr,status){onComplete(status,jqXhr.responseJSON)}))};exports.loadSectionStudentData=function loadSectionStudentData(sectionId){return function(dispatch,getState){var state=getState().manageStudents,oldSectionId=state.sectionId;state.sectionId!==sectionId?(dispatch(setSectionInfo(sectionId)),dispatch(startLoadingStudents()),_jquery.default.ajax({method:"GET",url:"/dashboardapi/sections/".concat(sectionId,"/students"),dataType:"json"}).done((function(studentData){var convertedStudentData=convertStudentServerData(studentData,state.loginType,sectionId);dispatch(setStudents(convertedStudentData))})).fail((function(){dispatch(setSectionInfo(oldSectionId)),dispatch(finishLoadingStudents())}))):dispatch(finishLoadingStudents())}},exports.filterAgeGatedStudents=function filterAgeGatedStudents(studentData){return studentData.filter((function(student){return student.atRiskAgeGatedStudent}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dUksdUJBQXlCaFEsYUFDcEMsT0FBT0EsWUFBWXFHLFFBQU8sU0FBQXZELFNBQU8sT0FBSUEsUUFBUTZLLHFCQUFxQixHQUNwRSxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL3RlbXBsYXRlcy9tYW5hZ2VTdHVkZW50cy9tYW5hZ2VTdHVkZW50c1JlZHV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge2FzeW5jTG9hZFNlY3Rpb25EYXRhfSBmcm9tICdAY2RvL2FwcHMvdGVtcGxhdGVzL3RlYWNoZXJEYXNoYm9hcmQvdGVhY2hlclNlY3Rpb25zUmVkdXgnO1xuaW1wb3J0IHtcbiAgc2VjdGlvbkNvZGUsXG4gIHNlY3Rpb25OYW1lLFxufSBmcm9tICdAY2RvL2FwcHMvdGVtcGxhdGVzL3RlYWNoZXJEYXNoYm9hcmQvdGVhY2hlclNlY3Rpb25zUmVkdXhTZWxlY3RvcnMnO1xuaW1wb3J0IHtTZWN0aW9uTG9naW5UeXBlfSBmcm9tICdAY2RvL2dlbmVyYXRlZC1zY3JpcHRzL3NoYXJlZENvbnN0YW50cyc7XG5cbmV4cG9ydCBjb25zdCBQYXJlbnRMZXR0ZXJCdXR0b25NZXRyaWNzQ2F0ZWdvcnkgPSB7XG4gIEFCT1ZFX1RBQkxFOiAnYWJvdmUtdGFibGUnLFxuICBCRUxPV19UQUJMRTogJ2JlbG93LXRhYmxlJyxcbn07XG5cbmV4cG9ydCBjb25zdCBQcmludExvZ2luQ2FyZHNCdXR0b25NZXRyaWNzQ2F0ZWdvcnkgPSB7XG4gIE1BTkFHRV9TVFVERU5UUzogJ21hbmFnZS1zdHVkZW50cycsXG4gIExPR0lOX0lORk86ICdzZWN0aW9uLWxvZ2luLWluZm8nLFxufTtcblxuLy8gUmVzcG9uc2UgZnJvbSBzZXJ2ZXIgYWZ0ZXIgYWRkaW5nIGEgbmV3IHN0dWRlbnQgdG8gdGhlIHNlY3Rpb24uXG5leHBvcnQgY29uc3QgQWRkU3RhdHVzID0ge1xuICBTVUNDRVNTOiAnc3VjY2VzcycsXG4gIEZBSUw6ICdmYWlsJyxcbiAgRlVMTDogJ2Z1bGwnLFxufTtcblxuLy8gVHlwZXMgb2Ygcm93cyBpbiBzdHVkZW50RGF0YS9lZGl0aW5nRGF0YVxuLy8gbmV3U3R1ZGVudCBsb29rcyBsaWtlIGEgc3R1ZGVudFJvdyB3aXRoIGlzRWRpdGluZyB0cnVlLCBidXRcbi8vIGlzIHVwZGF0ZWQgbGlrZSBhbiBhZGQgcm93LCBzaW5jZSB0aGUgc3R1ZGVudCBoYXMgeWV0IHRvIGJlIGFkZGVkLlxuZXhwb3J0IGNvbnN0IFJvd1R5cGUgPSB7XG4gIEFERDogJ2FkZFJvdycsXG4gIE5FV19TVFVERU5UOiAnbmV3U3R1ZGVudFJvdycsXG4gIFNUVURFTlQ6ICdzdHVkZW50Um93Jyxcbn07XG5cbi8vIENvbnN0YW50cyBhcm91bmQgbW92aW5nIHN0dWRlbnRzIHRvIGFub3RoZXIgc2VjdGlvbi5cbi8vIFJlc3BvbnNlIGZyb20gc2VydmVyIGFmdGVyIG1vdmluZyBzdHVkZW50KHMpIHRvIGEgbmV3IHNlY3Rpb25cbmV4cG9ydCBjb25zdCBUcmFuc2ZlclN0YXR1cyA9IHtcbiAgU1VDQ0VTUzogJ3N1Y2Nlc3MnLFxuICBGQUlMOiAnZmFpbCcsXG4gIEZVTEw6ICdmdWxsJyxcbiAgUEVORElORzogJ3BlbmRpbmcnLFxufTtcblxuLy8gVHlwZSBvZiBzdHVkZW50IHRyYW5zZmVyIC0gd2hldGhlciBzdHVkZW50cyBhcmUgYmVpbmcgbW92ZWQgKGFuZCBzdWJzZXF1ZW50bHkgcmVtb3ZlZCBmcm9tIGN1cnJlbnQgc2VjdGlvbikgb3IgY29waWVkIHRvIG5ldyBzZWN0aW9uXG5leHBvcnQgY29uc3QgVHJhbnNmZXJUeXBlID0ge1xuICBNT1ZFX1NUVURFTlRTOiAnbW92ZVN0dWRlbnRzJyxcbiAgQ09QWV9TVFVERU5UUzogJ2NvcHlTdHVkZW50cycsXG59O1xuXG4vKiogSW5pdGlhbCBzdGF0ZSBmb3IgbWFuYWdlU3R1ZGVudHMudHJhbnNmZXJEYXRhIHJlZHV4IHN0b3JlLlxuICogc3R1ZGVudElkcyAtIHN0dWRlbnQgaWRzIHNlbGVjdGVkIHRvIGJlIG1vdmVkIHRvIGFub3RoZXIgc2VjdGlvblxuICogc2VjdGlvbklkIC0gc2VjdGlvbiBpZCB0byB3aGljaCBuZXcgc3R1ZGVudHMgd2lsbCBiZSBtb3ZlZFxuICogb3RoZXJUZWFjaGVyIC0gc3R1ZGVudHMgYXJlIGJlaW5nIG1vdmVkIHRvIGEgc2VjdGlvbiBvd25lZCBieSBhIGRpZmZlcmVudCB0ZWFjaGVyXG4gKiBvdGhlclRlYWNoZXJTZWN0aW9uIC0gaWYgbmV3IHNlY3Rpb24gaXMgb3duZWQgYnkgYSBkaWZmZXJlbnQgdGVhY2hlciwgY3VycmVudCB0ZWFjaGVyIGlucHV0cyBuZXcgc2VjdGlvbiBjb2RlXG4gKiBjb3B5U3R1ZGVudHMgLSB3aGV0aGVyIG9yIG5vdCBzdHVkZW50cyB3aWxsIGJlIGNvcGllZCB0byBuZXcgc2VjdGlvbiBvciBtb3ZlZCAoYW5kIHN1YnNlcXVlbnRseSByZW1vdmVkIGZyb20gY3VycmVudCBzZWN0aW9uKVxuICovXG5leHBvcnQgY29uc3QgYmxhbmtTdHVkZW50VHJhbnNmZXIgPSB7XG4gIHN0dWRlbnRJZHM6IFtdLFxuICBzZWN0aW9uSWQ6IG51bGwsXG4gIG90aGVyVGVhY2hlcjogZmFsc2UsXG4gIG90aGVyVGVhY2hlclNlY3Rpb246ICcnLFxuICBjb3B5U3R1ZGVudHM6IHRydWUsXG59O1xuXG4vKiogSW5pdGlhbCBzdGF0ZSBmb3IgbWFuYWdlU3R1ZGVudHMudHJhbnNmZXJTdGF0dXMgcmVkdXggc3RvcmUuXG4gKiBzdGF0dXMgKFRyYW5zZmVyU3RhdHVzKSAtIHdoZXRoZXIgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3IgZmFpbGVkXG4gKiB0eXBlIChUcmFuc2ZlclR5cGUpIC0gd2hldGhlciB0cmFuc2ZlciBtb3ZlZCBzdHVkZW50cyAoYW5kIHN1YnNlcXVlbnRseSByZW1vdmVkIHRoZW0gZnJvbSBjdXJyZW50IHNlY3Rpb24pIG9yIGNvcGllZCB0aGVtXG4gKiBlcnJvciAtIGVycm9yIHRleHQgcmV0dXJuZWQgZnJvbSBzZXJ2ZXJcbiAqIG51bVN0dWRlbnRzIC0gbnVtYmVyIG9mIHN0dWRlbnRzIHRyYW5zZmVycmVkIHRvIG5ldyBzZWN0aW9uXG4gKiBzZWN0aW9uRGlzcGxheSAtIGhvdyBzZWN0aW9uIHNob3VsZCBiZSBkaXNwbGF5ZWQgdG8gdXNlci4gbW9zdCBsaWtlbHkgdGhlIHNlY3Rpb24gbmFtZSBvciBzZWN0aW9uIGNvZGVcbiAqL1xuZXhwb3J0IGNvbnN0IGJsYW5rU3R1ZGVudFRyYW5zZmVyU3RhdHVzID0ge1xuICBzdGF0dXM6IG51bGwsXG4gIHR5cGU6IG51bGwsXG4gIGVycm9yOiBudWxsLFxuICBudW1TdHVkZW50czogMCxcbiAgc2VjdGlvbkRpc3BsYXk6ICcnLFxufTtcblxuLy8gVGhpcyBkb2Vzbid0IGdldCB1c2VkIHRvIG1ha2UgYSBzZXJ2ZXIgY2FsbCwgYnV0IGRvZXNcbi8vIG5lZWQgdG8gYmUgdW5pcXVlIGZyb20gdGhlIHJlc3Qgb2YgdGhlIGlkcy5cbmNvbnN0IGFkZFJvd0lkID0gMDtcblxuLy8gTnVtYmVyIHRoYXQgaXMgYXZhaWxhYmxlIGFzIGEgbmV3IGlkIGZvciBhZGRpbmcgc3R1ZGVudHMuXG4vLyBFYWNoIG5lZWRzIGEgdW5pcXVlIGlkLCBhbmQgY291bnRzIGJhY2t3YXJkIGZyb20gLTEuXG5sZXQgYWRkUm93SWRDb3VudGVyID0gLTE7XG5cbi8vIEFkZCByb3cgaXMgZm9yIGFkZGluZyBhIHNpbmdsZSBzdHVkZW50IGZyb20gYmxhbmsgZGF0YS5cbmNvbnN0IGJsYW5rQWRkUm93ID0ge1xuICBpZDogYWRkUm93SWQsXG4gIG5hbWU6ICcnLFxuICBhZ2U6ICcnLFxuICBnZW5kZXI6ICcnLFxuICB1c2VybmFtZTogJycsXG4gIGxvZ2luVHlwZTogJycsXG4gIHNoYXJpbmdEaXNhYmxlZDogdHJ1ZSxcbiAgaXNFZGl0aW5nOiB0cnVlLFxuICByb3dUeXBlOiBSb3dUeXBlLkFERCxcbn07XG5cbi8vIE5ldyBzdHVkZW50IHJvdyBpcyBjcmVhdGVkIGFmdGVyIGEgbGlzdCBvZiBzdHVkZW50cyBoYXZlIGJlZW5cbi8vIGFkZGVkIHRvIHRoZSB0YWJsZSwgYnV0IHRoZWlyIGluZm9ybWF0aW9uIGhhc24ndCBiZWVuIHNhdmVkXG4vLyB0byB0aGUgc2VydmVyIHlldC5cbmNvbnN0IGJsYW5rTmV3U3R1ZGVudFJvdyA9IHtcbiAgaWQ6IGFkZFJvd0lkLFxuICBuYW1lOiAnJyxcbiAgYWdlOiAnJyxcbiAgZ2VuZGVyOiAnJyxcbiAgdXNlcm5hbWU6ICcnLFxuICBsb2dpblR5cGU6ICcnLFxuICBzaGFyaW5nRGlzYWJsZWQ6IHRydWUsXG4gIGlzRWRpdGluZzogdHJ1ZSxcbiAgcm93VHlwZTogUm93VHlwZS5ORVdfU1RVREVOVCxcbn07XG5cbi8qKiBJbml0aWFsIHN0YXRlIGZvciB0aGUgbWFuYWdlU3R1ZGVudHMgcmVkdXggc3RvcmUuXG4gKiBsb2dpblR5cGUgLSBhIFNlY3Rpb25Mb2dpblR5cGUgZm9yIHRoZSBhY3RpdmUgc2VjdGlvbi5cbiAqIHNlY3Rpb25JZCAtIHRoZSBzZWN0aW9uSWQgbnVtYmVyIGZvciB0aGUgYWN0aXZlIHNlY3Rpb24uXG4gKiBzdHVkZW50RGF0YSAtIHJlcHJlc2VudHMgc3R1ZGVudCBpbmZvcm1hdGlvbiBwZXJzaXN0ZWQgb24gdGhlIHNlcnZlci5cbiAqIGlmIGlzRWRpdGluZyAoaW4gc3R1ZGVudERhdGEpLCB0aGVuIGVkaXRpbmdEYXRhIHJlcHJlc2VudHMgdGhlIGRhdGFcbiAqIGluIHRoZSBlZGl0IGZpZWxkcyBvbiB0aGUgY2xpZW50IHdoaWNoIGhhcyBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBzZXJ2ZXIuXG4gKiBzaG93U2hhcmluZ0NvbHVtbiAtIHdoZXRoZXIgdGhlIGNvbnRyb2wgcHJvamVjdCBzaGFyaW5nIGNvbHVtbiBzaG91bGQgYmUgaGlkZGVuIG9yIHZpc2libGUgaW4gdGhlIHRhYmxlLlxuICogYWRkU3RhdHVzIC0gc3RhdHVzIGlzIG9mIHR5cGUgQWRkU3RhdHVzIGFuZCBudW1TdHVkZW50cyBpcyBob3cgbWFueSBzdHVkZW50cyB3ZXJlIGFkZGVkLlxuICogdHJhbnNmZXJEYXRhIC0gaW5pdGlhbCBzdGF0ZSBkZXNjcmliZWQgYWJvdmUgaW4gYmxhbmtTdHVkZW50VHJhbnNmZXIgYXNzaWdubWVudFxuICovXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gIGxvZ2luVHlwZTogJycsXG4gIHNlY3Rpb25JZDogbnVsbCxcbiAgc3R1ZGVudERhdGE6IHt9LFxuICBlZGl0aW5nRGF0YToge30sXG4gIHNob3dTaGFyaW5nQ29sdW1uOiBmYWxzZSxcbiAgYWRkU3RhdHVzOiB7c3RhdHVzOiBudWxsLCBudW1TdHVkZW50czogbnVsbH0sXG4gIHRyYW5zZmVyRGF0YTogey4uLmJsYW5rU3R1ZGVudFRyYW5zZmVyfSxcbiAgdHJhbnNmZXJTdGF0dXM6IHsuLi5ibGFua1N0dWRlbnRUcmFuc2ZlclN0YXR1c30sXG4gIGlzTG9hZGluZ1N0dWRlbnRzOiB0cnVlLFxufTtcblxuY29uc3QgU0VUX0xPR0lOX1RZUEUgPSAnbWFuYWdlU3R1ZGVudHMvU0VUX0xPR0lOX1RZUEUnO1xuY29uc3QgU0VUX1NUVURFTlRTID0gJ21hbmFnZVN0dWRlbnRzL1NFVF9TVFVERU5UUyc7XG5jb25zdCBTRVRfU0VDVElPTl9JTkZPID0gJ21hbmFnZVN0dWRlbnRzL1NFVF9TRUNUSU9OX0lORk8nO1xuY29uc3QgU1RBUlRfRURJVElOR19TVFVERU5UID0gJ21hbmFnZVN0dWRlbnRzL1NUQVJUX0VESVRJTkdfU1RVREVOVCc7XG5jb25zdCBDQU5DRUxfRURJVElOR19TVFVERU5UID0gJ21hbmFnZVN0dWRlbnRzL0NBTkNFTF9FRElUSU5HX1NUVURFTlQnO1xuY29uc3QgUkVNT1ZFX1NUVURFTlQgPSAnbWFuYWdlU3R1ZGVudHMvUkVNT1ZFX1NUVURFTlQnO1xuY29uc3QgU0VUX1NFQ1JFVF9JTUFHRSA9ICdtYW5hZ2VTdHVkZW50cy9TRVRfU0VDUkVUX0lNQUdFJztcbmNvbnN0IFNFVF9TRUNSRVRfV09SRFMgPSAnbWFuYWdlU3R1ZGVudHMvU0VUX1NFQ1JFVF9XT1JEUyc7XG5jb25zdCBFRElUX1NUVURFTlQgPSAnbWFuYWdlU3R1ZGVudHMvRURJVF9TVFVERU5UJztcbmNvbnN0IFNUQVJUX1NBVklOR19TVFVERU5UID0gJ21hbmFnZVN0dWRlbnRzL1NUQVJUX1NBVklOR19TVFVERU5UJztcbmNvbnN0IFNBVkVfU1RVREVOVF9TVUNDRVNTID0gJ21hbmFnZVN0dWRlbnRzL1NBVkVfU1RVREVOVF9TVUNDRVNTJztcbmNvbnN0IEFERF9TVFVERU5UX1NVQ0NFU1MgPSAnbWFuYWdlU3R1ZGVudHMvQUREX1NUVURFTlRfU1VDQ0VTUyc7XG5jb25zdCBBRERfU1RVREVOVF9GQUlMVVJFID0gJ21hbmFnZVN0dWRlbnRzL0FERF9TVFVERU5UX0ZBSUxVUkUnO1xuY29uc3QgQUREX1NUVURFTlRfRlVMTCA9ICdtYW5hZ2VTdHVkZW50cy9BRERfU1RVREVOVF9GVUxMJztcbmNvbnN0IEFERF9NVUxUSVBMRV9ST1dTID0gJ21hbmFnZVN0dWRlbnRzL0FERF9NVUxUSVBMRV9ST1dTJztcbmNvbnN0IFNFVF9TSE9XX1NIQVJJTkdfQ09MVU1OID0gJ21hbmFnZVN0dWRlbnRzL1NFVF9TSE9XX1NIQVJJTkdfQ09MVU1OJztcbmNvbnN0IEVESVRfQUxMID0gJ21hbmFnZVN0dWRlbnRzL0VESVRfQUxMJztcbmNvbnN0IFVQREFURV9BTExfU0hBUkVfU0VUVElORyA9ICdtYW5hZ2VTdHVkZW50cy9VUERBVEVfQUxMX1NIQVJFX1NFVFRJTkcnO1xuY29uc3QgU0VUX1NIQVJJTkdfREVGQVVMVCA9ICdtYW5hZ2VTdHVkZW50cy9TRVRfU0hBUklOR19ERUZBVUxUJztcbmNvbnN0IFVQREFURV9TVFVERU5UX1RSQU5TRkVSID0gJ21hbmFnZVN0dWRlbnRzL1VQREFURV9TVFVERU5UX1RSQU5TRkVSJztcbmNvbnN0IENBTkNFTF9TVFVERU5UX1RSQU5TRkVSID0gJ21hbmFnZVN0dWRlbnRzL0NBTkNFTF9TVFVERU5UX1RSQU5TRkVSJztcbmNvbnN0IFRSQU5TRkVSX1NUVURFTlRTX1NVQ0NFU1MgPSAnbWFuYWdlU3R1ZGVudHMvVFJBTlNGRVJfU1RVREVOVFNfU1VDQ0VTUyc7XG5jb25zdCBUUkFOU0ZFUl9TVFVERU5UU19GQUlMVVJFID0gJ21hbmFnZVN0dWRlbnRzL1RSQU5TRkVSX1NUVURFTlRTX0ZBSUxVUkUnO1xuY29uc3QgVFJBTlNGRVJfU1RVREVOVFNfUEVORElORyA9ICdtYW5hZ2VTdHVkZW50cy9UUkFOU0ZFUl9TVFVERU5UU19QRU5ESU5HJztcbmNvbnN0IFRSQU5TRkVSX1NUVURFTlRTX0ZVTEwgPSAnbWFuYWdlU3R1ZGVudHMvVFJBTlNGRVJfU1RVREVOVFNfRlVMTCc7XG5jb25zdCBTVEFSVF9MT0FESU5HX1NUVURFTlRTID0gJ21hbmFnZVN0dWRlbnRzL1NUQVJUX0xPQURJTkdfU1RVREVOVFMnO1xuY29uc3QgRklOSVNIX0xPQURJTkdfU1RVREVOVFMgPSAnbWFuYWdlU3R1ZGVudHMvRklOSVNIX0xPQURJTkdfU1RVREVOVFMnO1xuXG4vLyBBY3Rpb24gY3JlYXRvcnNcbmV4cG9ydCBjb25zdCBzdGFydExvYWRpbmdTdHVkZW50cyA9ICgpID0+ICh7dHlwZTogU1RBUlRfTE9BRElOR19TVFVERU5UU30pO1xuZXhwb3J0IGNvbnN0IGZpbmlzaExvYWRpbmdTdHVkZW50cyA9ICgpID0+ICh7dHlwZTogRklOSVNIX0xPQURJTkdfU1RVREVOVFN9KTtcblxuZXhwb3J0IGNvbnN0IHNldExvZ2luVHlwZSA9IGxvZ2luVHlwZSA9PiAoe3R5cGU6IFNFVF9MT0dJTl9UWVBFLCBsb2dpblR5cGV9KTtcbmV4cG9ydCBjb25zdCBzZXRTdHVkZW50cyA9IHN0dWRlbnREYXRhID0+ICh7XG4gIHR5cGU6IFNFVF9TVFVERU5UUyxcbiAgc3R1ZGVudERhdGEsXG59KTtcbmV4cG9ydCBjb25zdCBzZXRTZWN0aW9uSW5mbyA9IHNlY3Rpb25JZCA9PiAoe1xuICB0eXBlOiBTRVRfU0VDVElPTl9JTkZPLFxuICBzZWN0aW9uSWQsXG59KTtcbmV4cG9ydCBjb25zdCBzdGFydEVkaXRpbmdTdHVkZW50ID0gc3R1ZGVudElkID0+ICh7XG4gIHR5cGU6IFNUQVJUX0VESVRJTkdfU1RVREVOVCxcbiAgc3R1ZGVudElkLFxufSk7XG5leHBvcnQgY29uc3QgY2FuY2VsRWRpdGluZ1N0dWRlbnQgPSBzdHVkZW50SWQgPT4gKHtcbiAgdHlwZTogQ0FOQ0VMX0VESVRJTkdfU1RVREVOVCxcbiAgc3R1ZGVudElkLFxufSk7XG5leHBvcnQgY29uc3QgcmVtb3ZlU3R1ZGVudCA9IHN0dWRlbnRJZCA9PiAoe3R5cGU6IFJFTU9WRV9TVFVERU5ULCBzdHVkZW50SWR9KTtcbmV4cG9ydCBjb25zdCBzZXRTZWNyZXRJbWFnZSA9IChzdHVkZW50SWQsIGltYWdlKSA9PiAoe1xuICB0eXBlOiBTRVRfU0VDUkVUX0lNQUdFLFxuICBzdHVkZW50SWQsXG4gIGltYWdlLFxufSk7XG5leHBvcnQgY29uc3Qgc2V0U2VjcmV0V29yZHMgPSAoc3R1ZGVudElkLCB3b3JkcykgPT4gKHtcbiAgdHlwZTogU0VUX1NFQ1JFVF9XT1JEUyxcbiAgc3R1ZGVudElkLFxuICB3b3Jkcyxcbn0pO1xuZXhwb3J0IGNvbnN0IGVkaXRTdHVkZW50ID0gKHN0dWRlbnRJZCwgc3R1ZGVudERhdGEpID0+ICh7XG4gIHR5cGU6IEVESVRfU1RVREVOVCxcbiAgc3R1ZGVudElkLFxuICBzdHVkZW50RGF0YSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNldFNoYXJpbmdEZWZhdWx0ID0gc3R1ZGVudElkID0+ICh7XG4gIHR5cGU6IFNFVF9TSEFSSU5HX0RFRkFVTFQsXG4gIHN0dWRlbnRJZCxcbn0pO1xuZXhwb3J0IGNvbnN0IGVkaXRBbGwgPSAoKSA9PiAoe3R5cGU6IEVESVRfQUxMfSk7XG5leHBvcnQgY29uc3QgdXBkYXRlQWxsU2hhcmVTZXR0aW5nID0gZGlzYWJsZSA9PiAoe1xuICB0eXBlOiBVUERBVEVfQUxMX1NIQVJFX1NFVFRJTkcsXG4gIGRpc2FibGUsXG59KTtcbmV4cG9ydCBjb25zdCBzdGFydFNhdmluZ1N0dWRlbnQgPSBzdHVkZW50SWQgPT4gKHtcbiAgdHlwZTogU1RBUlRfU0FWSU5HX1NUVURFTlQsXG4gIHN0dWRlbnRJZCxcbn0pO1xuZXhwb3J0IGNvbnN0IHNhdmVTdHVkZW50U3VjY2VzcyA9IHN0dWRlbnRJZCA9PiAoe1xuICB0eXBlOiBTQVZFX1NUVURFTlRfU1VDQ0VTUyxcbiAgc3R1ZGVudElkLFxufSk7XG5leHBvcnQgY29uc3QgdXBkYXRlU3R1ZGVudFRyYW5zZmVyID0gdHJhbnNmZXJEYXRhID0+ICh7XG4gIHR5cGU6IFVQREFURV9TVFVERU5UX1RSQU5TRkVSLFxuICB0cmFuc2ZlckRhdGEsXG59KTtcbmV4cG9ydCBjb25zdCBjYW5jZWxTdHVkZW50VHJhbnNmZXIgPSAoKSA9PiAoe3R5cGU6IENBTkNFTF9TVFVERU5UX1RSQU5TRkVSfSk7XG5leHBvcnQgY29uc3QgdHJhbnNmZXJTdHVkZW50c1N1Y2Nlc3MgPSAoXG4gIHRyYW5zZmVyVHlwZSxcbiAgbnVtU3R1ZGVudHMsXG4gIHNlY3Rpb25EaXNwbGF5XG4pID0+ICh7XG4gIHR5cGU6IFRSQU5TRkVSX1NUVURFTlRTX1NVQ0NFU1MsXG4gIHRyYW5zZmVyVHlwZSxcbiAgbnVtU3R1ZGVudHMsXG4gIHNlY3Rpb25EaXNwbGF5LFxufSk7XG5leHBvcnQgY29uc3QgdHJhbnNmZXJTdHVkZW50c0ZhaWx1cmUgPSBlcnJvciA9PiAoe1xuICB0eXBlOiBUUkFOU0ZFUl9TVFVERU5UU19GQUlMVVJFLFxuICBlcnJvcixcbn0pO1xuZXhwb3J0IGNvbnN0IHRyYW5zZmVyU3R1ZGVudHNQZW5kaW5nID0gKCkgPT4gKHtcbiAgdHlwZTogVFJBTlNGRVJfU1RVREVOVFNfUEVORElORyxcbn0pO1xuZXhwb3J0IGNvbnN0IHRyYW5zZmVyU3R1ZGVudHNGdWxsID0gKFxuICB7c2VjdGlvbkNhcGFjaXR5LCBudW1TdHVkZW50cywgc2VjdGlvbkNvZGUsIHNlY3Rpb25TdHVkZW50Q291bnR9LFxuICBjb3B5XG4pID0+ICh7XG4gIHR5cGU6IFRSQU5TRkVSX1NUVURFTlRTX0ZVTEwsXG4gIHNlY3Rpb25DYXBhY2l0eSxcbiAgbnVtU3R1ZGVudHMsXG4gIHNlY3Rpb25TdHVkZW50Q291bnQsXG4gIHNlY3Rpb25Db2RlLFxuICB2ZXJiOiBjb3B5ID8gJ2NvcHknIDogJ21vdmUnLFxufSk7XG5leHBvcnQgY29uc3QgYWRkU3R1ZGVudHNTdWNjZXNzID0gKG51bVN0dWRlbnRzLCByb3dJZHMsIHN0dWRlbnREYXRhKSA9PiAoe1xuICB0eXBlOiBBRERfU1RVREVOVF9TVUNDRVNTLFxuICBudW1TdHVkZW50cyxcbiAgcm93SWRzLFxuICBzdHVkZW50RGF0YSxcbn0pO1xuZXhwb3J0IGNvbnN0IGFkZFN0dWRlbnRzRmFpbHVyZSA9IChudW1TdHVkZW50cywgZXJyb3IsIHN0dWRlbnRJZHMpID0+ICh7XG4gIHR5cGU6IEFERF9TVFVERU5UX0ZBSUxVUkUsXG4gIG51bVN0dWRlbnRzLFxuICBlcnJvcixcbiAgc3R1ZGVudElkcyxcbn0pO1xuZXhwb3J0IGNvbnN0IGFkZFN0dWRlbnRzRnVsbCA9IChcbiAge3NlY3Rpb25DYXBhY2l0eSwgbnVtU3R1ZGVudHMsIHNlY3Rpb25Db2RlLCBzZWN0aW9uU3R1ZGVudENvdW50fSxcbiAgc3R1ZGVudElkc1xuKSA9PiAoe1xuICB0eXBlOiBBRERfU1RVREVOVF9GVUxMLFxuICBzZWN0aW9uQ2FwYWNpdHksXG4gIG51bVN0dWRlbnRzLFxuICBzZWN0aW9uU3R1ZGVudENvdW50LFxuICBzZWN0aW9uQ29kZSxcbiAgc3R1ZGVudElkcyxcbn0pO1xuZXhwb3J0IGNvbnN0IGFkZE11bHRpcGxlUm93cyA9IHN0dWRlbnREYXRhID0+ICh7XG4gIHR5cGU6IEFERF9NVUxUSVBMRV9ST1dTLFxuICBzdHVkZW50RGF0YSxcbn0pO1xuXG5leHBvcnQgY29uc3Qgc2V0U2hvd1NoYXJpbmdDb2x1bW4gPSB2aXNpYmxlID0+ICh7XG4gIHR5cGU6IFNFVF9TSE9XX1NIQVJJTkdfQ09MVU1OLFxuICB2aXNpYmxlLFxufSk7XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVTaGFyZVNldHRpbmcgPSBkaXNhYmxlID0+IHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBkaXNwYXRjaChlZGl0QWxsKCkpO1xuICAgIGRpc3BhdGNoKHVwZGF0ZUFsbFNoYXJlU2V0dGluZyhkaXNhYmxlKSk7XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3Qgc2F2ZVN0dWRlbnQgPSBzdHVkZW50SWQgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKS5tYW5hZ2VTdHVkZW50cztcbiAgICBjb25zdCBzZWN0aW9uSWQgPSBnZXRTdGF0ZSgpLnRlYWNoZXJTZWN0aW9ucy5zZWxlY3RlZFNlY3Rpb25JZDtcbiAgICBkaXNwYXRjaChzdGFydFNhdmluZ1N0dWRlbnQoc3R1ZGVudElkKSk7XG4gICAgdXBkYXRlU3R1ZGVudE9uU2VydmVyKFxuICAgICAgc3RhdGUuZWRpdGluZ0RhdGFbc3R1ZGVudElkXSxcbiAgICAgIHNlY3Rpb25JZCxcbiAgICAgIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBkaXNwYXRjaChzYXZlU3R1ZGVudFN1Y2Nlc3Moc3R1ZGVudElkKSk7XG4gICAgICAgIGRpc3BhdGNoKGFzeW5jTG9hZFNlY3Rpb25EYXRhKHNlY3Rpb25JZCkpO1xuICAgICAgfVxuICAgICk7XG4gIH07XG59O1xuXG4vLyBTYXZlcyBhbGwgUm93VHlwZS5TVFVERU5UIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQgYW5kIGFkZHMgYWxsXG4vLyBSb3dUeXBlLk5FV19TVFVERU5UIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQuXG5leHBvcnQgY29uc3Qgc2F2ZUFsbFN0dWRlbnRzID0gKCkgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKS5tYW5hZ2VTdHVkZW50cztcblxuICAgIC8vIEN1cnJlbnRseSwgZXZlcnkgdXBkYXRlIGlzIGFuIGluZGl2aWR1YWwgY2FsbCB0byB0aGUgc2VydmVyLlxuICAgIGNvbnN0IGN1cnJlbnRseUVkaXRlZERhdGEgPSBPYmplY3QudmFsdWVzKHN0YXRlLmVkaXRpbmdEYXRhKTtcbiAgICBsZXQgc3R1ZGVudHNUb1NhdmUgPSBjdXJyZW50bHlFZGl0ZWREYXRhLmZpbHRlcihcbiAgICAgIHN0dWRlbnQgPT4gc3R1ZGVudC5yb3dUeXBlID09PSBSb3dUeXBlLlNUVURFTlRcbiAgICApO1xuICAgIHN0dWRlbnRzVG9TYXZlLmZvckVhY2goc3R1ZGVudCA9PiB7XG4gICAgICBpZiAoc3R1ZGVudC5uYW1lICE9PSAnJykge1xuICAgICAgICBkaXNwYXRjaChzYXZlU3R1ZGVudChzdHVkZW50LmlkKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBBZGRpbmcgc3R1ZGVudHMgY2FuIGJlIHNhdmVkIHRvZ2V0aGVyLlxuICAgIC8vIE9ubHkgYWRkIHN0dWRlbnRzIHRoYXQgY3VycmVudGx5IGFyZSBub3QgaW4gcHJvZ3Jlc3Mgc2F2aW5nLlxuICAgIGNvbnN0IGFycmF5T2ZFZGl0ZWREYXRhID0gT2JqZWN0LnZhbHVlcyhzdGF0ZS5lZGl0aW5nRGF0YSk7XG4gICAgY29uc3QgbmV3U3R1ZGVudHNUb0FkZCA9IGFycmF5T2ZFZGl0ZWREYXRhXG4gICAgICAuZmlsdGVyKFxuICAgICAgICBzdHVkZW50ID0+IHN0dWRlbnQucm93VHlwZSA9PT0gUm93VHlwZS5ORVdfU1RVREVOVCAmJiAhc3R1ZGVudC5pc1NhdmluZ1xuICAgICAgKVxuICAgICAgLm1hcChzdHVkZW50ID0+IHN0dWRlbnQuaWQpO1xuICAgIGlmIChuZXdTdHVkZW50c1RvQWRkLmxlbmd0aCA+IDApIHtcbiAgICAgIGRpc3BhdGNoKGFkZFN0dWRlbnRzKG5ld1N0dWRlbnRzVG9BZGQpKTtcbiAgICB9XG4gIH07XG59O1xuXG4vLyBBZGRzIGEgc3R1ZGVudCwgd2l0aCB0aGUgZ2l2ZW4gcm93IGlkIChzdHVkZW50SWRzKSwgZnJvbSBSb3dUeXBlLkFERCBvclxuLy8gUm93VHlwZS5ORVdfU1RVREVOVC5cbmV4cG9ydCBjb25zdCBhZGRTdHVkZW50cyA9IHN0dWRlbnRJZHMgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKS5tYW5hZ2VTdHVkZW50cztcbiAgICBjb25zdCBzZWN0aW9uSWQgPSBnZXRTdGF0ZSgpLnRlYWNoZXJTZWN0aW9ucy5zZWxlY3RlZFNlY3Rpb25JZDtcbiAgICBjb25zdCBudW1TdHVkZW50c1RvQWRkID0gc3R1ZGVudElkcy5sZW5ndGg7XG5cbiAgICAvLyBVcGRhdGUgZWFjaCByb3cgdG8gc2F2aW5nIGluIHByb2dyZXNzLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R1ZGVudElkcy5sZW5ndGg7IGkrKykge1xuICAgICAgZGlzcGF0Y2goc3RhcnRTYXZpbmdTdHVkZW50KHN0dWRlbnRJZHNbaV0pKTtcbiAgICB9XG5cbiAgICBjb25zdCBhcnJheU9mRWRpdGVkRGF0YSA9IE9iamVjdC52YWx1ZXMoc3RhdGUuZWRpdGluZ0RhdGEpO1xuICAgIGNvbnN0IGZpbHRlcmVkRGF0YSA9IGFycmF5T2ZFZGl0ZWREYXRhLmZpbHRlcihzdHVkZW50ID0+XG4gICAgICBzdHVkZW50SWRzLmluY2x1ZGVzKHN0dWRlbnQuaWQpXG4gICAgKTtcbiAgICBhZGRTdHVkZW50T25TZXJ2ZXIoZmlsdGVyZWREYXRhLCBzZWN0aW9uSWQsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgaWYgKGVycm9yICYmIGRhdGEgJiYgZGF0YS5yZXN1bHQgPT09IEFkZFN0YXR1cy5GVUxMKSB7XG4gICAgICAgIC8vIHN0dWRlbnRJZHMgcmVxdWlyZWQgdG8gYWxsb3cgZm9yIHJlcGVhdCBidWxrX2FkZCBhdHRlbXB0c1xuICAgICAgICBkaXNwYXRjaChhZGRTdHVkZW50c0Z1bGwoZGF0YSwgc3R1ZGVudElkcykpO1xuICAgICAgfSBlbHNlIGlmIChlcnJvcikge1xuICAgICAgICBkaXNwYXRjaChhZGRTdHVkZW50c0ZhaWx1cmUobnVtU3R1ZGVudHNUb0FkZCwgZXJyb3IsIHN0dWRlbnRJZHMpKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXNwYXRjaChcbiAgICAgICAgICBhZGRTdHVkZW50c1N1Y2Nlc3MoXG4gICAgICAgICAgICBudW1TdHVkZW50c1RvQWRkLFxuICAgICAgICAgICAgc3R1ZGVudElkcyxcbiAgICAgICAgICAgIGNvbnZlcnRTdHVkZW50U2VydmVyRGF0YShkYXRhLCBzdGF0ZS5sb2dpblR5cGUsIHNlY3Rpb25JZClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGRpc3BhdGNoKGFzeW5jTG9hZFNlY3Rpb25EYXRhKHNlY3Rpb25JZCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xufTtcblxuLy8gQ3JlYXRlcyBhIG5ldyBSb3dUeXBlLk5FV19TVFVERU5UIGZvciBlYWNoIG5hbWUgaW4gdGhlIGFycmF5LlxuZXhwb3J0IGNvbnN0IGFkZE11bHRpcGxlQWRkUm93cyA9IHN0dWRlbnREYXRhQXJyYXkgPT4ge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0dWRlbnREYXRhID0gc3R1ZGVudERhdGFBcnJheVxuICAgICAgLmZpbHRlcihkYXRhID0+IGRhdGEubmFtZSlcbiAgICAgIC5yZWR1Y2UoKGFjY3VtdWxhdG9yLCBkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0lkID0gYWRkUm93SWRDb3VudGVyLS07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5hY2N1bXVsYXRvcixcbiAgICAgICAgICBbbmV3SWRdOiB7XG4gICAgICAgICAgICAuLi5ibGFua05ld1N0dWRlbnRSb3csXG4gICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICBmYW1pbHlOYW1lOiBkYXRhLmZhbWlseU5hbWUsXG4gICAgICAgICAgICBpZDogbmV3SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH0sIHt9KTtcbiAgICBkaXNwYXRjaChhZGRNdWx0aXBsZVJvd3Moc3R1ZGVudERhdGEpKTtcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCB0cmFuc2ZlclN0dWRlbnRzID0gb25Db21wbGV0ZSA9PiB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgZGlzcGF0Y2godHJhbnNmZXJTdHVkZW50c1BlbmRpbmcoKSk7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgIC8vIEdldCBzZWN0aW9uIGNvZGUgZm9yIGN1cnJlbnQgc2VjdGlvbiBmcm9tIHRlYWNoZXJTZWN0aW9uc1JlZHV4XG4gICAgY29uc3QgY3VycmVudFNlY3Rpb25Db2RlID0gc2VjdGlvbkNvZGUoXG4gICAgICBzdGF0ZSxcbiAgICAgIHN0YXRlLnRlYWNoZXJTZWN0aW9ucy5zZWxlY3RlZFNlY3Rpb25JZFxuICAgICk7XG4gICAgY29uc3Qge1xuICAgICAgc3R1ZGVudElkcyxcbiAgICAgIHNlY3Rpb25JZDogbmV3U2VjdGlvbklkLFxuICAgICAgb3RoZXJUZWFjaGVyLFxuICAgICAgb3RoZXJUZWFjaGVyU2VjdGlvbixcbiAgICAgIGNvcHlTdHVkZW50cyxcbiAgICB9ID0gc3RhdGUubWFuYWdlU3R1ZGVudHMudHJhbnNmZXJEYXRhO1xuICAgIGxldCBuZXdTZWN0aW9uQ29kZTtcblxuICAgIGlmIChvdGhlclRlYWNoZXIgJiYgb3RoZXJUZWFjaGVyU2VjdGlvbikge1xuICAgICAgbmV3U2VjdGlvbkNvZGUgPSBvdGhlclRlYWNoZXJTZWN0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdTZWN0aW9uQ29kZSA9IHNlY3Rpb25Db2RlKHN0YXRlLCBuZXdTZWN0aW9uSWQpO1xuICAgIH1cblxuICAgIHRyYW5zZmVyU3R1ZGVudHNPblNlcnZlcihcbiAgICAgIHN0dWRlbnRJZHMsXG4gICAgICBjdXJyZW50U2VjdGlvbkNvZGUsXG4gICAgICBuZXdTZWN0aW9uQ29kZSxcbiAgICAgIGNvcHlTdHVkZW50cyxcbiAgICAgIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZXJyb3IgJiYgZGF0YSAmJiBkYXRhLnJlc3VsdCA9PT0gVHJhbnNmZXJTdGF0dXMuRlVMTCkge1xuICAgICAgICAgIGRpc3BhdGNoKHRyYW5zZmVyU3R1ZGVudHNGdWxsKGRhdGEsIGNvcHlTdHVkZW50cykpO1xuICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvcikge1xuICAgICAgICAgIGRpc3BhdGNoKHRyYW5zZmVyU3R1ZGVudHNGYWlsdXJlKChkYXRhICYmIGRhdGEuZXJyb3IpIHx8IGVycm9yKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFjb3B5U3R1ZGVudHMgfHwgIW90aGVyVGVhY2hlcikge1xuICAgICAgICAgICAgc3R1ZGVudElkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICAgICAgZGlzcGF0Y2gocmVtb3ZlU3R1ZGVudChpZCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHRyYW5zZmVyVHlwZSA9IGNvcHlTdHVkZW50c1xuICAgICAgICAgICAgPyBUcmFuc2ZlclR5cGUuQ09QWV9TVFVERU5UU1xuICAgICAgICAgICAgOiBUcmFuc2ZlclR5cGUuTU9WRV9TVFVERU5UUztcbiAgICAgICAgICAvLyBHZXQgc2VjdGlvbiBuYW1lIGZvciBuZXcgc2VjdGlvbiBmcm9tIHRlYWNoZXJTZWN0aW9uc1JlZHV4XG4gICAgICAgICAgY29uc3Qgc2VjdGlvbkRpc3BsYXkgPSBvdGhlclRlYWNoZXJcbiAgICAgICAgICAgID8gb3RoZXJUZWFjaGVyU2VjdGlvblxuICAgICAgICAgICAgOiBzZWN0aW9uTmFtZShzdGF0ZSwgbmV3U2VjdGlvbklkKTtcbiAgICAgICAgICBkaXNwYXRjaChcbiAgICAgICAgICAgIHRyYW5zZmVyU3R1ZGVudHNTdWNjZXNzKFxuICAgICAgICAgICAgICB0cmFuc2ZlclR5cGUsXG4gICAgICAgICAgICAgIHN0dWRlbnRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBzZWN0aW9uRGlzcGxheVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgIGRpc3BhdGNoKFxuICAgICAgICAgICAgYXN5bmNMb2FkU2VjdGlvbkRhdGEoc3RhdGUudGVhY2hlclNlY3Rpb25zLnNlbGVjdGVkU2VjdGlvbklkKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFuYWdlU3R1ZGVudHMoc3RhdGUgPSBpbml0aWFsU3RhdGUsIGFjdGlvbikge1xuICBpZiAoYWN0aW9uLnR5cGUgPT09IFNFVF9MT0dJTl9UWVBFKSB7XG4gICAgbGV0IGFkZFJvd0luaXRpYWxpemF0aW9uID0ge307XG4gICAgaWYgKFxuICAgICAgYWN0aW9uLmxvZ2luVHlwZSA9PT0gU2VjdGlvbkxvZ2luVHlwZS53b3JkIHx8XG4gICAgICBhY3Rpb24ubG9naW5UeXBlID09PSBTZWN0aW9uTG9naW5UeXBlLnBpY3R1cmVcbiAgICApIHtcbiAgICAgIGFkZFJvd0luaXRpYWxpemF0aW9uID0ge1xuICAgICAgICBzdHVkZW50RGF0YToge1xuICAgICAgICAgIFthZGRSb3dJZF06IHtcbiAgICAgICAgICAgIC4uLmJsYW5rQWRkUm93LFxuICAgICAgICAgICAgbG9naW5UeXBlOiBhY3Rpb24ubG9naW5UeXBlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGVkaXRpbmdEYXRhOiB7XG4gICAgICAgICAgW2FkZFJvd0lkXToge1xuICAgICAgICAgICAgLi4uYmxhbmtBZGRSb3csXG4gICAgICAgICAgICBsb2dpblR5cGU6IGFjdGlvbi5sb2dpblR5cGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGxvZ2luVHlwZTogYWN0aW9uLmxvZ2luVHlwZSxcbiAgICAgIC4uLmFkZFJvd0luaXRpYWxpemF0aW9uLFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfU1RVREVOVFMpIHtcbiAgICBsZXQgc3R1ZGVudERhdGEgPSB7XG4gICAgICAuLi5hY3Rpb24uc3R1ZGVudERhdGEsXG4gICAgfTtcbiAgICBpZiAoXG4gICAgICBzdGF0ZS5sb2dpblR5cGUgPT09IFNlY3Rpb25Mb2dpblR5cGUud29yZCB8fFxuICAgICAgc3RhdGUubG9naW5UeXBlID09PSBTZWN0aW9uTG9naW5UeXBlLnBpY3R1cmVcbiAgICApIHtcbiAgICAgIHN0dWRlbnREYXRhW2FkZFJvd0lkXSA9IHtcbiAgICAgICAgLi4uYmxhbmtBZGRSb3csXG4gICAgICAgIGxvZ2luVHlwZTogc3RhdGUubG9naW5UeXBlLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc3R1ZGVudERhdGE6IHN0dWRlbnREYXRhLFxuICAgICAgYWRkU3RhdHVzOiB7c3RhdHVzOiBudWxsLCBudW1TdHVkZW50czogbnVsbH0sXG4gICAgICBpc0xvYWRpbmdTdHVkZW50czogZmFsc2UsXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFNFVF9TRUNUSU9OX0lORk8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBzZWN0aW9uSWQ6IGFjdGlvbi5zZWN0aW9uSWQsXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFNUQVJUX0VESVRJTkdfU1RVREVOVCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHN0dWRlbnREYXRhOiB7XG4gICAgICAgIC4uLnN0YXRlLnN0dWRlbnREYXRhLFxuICAgICAgICBbYWN0aW9uLnN0dWRlbnRJZF06IHtcbiAgICAgICAgICAuLi5zdGF0ZS5zdHVkZW50RGF0YVthY3Rpb24uc3R1ZGVudElkXSxcbiAgICAgICAgICBpc0VkaXRpbmc6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgZWRpdGluZ0RhdGE6IHtcbiAgICAgICAgLi4uc3RhdGUuZWRpdGluZ0RhdGEsXG4gICAgICAgIFthY3Rpb24uc3R1ZGVudElkXToge1xuICAgICAgICAgIC4uLnN0YXRlLnN0dWRlbnREYXRhW2FjdGlvbi5zdHVkZW50SWRdLFxuICAgICAgICAgIGlkOiBhY3Rpb24uc3R1ZGVudElkLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gQ0FOQ0VMX0VESVRJTkdfU1RVREVOVCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHN0dWRlbnREYXRhOiB7XG4gICAgICAgIC4uLnN0YXRlLnN0dWRlbnREYXRhLFxuICAgICAgICBbYWN0aW9uLnN0dWRlbnRJZF06IHtcbiAgICAgICAgICAuLi5zdGF0ZS5zdHVkZW50RGF0YVthY3Rpb24uc3R1ZGVudElkXSxcbiAgICAgICAgICBpc0VkaXRpbmc6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGVkaXRpbmdEYXRhOiBfLm9taXQoc3RhdGUuZWRpdGluZ0RhdGEsIGFjdGlvbi5zdHVkZW50SWQpLFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTVEFSVF9TQVZJTkdfU1RVREVOVCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHN0dWRlbnREYXRhOiB7XG4gICAgICAgIC4uLnN0YXRlLnN0dWRlbnREYXRhLFxuICAgICAgICBbYWN0aW9uLnN0dWRlbnRJZF06IHtcbiAgICAgICAgICAuLi5zdGF0ZS5zdHVkZW50RGF0YVthY3Rpb24uc3R1ZGVudElkXSxcbiAgICAgICAgICBpc1NhdmluZzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBlZGl0aW5nRGF0YToge1xuICAgICAgICAuLi5zdGF0ZS5lZGl0aW5nRGF0YSxcbiAgICAgICAgW2FjdGlvbi5zdHVkZW50SWRdOiB7XG4gICAgICAgICAgLi4uc3RhdGUuZWRpdGluZ0RhdGFbYWN0aW9uLnN0dWRlbnRJZF0sXG4gICAgICAgICAgaXNTYXZpbmc6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTQVZFX1NUVURFTlRfU1VDQ0VTUykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHN0dWRlbnREYXRhOiB7XG4gICAgICAgIC4uLnN0YXRlLnN0dWRlbnREYXRhLFxuICAgICAgICBbYWN0aW9uLnN0dWRlbnRJZF06IHtcbiAgICAgICAgICAuLi5zdGF0ZS5zdHVkZW50RGF0YVthY3Rpb24uc3R1ZGVudElkXSxcbiAgICAgICAgICAuLi5zdGF0ZS5lZGl0aW5nRGF0YVthY3Rpb24uc3R1ZGVudElkXSxcbiAgICAgICAgICBpc0VkaXRpbmc6IGZhbHNlLFxuICAgICAgICAgIGlzU2F2aW5nOiBmYWxzZSxcbiAgICAgICAgICByb3dUeXBlOiBSb3dUeXBlLlNUVURFTlQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgZWRpdGluZ0RhdGE6IF8ub21pdChzdGF0ZS5lZGl0aW5nRGF0YSwgYWN0aW9uLnN0dWRlbnRJZCksXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IEFERF9TVFVERU5UX0ZBSUxVUkUpIHtcbiAgICBsZXQgbmV3U3RhdGUgPSB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGFkZFN0YXR1czoge3N0YXR1czogQWRkU3RhdHVzLkZBSUwsIG51bVN0dWRlbnRzOiBhY3Rpb24ubnVtU3R1ZGVudHN9LFxuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3Rpb24uc3R1ZGVudElkcy5sZW5ndGg7IGkrKykge1xuICAgICAgbmV3U3RhdGUuc3R1ZGVudERhdGFbYWN0aW9uLnN0dWRlbnRJZHNbaV1dID0ge1xuICAgICAgICAuLi5zdGF0ZS5zdHVkZW50RGF0YVthY3Rpb24uc3R1ZGVudElkc1tpXV0sXG4gICAgICAgIGlzU2F2aW5nOiBmYWxzZSxcbiAgICAgIH07XG4gICAgICBuZXdTdGF0ZS5lZGl0aW5nRGF0YVthY3Rpb24uc3R1ZGVudElkc1tpXV0gPSB7XG4gICAgICAgIC4uLnN0YXRlLmVkaXRpbmdEYXRhW2FjdGlvbi5zdHVkZW50SWRzW2ldXSxcbiAgICAgICAgaXNTYXZpbmc6IGZhbHNlLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1N0YXRlO1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gQUREX1NUVURFTlRfRlVMTCkge1xuICAgIGxldCBuZXdTdGF0ZSA9IHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgYWRkU3RhdHVzOiB7XG4gICAgICAgIC4uLnN0YXRlLmFkZFN0YXR1cyxcbiAgICAgICAgc3RhdHVzOiBBZGRTdGF0dXMuRlVMTCxcbiAgICAgICAgbnVtU3R1ZGVudHM6IGFjdGlvbi5udW1TdHVkZW50cyxcbiAgICAgICAgc2VjdGlvbkNhcGFjaXR5OiBhY3Rpb24uc2VjdGlvbkNhcGFjaXR5LFxuICAgICAgICBzZWN0aW9uQ29kZTogYWN0aW9uLnNlY3Rpb25Db2RlLFxuICAgICAgICBzZWN0aW9uU3R1ZGVudENvdW50OiBhY3Rpb24uc2VjdGlvblN0dWRlbnRDb3VudCxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGlvbi5zdHVkZW50SWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBuZXdTdGF0ZS5zdHVkZW50RGF0YVthY3Rpb24uc3R1ZGVudElkc1tpXV0gPSB7XG4gICAgICAgIC4uLnN0YXRlLnN0dWRlbnREYXRhW2FjdGlvbi5zdHVkZW50SWRzW2ldXSxcbiAgICAgICAgaXNTYXZpbmc6IGZhbHNlLFxuICAgICAgfTtcbiAgICAgIG5ld1N0YXRlLmVkaXRpbmdEYXRhW2FjdGlvbi5zdHVkZW50SWRzW2ldXSA9IHtcbiAgICAgICAgLi4uc3RhdGUuZWRpdGluZ0RhdGFbYWN0aW9uLnN0dWRlbnRJZHNbaV1dLFxuICAgICAgICBpc1NhdmluZzogZmFsc2UsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbmV3U3RhdGU7XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBBRERfU1RVREVOVF9TVUNDRVNTKSB7XG4gICAgbGV0IG5ld1N0YXRlID0ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBzdHVkZW50RGF0YToge1xuICAgICAgICAuLi5fLm9taXQoc3RhdGUuc3R1ZGVudERhdGEsIGFjdGlvbi5yb3dJZHMpLFxuICAgICAgICAuLi5hY3Rpb24uc3R1ZGVudERhdGEsXG4gICAgICAgIFthZGRSb3dJZF06IHtcbiAgICAgICAgICAuLi5ibGFua0FkZFJvdyxcbiAgICAgICAgICBsb2dpblR5cGU6IHN0YXRlLmxvZ2luVHlwZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBlZGl0aW5nRGF0YToge1xuICAgICAgICAuLi5fLm9taXQoc3RhdGUuZWRpdGluZ0RhdGEsIGFjdGlvbi5yb3dJZHMpLFxuICAgICAgICBbYWRkUm93SWRdOiB7XG4gICAgICAgICAgLi4uYmxhbmtBZGRSb3csXG4gICAgICAgICAgbG9naW5UeXBlOiBzdGF0ZS5sb2dpblR5cGUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgYWRkU3RhdHVzOiB7c3RhdHVzOiBBZGRTdGF0dXMuU1VDQ0VTUywgbnVtU3R1ZGVudHM6IGFjdGlvbi5udW1TdHVkZW50c30sXG4gICAgfTtcbiAgICByZXR1cm4gbmV3U3RhdGU7XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfU0hBUklOR19ERUZBVUxUKSB7XG4gICAgY29uc3QgZWRpdGVkQWdlID0gc3RhdGUuZWRpdGluZ0RhdGFbYWN0aW9uLnN0dWRlbnRJZF0uYWdlO1xuICAgIC8vIEZvciBwcml2YWN5IHJlYXNvbnMsIHdlIGRpc2FibGUgc2hhcmluZyBieSBkZWZhdWx0IGlmIHRoZSBzdHVkZW50IGlzIHVuZGVyIHRoZSBhZ2Ugb2YgMTMuXG4gICAgY29uc3Qgc2hhcmluZ0Rpc2FibGVkID0gZWRpdGVkQWdlIDwgMTM7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgZWRpdGluZ0RhdGE6IHtcbiAgICAgICAgLi4uc3RhdGUuZWRpdGluZ0RhdGEsXG4gICAgICAgIFthY3Rpb24uc3R1ZGVudElkXToge1xuICAgICAgICAgIC4uLnN0YXRlLmVkaXRpbmdEYXRhW2FjdGlvbi5zdHVkZW50SWRdLFxuICAgICAgICAgIGlkOiBhY3Rpb24uc3R1ZGVudElkLFxuICAgICAgICAgIHNoYXJpbmdEaXNhYmxlZDogc2hhcmluZ0Rpc2FibGVkLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gRURJVF9TVFVERU5UKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgZWRpdGluZ0RhdGE6IHtcbiAgICAgICAgLi4uc3RhdGUuZWRpdGluZ0RhdGEsXG4gICAgICAgIFthY3Rpb24uc3R1ZGVudElkXToge1xuICAgICAgICAgIC4uLnN0YXRlLmVkaXRpbmdEYXRhW2FjdGlvbi5zdHVkZW50SWRdLFxuICAgICAgICAgIC4uLmFjdGlvbi5zdHVkZW50RGF0YSxcbiAgICAgICAgICBpZDogYWN0aW9uLnN0dWRlbnRJZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IEVESVRfQUxMKSB7XG4gICAgbGV0IG5ld1N0YXRlID0ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHN0dWRlbnRLZXkgaW4gc3RhdGUuc3R1ZGVudERhdGEpIHtcbiAgICAgIGNvbnN0IHN0dWRlbnQgPSBzdGF0ZS5zdHVkZW50RGF0YVtzdHVkZW50S2V5XTtcbiAgICAgIG5ld1N0YXRlLnN0dWRlbnREYXRhW3N0dWRlbnQuaWRdLmlzRWRpdGluZyA9IHRydWU7XG4gICAgICBuZXdTdGF0ZS5lZGl0aW5nRGF0YVtzdHVkZW50LmlkXSA9IHtcbiAgICAgICAgLi4ubmV3U3RhdGUuc3R1ZGVudERhdGFbc3R1ZGVudC5pZF0sXG4gICAgICAgIC4uLnN0YXRlLmVkaXRpbmdEYXRhW3N0dWRlbnQuaWRdLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1N0YXRlO1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gVVBEQVRFX0FMTF9TSEFSRV9TRVRUSU5HKSB7XG4gICAgbGV0IG5ld1N0YXRlID0ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHN0dWRlbnRLZXkgaW4gc3RhdGUuc3R1ZGVudERhdGEpIHtcbiAgICAgIGNvbnN0IHN0dWRlbnQgPSBzdGF0ZS5zdHVkZW50RGF0YVtzdHVkZW50S2V5XTtcbiAgICAgIG5ld1N0YXRlLmVkaXRpbmdEYXRhW3N0dWRlbnQuaWRdLnNoYXJpbmdEaXNhYmxlZCA9IGFjdGlvbi5kaXNhYmxlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3U3RhdGU7XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfU0VDUkVUX0lNQUdFKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc3R1ZGVudERhdGE6IHtcbiAgICAgICAgLi4uc3RhdGUuc3R1ZGVudERhdGEsXG4gICAgICAgIFthY3Rpb24uc3R1ZGVudElkXToge1xuICAgICAgICAgIC4uLnN0YXRlLnN0dWRlbnREYXRhW2FjdGlvbi5zdHVkZW50SWRdLFxuICAgICAgICAgIHNlY3JldFBpY3R1cmVQYXRoOiBhY3Rpb24uaW1hZ2UsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfU0VDUkVUX1dPUkRTKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc3R1ZGVudERhdGE6IHtcbiAgICAgICAgLi4uc3RhdGUuc3R1ZGVudERhdGEsXG4gICAgICAgIFthY3Rpb24uc3R1ZGVudElkXToge1xuICAgICAgICAgIC4uLnN0YXRlLnN0dWRlbnREYXRhW2FjdGlvbi5zdHVkZW50SWRdLFxuICAgICAgICAgIHNlY3JldFdvcmRzOiBhY3Rpb24ud29yZHMsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBSRU1PVkVfU1RVREVOVCkge1xuICAgIGNvbnN0IHN0dWRlbnRJZCA9IGFjdGlvbi5zdHVkZW50SWQ7XG4gICAgY29uc3Qgc3R1ZGVudCA9IHN0YXRlLnN0dWRlbnREYXRhW3N0dWRlbnRJZF07XG4gICAgaWYgKCFzdHVkZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0dWRlbnQgZG9lcyBub3QgZXhpc3QnKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc3R1ZGVudERhdGE6IF8ub21pdChzdGF0ZS5zdHVkZW50RGF0YSwgc3R1ZGVudElkKSxcbiAgICAgIGVkaXRpbmdEYXRhOiBfLm9taXQoc3RhdGUuZWRpdGluZ0RhdGEsIHN0dWRlbnRJZCksXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IEFERF9NVUxUSVBMRV9ST1dTKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc3R1ZGVudERhdGE6IHtcbiAgICAgICAgLi4uc3RhdGUuc3R1ZGVudERhdGEsXG4gICAgICAgIC4uLmFjdGlvbi5zdHVkZW50RGF0YSxcbiAgICAgIH0sXG4gICAgICBlZGl0aW5nRGF0YToge1xuICAgICAgICAuLi5zdGF0ZS5lZGl0aW5nRGF0YSxcbiAgICAgICAgLi4uYWN0aW9uLnN0dWRlbnREYXRhLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gU0VUX1NIT1dfU0hBUklOR19DT0xVTU4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBzaG93U2hhcmluZ0NvbHVtbjogISFhY3Rpb24udmlzaWJsZSxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGFjdGlvbi50eXBlID09PSBVUERBVEVfU1RVREVOVF9UUkFOU0ZFUikge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHRyYW5zZmVyRGF0YToge1xuICAgICAgICAuLi5zdGF0ZS50cmFuc2ZlckRhdGEsXG4gICAgICAgIC4uLmFjdGlvbi50cmFuc2ZlckRhdGEsXG4gICAgICB9LFxuICAgICAgLy8gY2xlYXIgYW55IHByZXZpb3VzIHN0YXR1cyBpZiB0cmFuc2ZlciBkYXRhIGhhcyBjaGFuZ2VkXG4gICAgICB0cmFuc2ZlclN0YXR1czogYmxhbmtTdHVkZW50VHJhbnNmZXJTdGF0dXMsXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IENBTkNFTF9TVFVERU5UX1RSQU5TRkVSKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgdHJhbnNmZXJEYXRhOiBibGFua1N0dWRlbnRUcmFuc2ZlcixcbiAgICAgIHRyYW5zZmVyU3RhdHVzOiB7XG4gICAgICAgIC4uLnN0YXRlLnRyYW5zZmVyU3RhdHVzLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFRSQU5TRkVSX1NUVURFTlRTX1NVQ0NFU1MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICB0cmFuc2ZlclN0YXR1czoge1xuICAgICAgICAuLi5zdGF0ZS50cmFuc2ZlclN0YXR1cyxcbiAgICAgICAgc3RhdHVzOiBUcmFuc2ZlclN0YXR1cy5TVUNDRVNTLFxuICAgICAgICB0eXBlOiBhY3Rpb24udHJhbnNmZXJUeXBlLFxuICAgICAgICBudW1TdHVkZW50czogYWN0aW9uLm51bVN0dWRlbnRzLFxuICAgICAgICBzZWN0aW9uRGlzcGxheTogYWN0aW9uLnNlY3Rpb25EaXNwbGF5LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gVFJBTlNGRVJfU1RVREVOVFNfRlVMTCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHRyYW5zZmVyU3RhdHVzOiB7XG4gICAgICAgIC4uLnN0YXRlLnRyYW5zZmVyU3RhdHVzLFxuICAgICAgICBzdGF0dXM6IFRyYW5zZmVyU3RhdHVzLkZVTEwsXG4gICAgICAgIHNlY3Rpb25DYXBhY2l0eTogYWN0aW9uLnNlY3Rpb25DYXBhY2l0eSxcbiAgICAgICAgbnVtU3R1ZGVudHM6IGFjdGlvbi5udW1TdHVkZW50cyxcbiAgICAgICAgc2VjdGlvbkNvZGU6IGFjdGlvbi5zZWN0aW9uQ29kZSxcbiAgICAgICAgc2VjdGlvblN0dWRlbnRDb3VudDogYWN0aW9uLnNlY3Rpb25TdHVkZW50Q291bnQsXG4gICAgICAgIHZlcmI6IGFjdGlvbi52ZXJiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gVFJBTlNGRVJfU1RVREVOVFNfRkFJTFVSRSkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHRyYW5zZmVyU3RhdHVzOiB7XG4gICAgICAgIC4uLnN0YXRlLnRyYW5zZmVyU3RhdHVzLFxuICAgICAgICBzdGF0dXM6IFRyYW5zZmVyU3RhdHVzLkZBSUwsXG4gICAgICAgIGVycm9yOiBhY3Rpb24uZXJyb3IsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBUUkFOU0ZFUl9TVFVERU5UU19QRU5ESU5HKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgdHJhbnNmZXJTdGF0dXM6IHtcbiAgICAgICAgLi4uc3RhdGUudHJhbnNmZXJTdGF0dXMsXG4gICAgICAgIHN0YXR1czogVHJhbnNmZXJTdGF0dXMuUEVORElORyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFNUQVJUX0xPQURJTkdfU1RVREVOVFMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBpc0xvYWRpbmdTdHVkZW50czogdHJ1ZSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gRklOSVNIX0xPQURJTkdfU1RVREVOVFMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBpc0xvYWRpbmdTdHVkZW50czogZmFsc2UsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn1cblxuZXhwb3J0IGNvbnN0IGdldFN0dWRlbnRDb3VudCA9IHN0YXRlID0+IHtcbiAgY29uc3Qgc3R1ZGVudERhdGEgPSB7Li4uc3RhdGUubWFuYWdlU3R1ZGVudHMuc3R1ZGVudERhdGF9O1xuICAvLyBEZWxldGUgcGxhY2Vob2xkZXIgcm93IGZvciBhZGRpbmcgYSBzdHVkZW50IHdoZXJlIGlkIGlzIHNldCB0byAwLlxuICBkZWxldGUgc3R1ZGVudERhdGFbMF07XG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKHN0dWRlbnREYXRhKS5sZW5ndGg7XG59O1xuXG4vLyBDb252ZXJ0cyBkYXRhIGZyb20gL2Rhc2hib2FyZGFwaS9zZWN0aW9ucy9zZWN0aW9uaWQvc3R1ZGVudHMgdG8gYSBzZXQgb2Yga2V5L3ZhbHVlXG4vLyBvYmplY3RzIGZvciB0aGUgcmVkdXggc3RvcmVcbmV4cG9ydCBjb25zdCBjb252ZXJ0U3R1ZGVudFNlcnZlckRhdGEgPSAoc3R1ZGVudERhdGEsIGxvZ2luVHlwZSwgc2VjdGlvbklkKSA9PiB7XG4gIGxldCBzdHVkZW50TG9va3VwID0ge307XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3R1ZGVudERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgc3R1ZGVudCA9IHN0dWRlbnREYXRhW2ldO1xuICAgIHN0dWRlbnRMb29rdXBbc3R1ZGVudC5pZF0gPSB7XG4gICAgICBpZDogc3R1ZGVudC5pZCxcbiAgICAgIG5hbWU6IHN0dWRlbnQubmFtZSxcbiAgICAgIGZhbWlseU5hbWU6IHN0dWRlbnQuZmFtaWx5X25hbWUsXG4gICAgICB1c2VybmFtZTogc3R1ZGVudC51c2VybmFtZSxcbiAgICAgIGVtYWlsOiBzdHVkZW50LmVtYWlsLFxuICAgICAgYWdlOiBzdHVkZW50LmFnZSB8fCAnJyxcbiAgICAgIGdlbmRlcjogc3R1ZGVudC5nZW5kZXIgfHwgJycsXG4gICAgICBnZW5kZXJUZWFjaGVySW5wdXQ6IHN0dWRlbnQuZ2VuZGVyX3RlYWNoZXJfaW5wdXQgfHwgJycsXG4gICAgICBzZWNyZXRXb3Jkczogc3R1ZGVudC5zZWNyZXRfd29yZHMsXG4gICAgICBzZWNyZXRQaWN0dXJlUGF0aDogc3R1ZGVudC5zZWNyZXRfcGljdHVyZV9wYXRoLFxuICAgICAgbG9naW5UeXBlOiBsb2dpblR5cGUsXG4gICAgICBzZWN0aW9uSWQ6IHNlY3Rpb25JZCxcbiAgICAgIHNoYXJpbmdEaXNhYmxlZDogc3R1ZGVudC5zaGFyaW5nX2Rpc2FibGVkLFxuICAgICAgaGFzRXZlclNpZ25lZEluOiBzdHVkZW50Lmhhc19ldmVyX3NpZ25lZF9pbixcbiAgICAgIGRlcGVuZHNPblRoaXNTZWN0aW9uRm9yTG9naW46IHN0dWRlbnQuZGVwZW5kc19vbl90aGlzX3NlY3Rpb25fZm9yX2xvZ2luLFxuICAgICAgaXNFZGl0aW5nOiBmYWxzZSxcbiAgICAgIGlzU2F2aW5nOiBmYWxzZSxcbiAgICAgIHJvd1R5cGU6IFJvd1R5cGUuU1RVREVOVCxcbiAgICAgIHVzZXJUeXBlOiBzdHVkZW50LnVzZXJfdHlwZSxcbiAgICAgIGF0Umlza0FnZUdhdGVkU3R1ZGVudDogc3R1ZGVudC5hdF9yaXNrX2FnZV9nYXRlZCxcbiAgICAgIGNoaWxkQWNjb3VudENvbXBsaWFuY2VTdGF0ZTogc3R1ZGVudC5jaGlsZF9hY2NvdW50X2NvbXBsaWFuY2Vfc3RhdGUsXG4gICAgICBsYXRlc3RQZXJtaXNzaW9uUmVxdWVzdFNlbnRBdDpcbiAgICAgICAgc3R1ZGVudC5sYXRlc3RfcGVybWlzc2lvbl9yZXF1ZXN0X3NlbnRfYXQgJiZcbiAgICAgICAgbmV3IERhdGUoc3R1ZGVudC5sYXRlc3RfcGVybWlzc2lvbl9yZXF1ZXN0X3NlbnRfYXQpLFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHN0dWRlbnRMb29rdXA7XG59O1xuXG4vLyBDb252ZXJ0cyBrZXkvdmFsdWUgaWQvc3R1ZGVudCBwYWlycyB0byBhbiBhcnJheSBvZiBzdHVkZW50IG9iamVjdHMgZm9yIHRoZVxuLy8gY29tcG9uZW50IHRvIGRpc3BsYXlcbmV4cG9ydCBjb25zdCBjb252ZXJ0U3R1ZGVudERhdGFUb0FycmF5ID0gc3R1ZGVudERhdGEgPT4ge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhzdHVkZW50RGF0YSkucmV2ZXJzZSgpO1xufTtcblxuLy8gTWFrZSBhIHBvc3QgcmVxdWVzdCB0byBlZGl0IGEgc3R1ZGVudC5cbmNvbnN0IHVwZGF0ZVN0dWRlbnRPblNlcnZlciA9ICh1cGRhdGVkU3R1ZGVudEluZm8sIHNlY3Rpb25JZCwgb25Db21wbGV0ZSkgPT4ge1xuICBjb25zdCBkYXRhVG9VcGRhdGUgPSB7XG4gICAgc3R1ZGVudDoge1xuICAgICAgaWQ6IHVwZGF0ZWRTdHVkZW50SW5mby5pZCxcbiAgICAgIG5hbWU6IHVwZGF0ZWRTdHVkZW50SW5mby5uYW1lLFxuICAgICAgZmFtaWx5X25hbWU6IHVwZGF0ZWRTdHVkZW50SW5mby5mYW1pbHlOYW1lLFxuICAgICAgYWdlOiB1cGRhdGVkU3R1ZGVudEluZm8uYWdlLFxuICAgICAgZ2VuZGVyOiB1cGRhdGVkU3R1ZGVudEluZm8uZ2VuZGVyLFxuICAgICAgZ2VuZGVyX3RlYWNoZXJfaW5wdXQ6IHVwZGF0ZWRTdHVkZW50SW5mby5nZW5kZXJUZWFjaGVySW5wdXQsXG4gICAgICBzaGFyaW5nX2Rpc2FibGVkOiB1cGRhdGVkU3R1ZGVudEluZm8uc2hhcmluZ0Rpc2FibGVkLFxuICAgIH0sXG4gIH07XG4gICQuYWpheCh7XG4gICAgdXJsOiBgL2Rhc2hib2FyZGFwaS9zZWN0aW9ucy8ke3NlY3Rpb25JZH0vc3R1ZGVudHMvJHtkYXRhVG9VcGRhdGUuc3R1ZGVudC5pZH1gLFxuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICB0eXBlOiAnanNvbicsXG4gICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxuICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGFUb1VwZGF0ZSksXG4gIH0pXG4gICAgLmRvbmUoZGF0YSA9PiB7XG4gICAgICBvbkNvbXBsZXRlKG51bGwsIGRhdGEpO1xuICAgIH0pXG4gICAgLmZhaWwoKGpxWGhyLCBzdGF0dXMpID0+IHtcbiAgICAgIG9uQ29tcGxldGUoc3RhdHVzLCBudWxsKTtcbiAgICB9KTtcbn07XG5cbi8vIE1ha2UgYSBwb3N0IHJlcXVlc3QgdG8gYWRkIHN0dWRlbnRzLlxuY29uc3QgYWRkU3R1ZGVudE9uU2VydmVyID0gKHVwZGF0ZWRTdHVkZW50c0luZm8sIHNlY3Rpb25JZCwgb25Db21wbGV0ZSkgPT4ge1xuICBjb25zdCBzdHVkZW50c1RvQWRkID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdXBkYXRlZFN0dWRlbnRzSW5mby5sZW5ndGg7IGkrKykge1xuICAgIHN0dWRlbnRzVG9BZGRbaV0gPSB7XG4gICAgICBlZGl0aW5nOiB0cnVlLFxuICAgICAgbmFtZTogdXBkYXRlZFN0dWRlbnRzSW5mb1tpXS5uYW1lLFxuICAgICAgZmFtaWx5X25hbWU6IHVwZGF0ZWRTdHVkZW50c0luZm9baV0uZmFtaWx5TmFtZSxcbiAgICAgIGFnZTogdXBkYXRlZFN0dWRlbnRzSW5mb1tpXS5hZ2UsXG4gICAgICBnZW5kZXI6IHVwZGF0ZWRTdHVkZW50c0luZm9baV0uZ2VuZGVyLFxuICAgICAgZ2VuZGVyX3RlYWNoZXJfaW5wdXQ6IHVwZGF0ZWRTdHVkZW50c0luZm9baV0uZ2VuZGVyVGVhY2hlcklucHV0LFxuICAgICAgc2hhcmluZ19kaXNhYmxlZDogdXBkYXRlZFN0dWRlbnRzSW5mb1tpXS5zaGFyaW5nRGlzYWJsZWQsXG4gICAgfTtcbiAgfVxuICBjb25zdCBzdHVkZW50cyA9IHtcbiAgICBzdHVkZW50czogc3R1ZGVudHNUb0FkZCxcbiAgfTtcbiAgJC5hamF4KHtcbiAgICB1cmw6IGAvZGFzaGJvYXJkYXBpL3NlY3Rpb25zLyR7c2VjdGlvbklkfS9zdHVkZW50cy9idWxrX2FkZGAsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxuICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHN0dWRlbnRzKSxcbiAgfSlcbiAgICAuZG9uZShkYXRhID0+IHtcbiAgICAgIG9uQ29tcGxldGUobnVsbCwgZGF0YSk7XG4gICAgfSlcbiAgICAuZmFpbCgoanFYaHIsIHN0YXR1cykgPT4ge1xuICAgICAgb25Db21wbGV0ZShzdGF0dXMsIGpxWGhyLnJlc3BvbnNlSlNPTiB8fCBudWxsKTtcbiAgICB9KTtcbn07XG5cbi8vIE1ha2UgYSBwb3N0IHJlcXVlc3QgdG8gdHJhbnNmZXIgc3R1ZGVudHMuXG5jb25zdCB0cmFuc2ZlclN0dWRlbnRzT25TZXJ2ZXIgPSAoXG4gIHN0dWRlbnRJZHMsXG4gIGN1cnJlbnRTZWN0aW9uQ29kZSxcbiAgbmV3U2VjdGlvbkNvZGUsXG4gIHN0YXlFbnJvbGxlZEluQ3VycmVudFNlY3Rpb24sXG4gIG9uQ29tcGxldGVcbikgPT4ge1xuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIHN0dWRlbnRfaWRzOiBzdHVkZW50SWRzLFxuICAgIGN1cnJlbnRfc2VjdGlvbl9jb2RlOiBjdXJyZW50U2VjdGlvbkNvZGUsXG4gICAgbmV3X3NlY3Rpb25fY29kZTogbmV3U2VjdGlvbkNvZGUsXG4gICAgc3RheV9lbnJvbGxlZF9pbl9jdXJyZW50X3NlY3Rpb246IHN0YXlFbnJvbGxlZEluQ3VycmVudFNlY3Rpb24sXG4gIH07XG4gICQuYWpheCh7XG4gICAgdXJsOiAnL2Rhc2hib2FyZGFwaS9zZWN0aW9ucy90cmFuc2ZlcnMnLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgfSlcbiAgICAuZG9uZShkYXRhID0+IHtcbiAgICAgIG9uQ29tcGxldGUobnVsbCwgZGF0YSk7XG4gICAgfSlcbiAgICAuZmFpbCgoanFYaHIsIHN0YXR1cykgPT4ge1xuICAgICAgb25Db21wbGV0ZShzdGF0dXMsIGpxWGhyLnJlc3BvbnNlSlNPTik7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9hZFNlY3Rpb25TdHVkZW50RGF0YSA9IHNlY3Rpb25JZCA9PiB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpLm1hbmFnZVN0dWRlbnRzO1xuICAgIGxldCBvbGRTZWN0aW9uSWQgPSBzdGF0ZS5zZWN0aW9uSWQ7XG5cbiAgICAvLyBMb2FkIGRhdGEgb25seSBpZiBzZWN0aW9uIElkIGRvZXNuJ3QgYWxyZWFkeSBtYXRjaFxuICAgIGlmIChzdGF0ZS5zZWN0aW9uSWQgIT09IHNlY3Rpb25JZCkge1xuICAgICAgLy8gU2V0IHNlY3Rpb24gSUQgdG8gaW5kaWNhdGUgc3R1ZGVudCBkYXRhIGZvciBjdXJyZW50IHNlY3Rpb24uXG4gICAgICBkaXNwYXRjaChzZXRTZWN0aW9uSW5mbyhzZWN0aW9uSWQpKTtcbiAgICAgIGRpc3BhdGNoKHN0YXJ0TG9hZGluZ1N0dWRlbnRzKCkpO1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiBgL2Rhc2hib2FyZGFwaS9zZWN0aW9ucy8ke3NlY3Rpb25JZH0vc3R1ZGVudHNgLFxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgfSlcbiAgICAgICAgLmRvbmUoc3R1ZGVudERhdGEgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnZlcnRlZFN0dWRlbnREYXRhID0gY29udmVydFN0dWRlbnRTZXJ2ZXJEYXRhKFxuICAgICAgICAgICAgc3R1ZGVudERhdGEsXG4gICAgICAgICAgICBzdGF0ZS5sb2dpblR5cGUsXG4gICAgICAgICAgICBzZWN0aW9uSWRcbiAgICAgICAgICApO1xuICAgICAgICAgIGRpc3BhdGNoKHNldFN0dWRlbnRzKGNvbnZlcnRlZFN0dWRlbnREYXRhKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKCgpID0+IHtcbiAgICAgICAgICAvLyByZXZlcnQgdG8gb2xkIHNlY3Rpb24gSUQgaW4gY2FzZSBvZiBmYWlsdXJlIHRvIGJhY2tlbmQgY2FsbFxuICAgICAgICAgIGRpc3BhdGNoKHNldFNlY3Rpb25JbmZvKG9sZFNlY3Rpb25JZCkpO1xuICAgICAgICAgIGRpc3BhdGNoKGZpbmlzaExvYWRpbmdTdHVkZW50cygpKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc3BhdGNoKGZpbmlzaExvYWRpbmdTdHVkZW50cygpKTtcbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZmlsdGVyQWdlR2F0ZWRTdHVkZW50cyA9IHN0dWRlbnREYXRhID0+IHtcbiAgcmV0dXJuIHN0dWRlbnREYXRhLmZpbHRlcihzdHVkZW50ID0+IHN0dWRlbnQuYXRSaXNrQWdlR2F0ZWRTdHVkZW50KTtcbn07XG4iXSwibmFtZXMiOlsibWFuYWdlU3R1ZGVudHMiLCJzdGF0ZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImluaXRpYWxTdGF0ZSIsImFjdGlvbiIsInR5cGUiLCJTRVRfTE9HSU5fVFlQRSIsImFkZFJvd0luaXRpYWxpemF0aW9uIiwibG9naW5UeXBlIiwiU2VjdGlvbkxvZ2luVHlwZSIsIndvcmQiLCJwaWN0dXJlIiwic3R1ZGVudERhdGEiLCJfZGVmaW5lUHJvcGVydHkiLCJhZGRSb3dJZCIsIl9vYmplY3RTcHJlYWQiLCJibGFua0FkZFJvdyIsImVkaXRpbmdEYXRhIiwiU0VUX1NUVURFTlRTIiwiYWRkU3RhdHVzIiwic3RhdHVzIiwibnVtU3R1ZGVudHMiLCJpc0xvYWRpbmdTdHVkZW50cyIsIlNFVF9TRUNUSU9OX0lORk8iLCJzZWN0aW9uSWQiLCJTVEFSVF9FRElUSU5HX1NUVURFTlQiLCJzdHVkZW50SWQiLCJpc0VkaXRpbmciLCJpZCIsIkNBTkNFTF9FRElUSU5HX1NUVURFTlQiLCJfIiwib21pdCIsIlNUQVJUX1NBVklOR19TVFVERU5UIiwiaXNTYXZpbmciLCJTQVZFX1NUVURFTlRfU1VDQ0VTUyIsInJvd1R5cGUiLCJSb3dUeXBlIiwiU1RVREVOVCIsIkFERF9TVFVERU5UX0ZBSUxVUkUiLCJuZXdTdGF0ZSIsIkFkZFN0YXR1cyIsIkZBSUwiLCJpIiwic3R1ZGVudElkcyIsIkFERF9TVFVERU5UX0ZVTEwiLCJGVUxMIiwic2VjdGlvbkNhcGFjaXR5Iiwic2VjdGlvbkNvZGUiLCJzZWN0aW9uU3R1ZGVudENvdW50IiwiQUREX1NUVURFTlRfU1VDQ0VTUyIsInJvd0lkcyIsIlNVQ0NFU1MiLCJTRVRfU0hBUklOR19ERUZBVUxUIiwic2hhcmluZ0Rpc2FibGVkIiwiYWdlIiwiRURJVF9TVFVERU5UIiwiRURJVF9BTEwiLCJzdHVkZW50S2V5Iiwic3R1ZGVudCIsIlVQREFURV9BTExfU0hBUkVfU0VUVElORyIsImRpc2FibGUiLCJTRVRfU0VDUkVUX0lNQUdFIiwic2VjcmV0UGljdHVyZVBhdGgiLCJpbWFnZSIsIlNFVF9TRUNSRVRfV09SRFMiLCJzZWNyZXRXb3JkcyIsIndvcmRzIiwiUkVNT1ZFX1NUVURFTlQiLCJFcnJvciIsIkFERF9NVUxUSVBMRV9ST1dTIiwiU0VUX1NIT1dfU0hBUklOR19DT0xVTU4iLCJzaG93U2hhcmluZ0NvbHVtbiIsInZpc2libGUiLCJVUERBVEVfU1RVREVOVF9UUkFOU0ZFUiIsInRyYW5zZmVyRGF0YSIsInRyYW5zZmVyU3RhdHVzIiwiYmxhbmtTdHVkZW50VHJhbnNmZXJTdGF0dXMiLCJDQU5DRUxfU1RVREVOVF9UUkFOU0ZFUiIsImJsYW5rU3R1ZGVudFRyYW5zZmVyIiwiZXJyb3IiLCJUUkFOU0ZFUl9TVFVERU5UU19TVUNDRVNTIiwiVHJhbnNmZXJTdGF0dXMiLCJ0cmFuc2ZlclR5cGUiLCJzZWN0aW9uRGlzcGxheSIsIlRSQU5TRkVSX1NUVURFTlRTX0ZVTEwiLCJ2ZXJiIiwiVFJBTlNGRVJfU1RVREVOVFNfRkFJTFVSRSIsIlRSQU5TRkVSX1NUVURFTlRTX1BFTkRJTkciLCJQRU5ESU5HIiwiU1RBUlRfTE9BRElOR19TVFVERU5UUyIsIkZJTklTSF9MT0FESU5HX1NUVURFTlRTIiwiX2pxdWVyeSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2xvZGFzaCIsIl90ZWFjaGVyU2VjdGlvbnNSZWR1eCIsIl90ZWFjaGVyU2VjdGlvbnNSZWR1eFNlbGVjdG9ycyIsIl9zaGFyZWRDb25zdGFudHMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiX3R5cGVvZiIsIm8iLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwib3duS2V5cyIsImUiLCJyIiwidCIsIk9iamVjdCIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJmaWx0ZXIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiZm9yRWFjaCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiX3RvUHJpbWl0aXZlIiwidG9QcmltaXRpdmUiLCJjYWxsIiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiTnVtYmVyIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJleHBvcnRzIiwiQUJPVkVfVEFCTEUiLCJCRUxPV19UQUJMRSIsIk1BTkFHRV9TVFVERU5UUyIsIkxPR0lOX0lORk8iLCJBREQiLCJORVdfU1RVREVOVCIsIlRyYW5zZmVyVHlwZSIsIk1PVkVfU1RVREVOVFMiLCJDT1BZX1NUVURFTlRTIiwib3RoZXJUZWFjaGVyIiwib3RoZXJUZWFjaGVyU2VjdGlvbiIsImNvcHlTdHVkZW50cyIsImFkZFJvd0lkQ291bnRlciIsIm5hbWUiLCJnZW5kZXIiLCJ1c2VybmFtZSIsImJsYW5rTmV3U3R1ZGVudFJvdyIsInN0YXJ0TG9hZGluZ1N0dWRlbnRzIiwiZmluaXNoTG9hZGluZ1N0dWRlbnRzIiwic2V0U3R1ZGVudHMiLCJzZXRMb2dpblR5cGUiLCJzZXRTZWN0aW9uSW5mbyIsInJlbW92ZVN0dWRlbnQiLCJzdGFydEVkaXRpbmdTdHVkZW50IiwiY2FuY2VsRWRpdGluZ1N0dWRlbnQiLCJlZGl0QWxsIiwic2V0U2VjcmV0SW1hZ2UiLCJzZXRTZWNyZXRXb3JkcyIsImVkaXRTdHVkZW50Iiwic2V0U2hhcmluZ0RlZmF1bHQiLCJ1cGRhdGVBbGxTaGFyZVNldHRpbmciLCJzdGFydFNhdmluZ1N0dWRlbnQiLCJzYXZlU3R1ZGVudFN1Y2Nlc3MiLCJ0cmFuc2ZlclN0dWRlbnRzU3VjY2VzcyIsInVwZGF0ZVN0dWRlbnRUcmFuc2ZlciIsImNhbmNlbFN0dWRlbnRUcmFuc2ZlciIsInRyYW5zZmVyU3R1ZGVudHNGYWlsdXJlIiwidHJhbnNmZXJTdHVkZW50c1BlbmRpbmciLCJ0cmFuc2ZlclN0dWRlbnRzRnVsbCIsIl9yZWYiLCJjb3B5IiwiYWRkU3R1ZGVudHNTdWNjZXNzIiwiYWRkU3R1ZGVudHNGYWlsdXJlIiwiYWRkU3R1ZGVudHNGdWxsIiwiX3JlZjIiLCJhZGRNdWx0aXBsZVJvd3MiLCJzYXZlU3R1ZGVudCIsInNldFNob3dTaGFyaW5nQ29sdW1uIiwiaGFuZGxlU2hhcmVTZXR0aW5nIiwiZGlzcGF0Y2giLCJnZXRTdGF0ZSIsInRlYWNoZXJTZWN0aW9ucyIsInNlbGVjdGVkU2VjdGlvbklkIiwidXBkYXRlU3R1ZGVudE9uU2VydmVyIiwiZGF0YSIsImNvbnNvbGUiLCJhc3luY0xvYWRTZWN0aW9uRGF0YSIsImFkZFN0dWRlbnRzIiwic2F2ZUFsbFN0dWRlbnRzIiwidmFsdWVzIiwibmV3U3R1ZGVudHNUb0FkZCIsIm1hcCIsIm51bVN0dWRlbnRzVG9BZGQiLCJmaWx0ZXJlZERhdGEiLCJpbmNsdWRlcyIsImFkZFN0dWRlbnRPblNlcnZlciIsInJlc3VsdCIsImNvbnZlcnRTdHVkZW50U2VydmVyRGF0YSIsImFkZE11bHRpcGxlQWRkUm93cyIsInN0dWRlbnREYXRhQXJyYXkiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsIm5ld0lkIiwiZmFtaWx5TmFtZSIsInRyYW5zZmVyU3R1ZGVudHMiLCJvbkNvbXBsZXRlIiwibmV3U2VjdGlvbkNvZGUiLCJjdXJyZW50U2VjdGlvbkNvZGUiLCJfc3RhdGUkbWFuYWdlU3R1ZGVudHMiLCJuZXdTZWN0aW9uSWQiLCJ0cmFuc2ZlclN0dWRlbnRzT25TZXJ2ZXIiLCJzZWN0aW9uTmFtZSIsImdldFN0dWRlbnRDb3VudCIsInN0dWRlbnRMb29rdXAiLCJmYW1pbHlfbmFtZSIsImVtYWlsIiwiZ2VuZGVyVGVhY2hlcklucHV0IiwiZ2VuZGVyX3RlYWNoZXJfaW5wdXQiLCJzZWNyZXRfd29yZHMiLCJzZWNyZXRfcGljdHVyZV9wYXRoIiwic2hhcmluZ19kaXNhYmxlZCIsImhhc0V2ZXJTaWduZWRJbiIsImhhc19ldmVyX3NpZ25lZF9pbiIsImRlcGVuZHNPblRoaXNTZWN0aW9uRm9yTG9naW4iLCJkZXBlbmRzX29uX3RoaXNfc2VjdGlvbl9mb3JfbG9naW4iLCJ1c2VyVHlwZSIsInVzZXJfdHlwZSIsImF0Umlza0FnZUdhdGVkU3R1ZGVudCIsImF0X3Jpc2tfYWdlX2dhdGVkIiwiY2hpbGRBY2NvdW50Q29tcGxpYW5jZVN0YXRlIiwiY2hpbGRfYWNjb3VudF9jb21wbGlhbmNlX3N0YXRlIiwibGF0ZXN0UGVybWlzc2lvblJlcXVlc3RTZW50QXQiLCJsYXRlc3RfcGVybWlzc2lvbl9yZXF1ZXN0X3NlbnRfYXQiLCJEYXRlIiwiY29udmVydFN0dWRlbnREYXRhVG9BcnJheSIsInJldmVyc2UiLCJ1cGRhdGVkU3R1ZGVudEluZm8iLCJkYXRhVG9VcGRhdGUiLCIkIiwiYWpheCIsInVybCIsImNvbmNhdCIsIm1ldGhvZCIsImNvbnRlbnRUeXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsImRvbmUiLCJmYWlsIiwianFYaHIiLCJ1cGRhdGVkU3R1ZGVudHNJbmZvIiwic3R1ZGVudHNUb0FkZCIsImVkaXRpbmciLCJzdHVkZW50cyIsInJlc3BvbnNlSlNPTiIsInN0YXlFbnJvbGxlZEluQ3VycmVudFNlY3Rpb24iLCJwYXlsb2FkIiwic3R1ZGVudF9pZHMiLCJjdXJyZW50X3NlY3Rpb25fY29kZSIsIm5ld19zZWN0aW9uX2NvZGUiLCJzdGF5X2Vucm9sbGVkX2luX2N1cnJlbnRfc2VjdGlvbiIsImxvYWRTZWN0aW9uU3R1ZGVudERhdGEiLCJvbGRTZWN0aW9uSWQiLCJkYXRhVHlwZSIsImNvbnZlcnRlZFN0dWRlbnREYXRhIiwiZmlsdGVyQWdlR2F0ZWRTdHVkZW50cyJdLCJzb3VyY2VSb290IjoiIn0=