"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[8141],{"./src/code-studio/components/AssetThumbnail.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.styles=exports.default=void 0;var _class,_class2,_class3,_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_clientApi=__webpack_require__("./src/clientApi.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var defaultIcons={image:"fa fa-picture-o",audio:"fa fa-music",video:"fa fa-video-camera",pdf:"fa fa-file-pdf-o",doc:"fa fa-file-text-o",unknown:"fa fa-question"},assetThumbnailStyle={width:"auto",maxWidth:"100%",height:"auto",maxHeight:"100%",marginTop:"50%",transform:"translateY(-50%)",msTransform:"translateY(-50%)",WebkitTransform:"translateY(-50%)"},assetIconStyle={margin:"15px 0",fontSize:"32px"},styles={wrapper:{width:60,height:60,margin:"10px auto"},background:{background:"#eee",border:"1px solid #ccc",textAlign:"center"},audioIcon:{color:_color.default.purple,marginLeft:"auto",marginRight:"auto",display:"block"},audioWrapper:{display:"flex"}};exports.styles=styles;var AssetThumbnail=function(_React$Component){function AssetThumbnail(props){var _this;_defineProperty(function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(_this=_React$Component.call(this,props)||this),"clickSoundControl",(function(){_this.state.isPlayingAudio&&_this.props.soundPlayer?(_this.setState({isPlayingAudio:!1}),_this.props.soundPlayer.stopPlayingURL(_this.srcPath)):_this.props.soundPlayer&&(_this.setState({isPlayingAudio:!0}),_this.props.soundPlayer.play(_this.srcPath,{onEnded:function onEnded(){_this.setState({isPlayingAudio:!1})}}))}));var api=_this.props.api||_clientApi.assets;_this.props.levelName?api=api.withLevelName(_this.props.levelName):_this.props.projectId&&(api=api.withProjectId(_this.props.projectId));var basePath=api.basePath(_this.props.name),cacheBustSuffix="";if(_this.props.timestamp){var date=new Date(_this.props.timestamp);cacheBustSuffix="?t=".concat(date.valueOf())}return _this.srcPath="".concat(basePath).concat(cacheBustSuffix),"audio"===_this.props.type&&_this.props.soundPlayer&&_this.props.soundPlayer.register({id:_this.srcPath,mp3:_this.srcPath}),_this.state={isPlayingAudio:!1},_this}return _inheritsLoose(AssetThumbnail,_React$Component),AssetThumbnail.prototype.render=function render(){var _this$props=this.props,type=_this$props.type,iconStyle=_this$props.iconStyle,style=_this$props.style;return _react.default.createElement("div",{className:"assetThumbnail"},"audio"===type?_react.default.createElement(AudioThumbnail,{clickSoundControl:this.clickSoundControl,isPlaying:this.state.isPlayingAudio}):_react.default.createElement("div",{style:_objectSpread(_objectSpread(_objectSpread({},styles.wrapper),style),styles.background)},"image"===type?_react.default.createElement(ImageThumbnail,{src:this.srcPath}):_react.default.createElement(DefaultThumbnail,{type,iconStyle})))},AssetThumbnail}(_react.default.Component);_defineProperty(AssetThumbnail,"propTypes",{name:_propTypes.default.string.isRequired,timestamp:_propTypes.default.string,type:_propTypes.default.oneOf(["image","audio","video","pdf","doc"]).isRequired,style:_propTypes.default.object,iconStyle:_propTypes.default.object,api:_propTypes.default.object,projectId:_propTypes.default.string,levelName:_propTypes.default.string,soundPlayer:_propTypes.default.object});var _default=AssetThumbnail;exports.default=_default;var AudioThumbnail=(_class=function(_React$Component2){function AudioThumbnail(){return _React$Component2.apply(this,arguments)||this}return _inheritsLoose(AudioThumbnail,_React$Component2),AudioThumbnail.prototype.render=function render(){var playIcon=this.props.isPlaying?"fa-pause-circle":"fa-play-circle";return _react.default.createElement("div",{style:_objectSpread(_objectSpread({},styles.wrapper),styles.audioWrapper)},_react.default.createElement("i",{onClick:this.props.clickSoundControl,className:"fa "+playIcon+" fa-4x",style:styles.audioIcon}))},AudioThumbnail}(_react.default.Component),_defineProperty(_class,"propTypes",{clickSoundControl:_propTypes.default.func,isPlaying:_propTypes.default.bool}),_class),ImageThumbnail=(_class2=function(_React$Component3){function ImageThumbnail(){return _React$Component3.apply(this,arguments)||this}return _inheritsLoose(ImageThumbnail,_React$Component3),ImageThumbnail.prototype.render=function render(){return _react.default.createElement("a",{href:this.props.src,target:"_blank",rel:"noopener noreferrer"},_react.default.createElement("img",{src:this.props.src,style:assetThumbnailStyle,id:"ui-image-thumbnail",alt:""}))},ImageThumbnail}(_react.default.Component),_defineProperty(_class2,"propTypes",{src:_propTypes.default.string}),_class2),DefaultThumbnail=(_class3=function(_React$Component4){function DefaultThumbnail(){return _React$Component4.apply(this,arguments)||this}return _inheritsLoose(DefaultThumbnail,_React$Component4),DefaultThumbnail.prototype.render=function render(){return _react.default.createElement("i",{className:defaultIcons[this.props.type]||defaultIcons.unknown,style:_objectSpread(_objectSpread({},assetIconStyle),this.props.iconStyle)})},DefaultThumbnail}(_react.default.Component),_defineProperty(_class3,"propTypes",{type:_propTypes.default.oneOf(["image","audio","video","pdf","doc"]).isRequired,iconStyle:_propTypes.default.object}),_class3)},"./src/code-studio/components/AssetThumbnail.story.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VideoThumbnail=exports.PDFThumbnail=exports.ImageThumbnail=exports.DocThumbnail=exports.AudioThumbnail=void 0;var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_AssetThumbnail=_interopRequireDefault(__webpack_require__("./src/code-studio/components/AssetThumbnail.jsx"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var _default={component:_AssetThumbnail.default};exports.default=_default;var Template=function Template(args){return _react.default.createElement("div",{style:{width:800}},_react.default.createElement(_AssetThumbnail.default,_extends({name:"AudioTest",useFilesApi:!0,projectId:"123"},args)))},ImageThumbnail=Template.bind({});exports.ImageThumbnail=ImageThumbnail,ImageThumbnail.args={type:"image"};var AudioThumbnail=Template.bind({});exports.AudioThumbnail=AudioThumbnail,AudioThumbnail.args={type:"audio"};var VideoThumbnail=Template.bind({});exports.VideoThumbnail=VideoThumbnail,VideoThumbnail.args={type:"video"};var DocThumbnail=Template.bind({});exports.DocThumbnail=DocThumbnail,DocThumbnail.args={type:"doc"};var PDFThumbnail=Template.bind({});exports.PDFThumbnail=PDFThumbnail,PDFThumbnail.args={type:"pdf"}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29kZS1zdHVkaW8tY29tcG9uZW50cy1Bc3NldFRodW1ibmFpbC1zdG9yeS40OGY2NmNmOC5pZnJhbWUuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJvU0FBQSxJLHVCQUFBLG9GQUNBLDZGQUNBLDBFQUNBLHFELHcxQ0FFQSxJQUFNQSxhQUFlLENBQ25CQyxNQUFPLGtCQUNQQyxNQUFPLGNBQ1BDLE1BQU8scUJBQ1BDLElBQUssbUJBQ0xDLElBQUssb0JBQ0xDLFFBQVMsa0JBR0xDLG9CQUFzQixDQUMxQkMsTUFBTyxPQUNQQyxTQUFVLE9BQ1ZDLE9BQVEsT0FDUkMsVUFBVyxPQUNYQyxVQUFXLE1BQ1hDLFVBQVcsbUJBQ1hDLFlBQWEsbUJBQ2JDLGdCQUFpQixvQkFHYkMsZUFBaUIsQ0FDckJDLE9BQVEsU0FDUkMsU0FBVSxRQUdDQyxPQUFTLENBQ3BCQyxRQUFTLENBQ1BaLE1BQU8sR0FDUEUsT0FBUSxHQUNSTyxPQUFRLGFBRVZJLFdBQVksQ0FDVkEsV0FBWSxPQUNaQyxPQUFRLGlCQUNSQyxVQUFXLFVBRWJDLFVBQVcsQ0FDVEMsTUFBT0EsT0FBQUEsUUFBTUMsT0FDYkMsV0FBWSxPQUNaQyxZQUFhLE9BQ2JDLFFBQVMsU0FFWEMsYUFBYyxDQUNaRCxRQUFTLFMsMEJBSVBFLGVBQUFBLFNBQUFBLGtCQWFKLHdCQUFZQyxPQUFPLDBCLHlKQUFBLENBQ2pCLGlDQUFNQSxRQUFOLE1BRGlCLHFCQXlCQyxXQUNkLE1BQUtDLE1BQU1DLGdCQUFrQixNQUFLRixNQUFNRyxhQUMxQyxNQUFLQyxTQUFTLENBQUNGLGdCQUFnQixJQUMvQixNQUFLRixNQUFNRyxZQUFZRSxlQUFlLE1BQUtDLFVBQ2xDLE1BQUtOLE1BQU1HLGNBQ3BCLE1BQUtDLFNBQVMsQ0FBQ0YsZ0JBQWdCLElBQy9CLE1BQUtGLE1BQU1HLFlBQVlJLEtBQUssTUFBS0QsUUFBUyxDQUN4Q0UsUUFBUyxtQkFDUCxNQUFLSixTQUFTLENBQUNGLGdCQUFnQixHQUNoQyxJQUdOLElBbkNDLElBQUlPLElBQU0s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M0IsTUFBTXNCLE9BQVN0RCxhQUFhTSxRQUN6RHVELE1BQUssK0JBQU03QyxnQkFBbUIyQyxLQUFLM0IsTUFBTTRCLFlBRzlDLEVBYm1CLGtCQUFpQlMsT0FBQUEsUUFBTUMsV0FBdkIsb0NBQ0QsQ0FDakJoQixLQUFNaUIsV0FBQUEsUUFBVUcsTUFBTSxDQUFDLFFBQVMsUUFBUyxRQUFTLE1BQU8sUUFBUUQsV0FDakViLFVBQVdXLFdBQUFBLFFBQVVJLFNBSEgsUSwrU0NoTHRCLHdGQUNBLCtHLG1ZQUVlLENBQ2JTLFVBQVdyRCxnQkFBQUEsUyx5QkFJYixJQUFNc0QsU0FBVyxTQUFYQSxTQUFXQyxNQUFJLE9BQ25CLG9DQUFLekIsTUFBTyxDQUFDckQsTUFBTyxNQUNsQiw2QkFBQyx3QkFBRCxVQUNFd0MsS0FBSyxZQUNMdUMsYUFBYSxFQUNiMUMsVUFBVSxPQUNOeUMsT0FOVyxFQVlScEIsZUFBaUJtQixTQUFTRyxLQUFLLENBQUMsRyxzQ0FDN0N0QixlQUFlb0IsS0FBTyxDQUNwQmhDLEtBQU0sU0FHRCxJQUFNUyxlQUFpQnNCLFNBQVNHLEtBQUssQ0FBQyxHLHNDQUM3Q3pCLGVBQWV1QixLQUFPLENBQ3BCaEMsS0FBTSxTQUdELElBQU1tQyxlQUFpQkosU0FBU0csS0FBSyxDQUFDLEcsc0NBQzdDQyxlQUFlSCxLQUFPLENBQ3BCaEMsS0FBTSxTQUdELElBQU1vQyxhQUFlTCxTQUFTRyxLQUFLLENBQUMsRyxrQ0FDM0NFLGFBQWFKLEtBQU8sQ0FDbEJoQyxLQUFNLE9BR0QsSUFBTXFDLGFBQWVOLFNBQVNHLEtBQUssQ0FBQyxHLGtDQUMzQ0csYUFBYUwsS0FBTyxDQUNsQmhDLEtBQU0sTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy9jb2RlLXN0dWRpby9jb21wb25lbnRzL0Fzc2V0VGh1bWJuYWlsLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvY29kZS1zdHVkaW8vY29tcG9uZW50cy9Bc3NldFRodW1ibmFpbC5zdG9yeS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgY29sb3IgZnJvbSAnQGNkby9hcHBzL3V0aWwvY29sb3InO1xuaW1wb3J0IHthc3NldHMgYXMgYXNzZXRzQXBpfSBmcm9tICdAY2RvL2FwcHMvY2xpZW50QXBpJztcblxuY29uc3QgZGVmYXVsdEljb25zID0ge1xuICBpbWFnZTogJ2ZhIGZhLXBpY3R1cmUtbycsXG4gIGF1ZGlvOiAnZmEgZmEtbXVzaWMnLFxuICB2aWRlbzogJ2ZhIGZhLXZpZGVvLWNhbWVyYScsXG4gIHBkZjogJ2ZhIGZhLWZpbGUtcGRmLW8nLFxuICBkb2M6ICdmYSBmYS1maWxlLXRleHQtbycsXG4gIHVua25vd246ICdmYSBmYS1xdWVzdGlvbicsXG59O1xuXG5jb25zdCBhc3NldFRodW1ibmFpbFN0eWxlID0ge1xuICB3aWR0aDogJ2F1dG8nLFxuICBtYXhXaWR0aDogJzEwMCUnLFxuICBoZWlnaHQ6ICdhdXRvJyxcbiAgbWF4SGVpZ2h0OiAnMTAwJScsXG4gIG1hcmdpblRvcDogJzUwJScsXG4gIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTUwJSknLFxuICBtc1RyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTUwJSknLFxuICBXZWJraXRUcmFuc2Zvcm06ICd0cmFuc2xhdGVZKC01MCUpJyxcbn07XG5cbmNvbnN0IGFzc2V0SWNvblN0eWxlID0ge1xuICBtYXJnaW46ICcxNXB4IDAnLFxuICBmb250U2l6ZTogJzMycHgnLFxufTtcblxuZXhwb3J0IGNvbnN0IHN0eWxlcyA9IHtcbiAgd3JhcHBlcjoge1xuICAgIHdpZHRoOiA2MCxcbiAgICBoZWlnaHQ6IDYwLFxuICAgIG1hcmdpbjogJzEwcHggYXV0bycsXG4gIH0sXG4gIGJhY2tncm91bmQ6IHtcbiAgICBiYWNrZ3JvdW5kOiAnI2VlZScsXG4gICAgYm9yZGVyOiAnMXB4IHNvbGlkICNjY2MnLFxuICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gIH0sXG4gIGF1ZGlvSWNvbjoge1xuICAgIGNvbG9yOiBjb2xvci5wdXJwbGUsXG4gICAgbWFyZ2luTGVmdDogJ2F1dG8nLFxuICAgIG1hcmdpblJpZ2h0OiAnYXV0bycsXG4gICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgfSxcbiAgYXVkaW9XcmFwcGVyOiB7XG4gICAgZGlzcGxheTogJ2ZsZXgnLFxuICB9LFxufTtcblxuY2xhc3MgQXNzZXRUaHVtYm5haWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB0aW1lc3RhbXA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdHlwZTogUHJvcFR5cGVzLm9uZU9mKFsnaW1hZ2UnLCAnYXVkaW8nLCAndmlkZW8nLCAncGRmJywgJ2RvYyddKS5pc1JlcXVpcmVkLFxuICAgIHN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGljb25TdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBhcGk6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgcHJvamVjdElkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGxldmVsTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBzb3VuZFBsYXllcjogUHJvcFR5cGVzLm9iamVjdCxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBsZXQgYXBpID0gdGhpcy5wcm9wcy5hcGkgfHwgYXNzZXRzQXBpOyAvLyBGYWxsYmFjayB0byBhc3NldHNBcGkuXG4gICAgaWYgKHRoaXMucHJvcHMubGV2ZWxOYW1lKSB7XG4gICAgICBhcGkgPSBhcGkud2l0aExldmVsTmFtZSh0aGlzLnByb3BzLmxldmVsTmFtZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2plY3RJZCkge1xuICAgICAgYXBpID0gYXBpLndpdGhQcm9qZWN0SWQodGhpcy5wcm9wcy5wcm9qZWN0SWQpO1xuICAgIH1cbiAgICBjb25zdCBiYXNlUGF0aCA9IGFwaS5iYXNlUGF0aCh0aGlzLnByb3BzLm5hbWUpO1xuICAgIGxldCBjYWNoZUJ1c3RTdWZmaXggPSAnJztcbiAgICBpZiAodGhpcy5wcm9wcy50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aGlzLnByb3BzLnRpbWVzdGFtcCk7XG4gICAgICBjYWNoZUJ1c3RTdWZmaXggPSBgP3Q9JHtkYXRlLnZhbHVlT2YoKX1gO1xuICAgIH1cblxuICAgIHRoaXMuc3JjUGF0aCA9IGAke2Jhc2VQYXRofSR7Y2FjaGVCdXN0U3VmZml4fWA7XG5cbiAgICBpZiAodGhpcy5wcm9wcy50eXBlID09PSAnYXVkaW8nICYmIHRoaXMucHJvcHMuc291bmRQbGF5ZXIpIHtcbiAgICAgIHRoaXMucHJvcHMuc291bmRQbGF5ZXIucmVnaXN0ZXIoe2lkOiB0aGlzLnNyY1BhdGgsIG1wMzogdGhpcy5zcmNQYXRofSk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc1BsYXlpbmdBdWRpbzogZmFsc2UsXG4gICAgfTtcbiAgfVxuXG4gIGNsaWNrU291bmRDb250cm9sID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnN0YXRlLmlzUGxheWluZ0F1ZGlvICYmIHRoaXMucHJvcHMuc291bmRQbGF5ZXIpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2lzUGxheWluZ0F1ZGlvOiBmYWxzZX0pO1xuICAgICAgdGhpcy5wcm9wcy5zb3VuZFBsYXllci5zdG9wUGxheWluZ1VSTCh0aGlzLnNyY1BhdGgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zb3VuZFBsYXllcikge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNQbGF5aW5nQXVkaW86IHRydWV9KTtcbiAgICAgIHRoaXMucHJvcHMuc291bmRQbGF5ZXIucGxheSh0aGlzLnNyY1BhdGgsIHtcbiAgICAgICAgb25FbmRlZDogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzUGxheWluZ0F1ZGlvOiBmYWxzZX0pO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7dHlwZSwgaWNvblN0eWxlLCBzdHlsZX0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXNzZXRUaHVtYm5haWxcIj5cbiAgICAgICAge3R5cGUgPT09ICdhdWRpbycgPyAoXG4gICAgICAgICAgPEF1ZGlvVGh1bWJuYWlsXG4gICAgICAgICAgICBjbGlja1NvdW5kQ29udHJvbD17dGhpcy5jbGlja1NvdW5kQ29udHJvbH1cbiAgICAgICAgICAgIGlzUGxheWluZz17dGhpcy5zdGF0ZS5pc1BsYXlpbmdBdWRpb31cbiAgICAgICAgICAvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgc3R5bGU9e3suLi5zdHlsZXMud3JhcHBlciwgLi4uc3R5bGUsIC4uLnN0eWxlcy5iYWNrZ3JvdW5kfX0+XG4gICAgICAgICAgICB7dHlwZSA9PT0gJ2ltYWdlJyA/IChcbiAgICAgICAgICAgICAgPEltYWdlVGh1bWJuYWlsIHNyYz17dGhpcy5zcmNQYXRofSAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPERlZmF1bHRUaHVtYm5haWwgdHlwZT17dHlwZX0gaWNvblN0eWxlPXtpY29uU3R5bGV9IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBc3NldFRodW1ibmFpbDtcblxuY29uc3QgQXVkaW9UaHVtYm5haWwgPSBjbGFzcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgY2xpY2tTb3VuZENvbnRyb2w6IFByb3BUeXBlcy5mdW5jLFxuICAgIGlzUGxheWluZzogUHJvcFR5cGVzLmJvb2wsXG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHBsYXlJY29uID0gdGhpcy5wcm9wcy5pc1BsYXlpbmdcbiAgICAgID8gJ2ZhLXBhdXNlLWNpcmNsZSdcbiAgICAgIDogJ2ZhLXBsYXktY2lyY2xlJztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IHN0eWxlPXt7Li4uc3R5bGVzLndyYXBwZXIsIC4uLnN0eWxlcy5hdWRpb1dyYXBwZXJ9fT5cbiAgICAgICAgPGlcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLmNsaWNrU291bmRDb250cm9sfVxuICAgICAgICAgIGNsYXNzTmFtZT17J2ZhICcgKyBwbGF5SWNvbiArICcgZmEtNHgnfVxuICAgICAgICAgIHN0eWxlPXtzdHlsZXMuYXVkaW9JY29ufVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufTtcblxuY29uc3QgSW1hZ2VUaHVtYm5haWwgPSBjbGFzcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgc3JjOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGEgaHJlZj17dGhpcy5wcm9wcy5zcmN9IHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIj5cbiAgICAgICAge1xuICAgICAgICAgIC8vIFRPRE86IEExMXkyNzkgKGh0dHBzOi8vY29kZWRvdG9yZy5hdGxhc3NpYW4ubmV0L2Jyb3dzZS9BMTFZLTI3OSlcbiAgICAgICAgICAvLyBWZXJpZnkgb3IgdXBkYXRlIHRoaXMgYWx0LXRleHQgYXMgbmVjZXNzYXJ5XG4gICAgICAgIH1cbiAgICAgICAgPGltZ1xuICAgICAgICAgIHNyYz17dGhpcy5wcm9wcy5zcmN9XG4gICAgICAgICAgc3R5bGU9e2Fzc2V0VGh1bWJuYWlsU3R5bGV9XG4gICAgICAgICAgaWQ9XCJ1aS1pbWFnZS10aHVtYm5haWxcIlxuICAgICAgICAgIGFsdD1cIlwiXG4gICAgICAgIC8+XG4gICAgICA8L2E+XG4gICAgKTtcbiAgfVxufTtcblxuY29uc3QgRGVmYXVsdFRodW1ibmFpbCA9IGNsYXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICB0eXBlOiBQcm9wVHlwZXMub25lT2YoWydpbWFnZScsICdhdWRpbycsICd2aWRlbycsICdwZGYnLCAnZG9jJ10pLmlzUmVxdWlyZWQsXG4gICAgaWNvblN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGlcbiAgICAgICAgY2xhc3NOYW1lPXtkZWZhdWx0SWNvbnNbdGhpcy5wcm9wcy50eXBlXSB8fCBkZWZhdWx0SWNvbnMudW5rbm93bn1cbiAgICAgICAgc3R5bGU9e3suLi5hc3NldEljb25TdHlsZSwgLi4udGhpcy5wcm9wcy5pY29uU3R5bGV9fVxuICAgICAgLz5cbiAgICApO1xuICB9XG59O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBc3NldFRodW1ibmFpbCBmcm9tICcuL0Fzc2V0VGh1bWJuYWlsJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnQ6IEFzc2V0VGh1bWJuYWlsLFxufTtcblxuLy8gVGVtcGxhdGVcbmNvbnN0IFRlbXBsYXRlID0gYXJncyA9PiAoXG4gIDxkaXYgc3R5bGU9e3t3aWR0aDogODAwfX0+XG4gICAgPEFzc2V0VGh1bWJuYWlsXG4gICAgICBuYW1lPVwiQXVkaW9UZXN0XCJcbiAgICAgIHVzZUZpbGVzQXBpPXt0cnVlfVxuICAgICAgcHJvamVjdElkPVwiMTIzXCJcbiAgICAgIHsuLi5hcmdzfVxuICAgIC8+XG4gIDwvZGl2PlxuKTtcblxuLy8gU3Rvcmllc1xuZXhwb3J0IGNvbnN0IEltYWdlVGh1bWJuYWlsID0gVGVtcGxhdGUuYmluZCh7fSk7XG5JbWFnZVRodW1ibmFpbC5hcmdzID0ge1xuICB0eXBlOiAnaW1hZ2UnLFxufTtcblxuZXhwb3J0IGNvbnN0IEF1ZGlvVGh1bWJuYWlsID0gVGVtcGxhdGUuYmluZCh7fSk7XG5BdWRpb1RodW1ibmFpbC5hcmdzID0ge1xuICB0eXBlOiAnYXVkaW8nLFxufTtcblxuZXhwb3J0IGNvbnN0IFZpZGVvVGh1bWJuYWlsID0gVGVtcGxhdGUuYmluZCh7fSk7XG5WaWRlb1RodW1ibmFpbC5hcmdzID0ge1xuICB0eXBlOiAndmlkZW8nLFxufTtcblxuZXhwb3J0IGNvbnN0IERvY1RodW1ibmFpbCA9IFRlbXBsYXRlLmJpbmQoe30pO1xuRG9jVGh1bWJuYWlsLmFyZ3MgPSB7XG4gIHR5cGU6ICdkb2MnLFxufTtcblxuZXhwb3J0IGNvbnN0IFBERlRodW1ibmFpbCA9IFRlbXBsYXRlLmJpbmQoe30pO1xuUERGVGh1bWJuYWlsLmFyZ3MgPSB7XG4gIHR5cGU6ICdwZGYnLFxufTtcbiJdLCJuYW1lcyI6WyJkZWZhdWx0SWNvbnMiLCJpbWFnZSIsImF1ZGlvIiwidmlkZW8iLCJwZGYiLCJkb2MiLCJ1bmtub3duIiwiYXNzZXRUaHVtYm5haWxTdHlsZSIsIndpZHRoIiwibWF4V2lkdGgiLCJoZWlnaHQiLCJtYXhIZWlnaHQiLCJtYXJnaW5Ub3AiLCJ0cmFuc2Zvcm0iLCJtc1RyYW5zZm9ybSIsIldlYmtpdFRyYW5zZm9ybSIsImFzc2V0SWNvblN0eWxlIiwibWFyZ2luIiwiZm9udFNpemUiLCJzdHlsZXMiLCJ3cmFwcGVyIiwiYmFja2dyb3VuZCIsImJvcmRlciIsInRleHRBbGlnbiIsImF1ZGlvSWNvbiIsImNvbG9yIiwicHVycGxlIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwiZGlzcGxheSIsImF1ZGlvV3JhcHBlciIsIkFzc2V0VGh1bWJuYWlsIiwicHJvcHMiLCJzdGF0ZSIsImlzUGxheWluZ0F1ZGlvIiwic291bmRQbGF5ZXIiLCJzZXRTdGF0ZSIsInN0b3BQbGF5aW5nVVJMIiwic3JjUGF0aCIsInBsYXkiLCJvbkVuZGVkIiwiYXBpIiwiYXNzZXRzQXBpIiwibGV2ZWxOYW1lIiwid2l0aExldmVsTmFtZSIsInByb2plY3RJZCIsIndpdGhQcm9qZWN0SWQiLCJiYXNlUGF0aCIsIm5hbWUiLCJjYWNoZUJ1c3RTdWZmaXgiLCJ0aW1lc3RhbXAiLCJkYXRlIiwiRGF0ZSIsInZhbHVlT2YiLCJ0eXBlIiwicmVnaXN0ZXIiLCJpZCIsIm1wMyIsInJlbmRlciIsInRoaXMiLCJpY29uU3R5bGUiLCJzdHlsZSIsImNsYXNzTmFtZSIsIkF1ZGlvVGh1bWJuYWlsIiwiY2xpY2tTb3VuZENvbnRyb2wiLCJpc1BsYXlpbmciLCJJbWFnZVRodW1ibmFpbCIsInNyYyIsIkRlZmF1bHRUaHVtYm5haWwiLCJSZWFjdCIsIkNvbXBvbmVudCIsIlByb3BUeXBlcyIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJvbmVPZiIsIm9iamVjdCIsInBsYXlJY29uIiwib25DbGljayIsImZ1bmMiLCJib29sIiwiaHJlZiIsInRhcmdldCIsInJlbCIsImFsdCIsImNvbXBvbmVudCIsIlRlbXBsYXRlIiwiYXJncyIsInVzZUZpbGVzQXBpIiwiYmluZCIsIlZpZGVvVGh1bWJuYWlsIiwiRG9jVGh1bWJuYWlsIiwiUERGVGh1bWJuYWlsIl0sInNvdXJjZVJvb3QiOiIifQ==