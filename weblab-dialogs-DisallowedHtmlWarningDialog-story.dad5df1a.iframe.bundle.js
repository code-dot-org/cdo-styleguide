"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[9866],{"./src/templates/SafeMarkdown.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _redactableMarkdown=_interopRequireDefault(__webpack_require__("./node_modules/@code-dot-org/redactable-markdown/dist/main.js")),_remarkPlugins=__webpack_require__("./node_modules/@code-dot-org/remark-plugins/src/index.js"),_github=_interopRequireDefault(__webpack_require__("./node_modules/hast-util-sanitize/lib/github.json")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_rehypeRaw=_interopRequireDefault(__webpack_require__("./node_modules/rehype-raw/index.js")),_rehypeReact=_interopRequireDefault(__webpack_require__("./node_modules/rehype-react/index.js")),_rehypeSanitize=_interopRequireDefault(__webpack_require__("./node_modules/rehype-sanitize/index.js")),_remarkRehype=_interopRequireDefault(__webpack_require__("./node_modules/remark-rehype/index.js")),_unified=_interopRequireDefault(__webpack_require__("./node_modules/unified/index.js")),_externalLinks=_interopRequireDefault(__webpack_require__("./src/templates/plugins/externalLinks.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var SafeMarkdown=function(_React$Component){function SafeMarkdown(){return _React$Component.apply(this,arguments)||this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(SafeMarkdown,_React$Component),SafeMarkdown.prototype.render=function render(){var processor=this.props.openExternalLinksInNewTab?markdownToReactExternalLinks:markdownToReact,rendered=Object(processor.processSync(this.props.markdown).result),markdownProps={};return this.props.className&&(markdownProps.className=this.props.className),rendered&&"div"===rendered.type&&!Object.keys(markdownProps).length?rendered:_react.default.createElement("div",markdownProps,rendered)},SafeMarkdown}(_react.default.Component);!function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(SafeMarkdown,"propTypes",{markdown:_propTypes.default.string.isRequired,openExternalLinksInNewTab:_propTypes.default.bool,className:_propTypes.default.string});var schema=Object.assign({},_github.default);schema.attributes.img.push("height","width"),schema.tagNames.push("span"),schema.attributes.span=["dataUrl","className"],schema.attributes["*"].push("style","className"),schema.attributes.b=["dataId"],schema.clobber=[];var blocklyTags=["block","functional_input","mutation","next","statement","title","field","value","xml"];schema.tagNames=schema.tagNames.concat(blocklyTags);var blocklyComponentWrappers={};blocklyTags.forEach((function(tag){schema.attributes[tag]=["block_text","id","inline","name","type"],blocklyComponentWrappers[tag]=function(props){var BlocklyElement=tag;return _react.default.createElement(BlocklyElement,_extends({is:tag},props))}}));var markdownToReact=(0,_unified.default)().use(_redactableMarkdown.default.getParser()).use([_remarkPlugins.clickableText,_remarkPlugins.expandableImages,_remarkPlugins.visualCodeBlock,_remarkPlugins.xmlAsTopLevelBlock,_remarkPlugins.details]).use(_remarkRehype.default,{allowDangerousHtml:!0}).use(_rehypeRaw.default).use(_rehypeSanitize.default,schema).use(_rehypeReact.default,{createElement:_react.default.createElement,components:blocklyComponentWrappers}),markdownToReactExternalLinks=markdownToReact().use(_externalLinks.default,{links:"all"});exports.default=SafeMarkdown;module.exports=exports.default},"./src/templates/plugins/externalLinks.js":(__unused_webpack_module,exports)=>{function isExternalLink(url){return!/https?:\/\/([^.]+\.)*code.org(:[0-9]+)?\//.test(function fullyQualified(path){return(a=a||document.createElement("a")).href=path,a.href}(url))}var a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function externalLinks(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},tokenizers=this.Parser.prototype.inlineTokenizers,original=tokenizers.link,all="all"===options.links;tokenizers.link=function(eat,value,silent){var link=original.call(this,eat,value,silent);if(link&&"link"===link.type&&(all||isExternalLink(link.url))){link.data=link.data||{},link.data.hProperties=link.data.hProperties||{};var props=link.data.hProperties;props.target=props.target||"_blank",props.rel="noreferrer noopener"}return link},tokenizers.link.locator=original.locator},exports.isExternalLink=isExternalLink},"./src/weblab/SupportArticleMarkdown.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function SupportArticleMarkdown(){return _react.default.createElement(_SafeMarkdown.default,{markdown:_locale.default.troubleshootingSupport({url:_constants.SUPPORT_ARTICLE_URL}),openExternalLinksInNewTab:!0})};var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_SafeMarkdown=_interopRequireDefault(__webpack_require__("./src/templates/SafeMarkdown.jsx")),_constants=__webpack_require__("./src/weblab/constants.js"),_locale=_interopRequireDefault(__webpack_require__("./src/weblab/locale-do-not-import.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=exports.default},"./src/weblab/constants.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.SUPPORT_ARTICLE_URL=exports.FatalErrorType=exports.FILE_SYSTEM_ERROR=exports.BRAMBLE_READY_STATE=void 0;var _utils=__webpack_require__("./src/utils.js");exports.SUPPORT_ARTICLE_URL="https://support.code.org/hc/en-us/articles/360016804871",exports.FatalErrorType=(0,_utils.makeEnum)("Default","LoadFailure","ResetFailure"),exports.FILE_SYSTEM_ERROR="EFILESYSTEMERROR",exports.BRAMBLE_READY_STATE="bramble:readyToMount"},"./src/weblab/dialogs/DisallowedHtmlWarningDialog.jsx":(module,exports,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=DisallowedHtmlWarningDialog;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_StylizedBaseDialog=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("./src/sharedComponents/StylizedBaseDialog.jsx")),_SafeMarkdown=_interopRequireDefault(__webpack_require__("./src/templates/SafeMarkdown.jsx")),_SupportArticleMarkdown=_interopRequireDefault(__webpack_require__("./src/weblab/SupportArticleMarkdown.jsx")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_locale2=_interopRequireDefault(__webpack_require__("./src/weblab/locale-do-not-import.js")),_excluded=["isOpen","filename","disallowedTags","handleClose"];function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function DisallowedHtmlWarningDialog(_ref){var isOpen=_ref.isOpen,filename=_ref.filename,disallowedTags=_ref.disallowedTags,handleClose=_ref.handleClose,props=_objectWithoutProperties(_ref,_excluded),body=_react.default.createElement("div",null,_react.default.createElement(_SafeMarkdown.default,{markdown:_locale2.default.disallowedHtml({filename,disallowedTags:disallowedTags.join(", ")})}),_react.default.createElement(_SupportArticleMarkdown.default,null));return _react.default.createElement(_StylizedBaseDialog.default,_extends({},props,{isOpen,title:_locale.default.warning(),body,handleClose,renderFooter:function renderFooter(){return _react.default.createElement(_StylizedBaseDialog.FooterButton,{type:"confirm",text:_locale.default.dialogOK(),onClick:handleClose})}}))}DisallowedHtmlWarningDialog.propTypes={isOpen:_propTypes.default.bool.isRequired,filename:_propTypes.default.string.isRequired,disallowedTags:_propTypes.default.arrayOf(_propTypes.default.string).isRequired,handleClose:_propTypes.default.func.isRequired},module.exports=exports.default},"./src/weblab/dialogs/DisallowedHtmlWarningDialog.story.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.SingleDisallowedTags=exports.MultipleDisallowedTags=void 0;var _addonActions=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.js"),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_DisallowedHtmlWarningDialog=_interopRequireDefault(__webpack_require__("./src/weblab/dialogs/DisallowedHtmlWarningDialog.jsx"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}exports.default={component:_DisallowedHtmlWarningDialog.default};var DEFAULT_PROPS={isOpen:!0,filename:"index.html",handleClose:(0,_addonActions.action)("close"),hideBackdrop:!0},Template=function Template(args){return _react.default.createElement(_DisallowedHtmlWarningDialog.default,_extends({},DEFAULT_PROPS,args))};(exports.SingleDisallowedTags=Template.bind({})).args={disallowedTags:["script"]},(exports.MultipleDisallowedTags=Template.bind({})).args={disallowedTags:["script","meta[http-equiv]"]}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2VibGFiLWRpYWxvZ3MtRGlzYWxsb3dlZEh0bWxXYXJuaW5nRGlhbG9nLXN0b3J5LjUwNDg0YzdiLmlmcmFtZS5idW5kbGUuanMiLCJtYXBwaW5ncyI6InFQQUFBLElBQUFBLG9CQUFBQyx1QkFBQUMsb0JBQUEsa0VBQ0FDLGVBQUFELG9CQUFBLDREQU9BRSxRQUFBSCx1QkFBQUMsb0JBQUEsc0RBQ0FHLFdBQUFKLHVCQUFBQyxvQkFBQSx1Q0FDQUksT0FBQUwsdUJBQUFDLG9CQUFBLGtDQUNBSyxXQUFBTix1QkFBQUMsb0JBQUEsdUNBQ0FNLGFBQUFQLHVCQUFBQyxvQkFBQSx5Q0FDQU8sZ0JBQUFSLHVCQUFBQyxvQkFBQSw0Q0FDQVEsY0FBQVQsdUJBQUFDLG9CQUFBLDBDQUNBUyxTQUFBVix1QkFBQUMsb0JBQUEsb0NBRUFVLGVBQUFYLHVCQUFBQyxvQkFBQSw2Q0FBb0QsU0FBQUQsdUJBQUFZLEtBQUEsT0FBQUEsS0FBQUEsSUFBQUMsV0FBQUQsSUFBQSxTQUFBQSxJQUFBLFVBQUFFLFFBQUFDLEdBQUEsT0FBQUQsUUFBQSxtQkFBQUUsUUFBQSxpQkFBQUEsT0FBQUMsU0FBQSxTQUFBRixHQUFBLGNBQUFBLENBQUEsV0FBQUEsR0FBQSxPQUFBQSxHQUFBLG1CQUFBQyxRQUFBRCxFQUFBRyxjQUFBRixRQUFBRCxJQUFBQyxPQUFBRyxVQUFBLGdCQUFBSixDQUFBLEVBQUFELFFBQUFDLEVBQUEsVUFBQUssV0FBQSxPQUFBQSxTQUFBQyxPQUFBQyxPQUFBRCxPQUFBQyxPQUFBQyxPQUFBLFNBQUFDLFFBQUEsUUFBQUMsRUFBQSxFQUFBQSxFQUFBQyxVQUFBQyxPQUFBRixJQUFBLEtBQUFHLE9BQUFGLFVBQUFELEdBQUEsUUFBQUksT0FBQUQsT0FBQVAsT0FBQUYsVUFBQVcsZUFBQUMsS0FBQUgsT0FBQUMsT0FBQUwsT0FBQUssS0FBQUQsT0FBQUMsS0FBQSxRQUFBTCxNQUFBLEVBQUFKLFNBQUFZLE1BQUEsS0FBQU4sVUFBQSxVQUFBTyxnQkFBQWxCLEVBQUFt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Y0FBQUEsUUFBTyxTQUNwQkMsY0FBYyxHQUdWQyxTQUFXLFNBQVhBLFNBQVdDLE1BQUksT0FDbkI1TCxPQUFBLFFBQUFxRCxjQUFDaUksNkJBQUEsUUFBMkJ2SyxTQUFBLEdBQUt5SyxjQUFtQkksTUFBUSxHQUc3QmpGLFFBQUFBLHFCQUFHZ0YsU0FBU3pLLEtBQUssQ0FBQyxJQUM5QjBLLEtBQU8sQ0FDMUJ2QixlQUFnQixDQUFDLFlBR2dCMUQsUUFBQUEsdUJBQUdnRixTQUFTekssS0FBSyxDQUFDLElBQzlCMEssS0FBTyxDQUM1QnZCLGVBQWdCLENBQUMsU0FBVSxvQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy90ZW1wbGF0ZXMvU2FmZU1hcmtkb3duLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvdGVtcGxhdGVzL3BsdWdpbnMvZXh0ZXJuYWxMaW5rcy5qcyIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvd2VibGFiL1N1cHBvcnRBcnRpY2xlTWFya2Rvd24uanN4Iiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy93ZWJsYWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy93ZWJsYWIvZGlhbG9ncy9EaXNhbGxvd2VkSHRtbFdhcm5pbmdEaWFsb2cuanN4Iiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy93ZWJsYWIvZGlhbG9ncy9EaXNhbGxvd2VkSHRtbFdhcm5pbmdEaWFsb2cuc3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2Nlc3NvciBmcm9tICdAY29kZS1kb3Qtb3JnL3JlZGFjdGFibGUtbWFya2Rvd24nO1xuaW1wb3J0IHtcbiAgZGV0YWlscyxcbiAgY2xpY2thYmxlVGV4dCxcbiAgZXhwYW5kYWJsZUltYWdlcyxcbiAgdmlzdWFsQ29kZUJsb2NrLFxuICB4bWxBc1RvcExldmVsQmxvY2ssXG59IGZyb20gJ0Bjb2RlLWRvdC1vcmcvcmVtYXJrLXBsdWdpbnMnO1xuaW1wb3J0IGRlZmF1bHRTYW5pdGl6YXRpb25TY2hlbWEgZnJvbSAnaGFzdC11dGlsLXNhbml0aXplL2xpYi9naXRodWIuanNvbic7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCByZWh5cGVSYXcgZnJvbSAncmVoeXBlLXJhdyc7XG5pbXBvcnQgcmVoeXBlUmVhY3QgZnJvbSAncmVoeXBlLXJlYWN0JztcbmltcG9ydCByZWh5cGVTYW5pdGl6ZSBmcm9tICdyZWh5cGUtc2FuaXRpemUnO1xuaW1wb3J0IHJlbWFya1JlaHlwZSBmcm9tICdyZW1hcmstcmVoeXBlJztcbmltcG9ydCB1bmlmaWVkIGZyb20gJ3VuaWZpZWQnO1xuXG5pbXBvcnQgZXh0ZXJuYWxMaW5rcyBmcm9tICcuL3BsdWdpbnMvZXh0ZXJuYWxMaW5rcyc7XG5cbi8qKlxuICogQmFzaWMgY29tcG9uZW50IGZvciByZW5kZXJpbmcgYSBtYXJrZG93biBzdHJpbmcgYXMgSFRNTCwgd2l0aCBzYW5pdGl6YXRpb24uXG4gKiBDYW4gc2FmZWx5IHJlbmRlciBtYXJrZG93biBldmVuIGZyb20gdW50cnVzdGVkIHNvdXJjZXMsIHdpdGhvdXQgcG90ZW50aWFsbHlcbiAqIGV4cG9zaW5nIHVzIHRvIGFuIFhTUyBpbmplY3Rpb24uXG4gKi9cbmNsYXNzIFNhZmVNYXJrZG93biBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgbWFya2Rvd246IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBvcGVuRXh0ZXJuYWxMaW5rc0luTmV3VGFiOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIFdlIG9ubHkgb3BlbiBleHRlcm5hbCBsaW5rcyBpbiBhIG5ldyB0YWIgaWYgaXQncyBleHBsaWNpdGx5IHNwZWNpZmllZFxuICAgIC8vIHRoYXQgd2UgZG8gc287IHRoaXMgaXMgYWJzb2x1dGVseSBub3Qgc29tZXRoaW5nIHdlIHdhbnQgdG8gZG8gYXMgYVxuICAgIC8vIGdlbmVyYWwgcHJhY3RpY2UsIGJ1dCB1bmZvcnR1bmF0ZWx5IHRoZXJlIGFyZSBzb21lIHNpdHVhdGlvbnMgaW4gd2hpY2hcbiAgICAvLyBpdCBpcyBjdXJyZW50bHkgYSByZXF1aXJlbWVudC5cbiAgICBjb25zdCBwcm9jZXNzb3IgPSB0aGlzLnByb3BzLm9wZW5FeHRlcm5hbExpbmtzSW5OZXdUYWJcbiAgICAgID8gbWFya2Rvd25Ub1JlYWN0RXh0ZXJuYWxMaW5rc1xuICAgICAgOiBtYXJrZG93blRvUmVhY3Q7XG5cbiAgICBjb25zdCByZW5kZXJlZCA9IE9iamVjdChwcm9jZXNzb3IucHJvY2Vzc1N5bmModGhpcy5wcm9wcy5tYXJrZG93bikucmVzdWx0KTtcblxuICAgIGNvbnN0IG1hcmtkb3duUHJvcHMgPSB7fTtcbiAgICBpZiAodGhpcy5wcm9wcy5jbGFzc05hbWUpIHtcbiAgICAgIG1hcmtkb3duUHJvcHMuY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5jbGFzc05hbWU7XG4gICAgfVxuICAgIC8vIHJlaHlwZS1yZWFjdCB3aWxsIG9ubHkgd3JhcCB0aGUgY29tcGlsZWQgbWFya2Rvd24gaW4gYSA8ZGl2PiB0YWdcbiAgICAvLyBpZiBpdCBuZWVkcyB0byAoaWUsIGlmIHRoZXJlIHdvdWxkIG90aGVyd2lzZSBiZSBtdWx0aXBsZSBlbGVtZW50c1xuICAgIC8vIHJldHVybmVkKSBvciB3ZSdyZSBhc3NpZ25pbmcgcHJvcHMuIFdlIHByZWZlciBjb25zaXN0ZW5jeSBvdmVyIGZsZXhpYmlsaXR5LFxuICAgIC8vIHNvIGhlcmUgd2Ugd3JhcCB0aGUgcmVzdWx0IGluIGEgZGl2IGlmIGl0IHdhc24ndCBhbHJlYWR5XG4gICAgaWYgKFxuICAgICAgcmVuZGVyZWQgJiZcbiAgICAgIHJlbmRlcmVkLnR5cGUgPT09ICdkaXYnICYmXG4gICAgICAhT2JqZWN0LmtleXMobWFya2Rvd25Qcm9wcykubGVuZ3RoXG4gICAgKSB7XG4gICAgICByZXR1cm4gcmVuZGVyZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiA8ZGl2IHsuLi5tYXJrZG93blByb3BzfT57cmVuZGVyZWR9PC9kaXY+O1xuICAgIH1cbiAgfVxufVxuXG4vLyBjcmVhdGUgY3VzdG9tIHNhbml0aXphdGlvbiBzY2hlbWEgYXMgcGVyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vc3ludGF4LXRyZWUvaGFzdC11dGlsLXNhbml0aXplI3NjaGVtYVxuLy8gdG8gc3VwcG9ydCBvdXIgY3VzdG9tIHN5bnRheGVzXG5jb25zdCBzY2hlbWEgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2FuaXRpemF0aW9uU2NoZW1hKTtcblxuLy8gV2UgdXNlIGEgX2xvdF8gb2YgaW1hZ2UgZm9ybWF0dGluZyBzdHVmZiBpbiBvdXJcbi8vIGluc3RydWN0aW9ucywgcGFydGljdWxhcmx5IGluIENTUFxuc2NoZW1hLmF0dHJpYnV0ZXMuaW1nLnB1c2goJ2hlaWdodCcsICd3aWR0aCcpO1xuXG4vLyBBZGQgc3VwcG9ydCBmb3IgZXhwYW5kYWJsZUltYWdlc1xuc2NoZW1hLnRhZ05hbWVzLnB1c2goJ3NwYW4nKTtcbnNjaGVtYS5hdHRyaWJ1dGVzLnNwYW4gPSBbJ2RhdGFVcmwnLCAnY2xhc3NOYW1lJ107XG5cbi8vIEFkZCBzdXBwb3J0IGZvciBpbmxpbmUgc3R5bGVzIChncm9zcylcbi8vIFRPRE8gcmVwbGFjZSBhbGwgaW5saW5lIHN0eWxlcyBpbiBvdXIgY3VycmljdWx1bSBjb250ZW50IHdpdGhcbi8vIHNlbWFudGljYWxseS1zaWduaWZpY2FudCBjb250ZW50XG5zY2hlbWEuYXR0cmlidXRlc1snKiddLnB1c2goJ3N0eWxlJywgJ2NsYXNzTmFtZScpO1xuXG4vLyBDbGlja2FibGVUZXh0IHVzZXMgZGF0YS1pZCBvbiBhIGJvbGQgdGFnLlxuc2NoZW1hLmF0dHJpYnV0ZXNbJ2InXSA9IFsnZGF0YUlkJ107XG5cbi8vIEFkZCBzdXBwb3J0IGZvciBCbG9ja2x5IFhNTFxuc2NoZW1hLmNsb2JiZXIgPSBbXTtcbmNvbnN0IGJsb2NrbHlUYWdzID0gW1xuICAnYmxvY2snLFxuICAnZnVuY3Rpb25hbF9pbnB1dCcsXG4gICdtdXRhdGlvbicsXG4gICduZXh0JyxcbiAgJ3N0YXRlbWVudCcsXG4gICd0aXRsZScsXG4gICdmaWVsZCcsXG4gICd2YWx1ZScsXG4gICd4bWwnLFxuXTtcbnNjaGVtYS50YWdOYW1lcyA9IHNjaGVtYS50YWdOYW1lcy5jb25jYXQoYmxvY2tseVRhZ3MpO1xubGV0IGJsb2NrbHlDb21wb25lbnRXcmFwcGVycyA9IHt9O1xuYmxvY2tseVRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICBzY2hlbWEuYXR0cmlidXRlc1t0YWddID0gWydibG9ja190ZXh0JywgJ2lkJywgJ2lubGluZScsICduYW1lJywgJ3R5cGUnXTtcblxuICAvLyBDcmVhdGUgYSBSZWFjdCBjb21wb25lbnQgdG8gd3JhcCBlYWNoIEJsb2NrbHkgdGFnLiBTaW5jZSB0aGVzZSBlbGVtZW50cyB1bHRpbWF0ZWx5XG4gIC8vIHJlbmRlciBhcyBSZWFjdCBjb21wb25lbnRzLCBjcmVhdGluZyBhIHdyYXBwZXIgbWFrZXMgdGhlbSB2YWxpZCAod2hlcmVhcyA8eG1sPlxuICAvLyBpcyBub3QgYSB2YWxpZCBSZWFjdCB0YWcpLlxuICBibG9ja2x5Q29tcG9uZW50V3JhcHBlcnNbdGFnXSA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIGNvbnN0IEJsb2NrbHlFbGVtZW50ID0gdGFnO1xuICAgIC8vIFRoZSBcImlzXCIgYXR0cmlidXRlIHByZXZlbnRzIFJlYWN0IGZyb20gd2FybmluZyBhYm91dCB1bnJlY29nbml6ZWQgdGFnczpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzExMTg0I2lzc3VlY29tbWVudC0zMzU5NDI0MzlcbiAgICByZXR1cm4gPEJsb2NrbHlFbGVtZW50IGlzPXt0YWd9IHsuLi5wcm9wc30gLz47XG4gIH07XG59KTtcbmNvbnN0IG1hcmtkb3duVG9SZWFjdCA9IHVuaWZpZWQoKVxuICAudXNlKFByb2Nlc3Nvci5nZXRQYXJzZXIoKSlcbiAgLy8gaW5jbHVkZSBjdXN0b20gcGx1Z2luc1xuICAudXNlKFtcbiAgICBjbGlja2FibGVUZXh0LFxuICAgIGV4cGFuZGFibGVJbWFnZXMsXG4gICAgdmlzdWFsQ29kZUJsb2NrLFxuICAgIHhtbEFzVG9wTGV2ZWxCbG9jayxcbiAgICBkZXRhaWxzLFxuICBdKVxuICAvLyBjb252ZXJ0IG1hcmtkb3duIHRvIGFuIEhUTUwgQWJzdHJhY3QgU3ludGF4IFRyZWUgKEhBU1QpXG4gIC51c2UocmVtYXJrUmVoeXBlLCB7XG4gICAgLy8gaW5jbHVkZSBhbnkgcmF3IEhUTUwgaW4gdGhlIG1hcmtkb3duIGFzIHJhdyBIVE1MIG5vZGVzIGluIHRoZSBIQVNUXG4gICAgYWxsb3dEYW5nZXJvdXNIdG1sOiB0cnVlLFxuICB9KVxuICAvLyBwYXJzZSB0aGUgcmF3IEhUTUwgbm9kZXMgaW4gdGhlIEhBU1QgdG8gYWN0dWFsIEhBU1Qgbm9kZXNcbiAgLnVzZShyZWh5cGVSYXcpXG4gIC8vIHNhbml0aXplIHRoZSBIQVNUXG4gIC51c2UocmVoeXBlU2FuaXRpemUsIHNjaGVtYSlcbiAgLy8gY29udmVydCB0aGUgSEFTVCB0byBSZWFjdFxuICAudXNlKHJlaHlwZVJlYWN0LCB7XG4gICAgY3JlYXRlRWxlbWVudDogUmVhY3QuY3JlYXRlRWxlbWVudCxcbiAgICAvLyBVc2UgUmVhY3QgY29tcG9uZW50IHdyYXBwZXJzIGZvciBCbG9ja2x5IFhNTCBlbGVtZW50cyB0byBwcmV2ZW50XG4gICAgLy8gUmVhY3QgZnJvbSB3YXJuaW5nIHVzIGFib3V0IGludmFsaWQgY29tcG9uZW50cy5cbiAgICBjb21wb25lbnRzOiBibG9ja2x5Q29tcG9uZW50V3JhcHBlcnMsXG4gIH0pO1xuXG5jb25zdCBtYXJrZG93blRvUmVhY3RFeHRlcm5hbExpbmtzID0gbWFya2Rvd25Ub1JlYWN0KCkudXNlKGV4dGVybmFsTGlua3MsIHtcbiAgbGlua3M6ICdhbGwnLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNhZmVNYXJrZG93bjtcbiIsIi8qKlxuICogT3BlbiBleHRlcm5hbCBsaW5rcyBpbiBhIG5ldyB0YWIuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGV4dGVybmFsTGlua3Mob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IFBhcnNlciA9IHRoaXMuUGFyc2VyO1xuICBjb25zdCB0b2tlbml6ZXJzID0gUGFyc2VyLnByb3RvdHlwZS5pbmxpbmVUb2tlbml6ZXJzO1xuICBjb25zdCBvcmlnaW5hbCA9IHRva2VuaXplcnMubGluaztcbiAgY29uc3QgYWxsID0gb3B0aW9ucy5saW5rcyA9PT0gJ2FsbCc7XG5cbiAgdG9rZW5pemVycy5saW5rID0gZnVuY3Rpb24gKGVhdCwgdmFsdWUsIHNpbGVudCkge1xuICAgIGNvbnN0IGxpbmsgPSBvcmlnaW5hbC5jYWxsKHRoaXMsIGVhdCwgdmFsdWUsIHNpbGVudCk7XG4gICAgaWYgKGxpbmsgJiYgbGluay50eXBlID09PSAnbGluaycgJiYgKGFsbCB8fCBpc0V4dGVybmFsTGluayhsaW5rLnVybCkpKSB7XG4gICAgICBsaW5rLmRhdGEgPSBsaW5rLmRhdGEgfHwge307XG4gICAgICBsaW5rLmRhdGEuaFByb3BlcnRpZXMgPSBsaW5rLmRhdGEuaFByb3BlcnRpZXMgfHwge307XG5cbiAgICAgIGNvbnN0IHByb3BzID0gbGluay5kYXRhLmhQcm9wZXJ0aWVzO1xuICAgICAgcHJvcHMudGFyZ2V0ID0gcHJvcHMudGFyZ2V0IHx8ICdfYmxhbmsnO1xuICAgICAgcHJvcHMucmVsID0gJ25vcmVmZXJyZXIgbm9vcGVuZXInO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5rO1xuICB9O1xuICB0b2tlbml6ZXJzLmxpbmsubG9jYXRvciA9IG9yaWdpbmFsLmxvY2F0b3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0V4dGVybmFsTGluayh1cmwpIHtcbiAgcmV0dXJuICEvaHR0cHM/OlxcL1xcLyhbXi5dK1xcLikqY29kZS5vcmcoOlswLTldKyk/XFwvLy50ZXN0KGZ1bGx5UXVhbGlmaWVkKHVybCkpO1xufVxuXG5sZXQgYTtcbmZ1bmN0aW9uIGZ1bGx5UXVhbGlmaWVkKHBhdGgpIHtcbiAgYSA9IGEgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICBhLmhyZWYgPSBwYXRoO1xuICByZXR1cm4gYS5ocmVmO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IFNhZmVNYXJrZG93biBmcm9tICdAY2RvL2FwcHMvdGVtcGxhdGVzL1NhZmVNYXJrZG93bic7XG5pbXBvcnQge1NVUFBPUlRfQVJUSUNMRV9VUkx9IGZyb20gJ0BjZG8vYXBwcy93ZWJsYWIvY29uc3RhbnRzJztcbmltcG9ydCB3ZWJsYWJJMThuIGZyb20gJ0BjZG8vd2VibGFiL2xvY2FsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN1cHBvcnRBcnRpY2xlTWFya2Rvd24oKSB7XG4gIHJldHVybiAoXG4gICAgPFNhZmVNYXJrZG93blxuICAgICAgbWFya2Rvd249e3dlYmxhYkkxOG4udHJvdWJsZXNob290aW5nU3VwcG9ydCh7dXJsOiBTVVBQT1JUX0FSVElDTEVfVVJMfSl9XG4gICAgICBvcGVuRXh0ZXJuYWxMaW5rc0luTmV3VGFiXG4gICAgLz5cbiAgKTtcbn1cbiIsImltcG9ydCB7bWFrZUVudW19IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IFNVUFBPUlRfQVJUSUNMRV9VUkwgPVxuICAnaHR0cHM6Ly9zdXBwb3J0LmNvZGUub3JnL2hjL2VuLXVzL2FydGljbGVzLzM2MDAxNjgwNDg3MSc7XG5cbmV4cG9ydCBjb25zdCBGYXRhbEVycm9yVHlwZSA9IG1ha2VFbnVtKFxuICAnRGVmYXVsdCcsXG4gICdMb2FkRmFpbHVyZScsXG4gICdSZXNldEZhaWx1cmUnXG4pO1xuXG5leHBvcnQgY29uc3QgRklMRV9TWVNURU1fRVJST1IgPSAnRUZJTEVTWVNURU1FUlJPUic7XG5leHBvcnQgY29uc3QgQlJBTUJMRV9SRUFEWV9TVEFURSA9ICdicmFtYmxlOnJlYWR5VG9Nb3VudCc7XG4iLCJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IFN0eWxpemVkQmFzZURpYWxvZywge1xuICBGb290ZXJCdXR0b24sXG59IGZyb20gJ0BjZG8vYXBwcy9zaGFyZWRDb21wb25lbnRzL1N0eWxpemVkQmFzZURpYWxvZyc7XG5pbXBvcnQgU2FmZU1hcmtkb3duIGZyb20gJ0BjZG8vYXBwcy90ZW1wbGF0ZXMvU2FmZU1hcmtkb3duJztcbmltcG9ydCBTdXBwb3J0QXJ0aWNsZU1hcmtkb3duIGZyb20gJ0BjZG8vYXBwcy93ZWJsYWIvU3VwcG9ydEFydGljbGVNYXJrZG93bic7XG5pbXBvcnQgY29tbW9uSTE4biBmcm9tICdAY2RvL2xvY2FsZSc7XG5pbXBvcnQgd2VibGFiSTE4biBmcm9tICdAY2RvL3dlYmxhYi9sb2NhbGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEaXNhbGxvd2VkSHRtbFdhcm5pbmdEaWFsb2coe1xuICBpc09wZW4sXG4gIGZpbGVuYW1lLFxuICBkaXNhbGxvd2VkVGFncyxcbiAgaGFuZGxlQ2xvc2UsXG4gIC4uLnByb3BzXG59KSB7XG4gIGNvbnN0IGJvZHkgPSAoXG4gICAgPGRpdj5cbiAgICAgIDxTYWZlTWFya2Rvd25cbiAgICAgICAgbWFya2Rvd249e3dlYmxhYkkxOG4uZGlzYWxsb3dlZEh0bWwoe1xuICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIGRpc2FsbG93ZWRUYWdzOiBkaXNhbGxvd2VkVGFncy5qb2luKCcsICcpLFxuICAgICAgICB9KX1cbiAgICAgIC8+XG4gICAgICA8U3VwcG9ydEFydGljbGVNYXJrZG93biAvPlxuICAgIDwvZGl2PlxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPFN0eWxpemVkQmFzZURpYWxvZ1xuICAgICAgey4uLnByb3BzfVxuICAgICAgaXNPcGVuPXtpc09wZW59XG4gICAgICB0aXRsZT17Y29tbW9uSTE4bi53YXJuaW5nKCl9XG4gICAgICBib2R5PXtib2R5fVxuICAgICAgaGFuZGxlQ2xvc2U9e2hhbmRsZUNsb3NlfVxuICAgICAgcmVuZGVyRm9vdGVyPXsoKSA9PiAoXG4gICAgICAgIDxGb290ZXJCdXR0b25cbiAgICAgICAgICB0eXBlPVwiY29uZmlybVwiXG4gICAgICAgICAgdGV4dD17Y29tbW9uSTE4bi5kaWFsb2dPSygpfVxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICAvPlxuICApO1xufVxuXG5EaXNhbGxvd2VkSHRtbFdhcm5pbmdEaWFsb2cucHJvcFR5cGVzID0ge1xuICBpc09wZW46IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIGZpbGVuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIGRpc2FsbG93ZWRUYWdzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKS5pc1JlcXVpcmVkLFxuICBoYW5kbGVDbG9zZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbn07XG4iLCJpbXBvcnQge2FjdGlvbn0gZnJvbSAnQHN0b3J5Ym9vay9hZGRvbi1hY3Rpb25zJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBEaXNhbGxvd2VkSHRtbFdhcm5pbmdEaWFsb2cgZnJvbSAnLi9EaXNhbGxvd2VkSHRtbFdhcm5pbmdEaWFsb2cnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudDogRGlzYWxsb3dlZEh0bWxXYXJuaW5nRGlhbG9nLFxufTtcblxuY29uc3QgREVGQVVMVF9QUk9QUyA9IHtcbiAgaXNPcGVuOiB0cnVlLFxuICBmaWxlbmFtZTogJ2luZGV4Lmh0bWwnLFxuICBoYW5kbGVDbG9zZTogYWN0aW9uKCdjbG9zZScpLFxuICBoaWRlQmFja2Ryb3A6IHRydWUsXG59O1xuXG5jb25zdCBUZW1wbGF0ZSA9IGFyZ3MgPT4gKFxuICA8RGlzYWxsb3dlZEh0bWxXYXJuaW5nRGlhbG9nIHsuLi5ERUZBVUxUX1BST1BTfSB7Li4uYXJnc30gLz5cbik7XG5cbmV4cG9ydCBjb25zdCBTaW5nbGVEaXNhbGxvd2VkVGFncyA9IFRlbXBsYXRlLmJpbmQoe30pO1xuU2luZ2xlRGlzYWxsb3dlZFRhZ3MuYXJncyA9IHtcbiAgZGlzYWxsb3dlZFRhZ3M6IFsnc2NyaXB0J10sXG59O1xuXG5leHBvcnQgY29uc3QgTXVsdGlwbGVEaXNhbGxvd2VkVGFncyA9IFRlbXBsYXRlLmJpbmQoe30pO1xuTXVsdGlwbGVEaXNhbGxvd2VkVGFncy5hcmdzID0ge1xuICBkaXNhbGxvd2VkVGFnczogWydzY3JpcHQnLCAnbWV0YVtodHRwLWVxdWl2XSddLFxufTtcbiJdLCJuYW1lcyI6WyJfcmVkYWN0YWJsZU1hcmtkb3duIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcmVtYXJrUGx1Z2lucyIsIl9naXRodWIiLCJfcHJvcFR5cGVzIiwiX3JlYWN0IiwiX3JlaHlwZVJhdyIsIl9yZWh5cGVSZWFjdCIsIl9yZWh5cGVTYW5pdGl6ZSIsIl9yZW1hcmtSZWh5cGUiLCJfdW5pZmllZCIsIl9leHRlcm5hbExpbmtzIiwib2JqIiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJvIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIl9leHRlbmRzIiwiT2JqZWN0IiwiYXNzaWduIiwiYmluZCIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsIl9zZXRQcm90b3R5cGVPZiIsInAiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIlNhZmVNYXJrZG93biIsIl9SZWFjdCRDb21wb25lbnQiLCJfaW5oZXJpdHNMb29zZSIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInJlbmRlciIsInByb2Nlc3NvciIsInRoaXMiLCJwcm9wcyIsIm9wZW5FeHRlcm5hbExpbmtzSW5OZXdUYWIiLCJtYXJrZG93blRvUmVhY3RFeHRlcm5hbExpbmtzIiwibWFya2Rvd25Ub1JlYWN0IiwicmVuZGVyZWQiLCJwcm9jZXNzU3luYyIsIm1hcmtkb3duIiwicmVzdWx0IiwibWFya2Rvd25Qcm9wcyIsImNsYXNzTmFtZSIsInR5cGUiLCJrZXlzIiwiY3JlYXRlRWxlbWVudCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiX2RlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsInQiLCJfdG9QcmltaXRpdmUiLCJyIiwiZSIsInRvUHJpbWl0aXZlIiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiTnVtYmVyIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwiYm9vbCIsInNjaGVtYSIsImRlZmF1bHRTYW5pdGl6YXRpb25TY2hlbWEiLCJhdHRyaWJ1dGVzIiwiaW1nIiwicHVzaCIsInRhZ05hbWVzIiwic3BhbiIsImNsb2JiZXIiLCJibG9ja2x5VGFncyIsImNvbmNhdCIsImJsb2NrbHlDb21wb25lbnRXcmFwcGVycyIsImZvckVhY2giLCJ0YWciLCJCbG9ja2x5RWxlbWVudCIsImlzIiwidW5pZmllZCIsInVzZSIsIlByb2Nlc3NvciIsImdldFBhcnNlciIsImNsaWNrYWJsZVRleHQiLCJleHBhbmRhYmxlSW1hZ2VzIiwidmlzdWFsQ29kZUJsb2NrIiwieG1sQXNUb3BMZXZlbEJsb2NrIiwiZGV0YWlscyIsInJlbWFya1JlaHlwZSIsImFsbG93RGFuZ2Vyb3VzSHRtbCIsInJlaHlwZVJhdyIsInJlaHlwZVNhbml0aXplIiwicmVoeXBlUmVhY3QiLCJjb21wb25lbnRzIiwiZXh0ZXJuYWxMaW5rcyIsImxpbmtzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlzRXh0ZXJuYWxMaW5rIiwidXJsIiwidGVzdCIsImZ1bGx5UXVhbGlmaWVkIiwicGF0aCIsImEiLCJkb2N1bWVudCIsImhyZWYiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwidG9rZW5pemVycyIsIlBhcnNlciIsImlubGluZVRva2VuaXplcnMiLCJvcmlnaW5hbCIsImxpbmsiLCJhbGwiLCJlYXQiLCJzaWxlbnQiLCJkYXRhIiwiaFByb3BlcnRpZXMiLCJyZWwiLCJsb2NhdG9yIiwiU3VwcG9ydEFydGljbGVNYXJrZG93biIsIl9TYWZlTWFya2Rvd24iLCJ3ZWJsYWJJMThuIiwidHJvdWJsZXNob290aW5nU3VwcG9ydCIsIlNVUFBPUlRfQVJUSUNMRV9VUkwiLCJfY29uc3RhbnRzIiwiX2xvY2FsZSIsIl91dGlscyIsIm1ha2VFbnVtIiwiX1N0eWxpemVkQmFzZURpYWxvZyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiaGFzIiwiZ2V0IiwibiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJzZXQiLCJfU3VwcG9ydEFydGljbGVNYXJrZG93biIsIl9sb2NhbGUyIiwiX2V4Y2x1ZGVkIiwiV2Vha01hcCIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsImV4Y2x1ZGVkIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCJzb3VyY2VLZXlzIiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5U3ltYm9scyIsInNvdXJjZVN5bWJvbEtleXMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIkRpc2FsbG93ZWRIdG1sV2FybmluZ0RpYWxvZyIsIl9yZWYiLCJpc09wZW4iLCJmaWxlbmFtZSIsImRpc2FsbG93ZWRUYWdzIiwiaGFuZGxlQ2xvc2UiLCJib2R5IiwiZGlzYWxsb3dlZEh0bWwiLCJqb2luIiwidGl0bGUiLCJjb21tb25JMThuIiwid2FybmluZyIsInJlbmRlckZvb3RlciIsIkZvb3RlckJ1dHRvbiIsInRleHQiLCJkaWFsb2dPSyIsIm9uQ2xpY2siLCJwcm9wVHlwZXMiLCJhcnJheU9mIiwiZnVuYyIsIl9hZGRvbkFjdGlvbnMiLCJfRGlzYWxsb3dlZEh0bWxXYXJuaW5nRGlhbG9nIiwiY29tcG9uZW50IiwiREVGQVVMVF9QUk9QUyIsImFjdGlvbiIsImhpZGVCYWNrZHJvcCIsIlRlbXBsYXRlIiwiYXJncyJdLCJzb3VyY2VSb290IjoiIn0=