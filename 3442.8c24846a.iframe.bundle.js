"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[3442],{"./src/code-studio/components/AddAssetButtonRow.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.assetButtonStyles=void 0;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_AssetUploader=_interopRequireDefault(__webpack_require__("./src/code-studio/components/AssetUploader.jsx")),_Button=_interopRequireDefault(__webpack_require__("./src/templates/Button.jsx")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_browserDetector=__webpack_require__("./src/util/browser-detector.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var assetButtonStyles={button:{paddingLeft:10,paddingRight:10,marginTop:5,fontSize:"large",fontWeight:"lighter",marginRight:10},buttonRow:{display:"flex",flexFlow:"row",alignItems:"center"}};exports.assetButtonStyles=assetButtonStyles;var RecordButton=function RecordButton(_ref){var onSelectRecord=_ref.onSelectRecord,disabled=_ref.disabled;return _react.default.createElement("span",null,_react.default.createElement(_Button.default,{onClick:onSelectRecord,id:"record-asset",className:"share",text:_locale.default.recordAudio(),icon:"microphone",style:assetButtonStyles.button,size:"large",disabled}))};RecordButton.propTypes={onSelectRecord:_propTypes.default.func,disabled:_propTypes.default.bool};var AddAssetButtonRow=function(_React$Component){function AddAssetButtonRow(){return _React$Component.apply(this,arguments)||this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(AddAssetButtonRow,_React$Component),AddAssetButtonRow.prototype.render=function render(){var shouldShowRecordButton=!this.props.hideAudioRecording;return(0,_browserDetector.isIE11)()&&(shouldShowRecordButton=!1),_react.default.createElement("div",{style:assetButtonStyles.buttonRow},_react.default.createElement(_AssetUploader.default,{uploadsEnabled:this.props.uploadsEnabled,allowedExtensions:this.props.allowedExtensions,api:this.props.api,onUploadStart:this.props.onUploadStart,onUploadDone:this.props.onUploadDone,onUploadError:this.props.onUploadError}),shouldShowRecordButton&&_react.default.createElement(RecordButton,{onSelectRecord:this.props.onSelectRecord,disabled:!this.props.uploadsEnabled||this.props.recordDisabled}),_react.default.createElement("span",{id:"manage-asset-status"},this.props.statusMessage))},AddAssetButtonRow}(_react.default.Component);exports.default=AddAssetButtonRow,function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(AddAssetButtonRow,"propTypes",{uploadsEnabled:_propTypes.default.bool.isRequired,allowedExtensions:_propTypes.default.string,api:_propTypes.default.object,onUploadStart:_propTypes.default.func.isRequired,onUploadDone:_propTypes.default.func.isRequired,onUploadError:_propTypes.default.func.isRequired,onSelectRecord:_propTypes.default.func.isRequired,statusMessage:_propTypes.default.string,recordDisabled:_propTypes.default.bool,hideAudioRecording:_propTypes.default.bool})},"./src/code-studio/components/AssetManager.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ImageMode=exports.AudioErrorType=void 0;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_clientApi=__webpack_require__("./src/clientApi.js"),_AssetRow=_interopRequireDefault(__webpack_require__("./src/code-studio/components/AssetRow.jsx")),_assetListStore=_interopRequireDefault(__webpack_require__("./src/code-studio/assets/assetListStore.js")),_AudioRecorder=_interopRequireDefault(__webpack_require__("./src/code-studio/components/AudioRecorder.jsx")),_firehose=_interopRequireDefault(__webpack_require__("./src/lib/util/firehose.js")),_AddAssetButtonRow=_interopRequireDefault(__webpack_require__("./src/code-studio/components/AddAssetButtonRow.jsx")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_assetPrefix=__webpack_require__("./src/assetManagement/assetPrefix.js"),_recorders=__webpack_require__("./src/code-studio/components/recorders.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var AudioErrorType={NONE:"none",INITIALIZE:"initialize",SAVE:"save"};exports.AudioErrorType=AudioErrorType;exports.ImageMode={FILE:"file",ICON:"icon",URL:"url",DEFAULT:"default"};var errorMessages={403:"Quota exceeded. Please delete some files and try again.",413:"The file is too large.",415:"This type of file is not supported.",500:"The server responded with an error.",unknown:"An unknown error occurred."};function getErrorMessage(status){return errorMessages[status]||errorMessages.unknown}var AssetManager=function(_React$Component){function AssetManager(props){var _this;return _defineProperty(_assertThisInitialized(_this=_React$Component.call(this,props)||this),"onStarterAssetsReceived",(function(result){var response=JSON.parse(result.response);_this.setState({starterAssets:response.starter_assets})})),_defineProperty(_assertThisInitialized(_this),"onStarterAssetsFailure",(function(xhr){_this.setState({statusMessage:"Error loading starter assets: "+getErrorMessage(xhr.status)})})),_defineProperty(_assertThisInitialized(_this),"onAssetListReceived",(function(result){_assetListStore.default.reset(result.files),_this.setState({assets:_assetListStore.default.list(_this.props.allowedExtensions)})})),_defineProperty(_assertThisInitialized(_this),"onAssetListFailure",(function(_ref){var status=_ref.status;_this.props.useFilesApi&&404===status?_this.onAssetListReceived({files:[]}):_this.setState({statusMessage:"Error loading asset list: "+getErrorMessage(status)})})),_defineProperty(_assertThisInitialized(_this),"onUploadStart",(function(data){_this.setState({statusMessage:"Uploading..."}),data.submit()})),_defineProperty(_assertThisInitialized(_this),"onUploadDone",(function(result){var newState={statusMessage:'File "'+result.filename+'" successfully uploaded!'};_this.props.isStartMode?newState.starterAssets=[].concat(_toConsumableArray(_this.state.starterAssets),[result]):(_assetListStore.default.add(result),_this.props.assetsChanged&&_this.props.assetsChanged(),newState.assets=_assetListStore.default.list(_this.props.allowedExtensions)),_this.setState(newState)})),_defineProperty(_assertThisInitialized(_this),"onUploadError",(function(status){_this.setState({statusMessage:"Error uploading file: "+getErrorMessage(status)}),_firehose.default.putRecord({study:"project-data-integrity",study_group:"v4",event:"asset-upload-error",project_id:_this.props.projectId,data_int:status})})),_defineProperty(_assertThisInitialized(_this),"onSelectRecord",(function(){_this.setState({recordingAudio:!0})})),_defineProperty(_assertThisInitialized(_this),"deleteAssetRow",(function(name){_assetListStore.default.remove(name),_this.props.assetsChanged&&_this.props.assetsChanged(),_firehose.default.putRecord({study:"delete-asset",study_group:_this.props.assetChosen&&"function"==typeof _this.props.assetChosen?"choose-assets":"manage-assets",event:"confirm",project_id:_this.props.projectId,data_json:JSON.stringify({assetName:name,elementId:_this.props.elementId})}),_this.setState({assets:_assetListStore.default.list(_this.props.allowedExtensions),statusMessage:'File "'.concat(name,'" successfully deleted!')})})),_defineProperty(_assertThisInitialized(_this),"deleteStarterAssetRow",(function(name){var starterAssets=_toConsumableArray(_this.state.starterAssets).filter((function(asset){return asset.filename!==name}));_this.setState({starterAssets,statusMessage:'File "'.concat(name,'" successfully deleted!')})})),_defineProperty(_assertThisInitialized(_this),"afterAudioSaved",(function(err){_this.setState({recordingAudio:!1,audioErrorType:err})})),_defineProperty(_assertThisInitialized(_this),"defaultAssetProps",(function(asset){return{key:asset.filename,name:asset.filename,timestamp:asset.timestamp,type:asset.category,size:asset.size,soundPlayer:_this.props.soundPlayer,imagePicker:_this.props.imagePicker,projectId:_this.props.projectId,elementId:_this.props.elementId}})),_defineProperty(_assertThisInitialized(_this),"getStarterAssetRows",(function(){if(!_this.props.levelName||0===_this.state.starterAssets.length)return[];var boundApi=_clientApi.starterAssets.withLevelName(_this.props.levelName);return _this.state.starterAssets.map((function(asset){return _react.default.createElement(_AssetRow.default,_extends({},_this.defaultAssetProps(asset),{api:boundApi,onChoose:_this.props.assetChosen&&function(){return _this.props.assetChosen(_assetPrefix.STARTER_ASSET_PREFIX+asset.filename,asset.timestamp)},onDelete:function onDelete(){return _this.deleteStarterAssetRow(asset.filename)},levelName:_this.props.levelName,hideDelete:!_this.props.isStartMode}))}))})),_defineProperty(_assertThisInitialized(_this),"getAssetRows",(function(){var api=_this.props.useFilesApi?_clientApi.files:_clientApi.assets;return _this.state.assets.map((function(asset){return _react.default.createElement(_AssetRow.default,_extends({},_this.defaultAssetProps(asset),{api,onChoose:_this.props.assetChosen&&function(){return _this.props.assetChosen(asset.filename,asset.timestamp)},onDelete:function onDelete(){return _this.deleteAssetRow(asset.filename)}}))}))})),_defineProperty(_assertThisInitialized(_this),"uploadApi",(function(){if(_this.props.isStartMode)return _clientApi.starterAssets.withLevelName(_this.props.levelName);var api=_this.props.useFilesApi?_clientApi.files:_clientApi.assets;return api.getProjectId()||(api=api.withProjectId(_this.props.projectId)),api})),_this.state={assets:null,starterAssets:null,statusMessage:props.uploadsEnabled?"":"This project has been reported for abusive content, so uploading new assets is disabled.",recordingAudio:!1,audioErrorType:AudioErrorType.NONE},_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(AssetManager,_React$Component);var _proto=AssetManager.prototype;return _proto.componentDidMount=function componentDidMount(){this.props.levelName?_clientApi.starterAssets.getStarterAssets(this.props.levelName,this.onStarterAssetsReceived,this.onStarterAssetsFailure):this.setState({starterAssets:[]});var api=this.props.useFilesApi?_clientApi.files:_clientApi.assets;api.getProjectId()||(api=api.withProjectId(this.props.projectId)),api.getProjectId()?api.getFiles(this.onAssetListReceived,this.onAssetListFailure):this.setState({assets:[]})},_proto.render=function render(){var assetList,displayAudioRecorder=this.state.audioErrorType!==AudioErrorType.INITIALIZE&&this.state.recordingAudio,buttons=_react.default.createElement("div",null,this.state.audioErrorType===AudioErrorType.SAVE&&_react.default.createElement("div",null,_locale.default.audioSaveError()),this.state.audioErrorType===AudioErrorType.INITIALIZE&&_react.default.createElement("div",null,_locale.default.audioInitializeError()),displayAudioRecorder&&_react.default.createElement(_AudioRecorder.default,{onUploadDone:this.onUploadDone,afterAudioSaved:this.afterAudioSaved,recordingFileType:this.props.recordingFileType,imagePicker:this.props.imagePicker}),_react.default.createElement(_AddAssetButtonRow.default,{uploadsEnabled:this.props.uploadsEnabled,allowedExtensions:this.props.allowedExtensions,api:this.uploadApi(),onUploadStart:this.onUploadStart,onUploadDone:this.onUploadDone,onUploadError:this.onUploadError,onSelectRecord:this.onSelectRecord,statusMessage:this.state.statusMessage,recordDisabled:this.state.recordingAudio,hideAudioRecording:this.props.disableAudioRecording}));if(null===this.state.assets||null===this.state.starterAssets)assetList=_react.default.createElement("div",{style:{margin:"1em 0",textAlign:"center"}},_react.default.createElement("i",{className:"fa fa-spinner fa-spin",style:{fontSize:"32px"}}));else if(0===this.state.assets.length&&0===this.state.starterAssets.length){var emptyText=".mp3"===this.props.allowedExtensions?_react.default.createElement("div",null,_react.default.createElement("div",null,_locale.default.manageAssetsSoundLibraryMessage({soundLibraryButtonText:_locale.default.soundLibrary()})),_react.default.createElement("div",null,_locale.default.manageAssetsSoundUploadMessage({assetUploaderButtonText:_locale.default.uploadFile()}))):_react.default.createElement("div",null,_locale.default.manageAssetsDefaultMessage({assetUploaderButtonText:_locale.default.uploadFile()}));assetList=_react.default.createElement("div",null,_react.default.createElement("div",{style:styles.emptyText},emptyText),buttons)}else{var rows=[].concat(_toConsumableArray(this.getStarterAssetRows()),_toConsumableArray(this.getAssetRows()));assetList=_react.default.createElement("div",null,_react.default.createElement("div",{style:{maxHeight:"380px",overflowY:"scroll",margin:"1em 0"}},_react.default.createElement("table",{style:{width:"100%"}},_react.default.createElement("tbody",null,rows))),buttons)}return assetList},AssetManager}(_react.default.Component);exports.default=AssetManager,_defineProperty(AssetManager,"propTypes",{assetChosen:_propTypes.default.func,assetsChanged:_propTypes.default.func,allowedExtensions:_propTypes.default.string,uploadsEnabled:_propTypes.default.bool.isRequired,useFilesApi:_propTypes.default.bool,soundPlayer:_propTypes.default.object,disableAudioRecording:_propTypes.default.bool,recordingFileType:_propTypes.default.oneOf(Object.values(_recorders.RecordingFileType)),projectId:_propTypes.default.string,levelName:_propTypes.default.string,isStartMode:_propTypes.default.bool,imagePicker:_propTypes.default.bool,elementId:_propTypes.default.string});var styles={emptyText:{margin:"1em 0",fontSize:"16px",lineHeight:"20px"}}},"./src/code-studio/components/AssetRow.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_AssetThumbnail=_interopRequireDefault(__webpack_require__("./src/code-studio/components/AssetThumbnail.jsx")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_firehose=_interopRequireDefault(__webpack_require__("./src/lib/util/firehose.js")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_jquery=_interopRequireDefault(__webpack_require__("./node_modules/jquery/dist/jquery.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var AssetRow=function(_React$Component){function AssetRow(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_assertThisInitialized(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this),"state",{action:"normal",actionText:"",attemptedUsedDelete:!1}),_defineProperty(_assertThisInitialized(_this),"confirmDelete",(function(){_this.setState({action:"confirming delete",actionText:""}),_firehose.default.putRecord({study:"delete-asset",study_group:_this.props.onChoose&&"function"==typeof _this.props.onChoose?"choose-assets":"manage-assets",event:"initiate",project_id:_this.props.projectId,data_json:JSON.stringify({assetName:_this.props.name,elementId:_this.props.elementId})})})),_defineProperty(_assertThisInitialized(_this),"cancelDelete",(function(){_this.setState({action:"normal",actionText:""})})),_defineProperty(_assertThisInitialized(_this),"handleDelete",(function(){_this.setState({action:"deleting",actionText:""}),_this.props.api.deleteFile(_this.props.name,_this.props.onDelete,(function(){_this.setState({action:"confirming delete",actionText:_locale.default.errorDeleting()})}))})),_defineProperty(_assertThisInitialized(_this),"chooseAsset",(function(){_this.props.imagePicker||_firehose.default.putRecord({study:"sound-dialog-2",study_group:"library-tab",event:"choose-uploaded-sound",data_json:_this.props.name},{includeUserId:!0}),_this.props.onChoose()})),_defineProperty(_assertThisInitialized(_this),"attemptBadDelete",(function(){_this.setState({attemptedUsedDelete:!0})})),_this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(AssetRow,_React$Component),AssetRow.prototype.render=function render(){var actions,flex;this.props.onChoose?flex=_react.default.createElement("button",{type:"button",onClick:this.chooseAsset},_locale.default.choose()):flex=(this.props.size/1e3).toFixed(2)+" kb";var usage=(0,_jquery.default)("#visualization").find('[src*="'.concat(encodeURIComponent(this.props.name),'"]')).length;switch(this.state.action){case"normal":actions=_react.default.createElement("td",{width:"250",style:{textAlign:"right"}},flex,!this.props.hideDelete&&_react.default.createElement("button",{type:"button",className:usage>0?"":"btn-danger",onClick:usage>0?this.attemptBadDelete:this.confirmDelete},_react.default.createElement("i",{className:"fa fa-trash-o"})),this.state.attemptedUsedDelete&&_react.default.createElement("div",{style:styles.deleteWarning},_locale.default.cannotDeleteUsedImage()));break;case"confirming delete":actions=_react.default.createElement("td",{width:"250",style:{textAlign:"right"}},_react.default.createElement("button",{type:"button",className:"btn-danger",onClick:this.handleDelete},"Delete File"),_react.default.createElement("button",{type:"button",onClick:this.cancelDelete},"Cancel"),_react.default.createElement("div",{style:styles.deleteWarning},_locale.default.confirmDeleteExplanation()),this.state.actionText);break;case"deleting":actions=_react.default.createElement("td",{width:"250",style:{textAlign:"right"}},_react.default.createElement("i",{className:"fa fa-spinner fa-spin",style:{fontSize:"32px",marginRight:"15px"}}))}return _react.default.createElement("tr",{className:"assetRow",onDoubleClick:this.props.onChoose},_react.default.createElement("td",{width:"80"},_react.default.createElement(_AssetThumbnail.default,{type:this.props.type,name:this.props.name,timestamp:this.props.timestamp,api:this.props.api,soundPlayer:this.props.soundPlayer,levelName:this.props.levelName})),_react.default.createElement("td",null,this.props.name),actions)},AssetRow}(_react.default.Component);exports.default=AssetRow,_defineProperty(AssetRow,"propTypes",{name:_propTypes.default.string.isRequired,timestamp:_propTypes.default.string,type:_propTypes.default.oneOf(["image","audio","video","pdf","doc"]).isRequired,size:_propTypes.default.number,api:_propTypes.default.object.isRequired,onChoose:_propTypes.default.func,onDelete:_propTypes.default.func.isRequired,soundPlayer:_propTypes.default.object,projectId:_propTypes.default.string,levelName:_propTypes.default.string,hideDelete:_propTypes.default.bool,imagePicker:_propTypes.default.bool,elementId:_propTypes.default.string});var styles={deleteWarning:{paddingLeft:"34px",textAlign:"left",color:_color.default.red}};module.exports=exports.default},"./src/code-studio/components/AssetThumbnail.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.styles=exports.default=void 0;var _class,_class2,_class3,_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_clientApi=__webpack_require__("./src/clientApi.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var defaultIcons={image:"fa fa-picture-o",audio:"fa fa-music",video:"fa fa-video-camera",pdf:"fa fa-file-pdf-o",doc:"fa fa-file-text-o",unknown:"fa fa-question"},assetThumbnailStyle={width:"auto",maxWidth:"100%",height:"auto",maxHeight:"100%",marginTop:"50%",transform:"translateY(-50%)",msTransform:"translateY(-50%)",WebkitTransform:"translateY(-50%)"},assetIconStyle={margin:"15px 0",fontSize:"32px"},styles={wrapper:{width:60,height:60,margin:"10px auto"},background:{background:"#eee",border:"1px solid #ccc",textAlign:"center"},audioIcon:{color:_color.default.purple,marginLeft:"auto",marginRight:"auto",display:"block"},audioWrapper:{display:"flex"}};exports.styles=styles;var AssetThumbnail=function(_React$Component){function AssetThumbnail(props){var _this;_defineProperty(function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(_this=_React$Component.call(this,props)||this),"clickSoundControl",(function(){_this.state.isPlayingAudio&&_this.props.soundPlayer?(_this.setState({isPlayingAudio:!1}),_this.props.soundPlayer.stopPlayingURL(_this.srcPath)):_this.props.soundPlayer&&(_this.setState({isPlayingAudio:!0}),_this.props.soundPlayer.play(_this.srcPath,{onEnded:function onEnded(){_this.setState({isPlayingAudio:!1})}}))}));var api=_this.props.api||_clientApi.assets;_this.props.levelName?api=api.withLevelName(_this.props.levelName):_this.props.projectId&&(api=api.withProjectId(_this.props.projectId));var basePath=api.basePath(_this.props.name),cacheBustSuffix="";if(_this.props.timestamp){var date=new Date(_this.props.timestamp);cacheBustSuffix="?t=".concat(date.valueOf())}return _this.srcPath="".concat(basePath).concat(cacheBustSuffix),"audio"===_this.props.type&&_this.props.soundPlayer&&_this.props.soundPlayer.register({id:_this.srcPath,mp3:_this.srcPath}),_this.state={isPlayingAudio:!1},_this}return _inheritsLoose(AssetThumbnail,_React$Component),AssetThumbnail.prototype.render=function render(){var _this$props=this.props,type=_this$props.type,iconStyle=_this$props.iconStyle,style=_this$props.style;return _react.default.createElement("div",{className:"assetThumbnail"},"audio"===type?_react.default.createElement(AudioThumbnail,{clickSoundControl:this.clickSoundControl,isPlaying:this.state.isPlayingAudio}):_react.default.createElement("div",{style:_objectSpread(_objectSpread(_objectSpread({},styles.wrapper),style),styles.background)},"image"===type?_react.default.createElement(ImageThumbnail,{src:this.srcPath}):_react.default.createElement(DefaultThumbnail,{type,iconStyle})))},AssetThumbnail}(_react.default.Component);_defineProperty(AssetThumbnail,"propTypes",{name:_propTypes.default.string.isRequired,timestamp:_propTypes.default.string,type:_propTypes.default.oneOf(["image","audio","video","pdf","doc"]).isRequired,style:_propTypes.default.object,iconStyle:_propTypes.default.object,api:_propTypes.default.object,projectId:_propTypes.default.string,levelName:_propTypes.default.string,soundPlayer:_propTypes.default.object});var _default=AssetThumbnail;exports.default=_default;var AudioThumbnail=(_class=function(_React$Component2){function AudioThumbnail(){return _React$Component2.apply(this,arguments)||this}return _inheritsLoose(AudioThumbnail,_React$Component2),AudioThumbnail.prototype.render=function render(){var playIcon=this.props.isPlaying?"fa-pause-circle":"fa-play-circle";return _react.default.createElement("div",{style:_objectSpread(_objectSpread({},styles.wrapper),styles.audioWrapper)},_react.default.createElement("i",{onClick:this.props.clickSoundControl,className:"fa "+playIcon+" fa-4x",style:styles.audioIcon}))},AudioThumbnail}(_react.default.Component),_defineProperty(_class,"propTypes",{clickSoundControl:_propTypes.default.func,isPlaying:_propTypes.default.bool}),_class),ImageThumbnail=(_class2=function(_React$Component3){function ImageThumbnail(){return _React$Component3.apply(this,arguments)||this}return _inheritsLoose(ImageThumbnail,_React$Component3),ImageThumbnail.prototype.render=function render(){return _react.default.createElement("a",{href:this.props.src,target:"_blank",rel:"noopener noreferrer"},_react.default.createElement("img",{src:this.props.src,style:assetThumbnailStyle,id:"ui-image-thumbnail",alt:""}))},ImageThumbnail}(_react.default.Component),_defineProperty(_class2,"propTypes",{src:_propTypes.default.string}),_class2),DefaultThumbnail=(_class3=function(_React$Component4){function DefaultThumbnail(){return _React$Component4.apply(this,arguments)||this}return _inheritsLoose(DefaultThumbnail,_React$Component4),DefaultThumbnail.prototype.render=function render(){return _react.default.createElement("i",{className:defaultIcons[this.props.type]||defaultIcons.unknown,style:_objectSpread(_objectSpread({},assetIconStyle),this.props.iconStyle)})},DefaultThumbnail}(_react.default.Component),_defineProperty(_class3,"propTypes",{type:_propTypes.default.oneOf(["image","audio","video","pdf","doc"]).isRequired,iconStyle:_propTypes.default.object}),_class3)},"./src/code-studio/components/AssetUploader.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_HiddenUploader=_interopRequireDefault(__webpack_require__("./src/code-studio/components/HiddenUploader.jsx")),_Button=_interopRequireDefault(__webpack_require__("./src/templates/Button.jsx")),_AddAssetButtonRow=__webpack_require__("./src/code-studio/components/AddAssetButtonRow.jsx"),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var AssetUploader=function(_React$Component){function AssetUploader(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this),"fileUploadClicked",(function(){return _this.refs.uploader.openFileChooser()})),_this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(AssetUploader,_React$Component),AssetUploader.prototype.render=function render(){var api=this.props.api,url=api.getUploadUrl(),uploadDone=api.wrapUploadDoneCallback(this.props.onUploadDone),uploadStart=api.wrapUploadStartCallback(this.props.onUploadStart);return _react.default.createElement("span",null,_react.default.createElement(_HiddenUploader.default,{ref:"uploader",toUrl:url,allowedExtensions:this.props.allowedExtensions,onUploadStart:uploadStart,onUploadDone:uploadDone,onUploadError:this.props.onUploadError}),_react.default.createElement(_Button.default,{onClick:this.fileUploadClicked,className:"share",id:"upload-asset",disabled:!this.props.uploadsEnabled,icon:"upload",text:_locale.default.uploadFile(),style:_AddAssetButtonRow.assetButtonStyles.button,size:"large"}))},AssetUploader}(_react.default.Component);exports.default=AssetUploader,_defineProperty(AssetUploader,"propTypes",{onUploadStart:_propTypes.default.func.isRequired,onUploadDone:_propTypes.default.func.isRequired,onUploadError:_propTypes.default.func,allowedExtensions:_propTypes.default.string,uploadsEnabled:_propTypes.default.bool.isRequired,api:_propTypes.default.object.isRequired}),module.exports=exports.default},"./src/code-studio/components/AudioRecorder.jsx":(module,exports,__webpack_require__)=>{function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_Button=_interopRequireDefault(__webpack_require__("./src/templates/Button.jsx")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_clientApi=__webpack_require__("./src/clientApi.js"),_AddAssetButtonRow=__webpack_require__("./src/code-studio/components/AddAssetButtonRow.jsx"),_AssetManager=__webpack_require__("./src/code-studio/components/AssetManager.jsx"),_firehose=_interopRequireDefault(__webpack_require__("./src/lib/util/firehose.js")),_recorders=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__("./src/code-studio/components/recorders.js"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var AudioRecorder=function(_React$Component){function AudioRecorder(props){var _this;return _defineProperty(_assertThisInitialized(_this=_React$Component.call(this,props)||this),"componentDidMount",(function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(_this.recorder=(0,_recorders.default)(_this.props.recordingFileType),navigator.mediaDevices.getUserMedia({audio:!0}).then(_this.recorder.init).then((function(){return _this.setState({loading:!1})})).catch((function(){return _this.props.afterAudioSaved(_AssetManager.AudioErrorType.INITIALIZE)}))):_this.props.afterAudioSaved(_AssetManager.AudioErrorType.INITIALIZE)})),_defineProperty(_assertThisInitialized(_this),"saveAudio",(function(blob){_this.setState({loading:!0}),_clientApi.assets.putAsset(_this.state.audioName+_this.recorder.getExtension(),blob,(function(xhr){_this.setState({audioName:"",loading:!1});var result=JSON.parse(xhr.response);result.filename=decodeURI(result.filename),_this.props.onUploadDone(result),_this.props.afterAudioSaved(_AssetManager.AudioErrorType.NONE)}),(function(error){_this.setState({loading:!1}),console.error("Audio Failed to Save: ".concat(error)),_this.props.afterAudioSaved(_AssetManager.AudioErrorType.SAVE)}))})),_defineProperty(_assertThisInitialized(_this),"onNameChange",(function(event){_this.setState({audioName:event.target.value})})),_defineProperty(_assertThisInitialized(_this),"onCancel",(function(){_this.setState({audioName:"",recording:!1},(function(){_this.props.afterAudioSaved(_AssetManager.AudioErrorType.NONE),_this.recorder.isRecording()&&(clearTimeout(_this.recordTimeout),_this.recorder.stopRecording())}))})),_defineProperty(_assertThisInitialized(_this),"toggleRecord",(function(){_this.state.recording?_this.stopRecordingAndSave():_this.startRecording()})),_defineProperty(_assertThisInitialized(_this),"startRecording",(function(){var studyGroup=_this.props.imagePicker?"manage-assets":"library-tab";_this.recorder.startRecording().then((function(){_firehose.default.putRecord({study:"sound-dialog-2",study_group:studyGroup,event:"record-sound",data_json:_this.state.audioName},{includeUserId:!0}),_this.setState({recording:!_this.state.recording})})),_this.recordTimeout=setTimeout(_this.stopRecordingAndSave,3e4)})),_defineProperty(_assertThisInitialized(_this),"stopRecordingAndSave",(function(){_this.state.recording&&(clearTimeout(_this.recordTimeout),_this.recorder.stopRecording().then((function(blob){_this.saveAudio(blob)})),_this.setState({recording:!_this.state.recording}))})),_this.timeout=null,_this.recorder=null,_this.state={audioName:"",recording:!1,loading:!0},_this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(AudioRecorder,_React$Component),AudioRecorder.prototype.render=function render(){return _react.default.createElement("div",null,_react.default.createElement("div",{style:styles.buttonRow},_react.default.createElement("input",{type:"text",placeholder:_locale.default.soundName(),onChange:this.onNameChange,value:this.state.audioName}),this.state.recording&&_react.default.createElement("span",{style:_AddAssetButtonRow.assetButtonStyles.button},_react.default.createElement("i",{style:styles.recordingIcon,className:"fa fa-circle"}),_locale.default.recording()),_react.default.createElement("span",null,this.state.loading&&this.state.audioName.length>0&&_react.default.createElement("div",{style:styles.spinner},_react.default.createElement("i",{className:"fa fa-spinner fa-spin",style:{fontSize:"20px"}})),_react.default.createElement(_Button.default,{onClick:this.toggleRecord,id:"start-stop-record",style:_AddAssetButtonRow.assetButtonStyles.button,color:_Button.default.ButtonColor.blue,icon:this.state.recording?"stop":"circle",text:this.state.recording?_locale.default.stop():_locale.default.record(),size:"large",disabled:0===this.state.audioName.length||this.state.loading}),_react.default.createElement(_Button.default,{onClick:this.onCancel,id:"cancel-record",style:_AddAssetButtonRow.assetButtonStyles.button,color:_Button.default.ButtonColor.gray,text:_locale.default.cancel(),size:"large"}))))},AudioRecorder}(_react.default.Component);exports.default=AudioRecorder,_defineProperty(AudioRecorder,"propTypes",{onUploadDone:_propTypes.default.func,afterAudioSaved:_propTypes.default.func,recordingFileType:_propTypes.default.oneOf(Object.values(_recorders.RecordingFileType)),imagePicker:_propTypes.default.bool});var styles={buttonRow:{display:"flex",flexFlow:"row",justifyContent:"space-between",alignItems:"center"},recordingIcon:{color:"red",margin:5},warning:{textAlign:"left",color:_color.default.red},spinner:{display:"inline-block",verticalAlign:"top",marginTop:"16px",marginRight:"10px"}};module.exports=exports.default},"./src/code-studio/components/HiddenUploader.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jquery=_interopRequireDefault(__webpack_require__("./node_modules/jquery/dist/jquery.js")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_firehose=_interopRequireDefault(__webpack_require__("./src/lib/util/firehose.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var HiddenUploader=function(_React$Component){function HiddenUploader(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this),"openFileChooser",(function(){return _this.refs.uploader.click()})),_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(HiddenUploader,_React$Component);var _proto=HiddenUploader.prototype;return _proto.componentDidMount=function componentDidMount(){var props=this.props;(0,_jquery.default)(this.refs.uploader).fileupload({dataType:"json",url:this.props.toUrl,replaceFileInput:!1,add:function add(e,data){props.onUploadStart(data);var audioFileName=data.files[0].name.includes("mp3")?data.files[0].name:null;audioFileName&&_firehose.default.putRecord({study:"sound-dialog-2",study_group:"library-file",event:"upload-file",data_json:audioFileName},{includeUserId:!0})},done:function done(e,data){props.onUploadDone(data.result)},error:function error(e,data){props.onUploadError&&props.onUploadError(e.status)}})},_proto.componentWillUnmount=function componentWillUnmount(){(0,_jquery.default)(this.refs.uploader).fileupload("destroy")},_proto.render=function render(){return _react.default.createElement("input",{ref:"uploader",className:"uitest-hidden-uploader",type:"file",style:{display:"none"},accept:this.props.allowedExtensions||"*"})},HiddenUploader}(_react.default.Component);exports.default=HiddenUploader,_defineProperty(HiddenUploader,"propTypes",{toUrl:_propTypes.default.string.isRequired,allowedExtensions:_propTypes.default.string,onUploadStart:_propTypes.default.func.isRequired,onUploadDone:_propTypes.default.func.isRequired,onUploadError:_propTypes.default.func}),window.dashboard=window.dashboard||{},window.dashboard.HiddenUploader=HiddenUploader,module.exports=exports.default}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN4QlQsa0JBQW1CWCxXQUFBQSxRQUFVcUIsT0FDN0JSLGNBQWViLFdBQUFBLFFBQVVDLEtBQUttQixXQUM5Qk4sYUFBY2QsV0FBQUEsUUFBVUMsS0FBS21CLFdBQzdCTCxjQUFlZixXQUFBQSxRQUFVQyxPQStEN0J3UixPQUFPQyxVQUFZRCxPQUFPQyxXQUFhLENBQUMsRUFDeENELE9BQU9DLFVBQVVaLGVBQWlCQSxlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL2NvZGUtc3R1ZGlvL2NvbXBvbmVudHMvQWRkQXNzZXRCdXR0b25Sb3cuanN4Iiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy9jb2RlLXN0dWRpby9jb21wb25lbnRzL0Fzc2V0TWFuYWdlci5qc3giLCJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL2NvZGUtc3R1ZGlvL2NvbXBvbmVudHMvQXNzZXRSb3cuanN4Iiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy9jb2RlLXN0dWRpby9jb21wb25lbnRzL0Fzc2V0VGh1bWJuYWlsLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvY29kZS1zdHVkaW8vY29tcG9uZW50cy9Bc3NldFVwbG9hZGVyLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvY29kZS1zdHVkaW8vY29tcG9uZW50cy9BdWRpb1JlY29yZGVyLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvY29kZS1zdHVkaW8vY29tcG9uZW50cy9IaWRkZW5VcGxvYWRlci5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQXNzZXRVcGxvYWRlciBmcm9tICcuL0Fzc2V0VXBsb2FkZXInO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi8uLi90ZW1wbGF0ZXMvQnV0dG9uJztcbmltcG9ydCBpMThuIGZyb20gJ0BjZG8vbG9jYWxlJztcbmltcG9ydCB7aXNJRTExfSBmcm9tICdAY2RvL2FwcHMvdXRpbC9icm93c2VyLWRldGVjdG9yJztcblxuZXhwb3J0IGNvbnN0IGFzc2V0QnV0dG9uU3R5bGVzID0ge1xuICBidXR0b246IHtcbiAgICBwYWRkaW5nTGVmdDogMTAsXG4gICAgcGFkZGluZ1JpZ2h0OiAxMCxcbiAgICBtYXJnaW5Ub3A6IDUsXG4gICAgZm9udFNpemU6ICdsYXJnZScsXG4gICAgZm9udFdlaWdodDogJ2xpZ2h0ZXInLFxuICAgIG1hcmdpblJpZ2h0OiAxMCxcbiAgfSxcbiAgYnV0dG9uUm93OiB7XG4gICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIGZsZXhGbG93OiAncm93JyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgfSxcbn07XG5cbmNvbnN0IFJlY29yZEJ1dHRvbiA9ICh7b25TZWxlY3RSZWNvcmQsIGRpc2FibGVkfSkgPT4gKFxuICA8c3Bhbj5cbiAgICA8QnV0dG9uXG4gICAgICBvbkNsaWNrPXtvblNlbGVjdFJlY29yZH1cbiAgICAgIGlkPVwicmVjb3JkLWFzc2V0XCJcbiAgICAgIGNsYXNzTmFtZT1cInNoYXJlXCJcbiAgICAgIHRleHQ9e2kxOG4ucmVjb3JkQXVkaW8oKX1cbiAgICAgIGljb249XCJtaWNyb3Bob25lXCJcbiAgICAgIHN0eWxlPXthc3NldEJ1dHRvblN0eWxlcy5idXR0b259XG4gICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgIC8+XG4gIDwvc3Bhbj5cbik7XG5cblJlY29yZEJ1dHRvbi5wcm9wVHlwZXMgPSB7XG4gIG9uU2VsZWN0UmVjb3JkOiBQcm9wVHlwZXMuZnVuYyxcbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxufTtcblxuLyoqXG4gKiBBIGNvbXBvbmVudCBmb3IgdGhlIGJ1dHRvbnMgdGhhdCBlbmFibGUgYWRkaW5nIGFuIGFzc2V0IHRvIGEgcHJvamVjdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWRkQXNzZXRCdXR0b25Sb3cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIHVwbG9hZHNFbmFibGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIGFsbG93ZWRFeHRlbnNpb25zOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGFwaTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBvblVwbG9hZFN0YXJ0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIG9uVXBsb2FkRG9uZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvblVwbG9hZEVycm9yOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIG9uU2VsZWN0UmVjb3JkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHN0YXR1c01lc3NhZ2U6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcmVjb3JkRGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIGhpZGVBdWRpb1JlY29yZGluZzogUHJvcFR5cGVzLmJvb2wsXG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBzaG91bGRTaG93UmVjb3JkQnV0dG9uID0gIXRoaXMucHJvcHMuaGlkZUF1ZGlvUmVjb3JkaW5nO1xuICAgIGlmIChpc0lFMTEoKSkge1xuICAgICAgc2hvdWxkU2hvd1JlY29yZEJ1dHRvbiA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBzdHlsZT17YXNzZXRCdXR0b25TdHlsZXMuYnV0dG9uUm93fT5cbiAgICAgICAgPEFzc2V0VXBsb2FkZXJcbiAgICAgICAgICB1cGxvYWRzRW5hYmxlZD17dGhpcy5wcm9wcy51cGxvYWRzRW5hYmxlZH1cbiAgICAgICAgICBhbGxvd2VkRXh0ZW5zaW9ucz17dGhpcy5wcm9wcy5hbGxvd2VkRXh0ZW5zaW9uc31cbiAgICAgICAgICBhcGk9e3RoaXMucHJvcHMuYXBpfVxuICAgICAgICAgIG9uVXBsb2FkU3RhcnQ9e3RoaXMucHJvcHMub25VcGxvYWRTdGFydH1cbiAgICAgICAgICBvblVwbG9hZERvbmU9e3RoaXMucHJvcHMub25VcGxvYWREb25lfVxuICAgICAgICAgIG9uVXBsb2FkRXJyb3I9e3RoaXMucHJvcHMub25VcGxvYWRFcnJvcn1cbiAgICAgICAgLz5cbiAgICAgICAge3Nob3VsZFNob3dSZWNvcmRCdXR0b24gJiYgKFxuICAgICAgICAgIDxSZWNvcmRCdXR0b25cbiAgICAgICAgICAgIG9uU2VsZWN0UmVjb3JkPXt0aGlzLnByb3BzLm9uU2VsZWN0UmVjb3JkfVxuICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnByb3BzLnVwbG9hZHNFbmFibGVkIHx8IHRoaXMucHJvcHMucmVjb3JkRGlzYWJsZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPHNwYW4gaWQ9XCJtYW5hZ2UtYXNzZXQtc3RhdHVzXCI+e3RoaXMucHJvcHMuc3RhdHVzTWVzc2FnZX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9uby1pcy1tb3VudGVkICovXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7XG4gIGFzc2V0cyBhcyBhc3NldHNBcGksXG4gIHN0YXJ0ZXJBc3NldHMgYXMgc3RhcnRlckFzc2V0c0FwaSxcbiAgZmlsZXMgYXMgZmlsZXNBcGksXG59IGZyb20gJ0BjZG8vYXBwcy9jbGllbnRBcGknO1xuXG5pbXBvcnQgQXNzZXRSb3cgZnJvbSAnLi9Bc3NldFJvdyc7XG5pbXBvcnQgYXNzZXRMaXN0U3RvcmUgZnJvbSAnLi4vYXNzZXRzL2Fzc2V0TGlzdFN0b3JlJztcbmltcG9ydCBBdWRpb1JlY29yZGVyIGZyb20gJy4vQXVkaW9SZWNvcmRlcic7XG5pbXBvcnQgZmlyZWhvc2VDbGllbnQgZnJvbSAnQGNkby9hcHBzL2xpYi91dGlsL2ZpcmVob3NlJztcbmltcG9ydCBBZGRBc3NldEJ1dHRvblJvdyBmcm9tICcuL0FkZEFzc2V0QnV0dG9uUm93JztcbmltcG9ydCBpMThuIGZyb20gJ0BjZG8vbG9jYWxlJztcbmltcG9ydCB7U1RBUlRFUl9BU1NFVF9QUkVGSVh9IGZyb20gJ0BjZG8vYXBwcy9hc3NldE1hbmFnZW1lbnQvYXNzZXRQcmVmaXgnO1xuaW1wb3J0IHtSZWNvcmRpbmdGaWxlVHlwZX0gZnJvbSAnLi9yZWNvcmRlcnMnO1xuXG5leHBvcnQgY29uc3QgQXVkaW9FcnJvclR5cGUgPSB7XG4gIE5PTkU6ICdub25lJyxcbiAgSU5JVElBTElaRTogJ2luaXRpYWxpemUnLFxuICBTQVZFOiAnc2F2ZScsXG59O1xuZXhwb3J0IGNvbnN0IEltYWdlTW9kZSA9IHtcbiAgRklMRTogJ2ZpbGUnLFxuICBJQ09OOiAnaWNvbicsXG4gIFVSTDogJ3VybCcsXG4gIERFRkFVTFQ6ICdkZWZhdWx0Jyxcbn07XG5cbmNvbnN0IGVycm9yTWVzc2FnZXMgPSB7XG4gIDQwMzogJ1F1b3RhIGV4Y2VlZGVkLiBQbGVhc2UgZGVsZXRlIHNvbWUgZmlsZXMgYW5kIHRyeSBhZ2Fpbi4nLFxuICA0MTM6ICdUaGUgZmlsZSBpcyB0b28gbGFyZ2UuJyxcbiAgNDE1OiAnVGhpcyB0eXBlIG9mIGZpbGUgaXMgbm90IHN1cHBvcnRlZC4nLFxuICA1MDA6ICdUaGUgc2VydmVyIHJlc3BvbmRlZCB3aXRoIGFuIGVycm9yLicsXG4gIHVua25vd246ICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLicsXG59O1xuXG5jb25zdCBlcnJvclVwbG9hZERpc2FibGVkID1cbiAgJ1RoaXMgcHJvamVjdCBoYXMgYmVlbiByZXBvcnRlZCBmb3IgYWJ1c2l2ZSBjb250ZW50LCAnICtcbiAgJ3NvIHVwbG9hZGluZyBuZXcgYXNzZXRzIGlzIGRpc2FibGVkLic7XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZShzdGF0dXMpIHtcbiAgcmV0dXJuIGVycm9yTWVzc2FnZXNbc3RhdHVzXSB8fCBlcnJvck1lc3NhZ2VzLnVua25vd247XG59XG5cbi8qKlxuICogQSBjb21wb25lbnQgZm9yIG1hbmFnaW5nIGhvc3RlZCBhc3NldHMuIElmIHV0aWxpemluZyB0aGlzIHNoYXJlZCBjb21wb25lbnQsXG4gKiB2ZXJpZnkgdGhlIEltYWdlUGlja2VyIGhhcyBhY2Nlc3MgdG8gdGhlIGNvcnJlY3QgZmllbGRzIGluIHlvdXIgcmVkdXggc3RvcmUsXG4gKiBuYW1lbHkgbGV2ZWwubmFtZSBhbmQgbGV2ZWwuaXNTdGFydE1vZGUuIE90aGVyd2lzZSwgdGhlIGZpbGVzIHdpbGwgbm90IGJlXG4gKiBzYXZlZCB0byBTMyBvciByZXRyaWV2ZWQgYW5kIGRpc3BsYXllZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXNzZXRNYW5hZ2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBhc3NldENob3NlbjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgYXNzZXRzQ2hhbmdlZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgYWxsb3dlZEV4dGVuc2lvbnM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdXBsb2Fkc0VuYWJsZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgdXNlRmlsZXNBcGk6IFByb3BUeXBlcy5ib29sLFxuICAgIHNvdW5kUGxheWVyOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGRpc2FibGVBdWRpb1JlY29yZGluZzogUHJvcFR5cGVzLmJvb2wsXG4gICAgcmVjb3JkaW5nRmlsZVR5cGU6IFByb3BUeXBlcy5vbmVPZihPYmplY3QudmFsdWVzKFJlY29yZGluZ0ZpbGVUeXBlKSksXG4gICAgcHJvamVjdElkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGxldmVsTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBpc1N0YXJ0TW9kZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvLyBGb3IgbG9nZ2luZyBwdXJwb3Nlc1xuICAgIGltYWdlUGlja2VyOiBQcm9wVHlwZXMuYm9vbCwgLy8gaWRlbnRpZmllcyBpZiBkaXNwbGF5ZWQgYnkgJ01hbmFnZSBBc3NldHMnIGZsb3dcbiAgICBlbGVtZW50SWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFzc2V0czogbnVsbCxcbiAgICAgIHN0YXJ0ZXJBc3NldHM6IG51bGwsXG4gICAgICBzdGF0dXNNZXNzYWdlOiBwcm9wcy51cGxvYWRzRW5hYmxlZCA/ICcnIDogZXJyb3JVcGxvYWREaXNhYmxlZCxcbiAgICAgIHJlY29yZGluZ0F1ZGlvOiBmYWxzZSxcbiAgICAgIGF1ZGlvRXJyb3JUeXBlOiBBdWRpb0Vycm9yVHlwZS5OT05FLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5sZXZlbE5hbWUpIHtcbiAgICAgIHN0YXJ0ZXJBc3NldHNBcGkuZ2V0U3RhcnRlckFzc2V0cyhcbiAgICAgICAgdGhpcy5wcm9wcy5sZXZlbE5hbWUsXG4gICAgICAgIHRoaXMub25TdGFydGVyQXNzZXRzUmVjZWl2ZWQsXG4gICAgICAgIHRoaXMub25TdGFydGVyQXNzZXRzRmFpbHVyZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RhcnRlckFzc2V0czogW119KTtcbiAgICB9XG5cbiAgICBsZXQgYXBpID0gdGhpcy5wcm9wcy51c2VGaWxlc0FwaSA/IGZpbGVzQXBpIDogYXNzZXRzQXBpO1xuICAgIGlmICghYXBpLmdldFByb2plY3RJZCgpKSB7XG4gICAgICBhcGkgPSBhcGkud2l0aFByb2plY3RJZCh0aGlzLnByb3BzLnByb2plY3RJZCk7XG4gICAgfVxuXG4gICAgLy8gUmVxdWVzdCB0byBmaWxlcy9hc3NldHMgQVBJIHdpbGwgZmFpbCBpZiBubyBwcm9qZWN0SWQgaXMgcHJlc2VudCwgc28gb25seVxuICAgIC8vIHJlcXVlc3QgZmlsZXMgaWYgd2UgaGF2ZSBhIHByb2plY3RJZC5cbiAgICBpZiAoYXBpLmdldFByb2plY3RJZCgpKSB7XG4gICAgICBhcGkuZ2V0RmlsZXModGhpcy5vbkFzc2V0TGlzdFJlY2VpdmVkLCB0aGlzLm9uQXNzZXRMaXN0RmFpbHVyZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2Fzc2V0czogW119KTtcbiAgICB9XG4gIH1cblxuICBvblN0YXJ0ZXJBc3NldHNSZWNlaXZlZCA9IHJlc3VsdCA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3VsdC5yZXNwb25zZSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7c3RhcnRlckFzc2V0czogcmVzcG9uc2Uuc3RhcnRlcl9hc3NldHN9KTtcbiAgfTtcblxuICBvblN0YXJ0ZXJBc3NldHNGYWlsdXJlID0geGhyID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHN0YXR1c01lc3NhZ2U6XG4gICAgICAgICdFcnJvciBsb2FkaW5nIHN0YXJ0ZXIgYXNzZXRzOiAnICsgZ2V0RXJyb3JNZXNzYWdlKHhoci5zdGF0dXMpLFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsZWQgYWZ0ZXIgdGhlIGNvbXBvbmVudCBtb3VudHMsIHdoZW4gdGhlIHNlcnZlciByZXNwb25kcyB3aXRoIHRoZVxuICAgKiBjdXJyZW50IGxpc3Qgb2YgYXNzZXRzLlxuICAgKiBAcGFyYW0gcmVzdWx0XG4gICAqL1xuICBvbkFzc2V0TGlzdFJlY2VpdmVkID0gcmVzdWx0ID0+IHtcbiAgICBhc3NldExpc3RTdG9yZS5yZXNldChyZXN1bHQuZmlsZXMpO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYXNzZXRzOiBhc3NldExpc3RTdG9yZS5saXN0KHRoaXMucHJvcHMuYWxsb3dlZEV4dGVuc2lvbnMpLFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsZWQgYWZ0ZXIgdGhlIGNvbXBvbmVudCBtb3VudHMsIGlmIHRoZSBzZXJ2ZXIgcmVzcG9uZHMgd2l0aCBhbiBlcnJvclxuICAgKiB3aGVuIGxvYWRpbmcgdGhlIGN1cnJlbnQgbGlzdCBvZiBhc3NldHMuXG4gICAqIEBwYXJhbSB4aHJcbiAgICovXG4gIG9uQXNzZXRMaXN0RmFpbHVyZSA9ICh7c3RhdHVzfSkgPT4ge1xuICAgIGNvbnN0IHt1c2VGaWxlc0FwaX0gPSB0aGlzLnByb3BzO1xuICAgIGlmICh1c2VGaWxlc0FwaSAmJiBzdGF0dXMgPT09IDQwNCkge1xuICAgICAgLy8gTm8gZmlsZXMgaW4gdGhpcyBwcm9qZWN0IHlldCwgcHJvY2VlZCB3aXRoIGFuIGVtcHR5IGZpbGUgbGlzdFxuICAgICAgdGhpcy5vbkFzc2V0TGlzdFJlY2VpdmVkKHtmaWxlczogW119KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHN0YXR1c01lc3NhZ2U6ICdFcnJvciBsb2FkaW5nIGFzc2V0IGxpc3Q6ICcgKyBnZXRFcnJvck1lc3NhZ2Uoc3RhdHVzKSxcbiAgICB9KTtcbiAgfTtcblxuICBvblVwbG9hZFN0YXJ0ID0gZGF0YSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7c3RhdHVzTWVzc2FnZTogJ1VwbG9hZGluZy4uLid9KTtcbiAgICBkYXRhLnN1Ym1pdCgpO1xuICB9O1xuXG4gIG9uVXBsb2FkRG9uZSA9IHJlc3VsdCA9PiB7XG4gICAgbGV0IG5ld1N0YXRlID0ge1xuICAgICAgc3RhdHVzTWVzc2FnZTogJ0ZpbGUgXCInICsgcmVzdWx0LmZpbGVuYW1lICsgJ1wiIHN1Y2Nlc3NmdWxseSB1cGxvYWRlZCEnLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5wcm9wcy5pc1N0YXJ0TW9kZSkge1xuICAgICAgbmV3U3RhdGUuc3RhcnRlckFzc2V0cyA9IFsuLi50aGlzLnN0YXRlLnN0YXJ0ZXJBc3NldHMsIHJlc3VsdF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2V0TGlzdFN0b3JlLmFkZChyZXN1bHQpO1xuICAgICAgaWYgKHRoaXMucHJvcHMuYXNzZXRzQ2hhbmdlZCkge1xuICAgICAgICB0aGlzLnByb3BzLmFzc2V0c0NoYW5nZWQoKTtcbiAgICAgIH1cbiAgICAgIG5ld1N0YXRlLmFzc2V0cyA9IGFzc2V0TGlzdFN0b3JlLmxpc3QodGhpcy5wcm9wcy5hbGxvd2VkRXh0ZW5zaW9ucyk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XG4gIH07XG5cbiAgb25VcGxvYWRFcnJvciA9IHN0YXR1cyA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzdGF0dXNNZXNzYWdlOiAnRXJyb3IgdXBsb2FkaW5nIGZpbGU6ICcgKyBnZXRFcnJvck1lc3NhZ2Uoc3RhdHVzKSxcbiAgICB9KTtcbiAgICBmaXJlaG9zZUNsaWVudC5wdXRSZWNvcmQoe1xuICAgICAgc3R1ZHk6ICdwcm9qZWN0LWRhdGEtaW50ZWdyaXR5JyxcbiAgICAgIHN0dWR5X2dyb3VwOiAndjQnLFxuICAgICAgZXZlbnQ6ICdhc3NldC11cGxvYWQtZXJyb3InLFxuICAgICAgcHJvamVjdF9pZDogdGhpcy5wcm9wcy5wcm9qZWN0SWQsXG4gICAgICBkYXRhX2ludDogc3RhdHVzLFxuICAgIH0pO1xuICB9O1xuXG4gIG9uU2VsZWN0UmVjb3JkID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe3JlY29yZGluZ0F1ZGlvOiB0cnVlfSk7XG4gIH07XG5cbiAgZGVsZXRlQXNzZXRSb3cgPSBuYW1lID0+IHtcbiAgICBhc3NldExpc3RTdG9yZS5yZW1vdmUobmFtZSk7XG4gICAgaWYgKHRoaXMucHJvcHMuYXNzZXRzQ2hhbmdlZCkge1xuICAgICAgdGhpcy5wcm9wcy5hc3NldHNDaGFuZ2VkKCk7XG4gICAgfVxuICAgIGZpcmVob3NlQ2xpZW50LnB1dFJlY29yZCh7XG4gICAgICBzdHVkeTogJ2RlbGV0ZS1hc3NldCcsXG4gICAgICBzdHVkeV9ncm91cDpcbiAgICAgICAgdGhpcy5wcm9wcy5hc3NldENob3NlbiAmJiB0eXBlb2YgdGhpcy5wcm9wcy5hc3NldENob3NlbiA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgID8gJ2Nob29zZS1hc3NldHMnXG4gICAgICAgICAgOiAnbWFuYWdlLWFzc2V0cycsXG4gICAgICBldmVudDogJ2NvbmZpcm0nLFxuICAgICAgcHJvamVjdF9pZDogdGhpcy5wcm9wcy5wcm9qZWN0SWQsXG4gICAgICBkYXRhX2pzb246IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXNzZXROYW1lOiBuYW1lLFxuICAgICAgICBlbGVtZW50SWQ6IHRoaXMucHJvcHMuZWxlbWVudElkLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGFzc2V0czogYXNzZXRMaXN0U3RvcmUubGlzdCh0aGlzLnByb3BzLmFsbG93ZWRFeHRlbnNpb25zKSxcbiAgICAgIHN0YXR1c01lc3NhZ2U6IGBGaWxlIFwiJHtuYW1lfVwiIHN1Y2Nlc3NmdWxseSBkZWxldGVkIWAsXG4gICAgfSk7XG4gIH07XG5cbiAgZGVsZXRlU3RhcnRlckFzc2V0Um93ID0gbmFtZSA9PiB7XG4gICAgbGV0IHN0YXJ0ZXJBc3NldHMgPSBbLi4udGhpcy5zdGF0ZS5zdGFydGVyQXNzZXRzXS5maWx0ZXIoXG4gICAgICBhc3NldCA9PiBhc3NldC5maWxlbmFtZSAhPT0gbmFtZVxuICAgICk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzdGFydGVyQXNzZXRzLFxuICAgICAgc3RhdHVzTWVzc2FnZTogYEZpbGUgXCIke25hbWV9XCIgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQhYCxcbiAgICB9KTtcbiAgfTtcblxuICBhZnRlckF1ZGlvU2F2ZWQgPSBlcnIgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe3JlY29yZGluZ0F1ZGlvOiBmYWxzZSwgYXVkaW9FcnJvclR5cGU6IGVycn0pO1xuICB9O1xuXG4gIGRlZmF1bHRBc3NldFByb3BzID0gYXNzZXQgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBrZXk6IGFzc2V0LmZpbGVuYW1lLFxuICAgICAgbmFtZTogYXNzZXQuZmlsZW5hbWUsXG4gICAgICB0aW1lc3RhbXA6IGFzc2V0LnRpbWVzdGFtcCxcbiAgICAgIHR5cGU6IGFzc2V0LmNhdGVnb3J5LFxuICAgICAgc2l6ZTogYXNzZXQuc2l6ZSxcbiAgICAgIHNvdW5kUGxheWVyOiB0aGlzLnByb3BzLnNvdW5kUGxheWVyLFxuICAgICAgaW1hZ2VQaWNrZXI6IHRoaXMucHJvcHMuaW1hZ2VQaWNrZXIsXG4gICAgICBwcm9qZWN0SWQ6IHRoaXMucHJvcHMucHJvamVjdElkLFxuICAgICAgZWxlbWVudElkOiB0aGlzLnByb3BzLmVsZW1lbnRJZCxcbiAgICB9O1xuICB9O1xuXG4gIGdldFN0YXJ0ZXJBc3NldFJvd3MgPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmxldmVsTmFtZSB8fCB0aGlzLnN0YXRlLnN0YXJ0ZXJBc3NldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgYm91bmRBcGkgPSBzdGFydGVyQXNzZXRzQXBpLndpdGhMZXZlbE5hbWUodGhpcy5wcm9wcy5sZXZlbE5hbWUpO1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnN0YXJ0ZXJBc3NldHMubWFwKGFzc2V0ID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxBc3NldFJvd1xuICAgICAgICAgIHsuLi50aGlzLmRlZmF1bHRBc3NldFByb3BzKGFzc2V0KX1cbiAgICAgICAgICBhcGk9e2JvdW5kQXBpfVxuICAgICAgICAgIG9uQ2hvb3NlPXtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXRDaG9zZW4gJiZcbiAgICAgICAgICAgICgoKSA9PlxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmFzc2V0Q2hvc2VuKFxuICAgICAgICAgICAgICAgIFNUQVJURVJfQVNTRVRfUFJFRklYICsgYXNzZXQuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgYXNzZXQudGltZXN0YW1wXG4gICAgICAgICAgICAgICkpXG4gICAgICAgICAgfVxuICAgICAgICAgIG9uRGVsZXRlPXsoKSA9PiB0aGlzLmRlbGV0ZVN0YXJ0ZXJBc3NldFJvdyhhc3NldC5maWxlbmFtZSl9XG4gICAgICAgICAgbGV2ZWxOYW1lPXt0aGlzLnByb3BzLmxldmVsTmFtZX1cbiAgICAgICAgICBoaWRlRGVsZXRlPXshdGhpcy5wcm9wcy5pc1N0YXJ0TW9kZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfSk7XG4gIH07XG5cbiAgZ2V0QXNzZXRSb3dzID0gKCkgPT4ge1xuICAgIGNvbnN0IGFwaSA9IHRoaXMucHJvcHMudXNlRmlsZXNBcGkgPyBmaWxlc0FwaSA6IGFzc2V0c0FwaTtcblxuICAgIHJldHVybiB0aGlzLnN0YXRlLmFzc2V0cy5tYXAoYXNzZXQgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEFzc2V0Um93XG4gICAgICAgICAgey4uLnRoaXMuZGVmYXVsdEFzc2V0UHJvcHMoYXNzZXQpfVxuICAgICAgICAgIGFwaT17YXBpfVxuICAgICAgICAgIG9uQ2hvb3NlPXtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYXNzZXRDaG9zZW4gJiZcbiAgICAgICAgICAgICgoKSA9PiB0aGlzLnByb3BzLmFzc2V0Q2hvc2VuKGFzc2V0LmZpbGVuYW1lLCBhc3NldC50aW1lc3RhbXApKVxuICAgICAgICAgIH1cbiAgICAgICAgICBvbkRlbGV0ZT17KCkgPT4gdGhpcy5kZWxldGVBc3NldFJvdyhhc3NldC5maWxlbmFtZSl9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH0pO1xuICB9O1xuXG4gIHVwbG9hZEFwaSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5pc1N0YXJ0TW9kZSkge1xuICAgICAgcmV0dXJuIHN0YXJ0ZXJBc3NldHNBcGkud2l0aExldmVsTmFtZSh0aGlzLnByb3BzLmxldmVsTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBhcGkgPSB0aGlzLnByb3BzLnVzZUZpbGVzQXBpID8gZmlsZXNBcGkgOiBhc3NldHNBcGk7XG5cbiAgICAgIC8vIEJpbmQgQVBJIGlmIGl0IGlzbid0IGFscmVhZHkgYm91bmRcbiAgICAgIGlmICghYXBpLmdldFByb2plY3RJZCgpKSB7XG4gICAgICAgIGFwaSA9IGFwaS53aXRoUHJvamVjdElkKHRoaXMucHJvcHMucHJvamVjdElkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFwaTtcbiAgICB9XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGRpc3BsYXlBdWRpb1JlY29yZGVyID1cbiAgICAgIHRoaXMuc3RhdGUuYXVkaW9FcnJvclR5cGUgIT09IEF1ZGlvRXJyb3JUeXBlLklOSVRJQUxJWkUgJiZcbiAgICAgIHRoaXMuc3RhdGUucmVjb3JkaW5nQXVkaW87XG4gICAgY29uc3QgYnV0dG9ucyA9IChcbiAgICAgIDxkaXY+XG4gICAgICAgIHt0aGlzLnN0YXRlLmF1ZGlvRXJyb3JUeXBlID09PSBBdWRpb0Vycm9yVHlwZS5TQVZFICYmIChcbiAgICAgICAgICA8ZGl2PntpMThuLmF1ZGlvU2F2ZUVycm9yKCl9PC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHt0aGlzLnN0YXRlLmF1ZGlvRXJyb3JUeXBlID09PSBBdWRpb0Vycm9yVHlwZS5JTklUSUFMSVpFICYmIChcbiAgICAgICAgICA8ZGl2PntpMThuLmF1ZGlvSW5pdGlhbGl6ZUVycm9yKCl9PC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHtkaXNwbGF5QXVkaW9SZWNvcmRlciAmJiAoXG4gICAgICAgICAgPEF1ZGlvUmVjb3JkZXJcbiAgICAgICAgICAgIG9uVXBsb2FkRG9uZT17dGhpcy5vblVwbG9hZERvbmV9XG4gICAgICAgICAgICBhZnRlckF1ZGlvU2F2ZWQ9e3RoaXMuYWZ0ZXJBdWRpb1NhdmVkfVxuICAgICAgICAgICAgcmVjb3JkaW5nRmlsZVR5cGU9e3RoaXMucHJvcHMucmVjb3JkaW5nRmlsZVR5cGV9XG4gICAgICAgICAgICBpbWFnZVBpY2tlcj17dGhpcy5wcm9wcy5pbWFnZVBpY2tlcn1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICA8QWRkQXNzZXRCdXR0b25Sb3dcbiAgICAgICAgICB1cGxvYWRzRW5hYmxlZD17dGhpcy5wcm9wcy51cGxvYWRzRW5hYmxlZH1cbiAgICAgICAgICBhbGxvd2VkRXh0ZW5zaW9ucz17dGhpcy5wcm9wcy5hbGxvd2VkRXh0ZW5zaW9uc31cbiAgICAgICAgICBhcGk9e3RoaXMudXBsb2FkQXBpKCl9XG4gICAgICAgICAgb25VcGxvYWRTdGFydD17dGhpcy5vblVwbG9hZFN0YXJ0fVxuICAgICAgICAgIG9uVXBsb2FkRG9uZT17dGhpcy5vblVwbG9hZERvbmV9XG4gICAgICAgICAgb25VcGxvYWRFcnJvcj17dGhpcy5vblVwbG9hZEVycm9yfVxuICAgICAgICAgIG9uU2VsZWN0UmVjb3JkPXt0aGlzLm9uU2VsZWN0UmVjb3JkfVxuICAgICAgICAgIHN0YXR1c01lc3NhZ2U9e3RoaXMuc3RhdGUuc3RhdHVzTWVzc2FnZX1cbiAgICAgICAgICByZWNvcmREaXNhYmxlZD17dGhpcy5zdGF0ZS5yZWNvcmRpbmdBdWRpb31cbiAgICAgICAgICBoaWRlQXVkaW9SZWNvcmRpbmc9e3RoaXMucHJvcHMuZGlzYWJsZUF1ZGlvUmVjb3JkaW5nfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcblxuICAgIGxldCBhc3NldExpc3Q7XG4gICAgLy8gSWYgdGhpcy5zdGF0ZS5hc3NldHMgb3IgdGhpcy5zdGF0ZS5zdGFydGVyQXNzZXRzIGFyZSBudWxsLCBhc3NldHMgYXJlIHN0aWxsIGxvYWRpbmcuXG4gICAgLy8gSWYgZW1wdHksIHRoZSBhc3NldCBsaXN0IGhhcyBsb2FkZWQgYW5kIHRoZXJlIGFyZSBubyBhc3NldHMgaW4gdGhlIGN1cnJlbnRcbiAgICAvLyBjaGFubmVsIChtYXRjaGluZyB0aGUgYGFsbG93ZWRFeHRlbnNpb25zYCwgaWYgYW55IHdlcmUgcHJvdmlkZWQpLlxuICAgIGlmICh0aGlzLnN0YXRlLmFzc2V0cyA9PT0gbnVsbCB8fCB0aGlzLnN0YXRlLnN0YXJ0ZXJBc3NldHMgPT09IG51bGwpIHtcbiAgICAgIGFzc2V0TGlzdCA9IChcbiAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpbjogJzFlbSAwJywgdGV4dEFsaWduOiAnY2VudGVyJ319PlxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXNwaW5uZXIgZmEtc3BpblwiIHN0eWxlPXt7Zm9udFNpemU6ICczMnB4J319IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgdGhpcy5zdGF0ZS5hc3NldHMubGVuZ3RoID09PSAwICYmXG4gICAgICB0aGlzLnN0YXRlLnN0YXJ0ZXJBc3NldHMubGVuZ3RoID09PSAwXG4gICAgKSB7XG4gICAgICBjb25zdCBlbXB0eVRleHQgPVxuICAgICAgICB0aGlzLnByb3BzLmFsbG93ZWRFeHRlbnNpb25zID09PSAnLm1wMycgPyAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHtpMThuLm1hbmFnZUFzc2V0c1NvdW5kTGlicmFyeU1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIHNvdW5kTGlicmFyeUJ1dHRvblRleHQ6IGkxOG4uc291bmRMaWJyYXJ5KCksXG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICB7aTE4bi5tYW5hZ2VBc3NldHNTb3VuZFVwbG9hZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGFzc2V0VXBsb2FkZXJCdXR0b25UZXh0OiBpMThuLnVwbG9hZEZpbGUoKSxcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAge2kxOG4ubWFuYWdlQXNzZXRzRGVmYXVsdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICBhc3NldFVwbG9hZGVyQnV0dG9uVGV4dDogaTE4bi51cGxvYWRGaWxlKCksXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIGFzc2V0TGlzdCA9IChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPXtzdHlsZXMuZW1wdHlUZXh0fT57ZW1wdHlUZXh0fTwvZGl2PlxuICAgICAgICAgIHtidXR0b25zfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJvd3MgPSBbLi4udGhpcy5nZXRTdGFydGVyQXNzZXRSb3dzKCksIC4uLnRoaXMuZ2V0QXNzZXRSb3dzKCldO1xuICAgICAgYXNzZXRMaXN0ID0gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIHN0eWxlPXt7bWF4SGVpZ2h0OiAnMzgwcHgnLCBvdmVyZmxvd1k6ICdzY3JvbGwnLCBtYXJnaW46ICcxZW0gMCd9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDx0YWJsZSBzdHlsZT17e3dpZHRoOiAnMTAwJSd9fT5cbiAgICAgICAgICAgICAgPHRib2R5Pntyb3dzfTwvdGJvZHk+XG4gICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtidXR0b25zfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFzc2V0TGlzdDtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSB7XG4gIGVtcHR5VGV4dDoge1xuICAgIG1hcmdpbjogJzFlbSAwJyxcbiAgICBmb250U2l6ZTogJzE2cHgnLFxuICAgIGxpbmVIZWlnaHQ6ICcyMHB4JyxcbiAgfSxcbn07XG4iLCJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBc3NldFRodW1ibmFpbCBmcm9tICcuL0Fzc2V0VGh1bWJuYWlsJztcbmltcG9ydCBpMThuIGZyb20gJ0BjZG8vbG9jYWxlJztcbmltcG9ydCBmaXJlaG9zZUNsaWVudCBmcm9tICdAY2RvL2FwcHMvbGliL3V0aWwvZmlyZWhvc2UnO1xuaW1wb3J0IGNvbG9yIGZyb20gJ0BjZG8vYXBwcy91dGlsL2NvbG9yJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbi8qKlxuICogQSBzaW5nbGUgcm93IGluIHRoZSBBc3NldE1hbmFnZXIsIGRlc2NyaWJpbmcgb25lIGFzc2V0LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBc3NldFJvdyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHRpbWVzdGFtcDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB0eXBlOiBQcm9wVHlwZXMub25lT2YoWydpbWFnZScsICdhdWRpbycsICd2aWRlbycsICdwZGYnLCAnZG9jJ10pLmlzUmVxdWlyZWQsXG4gICAgc2l6ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICBhcGk6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBvbkNob29zZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25EZWxldGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgc291bmRQbGF5ZXI6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgcHJvamVjdElkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGxldmVsTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBoaWRlRGVsZXRlOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8vIEZvciBsb2dnaW5nIHB1cnBvc2VzXG4gICAgaW1hZ2VQaWNrZXI6IFByb3BUeXBlcy5ib29sLCAvLyBpZGVudGlmaWVzIGlmIGRpc3BsYXllZCBieSAnTWFuYWdlIEFzc2V0cycgZmxvd1xuICAgIGVsZW1lbnRJZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgfTtcblxuICBzdGF0ZSA9IHtcbiAgICBhY3Rpb246ICdub3JtYWwnLFxuICAgIGFjdGlvblRleHQ6ICcnLFxuICAgIGF0dGVtcHRlZFVzZWREZWxldGU6IGZhbHNlLFxuICB9O1xuXG4gIC8qKlxuICAgKiBDb25maXJtIHRoZSB1c2VyIGFjdHVhbGx5IHdhbnRzIHRvIGRlbGV0ZSB0aGlzIGFzc2V0LlxuICAgKi9cbiAgY29uZmlybURlbGV0ZSA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHthY3Rpb246ICdjb25maXJtaW5nIGRlbGV0ZScsIGFjdGlvblRleHQ6ICcnfSk7XG4gICAgZmlyZWhvc2VDbGllbnQucHV0UmVjb3JkKHtcbiAgICAgIHN0dWR5OiAnZGVsZXRlLWFzc2V0JyxcbiAgICAgIHN0dWR5X2dyb3VwOlxuICAgICAgICB0aGlzLnByb3BzLm9uQ2hvb3NlICYmIHR5cGVvZiB0aGlzLnByb3BzLm9uQ2hvb3NlID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgPyAnY2hvb3NlLWFzc2V0cydcbiAgICAgICAgICA6ICdtYW5hZ2UtYXNzZXRzJyxcbiAgICAgIGV2ZW50OiAnaW5pdGlhdGUnLFxuICAgICAgcHJvamVjdF9pZDogdGhpcy5wcm9wcy5wcm9qZWN0SWQsXG4gICAgICBkYXRhX2pzb246IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXNzZXROYW1lOiB0aGlzLnByb3BzLm5hbWUsXG4gICAgICAgIGVsZW1lbnRJZDogdGhpcy5wcm9wcy5lbGVtZW50SWQsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogVGhpcyB1c2VyIGRpZG4ndCB3YW50IHRvIGRlbGV0ZSB0aGlzIGFzc2V0LlxuICAgKi9cbiAgY2FuY2VsRGVsZXRlID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe2FjdGlvbjogJ25vcm1hbCcsIGFjdGlvblRleHQ6ICcnfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERlbGV0ZSB0aGlzIGFzc2V0IGFuZCBub3RpZnkgdGhlIHBhcmVudCB0byByZW1vdmUgdGhpcyByb3cuIElmIHRoZSBkZWxldGVcbiAgICogZmFpbHMsIGZsaXAgYmFjayB0byAnY29uZmlybWluZyBkZWxldGUnIGFuZCBkaXNwbGF5IGEgbWVzc2FnZS5cbiAgICovXG4gIGhhbmRsZURlbGV0ZSA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHthY3Rpb246ICdkZWxldGluZycsIGFjdGlvblRleHQ6ICcnfSk7XG5cbiAgICB0aGlzLnByb3BzLmFwaS5kZWxldGVGaWxlKHRoaXMucHJvcHMubmFtZSwgdGhpcy5wcm9wcy5vbkRlbGV0ZSwgKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFjdGlvbjogJ2NvbmZpcm1pbmcgZGVsZXRlJyxcbiAgICAgICAgYWN0aW9uVGV4dDogaTE4bi5lcnJvckRlbGV0aW5nKCksXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBjaG9vc2VBc3NldCA9ICgpID0+IHtcbiAgICBpZiAoIXRoaXMucHJvcHMuaW1hZ2VQaWNrZXIpIHtcbiAgICAgIGZpcmVob3NlQ2xpZW50LnB1dFJlY29yZChcbiAgICAgICAge1xuICAgICAgICAgIHN0dWR5OiAnc291bmQtZGlhbG9nLTInLFxuICAgICAgICAgIHN0dWR5X2dyb3VwOiAnbGlicmFyeS10YWInLFxuICAgICAgICAgIGV2ZW50OiAnY2hvb3NlLXVwbG9hZGVkLXNvdW5kJyxcbiAgICAgICAgICBkYXRhX2pzb246IHRoaXMucHJvcHMubmFtZSxcbiAgICAgICAgfSxcbiAgICAgICAge2luY2x1ZGVVc2VySWQ6IHRydWV9XG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLm9uQ2hvb3NlKCk7XG4gIH07XG5cbiAgYXR0ZW1wdEJhZERlbGV0ZSA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHthdHRlbXB0ZWRVc2VkRGVsZXRlOiB0cnVlfSk7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBhY3Rpb25zLCBmbGV4O1xuICAgIC8vIGBmbGV4YCBpcyB0aGUgXCJDaG9vc2VcIiBidXR0b24gaW4gZmlsZS1jaG9vc2UgbW9kZSwgb3IgdGhlIGZpbGVzaXplLlxuICAgIGlmICh0aGlzLnByb3BzLm9uQ2hvb3NlKSB7XG4gICAgICBmbGV4ID0gKFxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBvbkNsaWNrPXt0aGlzLmNob29zZUFzc2V0fT5cbiAgICAgICAgICB7aTE4bi5jaG9vc2UoKX1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzaXplID0gKHRoaXMucHJvcHMuc2l6ZSAvIDEwMDApLnRvRml4ZWQoMik7XG4gICAgICBmbGV4ID0gc2l6ZSArICcga2InO1xuICAgIH1cblxuICAgIGxldCB1c2FnZSA9ICQoJyN2aXN1YWxpemF0aW9uJykuZmluZChcbiAgICAgIGBbc3JjKj1cIiR7ZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucHJvcHMubmFtZSl9XCJdYFxuICAgICkubGVuZ3RoO1xuXG4gICAgc3dpdGNoICh0aGlzLnN0YXRlLmFjdGlvbikge1xuICAgICAgY2FzZSAnbm9ybWFsJzpcbiAgICAgICAgYWN0aW9ucyA9IChcbiAgICAgICAgICA8dGQgd2lkdGg9XCIyNTBcIiBzdHlsZT17e3RleHRBbGlnbjogJ3JpZ2h0J319PlxuICAgICAgICAgICAge2ZsZXh9XG4gICAgICAgICAgICB7IXRoaXMucHJvcHMuaGlkZURlbGV0ZSAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3VzYWdlID4gMCA/ICcnIDogJ2J0bi1kYW5nZXInfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3VzYWdlID4gMCA/IHRoaXMuYXR0ZW1wdEJhZERlbGV0ZSA6IHRoaXMuY29uZmlybURlbGV0ZX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXRyYXNoLW9cIiAvPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLmF0dGVtcHRlZFVzZWREZWxldGUgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtzdHlsZXMuZGVsZXRlV2FybmluZ30+XG4gICAgICAgICAgICAgICAge2kxOG4uY2Fubm90RGVsZXRlVXNlZEltYWdlKCl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L3RkPlxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NvbmZpcm1pbmcgZGVsZXRlJzpcbiAgICAgICAgYWN0aW9ucyA9IChcbiAgICAgICAgICA8dGQgd2lkdGg9XCIyNTBcIiBzdHlsZT17e3RleHRBbGlnbjogJ3JpZ2h0J319PlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuLWRhbmdlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRGVsZXRlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBEZWxldGUgRmlsZVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBvbkNsaWNrPXt0aGlzLmNhbmNlbERlbGV0ZX0+XG4gICAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXtzdHlsZXMuZGVsZXRlV2FybmluZ30+XG4gICAgICAgICAgICAgIHtpMThuLmNvbmZpcm1EZWxldGVFeHBsYW5hdGlvbigpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5hY3Rpb25UZXh0fVxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVsZXRpbmcnOlxuICAgICAgICBhY3Rpb25zID0gKFxuICAgICAgICAgIDx0ZCB3aWR0aD1cIjI1MFwiIHN0eWxlPXt7dGV4dEFsaWduOiAncmlnaHQnfX0+XG4gICAgICAgICAgICA8aVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW5cIlxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsXG4gICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6ICcxNXB4JyxcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC90ZD5cbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDx0ciBjbGFzc05hbWU9XCJhc3NldFJvd1wiIG9uRG91YmxlQ2xpY2s9e3RoaXMucHJvcHMub25DaG9vc2V9PlxuICAgICAgICA8dGQgd2lkdGg9XCI4MFwiPlxuICAgICAgICAgIDxBc3NldFRodW1ibmFpbFxuICAgICAgICAgICAgdHlwZT17dGhpcy5wcm9wcy50eXBlfVxuICAgICAgICAgICAgbmFtZT17dGhpcy5wcm9wcy5uYW1lfVxuICAgICAgICAgICAgdGltZXN0YW1wPXt0aGlzLnByb3BzLnRpbWVzdGFtcH1cbiAgICAgICAgICAgIGFwaT17dGhpcy5wcm9wcy5hcGl9XG4gICAgICAgICAgICBzb3VuZFBsYXllcj17dGhpcy5wcm9wcy5zb3VuZFBsYXllcn1cbiAgICAgICAgICAgIGxldmVsTmFtZT17dGhpcy5wcm9wcy5sZXZlbE5hbWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC90ZD5cbiAgICAgICAgPHRkPnt0aGlzLnByb3BzLm5hbWV9PC90ZD5cbiAgICAgICAge2FjdGlvbnN9XG4gICAgICA8L3RyPlxuICAgICk7XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0ge1xuICBkZWxldGVXYXJuaW5nOiB7XG4gICAgcGFkZGluZ0xlZnQ6ICczNHB4JyxcbiAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcbiAgICBjb2xvcjogY29sb3IucmVkLFxuICB9LFxufTtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGNvbG9yIGZyb20gJ0BjZG8vYXBwcy91dGlsL2NvbG9yJztcbmltcG9ydCB7YXNzZXRzIGFzIGFzc2V0c0FwaX0gZnJvbSAnQGNkby9hcHBzL2NsaWVudEFwaSc7XG5cbmNvbnN0IGRlZmF1bHRJY29ucyA9IHtcbiAgaW1hZ2U6ICdmYSBmYS1waWN0dXJlLW8nLFxuICBhdWRpbzogJ2ZhIGZhLW11c2ljJyxcbiAgdmlkZW86ICdmYSBmYS12aWRlby1jYW1lcmEnLFxuICBwZGY6ICdmYSBmYS1maWxlLXBkZi1vJyxcbiAgZG9jOiAnZmEgZmEtZmlsZS10ZXh0LW8nLFxuICB1bmtub3duOiAnZmEgZmEtcXVlc3Rpb24nLFxufTtcblxuY29uc3QgYXNzZXRUaHVtYm5haWxTdHlsZSA9IHtcbiAgd2lkdGg6ICdhdXRvJyxcbiAgbWF4V2lkdGg6ICcxMDAlJyxcbiAgaGVpZ2h0OiAnYXV0bycsXG4gIG1heEhlaWdodDogJzEwMCUnLFxuICBtYXJnaW5Ub3A6ICc1MCUnLFxuICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC01MCUpJyxcbiAgbXNUcmFuc2Zvcm06ICd0cmFuc2xhdGVZKC01MCUpJyxcbiAgV2Via2l0VHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKScsXG59O1xuXG5jb25zdCBhc3NldEljb25TdHlsZSA9IHtcbiAgbWFyZ2luOiAnMTVweCAwJyxcbiAgZm9udFNpemU6ICczMnB4Jyxcbn07XG5cbmV4cG9ydCBjb25zdCBzdHlsZXMgPSB7XG4gIHdyYXBwZXI6IHtcbiAgICB3aWR0aDogNjAsXG4gICAgaGVpZ2h0OiA2MCxcbiAgICBtYXJnaW46ICcxMHB4IGF1dG8nLFxuICB9LFxuICBiYWNrZ3JvdW5kOiB7XG4gICAgYmFja2dyb3VuZDogJyNlZWUnLFxuICAgIGJvcmRlcjogJzFweCBzb2xpZCAjY2NjJyxcbiAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICB9LFxuICBhdWRpb0ljb246IHtcbiAgICBjb2xvcjogY29sb3IucHVycGxlLFxuICAgIG1hcmdpbkxlZnQ6ICdhdXRvJyxcbiAgICBtYXJnaW5SaWdodDogJ2F1dG8nLFxuICAgIGRpc3BsYXk6ICdibG9jaycsXG4gIH0sXG4gIGF1ZGlvV3JhcHBlcjoge1xuICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgfSxcbn07XG5cbmNsYXNzIEFzc2V0VGh1bWJuYWlsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdGltZXN0YW1wOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHR5cGU6IFByb3BUeXBlcy5vbmVPZihbJ2ltYWdlJywgJ2F1ZGlvJywgJ3ZpZGVvJywgJ3BkZicsICdkb2MnXSkuaXNSZXF1aXJlZCxcbiAgICBzdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBpY29uU3R5bGU6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgYXBpOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHByb2plY3RJZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBsZXZlbE5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgc291bmRQbGF5ZXI6IFByb3BUeXBlcy5vYmplY3QsXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgbGV0IGFwaSA9IHRoaXMucHJvcHMuYXBpIHx8IGFzc2V0c0FwaTsgLy8gRmFsbGJhY2sgdG8gYXNzZXRzQXBpLlxuICAgIGlmICh0aGlzLnByb3BzLmxldmVsTmFtZSkge1xuICAgICAgYXBpID0gYXBpLndpdGhMZXZlbE5hbWUodGhpcy5wcm9wcy5sZXZlbE5hbWUpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9qZWN0SWQpIHtcbiAgICAgIGFwaSA9IGFwaS53aXRoUHJvamVjdElkKHRoaXMucHJvcHMucHJvamVjdElkKTtcbiAgICB9XG4gICAgY29uc3QgYmFzZVBhdGggPSBhcGkuYmFzZVBhdGgodGhpcy5wcm9wcy5uYW1lKTtcbiAgICBsZXQgY2FjaGVCdXN0U3VmZml4ID0gJyc7XG4gICAgaWYgKHRoaXMucHJvcHMudGltZXN0YW1wKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGhpcy5wcm9wcy50aW1lc3RhbXApO1xuICAgICAgY2FjaGVCdXN0U3VmZml4ID0gYD90PSR7ZGF0ZS52YWx1ZU9mKCl9YDtcbiAgICB9XG5cbiAgICB0aGlzLnNyY1BhdGggPSBgJHtiYXNlUGF0aH0ke2NhY2hlQnVzdFN1ZmZpeH1gO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudHlwZSA9PT0gJ2F1ZGlvJyAmJiB0aGlzLnByb3BzLnNvdW5kUGxheWVyKSB7XG4gICAgICB0aGlzLnByb3BzLnNvdW5kUGxheWVyLnJlZ2lzdGVyKHtpZDogdGhpcy5zcmNQYXRoLCBtcDM6IHRoaXMuc3JjUGF0aH0pO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNQbGF5aW5nQXVkaW86IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBjbGlja1NvdW5kQ29udHJvbCA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5pc1BsYXlpbmdBdWRpbyAmJiB0aGlzLnByb3BzLnNvdW5kUGxheWVyKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtpc1BsYXlpbmdBdWRpbzogZmFsc2V9KTtcbiAgICAgIHRoaXMucHJvcHMuc291bmRQbGF5ZXIuc3RvcFBsYXlpbmdVUkwodGhpcy5zcmNQYXRoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuc291bmRQbGF5ZXIpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2lzUGxheWluZ0F1ZGlvOiB0cnVlfSk7XG4gICAgICB0aGlzLnByb3BzLnNvdW5kUGxheWVyLnBsYXkodGhpcy5zcmNQYXRoLCB7XG4gICAgICAgIG9uRW5kZWQ6ICgpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1BsYXlpbmdBdWRpbzogZmFsc2V9KTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge3R5cGUsIGljb25TdHlsZSwgc3R5bGV9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0VGh1bWJuYWlsXCI+XG4gICAgICAgIHt0eXBlID09PSAnYXVkaW8nID8gKFxuICAgICAgICAgIDxBdWRpb1RodW1ibmFpbFxuICAgICAgICAgICAgY2xpY2tTb3VuZENvbnRyb2w9e3RoaXMuY2xpY2tTb3VuZENvbnRyb2x9XG4gICAgICAgICAgICBpc1BsYXlpbmc9e3RoaXMuc3RhdGUuaXNQbGF5aW5nQXVkaW99XG4gICAgICAgICAgLz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7Li4uc3R5bGVzLndyYXBwZXIsIC4uLnN0eWxlLCAuLi5zdHlsZXMuYmFja2dyb3VuZH19PlxuICAgICAgICAgICAge3R5cGUgPT09ICdpbWFnZScgPyAoXG4gICAgICAgICAgICAgIDxJbWFnZVRodW1ibmFpbCBzcmM9e3RoaXMuc3JjUGF0aH0gLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxEZWZhdWx0VGh1bWJuYWlsIHR5cGU9e3R5cGV9IGljb25TdHlsZT17aWNvblN0eWxlfSAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXNzZXRUaHVtYm5haWw7XG5cbmNvbnN0IEF1ZGlvVGh1bWJuYWlsID0gY2xhc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIGNsaWNrU291bmRDb250cm9sOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBpc1BsYXlpbmc6IFByb3BUeXBlcy5ib29sLFxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBwbGF5SWNvbiA9IHRoaXMucHJvcHMuaXNQbGF5aW5nXG4gICAgICA/ICdmYS1wYXVzZS1jaXJjbGUnXG4gICAgICA6ICdmYS1wbGF5LWNpcmNsZSc7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBzdHlsZT17ey4uLnN0eWxlcy53cmFwcGVyLCAuLi5zdHlsZXMuYXVkaW9XcmFwcGVyfX0+XG4gICAgICAgIDxpXG4gICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5jbGlja1NvdW5kQ29udHJvbH1cbiAgICAgICAgICBjbGFzc05hbWU9eydmYSAnICsgcGxheUljb24gKyAnIGZhLTR4J31cbiAgICAgICAgICBzdHlsZT17c3R5bGVzLmF1ZGlvSWNvbn1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn07XG5cbmNvbnN0IEltYWdlVGh1bWJuYWlsID0gY2xhc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIHNyYzogUHJvcFR5cGVzLnN0cmluZyxcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxhIGhyZWY9e3RoaXMucHJvcHMuc3JjfSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCI+XG4gICAgICAgIHtcbiAgICAgICAgICAvLyBUT0RPOiBBMTF5Mjc5IChodHRwczovL2NvZGVkb3RvcmcuYXRsYXNzaWFuLm5ldC9icm93c2UvQTExWS0yNzkpXG4gICAgICAgICAgLy8gVmVyaWZ5IG9yIHVwZGF0ZSB0aGlzIGFsdC10ZXh0IGFzIG5lY2Vzc2FyeVxuICAgICAgICB9XG4gICAgICAgIDxpbWdcbiAgICAgICAgICBzcmM9e3RoaXMucHJvcHMuc3JjfVxuICAgICAgICAgIHN0eWxlPXthc3NldFRodW1ibmFpbFN0eWxlfVxuICAgICAgICAgIGlkPVwidWktaW1hZ2UtdGh1bWJuYWlsXCJcbiAgICAgICAgICBhbHQ9XCJcIlxuICAgICAgICAvPlxuICAgICAgPC9hPlxuICAgICk7XG4gIH1cbn07XG5cbmNvbnN0IERlZmF1bHRUaHVtYm5haWwgPSBjbGFzcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgdHlwZTogUHJvcFR5cGVzLm9uZU9mKFsnaW1hZ2UnLCAnYXVkaW8nLCAndmlkZW8nLCAncGRmJywgJ2RvYyddKS5pc1JlcXVpcmVkLFxuICAgIGljb25TdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxpXG4gICAgICAgIGNsYXNzTmFtZT17ZGVmYXVsdEljb25zW3RoaXMucHJvcHMudHlwZV0gfHwgZGVmYXVsdEljb25zLnVua25vd259XG4gICAgICAgIHN0eWxlPXt7Li4uYXNzZXRJY29uU3R5bGUsIC4uLnRoaXMucHJvcHMuaWNvblN0eWxlfX1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxufTtcbiIsIi8qKiBAZmlsZSBVcGxvYWQgYnV0dG9uIHdyYXBwaW5nIGEgaGlkZGVuIHVwbG9hZGVyIGNvbXBvbmVudC4gKi9cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEhpZGRlblVwbG9hZGVyIGZyb20gJy4vSGlkZGVuVXBsb2FkZXIuanN4JztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vdGVtcGxhdGVzL0J1dHRvbic7XG5pbXBvcnQge2Fzc2V0QnV0dG9uU3R5bGVzfSBmcm9tICcuL0FkZEFzc2V0QnV0dG9uUm93JztcbmltcG9ydCBpMThuIGZyb20gJ0BjZG8vbG9jYWxlJztcblxuLyoqXG4gKiBBIGZpbGUgdXBsb2FkIGNvbXBvbmVudC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXNzZXRVcGxvYWRlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgb25VcGxvYWRTdGFydDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvblVwbG9hZERvbmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgb25VcGxvYWRFcnJvcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgYWxsb3dlZEV4dGVuc2lvbnM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdXBsb2Fkc0VuYWJsZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgYXBpOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIH07XG5cbiAgLyoqXG4gICAqIFdlJ3ZlIGhpZGRlbiB0aGUgPGlucHV0IHR5cGU9XCJmaWxlXCIvPiBhbmQgcmVwbGFjZWQgaXQgd2l0aCBhIGJpZyBidXR0b24uXG4gICAqIEZvcndhcmQgY2xpY2tzIG9uIHRoZSBidXR0b24gdG8gdGhlIGhpZGRlbiBmaWxlIGlucHV0LlxuICAgKi9cbiAgZmlsZVVwbG9hZENsaWNrZWQgPSAoKSA9PiB0aGlzLnJlZnMudXBsb2FkZXIub3BlbkZpbGVDaG9vc2VyKCk7XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHthcGl9ID0gdGhpcy5wcm9wcztcbiAgICBsZXQgdXJsID0gYXBpLmdldFVwbG9hZFVybCgpO1xuICAgIGxldCB1cGxvYWREb25lID0gYXBpLndyYXBVcGxvYWREb25lQ2FsbGJhY2sodGhpcy5wcm9wcy5vblVwbG9hZERvbmUpO1xuICAgIGxldCB1cGxvYWRTdGFydCA9IGFwaS53cmFwVXBsb2FkU3RhcnRDYWxsYmFjayh0aGlzLnByb3BzLm9uVXBsb2FkU3RhcnQpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxzcGFuPlxuICAgICAgICA8SGlkZGVuVXBsb2FkZXJcbiAgICAgICAgICByZWY9XCJ1cGxvYWRlclwiXG4gICAgICAgICAgdG9Vcmw9e3VybH1cbiAgICAgICAgICBhbGxvd2VkRXh0ZW5zaW9ucz17dGhpcy5wcm9wcy5hbGxvd2VkRXh0ZW5zaW9uc31cbiAgICAgICAgICBvblVwbG9hZFN0YXJ0PXt1cGxvYWRTdGFydH1cbiAgICAgICAgICBvblVwbG9hZERvbmU9e3VwbG9hZERvbmV9XG4gICAgICAgICAgb25VcGxvYWRFcnJvcj17dGhpcy5wcm9wcy5vblVwbG9hZEVycm9yfVxuICAgICAgICAvPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgb25DbGljaz17dGhpcy5maWxlVXBsb2FkQ2xpY2tlZH1cbiAgICAgICAgICBjbGFzc05hbWU9XCJzaGFyZVwiXG4gICAgICAgICAgaWQ9XCJ1cGxvYWQtYXNzZXRcIlxuICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5wcm9wcy51cGxvYWRzRW5hYmxlZH1cbiAgICAgICAgICBpY29uPVwidXBsb2FkXCJcbiAgICAgICAgICB0ZXh0PXtpMThuLnVwbG9hZEZpbGUoKX1cbiAgICAgICAgICBzdHlsZT17YXNzZXRCdXR0b25TdHlsZXMuYnV0dG9ufVxuICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgIC8+XG4gICAgICA8L3NwYW4+XG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uLy4uL3RlbXBsYXRlcy9CdXR0b24nO1xuaW1wb3J0IGkxOG4gZnJvbSAnQGNkby9sb2NhbGUnO1xuaW1wb3J0IGNvbG9yIGZyb20gJ0BjZG8vYXBwcy91dGlsL2NvbG9yJztcbmltcG9ydCB7YXNzZXRzIGFzIGFzc2V0c0FwaX0gZnJvbSAnQGNkby9hcHBzL2NsaWVudEFwaSc7XG5pbXBvcnQge2Fzc2V0QnV0dG9uU3R5bGVzfSBmcm9tICcuL0FkZEFzc2V0QnV0dG9uUm93JztcbmltcG9ydCB7QXVkaW9FcnJvclR5cGV9IGZyb20gJy4vQXNzZXRNYW5hZ2VyJztcbmltcG9ydCBmaXJlaG9zZUNsaWVudCBmcm9tICdAY2RvL2FwcHMvbGliL3V0aWwvZmlyZWhvc2UnO1xuaW1wb3J0IGdldFJlY29yZGVyLCB7UmVjb3JkaW5nRmlsZVR5cGV9IGZyb20gJy4vcmVjb3JkZXJzJztcblxuY29uc3QgUkVDT1JEX01BWF9USU1FID0gMzAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1ZGlvUmVjb3JkZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIG9uVXBsb2FkRG9uZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgYWZ0ZXJBdWRpb1NhdmVkOiBQcm9wVHlwZXMuZnVuYyxcbiAgICByZWNvcmRpbmdGaWxlVHlwZTogUHJvcFR5cGVzLm9uZU9mKE9iamVjdC52YWx1ZXMoUmVjb3JkaW5nRmlsZVR5cGUpKSxcblxuICAgIC8vVGVtcG9yYXJ5IHByb3AgZm9yIGxvZ2dpbmcgLSBpbmRpY2F0ZXMgdXNlciBjaG9zZSAnTWFuYWdlIEFzc2V0cydcbiAgICBpbWFnZVBpY2tlcjogUHJvcFR5cGVzLmJvb2wsXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy50aW1lb3V0ID0gbnVsbDtcbiAgICB0aGlzLnJlY29yZGVyID0gbnVsbDtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYXVkaW9OYW1lOiAnJyxcbiAgICAgIHJlY29yZGluZzogZmFsc2UsXG4gICAgICBsb2FkaW5nOiB0cnVlLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCA9ICgpID0+IHtcbiAgICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkge1xuICAgICAgdGhpcy5yZWNvcmRlciA9IGdldFJlY29yZGVyKHRoaXMucHJvcHMucmVjb3JkaW5nRmlsZVR5cGUpO1xuXG4gICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzXG4gICAgICAgIC5nZXRVc2VyTWVkaWEoe2F1ZGlvOiB0cnVlfSlcbiAgICAgICAgLnRoZW4odGhpcy5yZWNvcmRlci5pbml0KVxuICAgICAgICAudGhlbigoKSA9PiB0aGlzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pKVxuICAgICAgICAuY2F0Y2goKCkgPT4gdGhpcy5wcm9wcy5hZnRlckF1ZGlvU2F2ZWQoQXVkaW9FcnJvclR5cGUuSU5JVElBTElaRSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByb3BzLmFmdGVyQXVkaW9TYXZlZChBdWRpb0Vycm9yVHlwZS5JTklUSUFMSVpFKTtcbiAgICB9XG4gIH07XG5cbiAgc2F2ZUF1ZGlvID0gYmxvYiA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bG9hZGluZzogdHJ1ZX0pO1xuICAgIGFzc2V0c0FwaS5wdXRBc3NldChcbiAgICAgIHRoaXMuc3RhdGUuYXVkaW9OYW1lICsgdGhpcy5yZWNvcmRlci5nZXRFeHRlbnNpb24oKSxcbiAgICAgIGJsb2IsXG4gICAgICB4aHIgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHthdWRpb05hbWU6ICcnLCBsb2FkaW5nOiBmYWxzZX0pO1xuICAgICAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpO1xuICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSBkZWNvZGVVUkkocmVzdWx0LmZpbGVuYW1lKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vblVwbG9hZERvbmUocmVzdWx0KTtcbiAgICAgICAgdGhpcy5wcm9wcy5hZnRlckF1ZGlvU2F2ZWQoQXVkaW9FcnJvclR5cGUuTk9ORSk7XG4gICAgICB9LFxuICAgICAgZXJyb3IgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pO1xuICAgICAgICBjb25zb2xlLmVycm9yKGBBdWRpbyBGYWlsZWQgdG8gU2F2ZTogJHtlcnJvcn1gKTtcbiAgICAgICAgdGhpcy5wcm9wcy5hZnRlckF1ZGlvU2F2ZWQoQXVkaW9FcnJvclR5cGUuU0FWRSk7XG4gICAgICB9XG4gICAgKTtcbiAgfTtcblxuICBvbk5hbWVDaGFuZ2UgPSBldmVudCA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YXVkaW9OYW1lOiBldmVudC50YXJnZXQudmFsdWV9KTtcbiAgfTtcblxuICBvbkNhbmNlbCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHthdWRpb05hbWU6ICcnLCByZWNvcmRpbmc6IGZhbHNlfSwgKCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy5hZnRlckF1ZGlvU2F2ZWQoQXVkaW9FcnJvclR5cGUuTk9ORSk7XG4gICAgICAvLyBPbmx5IHN0b3AgcmVjb3JkaW5nIGlmIGl0J3MgYmVlbiBzdGFydGVkXG4gICAgICBpZiAodGhpcy5yZWNvcmRlci5pc1JlY29yZGluZygpKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlY29yZFRpbWVvdXQpO1xuICAgICAgICB0aGlzLnJlY29yZGVyLnN0b3BSZWNvcmRpbmcoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB0b2dnbGVSZWNvcmQgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUucmVjb3JkaW5nKSB7XG4gICAgICB0aGlzLnN0b3BSZWNvcmRpbmdBbmRTYXZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhcnRSZWNvcmRpbmcoKTtcbiAgICB9XG4gIH07XG5cbiAgc3RhcnRSZWNvcmRpbmcgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3R1ZHlHcm91cCA9IHRoaXMucHJvcHMuaW1hZ2VQaWNrZXIgPyAnbWFuYWdlLWFzc2V0cycgOiAnbGlicmFyeS10YWInO1xuICAgIHRoaXMucmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKS50aGVuKCgpID0+IHtcbiAgICAgIGZpcmVob3NlQ2xpZW50LnB1dFJlY29yZChcbiAgICAgICAge1xuICAgICAgICAgIHN0dWR5OiAnc291bmQtZGlhbG9nLTInLFxuICAgICAgICAgIHN0dWR5X2dyb3VwOiBzdHVkeUdyb3VwLFxuICAgICAgICAgIGV2ZW50OiAncmVjb3JkLXNvdW5kJyxcbiAgICAgICAgICBkYXRhX2pzb246IHRoaXMuc3RhdGUuYXVkaW9OYW1lLFxuICAgICAgICB9LFxuICAgICAgICB7aW5jbHVkZVVzZXJJZDogdHJ1ZX1cbiAgICAgICk7XG4gICAgICB0aGlzLnNldFN0YXRlKHtyZWNvcmRpbmc6ICF0aGlzLnN0YXRlLnJlY29yZGluZ30pO1xuICAgIH0pO1xuXG4gICAgLy9TdG9wIHJlY29yZGluZyBhZnRlciBzZXQgYW1vdW50IG9mIHRpbWVcbiAgICB0aGlzLnJlY29yZFRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuc3RvcFJlY29yZGluZ0FuZFNhdmUsIFJFQ09SRF9NQVhfVElNRSk7XG4gIH07XG5cbiAgLy9TdG9wIHJlY29yZGluZyBhbmQgc2F2ZSB0aGUgZmluYWwgYXVkaW9cbiAgc3RvcFJlY29yZGluZ0FuZFNhdmUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUucmVjb3JkaW5nKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZWNvcmRUaW1lb3V0KTtcbiAgICAgIHRoaXMucmVjb3JkZXIuc3RvcFJlY29yZGluZygpLnRoZW4oYmxvYiA9PiB7XG4gICAgICAgIHRoaXMuc2F2ZUF1ZGlvKGJsb2IpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHtyZWNvcmRpbmc6ICF0aGlzLnN0YXRlLnJlY29yZGluZ30pO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxkaXYgc3R5bGU9e3N0eWxlcy5idXR0b25Sb3d9PlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2kxOG4uc291bmROYW1lKCl9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbk5hbWVDaGFuZ2V9XG4gICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hdWRpb05hbWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5yZWNvcmRpbmcgJiYgKFxuICAgICAgICAgICAgPHNwYW4gc3R5bGU9e2Fzc2V0QnV0dG9uU3R5bGVzLmJ1dHRvbn0+XG4gICAgICAgICAgICAgIDxpIHN0eWxlPXtzdHlsZXMucmVjb3JkaW5nSWNvbn0gY2xhc3NOYW1lPVwiZmEgZmEtY2lyY2xlXCIgLz5cbiAgICAgICAgICAgICAge2kxOG4ucmVjb3JkaW5nKCl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLmxvYWRpbmcgJiYgdGhpcy5zdGF0ZS5hdWRpb05hbWUubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3N0eWxlcy5zcGlubmVyfT5cbiAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmEgZmEtc3Bpbm5lciBmYS1zcGluXCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7Zm9udFNpemU6ICcyMHB4J319XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZVJlY29yZH1cbiAgICAgICAgICAgICAgaWQ9XCJzdGFydC1zdG9wLXJlY29yZFwiXG4gICAgICAgICAgICAgIHN0eWxlPXthc3NldEJ1dHRvblN0eWxlcy5idXR0b259XG4gICAgICAgICAgICAgIGNvbG9yPXtCdXR0b24uQnV0dG9uQ29sb3IuYmx1ZX1cbiAgICAgICAgICAgICAgaWNvbj17dGhpcy5zdGF0ZS5yZWNvcmRpbmcgPyAnc3RvcCcgOiAnY2lyY2xlJ31cbiAgICAgICAgICAgICAgdGV4dD17dGhpcy5zdGF0ZS5yZWNvcmRpbmcgPyBpMThuLnN0b3AoKSA6IGkxOG4ucmVjb3JkKCl9XG4gICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnN0YXRlLmF1ZGlvTmFtZS5sZW5ndGggPT09IDAgfHwgdGhpcy5zdGF0ZS5sb2FkaW5nfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNhbmNlbH1cbiAgICAgICAgICAgICAgaWQ9XCJjYW5jZWwtcmVjb3JkXCJcbiAgICAgICAgICAgICAgc3R5bGU9e2Fzc2V0QnV0dG9uU3R5bGVzLmJ1dHRvbn1cbiAgICAgICAgICAgICAgY29sb3I9e0J1dHRvbi5CdXR0b25Db2xvci5ncmF5fVxuICAgICAgICAgICAgICB0ZXh0PXtpMThuLmNhbmNlbCgpfVxuICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSB7XG4gIGJ1dHRvblJvdzoge1xuICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICBmbGV4RmxvdzogJ3JvdycsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgfSxcbiAgcmVjb3JkaW5nSWNvbjoge1xuICAgIGNvbG9yOiAncmVkJyxcbiAgICBtYXJnaW46IDUsXG4gIH0sXG4gIHdhcm5pbmc6IHtcbiAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcbiAgICBjb2xvcjogY29sb3IucmVkLFxuICB9LFxuICBzcGlubmVyOiB7XG4gICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgbWFyZ2luVG9wOiAnMTZweCcsXG4gICAgbWFyZ2luUmlnaHQ6ICcxMHB4JyxcbiAgfSxcbn07XG4iLCIvKiogQGZpbGUgSGlkZGVuIGZpbGUgaW5wdXQgd2l0aCBpbnRlcmZhY2UgZm9yIGhhbmRsaW5nIHVwbG9hZHMuICovXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZmlyZWhvc2VDbGllbnQgZnJvbSAnQGNkby9hcHBzL2xpYi91dGlsL2ZpcmVob3NlJztcblxuLyoqXG4gKiBBIGhpZGRlbiBmaWxlIGlucHV0IHByb3ZpZGluZyB1cGxvYWQgZnVuY3Rpb25hbGl0eSB3aXRoIGV2ZW50IGhvb2tzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIaWRkZW5VcGxvYWRlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgdG9Vcmw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBhbGxvd2VkRXh0ZW5zaW9uczogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBvblVwbG9hZFN0YXJ0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIG9uVXBsb2FkRG9uZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvblVwbG9hZEVycm9yOiBQcm9wVHlwZXMuZnVuYyxcbiAgfTtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG5cbiAgICAkKHRoaXMucmVmcy51cGxvYWRlcikuZmlsZXVwbG9hZCh7XG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgdXJsOiB0aGlzLnByb3BzLnRvVXJsLFxuICAgICAgLy8gcHJldmVudCBmaWxldXBsb2FkIGZyb20gcmVwbGFjaW5nIHRoZSBpbnB1dCBET00gZWxlbWVudCwgd2hpY2hcbiAgICAgIC8vIFJlYWN0IGRvZXMgbm90IGxpa2VcbiAgICAgIHJlcGxhY2VGaWxlSW5wdXQ6IGZhbHNlLFxuICAgICAgYWRkOiBmdW5jdGlvbiAoZSwgZGF0YSkge1xuICAgICAgICAvLyBvblVwbG9hZFN0YXJ0IG1ldGhvZCBtdXN0IGNhbGwgZGF0YS5zdWJtaXQoKVxuICAgICAgICBwcm9wcy5vblVwbG9hZFN0YXJ0KGRhdGEpO1xuICAgICAgICBjb25zdCBhdWRpb0ZpbGVOYW1lID0gZGF0YS5maWxlc1swXS5uYW1lLmluY2x1ZGVzKCdtcDMnKVxuICAgICAgICAgID8gZGF0YS5maWxlc1swXS5uYW1lXG4gICAgICAgICAgOiBudWxsO1xuICAgICAgICBpZiAoYXVkaW9GaWxlTmFtZSkge1xuICAgICAgICAgIGZpcmVob3NlQ2xpZW50LnB1dFJlY29yZChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc3R1ZHk6ICdzb3VuZC1kaWFsb2ctMicsXG4gICAgICAgICAgICAgIHN0dWR5X2dyb3VwOiAnbGlicmFyeS1maWxlJyxcbiAgICAgICAgICAgICAgZXZlbnQ6ICd1cGxvYWQtZmlsZScsXG4gICAgICAgICAgICAgIGRhdGFfanNvbjogYXVkaW9GaWxlTmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7aW5jbHVkZVVzZXJJZDogdHJ1ZX1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG9uZTogZnVuY3Rpb24gKGUsIGRhdGEpIHtcbiAgICAgICAgcHJvcHMub25VcGxvYWREb25lKGRhdGEucmVzdWx0KTtcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKGUsIGRhdGEpIHtcbiAgICAgICAgaWYgKHByb3BzLm9uVXBsb2FkRXJyb3IpIHtcbiAgICAgICAgICBwcm9wcy5vblVwbG9hZEVycm9yKGUuc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICQodGhpcy5yZWZzLnVwbG9hZGVyKS5maWxldXBsb2FkKCdkZXN0cm95Jyk7XG4gIH1cblxuICBvcGVuRmlsZUNob29zZXIgPSAoKSA9PiB0aGlzLnJlZnMudXBsb2FkZXIuY2xpY2soKTtcblxuICByZW5kZXIoKSB7XG4gICAgLy8gTk9URTogSUU5IHdpbGwgaWdub3JlIGFjY2VwdCwgd2hpY2ggbWVhbnMgb24gdGhpcyBicm93c2VyIHdlIGNhbiBlbmRcbiAgICAvLyB1cCB1cGxvYWRpbmcgZmlsZXMgdGhhdCBkb24ndCBtYXRjaCBhbGxvd2VkRXh0ZW5zaW9uczsgZm9yIHRoaXMgcmVhc29uLFxuICAgIC8vIHRoZSBzZXJ2ZXIgc2hvdWxkIGFsc28gdmFsaWRhdGUgYWxsb3dlZCBmaWxlIHR5cGVzLlxuICAgIHJldHVybiAoXG4gICAgICA8aW5wdXRcbiAgICAgICAgcmVmPVwidXBsb2FkZXJcIlxuICAgICAgICBjbGFzc05hbWU9XCJ1aXRlc3QtaGlkZGVuLXVwbG9hZGVyXCJcbiAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICBzdHlsZT17e2Rpc3BsYXk6ICdub25lJ319XG4gICAgICAgIGFjY2VwdD17dGhpcy5wcm9wcy5hbGxvd2VkRXh0ZW5zaW9ucyB8fCAnKid9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxud2luZG93LmRhc2hib2FyZCA9IHdpbmRvdy5kYXNoYm9hcmQgfHwge307XG53aW5kb3cuZGFzaGJvYXJkLkhpZGRlblVwbG9hZGVyID0gSGlkZGVuVXBsb2FkZXI7XG4iXSwibmFtZXMiOlsiYXNzZXRCdXR0b25TdHlsZXMiLCJidXR0b24iLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsIm1hcmdpblRvcCIsImZvbnRTaXplIiwiZm9udFdlaWdodCIsIm1hcmdpblJpZ2h0IiwiYnV0dG9uUm93IiwiZGlzcGxheSIsImZsZXhGbG93IiwiYWxpZ25JdGVtcyIsIlJlY29yZEJ1dHRvbiIsIm9uU2VsZWN0UmVjb3JkIiwiZGlzYWJsZWQiLCJvbkNsaWNrIiwiaWQiLCJjbGFzc05hbWUiLCJ0ZXh0IiwiaTE4biIsInJlY29yZEF1ZGlvIiwiaWNvbiIsInN0eWxlIiwic2l6ZSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImZ1bmMiLCJib29sIiwiQWRkQXNzZXRCdXR0b25Sb3ciLCJyZW5kZXIiLCJzaG91bGRTaG93UmVjb3JkQnV0dG9uIiwidGhpcyIsInByb3BzIiwiaGlkZUF1ZGlvUmVjb3JkaW5nIiwiaXNJRTExIiwidXBsb2Fkc0VuYWJsZWQiLCJhbGxvd2VkRXh0ZW5zaW9ucyIsImFwaSIsIm9uVXBsb2FkU3RhcnQiLCJvblVwbG9hZERvbmUiLCJvblVwbG9hZEVycm9yIiwicmVjb3JkRGlzYWJsZWQiLCJzdGF0dXNNZXNzYWdlIiwiUmVhY3QiLCJDb21wb25lbnQiLCJpc1JlcXVpcmVkIiwic3RyaW5nIiwib2JqZWN0IiwiQXVkaW9FcnJvclR5cGUiLCJOT05FIiwiSU5JVElBTElaRSIsIlNBVkUiLCJGSUxFIiwiSUNPTiIsIlVSTCIsIkRFRkFVTFQiLCJlcnJvck1lc3NhZ2VzIiwidW5rbm93biIsImdldEVycm9yTWVzc2FnZSIsInN0YXR1cyIsIkFzc2V0TWFuYWdlciIsInJlc3VsdCIsInJlc3BvbnNlIiwiSlNPTiIsInBhcnNlIiwic2V0U3RhdGUiLCJzdGFydGVyQXNzZXRzIiwic3RhcnRlcl9hc3NldHMiLCJ4aHIiLCJhc3NldExpc3RTdG9yZSIsInJlc2V0IiwiZmlsZXMiLCJhc3NldHMiLCJsaXN0IiwidXNlRmlsZXNBcGkiLCJvbkFzc2V0TGlzdFJlY2VpdmVkIiwiZGF0YSIsInN1Ym1pdCIsIm5ld1N0YXRlIiwiZmlsZW5hbWUiLCJpc1N0YXJ0TW9kZSIsInN0YXRlIiwiYWRkIiwiYXNzZXRzQ2hhbmdlZCIsImZpcmVob3NlQ2xpZW50IiwicHV0UmVjb3JkIiwic3R1ZHkiLCJzdHVkeV9ncm91cCIsImV2ZW50IiwicHJvamVjdF9pZCIsInByb2plY3RJZCIsImRhdGFfaW50IiwicmVjb3JkaW5nQXVkaW8iLCJuYW1lIiwicmVtb3ZlIiwiYXNzZXRDaG9zZW4iLCJkYXRhX2pzb24iLCJzdHJpbmdpZnkiLCJhc3NldE5hbWUiLCJlbGVtZW50SWQiLCJmaWx0ZXIiLCJhc3NldCIsImVyciIsImF1ZGlvRXJyb3JUeXBlIiwia2V5IiwidGltZXN0YW1wIiwidHlwZSIsImNhdGVnb3J5Iiwic291bmRQbGF5ZXIiLCJpbWFnZVBpY2tlciIsImxldmVsTmFtZSIsImxlbmd0aCIsImJvdW5kQXBpIiwic3RhcnRlckFzc2V0c0FwaSIsIndpdGhMZXZlbE5hbWUiLCJtYXAiLCJkZWZhdWx0QXNzZXRQcm9wcyIsIm9uQ2hvb3NlIiwiU1RBUlRFUl9BU1NFVF9QUkVGSVgiLCJvbkRlbGV0ZSIsImRlbGV0ZVN0YXJ0ZXJBc3NldFJvdyIsImhpZGVEZWxldGUiLCJmaWxlc0FwaSIsImFzc2V0c0FwaSIsImRlbGV0ZUFzc2V0Um93IiwiZ2V0UHJvamVjdElkIiwid2l0aFByb2plY3RJZCIsImNvbXBvbmVudERpZE1vdW50IiwiZ2V0U3RhcnRlckFzc2V0cyIsIm9uU3RhcnRlckFzc2V0c1JlY2VpdmVkIiwib25TdGFydGVyQXNzZXRzRmFpbHVyZSIsImdldEZpbGVzIiwib25Bc3NldExpc3RGYWlsdXJlIiwiYXNzZXRMaXN0IiwiZGlzcGxheUF1ZGlvUmVjb3JkZXIiLCJidXR0b25zIiwiYXVkaW9TYXZlRXJyb3IiLCJhdWRpb0luaXRpYWxpemVFcnJvciIsImFmdGVyQXVkaW9TYXZlZCIsInJlY29yZGluZ0ZpbGVUeXBlIiwidXBsb2FkQXBpIiwiZGlzYWJsZUF1ZGlvUmVjb3JkaW5nIiwibWFyZ2luIiwidGV4dEFsaWduIiwiZW1wdHlUZXh0IiwibWFuYWdlQXNzZXRzU291bmRMaWJyYXJ5TWVzc2FnZSIsInNvdW5kTGlicmFyeUJ1dHRvblRleHQiLCJzb3VuZExpYnJhcnkiLCJtYW5hZ2VBc3NldHNTb3VuZFVwbG9hZE1lc3NhZ2UiLCJhc3NldFVwbG9hZGVyQnV0dG9uVGV4dCIsInVwbG9hZEZpbGUiLCJtYW5hZ2VBc3NldHNEZWZhdWx0TWVzc2FnZSIsInN0eWxlcyIsInJvd3MiLCJnZXRTdGFydGVyQXNzZXRSb3dzIiwiZ2V0QXNzZXRSb3dzIiwibWF4SGVpZ2h0Iiwib3ZlcmZsb3dZIiwid2lkdGgiLCJvbmVPZiIsIk9iamVjdCIsInZhbHVlcyIsIlJlY29yZGluZ0ZpbGVUeXBlIiwibGluZUhlaWdodCIsIkFzc2V0Um93IiwiYWN0aW9uIiwiYWN0aW9uVGV4dCIsImF0dGVtcHRlZFVzZWREZWxldGUiLCJkZWxldGVGaWxlIiwiZXJyb3JEZWxldGluZyIsImluY2x1ZGVVc2VySWQiLCJhY3Rpb25zIiwiZmxleCIsImNob29zZUFzc2V0IiwiY2hvb3NlIiwidG9GaXhlZCIsInVzYWdlIiwiJCIsImZpbmQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhdHRlbXB0QmFkRGVsZXRlIiwiY29uZmlybURlbGV0ZSIsImRlbGV0ZVdhcm5pbmciLCJjYW5ub3REZWxldGVVc2VkSW1hZ2UiLCJoYW5kbGVEZWxldGUiLCJjYW5jZWxEZWxldGUiLCJjb25maXJtRGVsZXRlRXhwbGFuYXRpb24iLCJvbkRvdWJsZUNsaWNrIiwibnVtYmVyIiwiY29sb3IiLCJyZWQiLCJkZWZhdWx0SWNvbnMiLCJpbWFnZSIsImF1ZGlvIiwidmlkZW8iLCJwZGYiLCJkb2MiLCJhc3NldFRodW1ibmFpbFN0eWxlIiwibWF4V2lkdGgiLCJoZWlnaHQiLCJ0cmFuc2Zvcm0iLCJtc1RyYW5zZm9ybSIsIldlYmtpdFRyYW5zZm9ybSIsImFzc2V0SWNvblN0eWxlIiwid3JhcHBlciIsImJhY2tncm91bmQiLCJib3JkZXIiLCJhdWRpb0ljb24iLCJwdXJwbGUiLCJtYXJnaW5MZWZ0IiwiYXVkaW9XcmFwcGVyIiwiQXNzZXRUaHVtYm5haWwiLCJpc1BsYXlpbmdBdWRpbyIsInN0b3BQbGF5aW5nVVJMIiwic3JjUGF0aCIsInBsYXkiLCJvbkVuZGVkIiwiYmFzZVBhdGgiLCJjYWNoZUJ1c3RTdWZmaXgiLCJkYXRlIiwiRGF0ZSIsInZhbHVlT2YiLCJyZWdpc3RlciIsIm1wMyIsImljb25TdHlsZSIsIkF1ZGlvVGh1bWJuYWlsIiwiY2xpY2tTb3VuZENvbnRyb2wiLCJpc1BsYXlpbmciLCJJbWFnZVRodW1ibmFpbCIsInNyYyIsIkRlZmF1bHRUaHVtYm5haWwiLCJwbGF5SWNvbiIsImhyZWYiLCJ0YXJnZXQiLCJyZWwiLCJhbHQiLCJBc3NldFVwbG9hZGVyIiwicmVmcyIsInVwbG9hZGVyIiwib3BlbkZpbGVDaG9vc2VyIiwidXJsIiwiZ2V0VXBsb2FkVXJsIiwidXBsb2FkRG9uZSIsIndyYXBVcGxvYWREb25lQ2FsbGJhY2siLCJ1cGxvYWRTdGFydCIsIndyYXBVcGxvYWRTdGFydENhbGxiYWNrIiwicmVmIiwidG9VcmwiLCJmaWxlVXBsb2FkQ2xpY2tlZCIsIkF1ZGlvUmVjb3JkZXIiLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJyZWNvcmRlciIsImdldFJlY29yZGVyIiwidGhlbiIsImluaXQiLCJsb2FkaW5nIiwiYmxvYiIsInB1dEFzc2V0IiwiYXVkaW9OYW1lIiwiZ2V0RXh0ZW5zaW9uIiwiZGVjb2RlVVJJIiwiZXJyb3IiLCJjb25zb2xlIiwidmFsdWUiLCJyZWNvcmRpbmciLCJpc1JlY29yZGluZyIsImNsZWFyVGltZW91dCIsInJlY29yZFRpbWVvdXQiLCJzdG9wUmVjb3JkaW5nIiwic3RvcFJlY29yZGluZ0FuZFNhdmUiLCJzdGFydFJlY29yZGluZyIsInN0dWR5R3JvdXAiLCJzZXRUaW1lb3V0Iiwic2F2ZUF1ZGlvIiwidGltZW91dCIsInBsYWNlaG9sZGVyIiwic291bmROYW1lIiwib25DaGFuZ2UiLCJvbk5hbWVDaGFuZ2UiLCJyZWNvcmRpbmdJY29uIiwic3Bpbm5lciIsInRvZ2dsZVJlY29yZCIsIkJ1dHRvbiIsIkJ1dHRvbkNvbG9yIiwiYmx1ZSIsInN0b3AiLCJyZWNvcmQiLCJvbkNhbmNlbCIsImdyYXkiLCJjYW5jZWwiLCJqdXN0aWZ5Q29udGVudCIsIndhcm5pbmciLCJ2ZXJ0aWNhbEFsaWduIiwiSGlkZGVuVXBsb2FkZXIiLCJjbGljayIsImZpbGV1cGxvYWQiLCJkYXRhVHlwZSIsInJlcGxhY2VGaWxlSW5wdXQiLCJlIiwiYXVkaW9GaWxlTmFtZSIsImluY2x1ZGVzIiwiZG9uZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiYWNjZXB0Iiwid2luZG93IiwiZGFzaGJvYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==