"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[185],{"./src/templates/SafeMarkdown.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _redactableMarkdown=_interopRequireDefault(__webpack_require__("./node_modules/@code-dot-org/redactable-markdown/dist/main.js")),_remarkPlugins=__webpack_require__("./node_modules/@code-dot-org/remark-plugins/src/index.js"),_github=_interopRequireDefault(__webpack_require__("./node_modules/hast-util-sanitize/lib/github.json")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_rehypeRaw=_interopRequireDefault(__webpack_require__("./node_modules/rehype-raw/index.js")),_rehypeReact=_interopRequireDefault(__webpack_require__("./node_modules/rehype-react/index.js")),_rehypeSanitize=_interopRequireDefault(__webpack_require__("./node_modules/rehype-sanitize/index.js")),_remarkRehype=_interopRequireDefault(__webpack_require__("./node_modules/remark-rehype/index.js")),_externalLinks=_interopRequireDefault(__webpack_require__("./src/templates/plugins/externalLinks.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var SafeMarkdown=function(_React$Component){function SafeMarkdown(){return _React$Component.apply(this,arguments)||this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(SafeMarkdown,_React$Component),SafeMarkdown.prototype.render=function render(){var rendered=(this.props.openExternalLinksInNewTab?markdownToReactExternalLinks:markdownToReact).processSync(this.props.markdown).contents,markdownProps={};return this.props.className&&(markdownProps.className=this.props.className),rendered&&"div"===rendered.type&&!Object.keys(markdownProps).length?rendered:_react.default.createElement("div",markdownProps,rendered)},SafeMarkdown}(_react.default.Component);!function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(SafeMarkdown,"propTypes",{markdown:_propTypes.default.string.isRequired,openExternalLinksInNewTab:_propTypes.default.bool,className:_propTypes.default.string});var schema=Object.assign({},_github.default);schema.attributes.img.push("height","width"),schema.tagNames.push("span"),schema.attributes.span=["dataUrl","className"],schema.attributes["*"].push("style","className"),schema.attributes.b=["dataId"],schema.clobber=[];var blocklyTags=["block","functional_input","mutation","next","statement","title","field","value","xml"];schema.tagNames=schema.tagNames.concat(blocklyTags);var blocklyComponentWrappers={};blocklyTags.forEach((function(tag){schema.attributes[tag]=["block_text","id","inline","name","type"],blocklyComponentWrappers[tag]=function(props){var BlocklyElement=tag;return _react.default.createElement(BlocklyElement,_extends({is:tag},props))}}));var markdownToReact=_redactableMarkdown.default.create().getParser().use([_remarkPlugins.clickableText,_remarkPlugins.expandableImages,_remarkPlugins.visualCodeBlock,_remarkPlugins.xmlAsTopLevelBlock,_remarkPlugins.details]).use(_remarkRehype.default,{allowDangerousHTML:!0}).use(_rehypeRaw.default).use(_rehypeSanitize.default,schema).use(_rehypeReact.default,{createElement:_react.default.createElement,components:blocklyComponentWrappers}),markdownToReactExternalLinks=markdownToReact().use(_externalLinks.default,{links:"all"});exports.default=SafeMarkdown;module.exports=exports.default},"./src/templates/plugins/externalLinks.js":(__unused_webpack_module,exports)=>{function isExternalLink(url){return!/https?:\/\/([^.]+\.)*code.org(:[0-9]+)?\//.test(function fullyQualified(path){return(a=a||document.createElement("a")).href=path,a.href}(url))}var a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function externalLinks(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},tokenizers=this.Parser.prototype.inlineTokenizers,original=tokenizers.link,all="all"===options.links;tokenizers.link=function(eat,value,silent){var link=original.call(this,eat,value,silent);if(link&&"link"===link.type&&(all||isExternalLink(link.url))){link.data=link.data||{},link.data.hProperties=link.data.hProperties||{};var props=link.data.hProperties;props.target=props.target||"_blank",props.rel="noreferrer noopener"}return link},tokenizers.link.locator=original.locator},exports.isExternalLink=isExternalLink},"./src/weblab/SupportArticleMarkdown.jsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function SupportArticleMarkdown(){return _react.default.createElement(_SafeMarkdown.default,{markdown:_locale.default.troubleshootingSupport({url:_constants.SUPPORT_ARTICLE_URL}),openExternalLinksInNewTab:!0})};var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_SafeMarkdown=_interopRequireDefault(__webpack_require__("./src/templates/SafeMarkdown.jsx")),_constants=__webpack_require__("./src/weblab/constants.js"),_locale=_interopRequireDefault(__webpack_require__("./src/weblab/locale-do-not-import.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=exports.default},"./src/weblab/constants.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.SUPPORT_ARTICLE_URL=exports.FatalErrorType=exports.FILE_SYSTEM_ERROR=exports.BRAMBLE_READY_STATE=void 0;var _utils=__webpack_require__("./src/utils.js");exports.SUPPORT_ARTICLE_URL="https://support.code.org/hc/en-us/articles/360016804871",exports.FatalErrorType=(0,_utils.makeEnum)("Default","LoadFailure","ResetFailure"),exports.FILE_SYSTEM_ERROR="EFILESYSTEMERROR",exports.BRAMBLE_READY_STATE="bramble:readyToMount"},"./src/weblab/dialogs/FatalErrorDialog.jsx":(module,exports,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=FatalErrorDialog;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_StylizedBaseDialog=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("./src/sharedComponents/StylizedBaseDialog.jsx")),_utils=__webpack_require__("./src/utils.js"),_SupportArticleMarkdown=_interopRequireDefault(__webpack_require__("./src/weblab/SupportArticleMarkdown.jsx")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_locale2=_interopRequireDefault(__webpack_require__("./src/weblab/locale-do-not-import.js")),_excluded=["isOpen","errorMessage","handleClose","handleResetProject"];function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function FatalErrorDialog(_ref){var isOpen=_ref.isOpen,errorMessage=_ref.errorMessage,handleClose=_ref.handleClose,handleResetProject=_ref.handleResetProject,props=_objectWithoutProperties(_ref,_excluded),body=_react.default.createElement("div",null,_react.default.createElement("p",null,errorMessage),_react.default.createElement(_SupportArticleMarkdown.default,null)),footerButtons=[_react.default.createElement(_StylizedBaseDialog.FooterButton,{text:_locale.default.tryAgain(),onClick:_utils.reload,key:"cancel",type:"cancel"}),_react.default.createElement(_StylizedBaseDialog.FooterButton,{text:_locale2.default.reset(),onClick:handleResetProject,key:"reset",color:"red"}),_react.default.createElement(_StylizedBaseDialog.FooterButton,{text:_locale.default.dismiss(),onClick:handleClose,key:"confirm",type:"confirm"})];return _react.default.createElement(_StylizedBaseDialog.default,_extends({},props,{isOpen,title:_locale.default.errorOccurredTitle(),body,handleClose,renderFooter:function renderFooter(){return footerButtons}}))}FatalErrorDialog.propTypes={isOpen:_propTypes.default.bool.isRequired,errorMessage:_propTypes.default.string.isRequired,handleClose:_propTypes.default.func.isRequired,handleResetProject:_propTypes.default.func.isRequired},module.exports=exports.default},"./src/weblab/dialogs/FatalErrorDialog.story.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Basic=void 0;var _addonActions=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.js"),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_FatalErrorDialog=_interopRequireDefault(__webpack_require__("./src/weblab/dialogs/FatalErrorDialog.jsx"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={component:_FatalErrorDialog.default},exports.Basic=function Basic(){return _react.default.createElement(_FatalErrorDialog.default,{isOpen:!0,errorMessage:"Web Lab failed to load",handleClose:(0,_addonActions.action)("close"),handleResetProject:(0,_addonActions.action)("resetting project"),hideBackdrop:!0})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2VibGFiLWRpYWxvZ3MtRmF0YWxFcnJvckRpYWxvZy1zdG9yeS4yOGExMzQ1YS5pZnJhbWUuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJvUEFBQSxJQUFBQSxvQkFBQUMsdUJBQUFDLG9CQUFBLGtFQUNBQyxlQUFBRCxvQkFBQSw0REFPQUUsUUFBQUgsdUJBQUFDLG9CQUFBLHNEQUNBRyxXQUFBSix1QkFBQUMsb0JBQUEsdUNBQ0FJLE9BQUFMLHVCQUFBQyxvQkFBQSxrQ0FDQUssV0FBQU4sdUJBQUFDLG9CQUFBLHVDQUNBTSxhQUFBUCx1QkFBQUMsb0JBQUEseUNBQ0FPLGdCQUFBUix1QkFBQUMsb0JBQUEsNENBQ0FRLGNBQUFULHVCQUFBQyxvQkFBQSwwQ0FFQVMsZUFBQVYsdUJBQUFDLG9CQUFBLDZDQUFvRCxTQUFBRCx1QkFBQVcsS0FBQSxPQUFBQSxLQUFBQSxJQUFBQyxXQUFBRCxJQUFBLFNBQUFBLElBQUEsVUFBQUUsUUFBQUMsR0FBQSxPQUFBRCxRQUFBLG1CQUFBRSxRQUFBLGlCQUFBQSxPQUFBQyxTQUFBLFNBQUFGLEdBQUEsY0FBQUEsQ0FBQSxXQUFBQSxHQUFBLE9BQUFBLEdBQUEsbUJBQUFDLFFBQUFELEVBQUFHLGNBQUFGLFFBQUFELElBQUFDLE9BQUFHLFVBQUEsZ0JBQUFKLENBQUEsRUFBQUQsUUFBQUMsRUFBQSxVQUFBSyxXQUFBLE9BQUFBLFNBQUFDLE9BQUFDLE9BQUFELE9BQUFDLE9BQUFDLE9BQUEsU0FBQUMsUUFBQSxRQUFBQyxFQUFBLEVBQUFBLEVBQUFDLFVBQUFDLE9BQUFGLElBQUEsS0FBQUcsT0FBQUYsVUFBQUQsR0FBQSxRQUFBSSxPQUFBRCxPQUFBUCxPQUFBRixVQUFBVyxlQUFBQyxLQUFBSCxPQUFBQyxPQUFBTCxPQUFBSyxLQUFBRCxPQUFBQyxLQUFBLFFBQUFMLE1BQUEsRUFBQUosU0FBQVksTUFBQSxLQUFBTixVQUFBLFVBQUFPLGdCQUFBbEIsRUFBQW1CLEdBQUEsT0FBQUQsZ0JBQUFaLE9BQUFjLGVBQUFkLE9BQUFj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bGF0ZXMvU2FmZU1hcmtkb3duLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvdGVtcGxhdGVzL3BsdWdpbnMvZXh0ZXJuYWxMaW5rcy5qcyIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvd2VibGFiL1N1cHBvcnRBcnRpY2xlTWFya2Rvd24uanN4Iiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy93ZWJsYWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy93ZWJsYWIvZGlhbG9ncy9GYXRhbEVycm9yRGlhbG9nLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvd2VibGFiL2RpYWxvZ3MvRmF0YWxFcnJvckRpYWxvZy5zdG9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFyc2VyIGZyb20gJ0Bjb2RlLWRvdC1vcmcvcmVkYWN0YWJsZS1tYXJrZG93bic7XG5pbXBvcnQge1xuICBkZXRhaWxzLFxuICBjbGlja2FibGVUZXh0LFxuICBleHBhbmRhYmxlSW1hZ2VzLFxuICB2aXN1YWxDb2RlQmxvY2ssXG4gIHhtbEFzVG9wTGV2ZWxCbG9jayxcbn0gZnJvbSAnQGNvZGUtZG90LW9yZy9yZW1hcmstcGx1Z2lucyc7XG5pbXBvcnQgZGVmYXVsdFNhbml0aXphdGlvblNjaGVtYSBmcm9tICdoYXN0LXV0aWwtc2FuaXRpemUvbGliL2dpdGh1Yi5qc29uJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHJlaHlwZVJhdyBmcm9tICdyZWh5cGUtcmF3JztcbmltcG9ydCByZWh5cGVSZWFjdCBmcm9tICdyZWh5cGUtcmVhY3QnO1xuaW1wb3J0IHJlaHlwZVNhbml0aXplIGZyb20gJ3JlaHlwZS1zYW5pdGl6ZSc7XG5pbXBvcnQgcmVtYXJrUmVoeXBlIGZyb20gJ3JlbWFyay1yZWh5cGUnO1xuXG5pbXBvcnQgZXh0ZXJuYWxMaW5rcyBmcm9tICcuL3BsdWdpbnMvZXh0ZXJuYWxMaW5rcyc7XG5cbi8qKlxuICogQmFzaWMgY29tcG9uZW50IGZvciByZW5kZXJpbmcgYSBtYXJrZG93biBzdHJpbmcgYXMgSFRNTCwgd2l0aCBzYW5pdGl6YXRpb24uXG4gKiBDYW4gc2FmZWx5IHJlbmRlciBtYXJrZG93biBldmVuIGZyb20gdW50cnVzdGVkIHNvdXJjZXMsIHdpdGhvdXQgcG90ZW50aWFsbHlcbiAqIGV4cG9zaW5nIHVzIHRvIGFuIFhTUyBpbmplY3Rpb24uXG4gKi9cbmNsYXNzIFNhZmVNYXJrZG93biBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgbWFya2Rvd246IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBvcGVuRXh0ZXJuYWxMaW5rc0luTmV3VGFiOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIFdlIG9ubHkgb3BlbiBleHRlcm5hbCBsaW5rcyBpbiBhIG5ldyB0YWIgaWYgaXQncyBleHBsaWNpdGx5IHNwZWNpZmllZFxuICAgIC8vIHRoYXQgd2UgZG8gc287IHRoaXMgaXMgYWJzb2x1dGVseSBub3Qgc29tZXRoaW5nIHdlIHdhbnQgdG8gZG8gYXMgYVxuICAgIC8vIGdlbmVyYWwgcHJhY3RpY2UsIGJ1dCB1bmZvcnR1bmF0ZWx5IHRoZXJlIGFyZSBzb21lIHNpdHVhdGlvbnMgaW4gd2hpY2hcbiAgICAvLyBpdCBpcyBjdXJyZW50bHkgYSByZXF1aXJlbWVudC5cbiAgICBjb25zdCBwYXJzZXIgPSB0aGlzLnByb3BzLm9wZW5FeHRlcm5hbExpbmtzSW5OZXdUYWJcbiAgICAgID8gbWFya2Rvd25Ub1JlYWN0RXh0ZXJuYWxMaW5rc1xuICAgICAgOiBtYXJrZG93blRvUmVhY3Q7XG5cbiAgICBjb25zdCByZW5kZXJlZCA9IHBhcnNlci5wcm9jZXNzU3luYyh0aGlzLnByb3BzLm1hcmtkb3duKS5jb250ZW50cztcblxuICAgIGNvbnN0IG1hcmtkb3duUHJvcHMgPSB7fTtcbiAgICBpZiAodGhpcy5wcm9wcy5jbGFzc05hbWUpIHtcbiAgICAgIG1hcmtkb3duUHJvcHMuY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5jbGFzc05hbWU7XG4gICAgfVxuICAgIC8vIHJlaHlwZS1yZWFjdCB3aWxsIG9ubHkgd3JhcCB0aGUgY29tcGlsZWQgbWFya2Rvd24gaW4gYSA8ZGl2PiB0YWdcbiAgICAvLyBpZiBpdCBuZWVkcyB0byAoaWUsIGlmIHRoZXJlIHdvdWxkIG90aGVyd2lzZSBiZSBtdWx0aXBsZSBlbGVtZW50c1xuICAgIC8vIHJldHVybmVkKSBvciB3ZSdyZSBhc3NpZ25pbmcgcHJvcHMuIFdlIHByZWZlciBjb25zaXN0ZW5jeSBvdmVyIGZsZXhpYmlsaXR5LFxuICAgIC8vIHNvIGhlcmUgd2Ugd3JhcCB0aGUgcmVzdWx0IGluIGEgZGl2IGlmIGl0IHdhc24ndCBhbHJlYWR5XG4gICAgaWYgKFxuICAgICAgcmVuZGVyZWQgJiZcbiAgICAgIHJlbmRlcmVkLnR5cGUgPT09ICdkaXYnICYmXG4gICAgICAhT2JqZWN0LmtleXMobWFya2Rvd25Qcm9wcykubGVuZ3RoXG4gICAgKSB7XG4gICAgICByZXR1cm4gcmVuZGVyZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiA8ZGl2IHsuLi5tYXJrZG93blByb3BzfT57cmVuZGVyZWR9PC9kaXY+O1xuICAgIH1cbiAgfVxufVxuXG4vLyBjcmVhdGUgY3VzdG9tIHNhbml0aXphdGlvbiBzY2hlbWEgYXMgcGVyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vc3ludGF4LXRyZWUvaGFzdC11dGlsLXNhbml0aXplI3NjaGVtYVxuLy8gdG8gc3VwcG9ydCBvdXIgY3VzdG9tIHN5bnRheGVzXG5jb25zdCBzY2hlbWEgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2FuaXRpemF0aW9uU2NoZW1hKTtcblxuLy8gV2UgdXNlIGEgX2xvdF8gb2YgaW1hZ2UgZm9ybWF0dGluZyBzdHVmZiBpbiBvdXJcbi8vIGluc3RydWN0aW9ucywgcGFydGljdWxhcmx5IGluIENTUFxuc2NoZW1hLmF0dHJpYnV0ZXMuaW1nLnB1c2goJ2hlaWdodCcsICd3aWR0aCcpO1xuXG4vLyBBZGQgc3VwcG9ydCBmb3IgZXhwYW5kYWJsZUltYWdlc1xuc2NoZW1hLnRhZ05hbWVzLnB1c2goJ3NwYW4nKTtcbnNjaGVtYS5hdHRyaWJ1dGVzLnNwYW4gPSBbJ2RhdGFVcmwnLCAnY2xhc3NOYW1lJ107XG5cbi8vIEFkZCBzdXBwb3J0IGZvciBpbmxpbmUgc3R5bGVzIChncm9zcylcbi8vIFRPRE8gcmVwbGFjZSBhbGwgaW5saW5lIHN0eWxlcyBpbiBvdXIgY3VycmljdWx1bSBjb250ZW50IHdpdGhcbi8vIHNlbWFudGljYWxseS1zaWduaWZpY2FudCBjb250ZW50XG5zY2hlbWEuYXR0cmlidXRlc1snKiddLnB1c2goJ3N0eWxlJywgJ2NsYXNzTmFtZScpO1xuXG4vLyBDbGlja2FibGVUZXh0IHVzZXMgZGF0YS1pZCBvbiBhIGJvbGQgdGFnLlxuc2NoZW1hLmF0dHJpYnV0ZXNbJ2InXSA9IFsnZGF0YUlkJ107XG5cbi8vIEFkZCBzdXBwb3J0IGZvciBCbG9ja2x5IFhNTFxuc2NoZW1hLmNsb2JiZXIgPSBbXTtcbmNvbnN0IGJsb2NrbHlUYWdzID0gW1xuICAnYmxvY2snLFxuICAnZnVuY3Rpb25hbF9pbnB1dCcsXG4gICdtdXRhdGlvbicsXG4gICduZXh0JyxcbiAgJ3N0YXRlbWVudCcsXG4gICd0aXRsZScsXG4gICdmaWVsZCcsXG4gICd2YWx1ZScsXG4gICd4bWwnLFxuXTtcbnNjaGVtYS50YWdOYW1lcyA9IHNjaGVtYS50YWdOYW1lcy5jb25jYXQoYmxvY2tseVRhZ3MpO1xubGV0IGJsb2NrbHlDb21wb25lbnRXcmFwcGVycyA9IHt9O1xuYmxvY2tseVRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICBzY2hlbWEuYXR0cmlidXRlc1t0YWddID0gWydibG9ja190ZXh0JywgJ2lkJywgJ2lubGluZScsICduYW1lJywgJ3R5cGUnXTtcblxuICAvLyBDcmVhdGUgYSBSZWFjdCBjb21wb25lbnQgdG8gd3JhcCBlYWNoIEJsb2NrbHkgdGFnLiBTaW5jZSB0aGVzZSBlbGVtZW50cyB1bHRpbWF0ZWx5XG4gIC8vIHJlbmRlciBhcyBSZWFjdCBjb21wb25lbnRzLCBjcmVhdGluZyBhIHdyYXBwZXIgbWFrZXMgdGhlbSB2YWxpZCAod2hlcmVhcyA8eG1sPlxuICAvLyBpcyBub3QgYSB2YWxpZCBSZWFjdCB0YWcpLlxuICBibG9ja2x5Q29tcG9uZW50V3JhcHBlcnNbdGFnXSA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIGNvbnN0IEJsb2NrbHlFbGVtZW50ID0gdGFnO1xuICAgIC8vIFRoZSBcImlzXCIgYXR0cmlidXRlIHByZXZlbnRzIFJlYWN0IGZyb20gd2FybmluZyBhYm91dCB1bnJlY29nbml6ZWQgdGFnczpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzExMTg0I2lzc3VlY29tbWVudC0zMzU5NDI0MzlcbiAgICByZXR1cm4gPEJsb2NrbHlFbGVtZW50IGlzPXt0YWd9IHsuLi5wcm9wc30gLz47XG4gIH07XG59KTtcblxuY29uc3QgbWFya2Rvd25Ub1JlYWN0ID0gUGFyc2VyLmNyZWF0ZSgpXG4gIC5nZXRQYXJzZXIoKVxuICAvLyBpbmNsdWRlIGN1c3RvbSBwbHVnaW5zXG4gIC51c2UoW1xuICAgIGNsaWNrYWJsZVRleHQsXG4gICAgZXhwYW5kYWJsZUltYWdlcyxcbiAgICB2aXN1YWxDb2RlQmxvY2ssXG4gICAgeG1sQXNUb3BMZXZlbEJsb2NrLFxuICAgIGRldGFpbHMsXG4gIF0pXG4gIC8vIGNvbnZlcnQgbWFya2Rvd24gdG8gYW4gSFRNTCBBYnN0cmFjdCBTeW50YXggVHJlZSAoSEFTVClcbiAgLnVzZShyZW1hcmtSZWh5cGUsIHtcbiAgICAvLyBpbmNsdWRlIGFueSByYXcgSFRNTCBpbiB0aGUgbWFya2Rvd24gYXMgcmF3IEhUTUwgbm9kZXMgaW4gdGhlIEhBU1RcbiAgICBhbGxvd0Rhbmdlcm91c0hUTUw6IHRydWUsXG4gIH0pXG4gIC8vIHBhcnNlIHRoZSByYXcgSFRNTCBub2RlcyBpbiB0aGUgSEFTVCB0byBhY3R1YWwgSEFTVCBub2Rlc1xuICAudXNlKHJlaHlwZVJhdylcbiAgLy8gc2FuaXRpemUgdGhlIEhBU1RcbiAgLnVzZShyZWh5cGVTYW5pdGl6ZSwgc2NoZW1hKVxuICAvLyBjb252ZXJ0IHRoZSBIQVNUIHRvIFJlYWN0XG4gIC51c2UocmVoeXBlUmVhY3QsIHtcbiAgICBjcmVhdGVFbGVtZW50OiBSZWFjdC5jcmVhdGVFbGVtZW50LFxuICAgIC8vIFVzZSBSZWFjdCBjb21wb25lbnQgd3JhcHBlcnMgZm9yIEJsb2NrbHkgWE1MIGVsZW1lbnRzIHRvIHByZXZlbnRcbiAgICAvLyBSZWFjdCBmcm9tIHdhcm5pbmcgdXMgYWJvdXQgaW52YWxpZCBjb21wb25lbnRzLlxuICAgIGNvbXBvbmVudHM6IGJsb2NrbHlDb21wb25lbnRXcmFwcGVycyxcbiAgfSk7XG5cbmNvbnN0IG1hcmtkb3duVG9SZWFjdEV4dGVybmFsTGlua3MgPSBtYXJrZG93blRvUmVhY3QoKS51c2UoZXh0ZXJuYWxMaW5rcywge1xuICBsaW5rczogJ2FsbCcsXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgU2FmZU1hcmtkb3duO1xuIiwiLyoqXG4gKiBPcGVuIGV4dGVybmFsIGxpbmtzIGluIGEgbmV3IHRhYi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXh0ZXJuYWxMaW5rcyhvcHRpb25zID0ge30pIHtcbiAgY29uc3QgUGFyc2VyID0gdGhpcy5QYXJzZXI7XG4gIGNvbnN0IHRva2VuaXplcnMgPSBQYXJzZXIucHJvdG90eXBlLmlubGluZVRva2VuaXplcnM7XG4gIGNvbnN0IG9yaWdpbmFsID0gdG9rZW5pemVycy5saW5rO1xuICBjb25zdCBhbGwgPSBvcHRpb25zLmxpbmtzID09PSAnYWxsJztcblxuICB0b2tlbml6ZXJzLmxpbmsgPSBmdW5jdGlvbiAoZWF0LCB2YWx1ZSwgc2lsZW50KSB7XG4gICAgY29uc3QgbGluayA9IG9yaWdpbmFsLmNhbGwodGhpcywgZWF0LCB2YWx1ZSwgc2lsZW50KTtcbiAgICBpZiAobGluayAmJiBsaW5rLnR5cGUgPT09ICdsaW5rJyAmJiAoYWxsIHx8IGlzRXh0ZXJuYWxMaW5rKGxpbmsudXJsKSkpIHtcbiAgICAgIGxpbmsuZGF0YSA9IGxpbmsuZGF0YSB8fCB7fTtcbiAgICAgIGxpbmsuZGF0YS5oUHJvcGVydGllcyA9IGxpbmsuZGF0YS5oUHJvcGVydGllcyB8fCB7fTtcblxuICAgICAgY29uc3QgcHJvcHMgPSBsaW5rLmRhdGEuaFByb3BlcnRpZXM7XG4gICAgICBwcm9wcy50YXJnZXQgPSBwcm9wcy50YXJnZXQgfHwgJ19ibGFuayc7XG4gICAgICBwcm9wcy5yZWwgPSAnbm9yZWZlcnJlciBub29wZW5lcic7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbms7XG4gIH07XG4gIHRva2VuaXplcnMubGluay5sb2NhdG9yID0gb3JpZ2luYWwubG9jYXRvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXh0ZXJuYWxMaW5rKHVybCkge1xuICByZXR1cm4gIS9odHRwcz86XFwvXFwvKFteLl0rXFwuKSpjb2RlLm9yZyg6WzAtOV0rKT9cXC8vLnRlc3QoZnVsbHlRdWFsaWZpZWQodXJsKSk7XG59XG5cbmxldCBhO1xuZnVuY3Rpb24gZnVsbHlRdWFsaWZpZWQocGF0aCkge1xuICBhID0gYSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gIGEuaHJlZiA9IHBhdGg7XG4gIHJldHVybiBhLmhyZWY7XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgU2FmZU1hcmtkb3duIGZyb20gJ0BjZG8vYXBwcy90ZW1wbGF0ZXMvU2FmZU1hcmtkb3duJztcbmltcG9ydCB7U1VQUE9SVF9BUlRJQ0xFX1VSTH0gZnJvbSAnQGNkby9hcHBzL3dlYmxhYi9jb25zdGFudHMnO1xuaW1wb3J0IHdlYmxhYkkxOG4gZnJvbSAnQGNkby93ZWJsYWIvbG9jYWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU3VwcG9ydEFydGljbGVNYXJrZG93bigpIHtcbiAgcmV0dXJuIChcbiAgICA8U2FmZU1hcmtkb3duXG4gICAgICBtYXJrZG93bj17d2VibGFiSTE4bi50cm91Ymxlc2hvb3RpbmdTdXBwb3J0KHt1cmw6IFNVUFBPUlRfQVJUSUNMRV9VUkx9KX1cbiAgICAgIG9wZW5FeHRlcm5hbExpbmtzSW5OZXdUYWJcbiAgICAvPlxuICApO1xufVxuIiwiaW1wb3J0IHttYWtlRW51bX0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgU1VQUE9SVF9BUlRJQ0xFX1VSTCA9XG4gICdodHRwczovL3N1cHBvcnQuY29kZS5vcmcvaGMvZW4tdXMvYXJ0aWNsZXMvMzYwMDE2ODA0ODcxJztcblxuZXhwb3J0IGNvbnN0IEZhdGFsRXJyb3JUeXBlID0gbWFrZUVudW0oXG4gICdEZWZhdWx0JyxcbiAgJ0xvYWRGYWlsdXJlJyxcbiAgJ1Jlc2V0RmFpbHVyZSdcbik7XG5cbmV4cG9ydCBjb25zdCBGSUxFX1NZU1RFTV9FUlJPUiA9ICdFRklMRVNZU1RFTUVSUk9SJztcbmV4cG9ydCBjb25zdCBCUkFNQkxFX1JFQURZX1NUQVRFID0gJ2JyYW1ibGU6cmVhZHlUb01vdW50JztcbiIsImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgU3R5bGl6ZWRCYXNlRGlhbG9nLCB7XG4gIEZvb3RlckJ1dHRvbixcbn0gZnJvbSAnQGNkby9hcHBzL3NoYXJlZENvbXBvbmVudHMvU3R5bGl6ZWRCYXNlRGlhbG9nJztcbmltcG9ydCB7cmVsb2FkfSBmcm9tICdAY2RvL2FwcHMvdXRpbHMnO1xuaW1wb3J0IFN1cHBvcnRBcnRpY2xlTWFya2Rvd24gZnJvbSAnQGNkby9hcHBzL3dlYmxhYi9TdXBwb3J0QXJ0aWNsZU1hcmtkb3duJztcbmltcG9ydCBjb21tb25JMThuIGZyb20gJ0BjZG8vbG9jYWxlJztcbmltcG9ydCB3ZWJsYWJJMThuIGZyb20gJ0BjZG8vd2VibGFiL2xvY2FsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZhdGFsRXJyb3JEaWFsb2coe1xuICBpc09wZW4sXG4gIGVycm9yTWVzc2FnZSxcbiAgaGFuZGxlQ2xvc2UsXG4gIGhhbmRsZVJlc2V0UHJvamVjdCxcbiAgLi4ucHJvcHNcbn0pIHtcbiAgY29uc3QgYm9keSA9IChcbiAgICA8ZGl2PlxuICAgICAgPHA+e2Vycm9yTWVzc2FnZX08L3A+XG4gICAgICA8U3VwcG9ydEFydGljbGVNYXJrZG93biAvPlxuICAgIDwvZGl2PlxuICApO1xuXG4gIGNvbnN0IGZvb3RlckJ1dHRvbnMgPSBbXG4gICAgPEZvb3RlckJ1dHRvblxuICAgICAgdGV4dD17Y29tbW9uSTE4bi50cnlBZ2FpbigpfVxuICAgICAgb25DbGljaz17cmVsb2FkfVxuICAgICAga2V5PVwiY2FuY2VsXCJcbiAgICAgIHR5cGU9XCJjYW5jZWxcIlxuICAgIC8+LFxuICAgIDxGb290ZXJCdXR0b25cbiAgICAgIHRleHQ9e3dlYmxhYkkxOG4ucmVzZXQoKX1cbiAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlc2V0UHJvamVjdH1cbiAgICAgIGtleT1cInJlc2V0XCJcbiAgICAgIGNvbG9yPVwicmVkXCJcbiAgICAvPixcbiAgICA8Rm9vdGVyQnV0dG9uXG4gICAgICB0ZXh0PXtjb21tb25JMThuLmRpc21pc3MoKX1cbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsb3NlfVxuICAgICAga2V5PVwiY29uZmlybVwiXG4gICAgICB0eXBlPVwiY29uZmlybVwiXG4gICAgLz4sXG4gIF07XG5cbiAgcmV0dXJuIChcbiAgICA8U3R5bGl6ZWRCYXNlRGlhbG9nXG4gICAgICB7Li4ucHJvcHN9XG4gICAgICBpc09wZW49e2lzT3Blbn1cbiAgICAgIHRpdGxlPXtjb21tb25JMThuLmVycm9yT2NjdXJyZWRUaXRsZSgpfVxuICAgICAgYm9keT17Ym9keX1cbiAgICAgIGhhbmRsZUNsb3NlPXtoYW5kbGVDbG9zZX1cbiAgICAgIHJlbmRlckZvb3Rlcj17KCkgPT4gZm9vdGVyQnV0dG9uc31cbiAgICAvPlxuICApO1xufVxuXG5GYXRhbEVycm9yRGlhbG9nLnByb3BUeXBlcyA9IHtcbiAgaXNPcGVuOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBlcnJvck1lc3NhZ2U6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgaGFuZGxlQ2xvc2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGhhbmRsZVJlc2V0UHJvamVjdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbn07XG4iLCJpbXBvcnQge2FjdGlvbn0gZnJvbSAnQHN0b3J5Ym9vay9hZGRvbi1hY3Rpb25zJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBGYXRhbEVycm9yRGlhbG9nIGZyb20gJy4vRmF0YWxFcnJvckRpYWxvZyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50OiBGYXRhbEVycm9yRGlhbG9nLFxufTtcblxuZXhwb3J0IGNvbnN0IEJhc2ljID0gKCkgPT4gKFxuICA8RmF0YWxFcnJvckRpYWxvZ1xuICAgIGlzT3BlblxuICAgIGVycm9yTWVzc2FnZT1cIldlYiBMYWIgZmFpbGVkIHRvIGxvYWRcIlxuICAgIGhhbmRsZUNsb3NlPXthY3Rpb24oJ2Nsb3NlJyl9XG4gICAgaGFuZGxlUmVzZXRQcm9qZWN0PXthY3Rpb24oJ3Jlc2V0dGluZyBwcm9qZWN0Jyl9XG4gICAgaGlkZUJhY2tkcm9wXG4gIC8+XG4pO1xuIl0sIm5hbWVzIjpbIl9yZWRhY3RhYmxlTWFya2Rvd24iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZW1hcmtQbHVnaW5zIiwiX2dpdGh1YiIsIl9wcm9wVHlwZXMiLCJfcmVhY3QiLCJfcmVoeXBlUmF3IiwiX3JlaHlwZVJlYWN0IiwiX3JlaHlwZVNhbml0aXplIiwiX3JlbWFya1JlaHlwZSIsIl9leHRlcm5hbExpbmtzIiwib2JqIiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJvIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIl9leHRlbmRzIiwiT2JqZWN0IiwiYXNzaWduIiwiYmluZCIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsIl9zZXRQcm90b3R5cGVPZiIsInAiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIlNhZmVNYXJrZG93biIsIl9SZWFjdCRDb21wb25lbnQiLCJfaW5oZXJpdHNMb29zZSIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInJlbmRlciIsInJlbmRlcmVkIiwidGhpcyIsInByb3BzIiwib3BlbkV4dGVybmFsTGlua3NJbk5ld1RhYiIsIm1hcmtkb3duVG9SZWFjdEV4dGVybmFsTGlua3MiLCJtYXJrZG93blRvUmVhY3QiLCJwcm9jZXNzU3luYyIsIm1hcmtkb3duIiwiY29udGVudHMiLCJtYXJrZG93blByb3BzIiwiY2xhc3NOYW1lIiwidHlwZSIsImtleXMiLCJjcmVhdGVFbGVtZW50IiwiUmVhY3QiLCJDb21wb25lbnQiLCJfZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwidCIsIl90b1ByaW1pdGl2ZSIsInIiLCJlIiwidG9QcmltaXRpdmUiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIlByb3BUeXBlcyIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJib29sIiwic2NoZW1hIiwiZGVmYXVsdFNhbml0aXphdGlvblNjaGVtYSIsImF0dHJpYnV0ZXMiLCJpbWciLCJwdXNoIiwidGFnTmFtZXMiLCJzcGFuIiwiY2xvYmJlciIsImJsb2NrbHlUYWdzIiwiY29uY2F0IiwiYmxvY2tseUNvbXBvbmVudFdyYXBwZXJzIiwiZm9yRWFjaCIsInRhZyIsIkJsb2NrbHlFbGVtZW50IiwiaXMiLCJQYXJzZXIiLCJnZXRQYXJzZXIiLCJ1c2UiLCJjbGlja2FibGVUZXh0IiwiZXhwYW5kYWJsZUltYWdlcyIsInZpc3VhbENvZGVCbG9jayIsInhtbEFzVG9wTGV2ZWxCbG9jayIsImRldGFpbHMiLCJyZW1hcmtSZWh5cGUiLCJhbGxvd0Rhbmdlcm91c0hUTUwiLCJyZWh5cGVSYXciLCJyZWh5cGVTYW5pdGl6ZSIsInJlaHlwZVJlYWN0IiwiY29tcG9uZW50cyIsImV4dGVybmFsTGlua3MiLCJsaW5rcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpc0V4dGVybmFsTGluayIsInVybCIsInRlc3QiLCJmdWxseVF1YWxpZmllZCIsInBhdGgiLCJhIiwiZG9jdW1lbnQiLCJocmVmIiwib3B0aW9ucyIsInVuZGVmaW5lZCIsInRva2VuaXplcnMiLCJpbmxpbmVUb2tlbml6ZXJzIiwib3JpZ2luYWwiLCJsaW5rIiwiYWxsIiwiZWF0Iiwic2lsZW50IiwiZGF0YSIsImhQcm9wZXJ0aWVzIiwicmVsIiwibG9jYXRvciIsIlN1cHBvcnRBcnRpY2xlTWFya2Rvd24iLCJfU2FmZU1hcmtkb3duIiwid2VibGFiSTE4biIsInRyb3VibGVzaG9vdGluZ1N1cHBvcnQiLCJTVVBQT1JUX0FSVElDTEVfVVJMIiwiX2NvbnN0YW50cyIsIl9sb2NhbGUiLCJfdXRpbHMiLCJtYWtlRW51bSIsIl9TdHlsaXplZEJhc2VEaWFsb2ciLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImhhcyIsImdldCIsIm4iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1Iiwic2V0IiwiX1N1cHBvcnRBcnRpY2xlTWFya2Rvd24iLCJfbG9jYWxlMiIsIl9leGNsdWRlZCIsIldlYWtNYXAiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJleGNsdWRlZCIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIiwic291cmNlS2V5cyIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJzb3VyY2VTeW1ib2xLZXlzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJGYXRhbEVycm9yRGlhbG9nIiwiX3JlZiIsImlzT3BlbiIsImVycm9yTWVzc2FnZSIsImhhbmRsZUNsb3NlIiwiaGFuZGxlUmVzZXRQcm9qZWN0IiwiYm9keSIsImZvb3RlckJ1dHRvbnMiLCJGb290ZXJCdXR0b24iLCJ0ZXh0IiwiY29tbW9uSTE4biIsInRyeUFnYWluIiwib25DbGljayIsInJlbG9hZCIsInJlc2V0IiwiY29sb3IiLCJkaXNtaXNzIiwidGl0bGUiLCJlcnJvck9jY3VycmVkVGl0bGUiLCJyZW5kZXJGb290ZXIiLCJwcm9wVHlwZXMiLCJmdW5jIiwiX2FkZG9uQWN0aW9ucyIsIl9GYXRhbEVycm9yRGlhbG9nIiwiY29tcG9uZW50IiwiQmFzaWMiLCJhY3Rpb24iLCJoaWRlQmFja2Ryb3AiXSwic291cmNlUm9vdCI6IiJ9