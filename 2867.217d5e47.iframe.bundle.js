(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[2867],{"./src/third-party/canvg/svg_todataurl.js":()=>{SVGElement.prototype.toDataURL=function(type,options){var _svg=this;function XMLSerialize(svg){return window.XMLSerializer?(new XMLSerializer).serializeToString(svg):function XMLSerializerForIE(s){var out="";out+="<"+s.nodeName;for(var n=0;n<s.attributes.length;n++)out+=" "+s.attributes[n].name+"='"+s.attributes[n].value+"'";if(s.hasChildNodes()){for(out+=">\n",n=0;n<s.childNodes.length;n++)out+=XMLSerializerForIE(s.childNodes[n]);out+="</"+s.nodeName+">\n"}else out+=" />\n";return out}(svg)}function base64dataURLencode(s){var b64="data:image/svg+xml;base64,";return window.btoa?b64+=btoa(unescape(encodeURIComponent(s))):b64+=Base64.encode(s),b64}switch(type||(type="image/svg+xml"),options||(options={}),options.keepNonSafe,options.keepOutsideViewport,type){case"image/svg+xml":return function exportSVG(){var svg_dataurl=base64dataURLencode(XMLSerialize(_svg));return svg_dataurl.length,options.callback&&options.callback(svg_dataurl),svg_dataurl}();case"image/png":case"image/jpeg":switch(options.renderer||(window.canvg?options.renderer="canvg":options.renderer="native"),options.renderer){case"canvg":return function exportImageCanvg(type){var canvas=document.createElement("canvas"),svg_xml=(canvas.getContext("2d"),XMLSerialize(_svg)),keepBB=options.keepOutsideViewport;if(keepBB)var bb=_svg.getBBox();return canvg(canvas,svg_xml,{ignoreMouse:!0,ignoreAnimation:!0,offsetX:keepBB?-bb.x:void 0,offsetY:keepBB?-bb.y:void 0,scaleWidth:keepBB?bb.width+bb.x:void 0,scaleHeight:keepBB?bb.height+bb.y:void 0,renderCallback:function renderCallback(){canvas.width,canvas.height;var png_dataurl=canvas.toDataURL(type);png_dataurl.length,options.callback&&options.callback(png_dataurl)}}),canvas.toDataURL(type)}(type);case"native":return function exportImage(type){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),svg_img=new Image,svg_xml=XMLSerialize(_svg);svg_img.src=base64dataURLencode(svg_xml),svg_img.onload=function(){svg_img.width,svg_img.height,canvas.width=svg_img.width,canvas.height=svg_img.height,ctx.drawImage(svg_img,0,0);var png_dataurl=canvas.toDataURL(type);png_dataurl.length,options.callback&&options.callback(png_dataurl)},svg_img.onerror=function(){console.log("Can't export! Maybe your browser doesn't support SVG in img element or SVG input for Canvas drawImage?\nhttp://en.wikipedia.org/wiki/SVG#Native_support")}}(type);default:options.renderer}}}},"./src/util/svgelement-polyfill.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"undefined"!=typeof SVGElement&&(__webpack_require__("./node_modules/canvg/canvg.js"),__webpack_require__("./src/third-party/canvg/svg_todataurl.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0ssUUFBUUwsT0FDeEJJLElBQUlLLFVBQVVKLFFBQVMsRUFBRyxHQUcxQixJQUFJSCxZQUFjcEIsT0FBT3BDLFVBQVVDLE1BQ1J1RCxZQUFZeEMsT0FFbkNkLFFBQVE4QixVQUFVOUIsUUFBUThCLFNBQVN3QixZQUV4QyxFQUVERyxRQUFRSyxRQUFVLFdBQ2hCQyxRQUFRQyxJQUNOLDBKQUlILENBR0YsQ0FpRWNULENBQVl4RCxNQUdyQixRQUdNQyxRQUFRK0IsVUFVckIsQywrR0M5TnlCLG9CQUFmbkMsYUFHVHFFLG9CQUFRLGlDQUNSQSxvQkFBUSw0QyIsInNvdXJjZXMiOlsid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy90aGlyZC1wYXJ0eS9jYW52Zy9zdmdfdG9kYXRhdXJsLmpzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy91dGlsL3N2Z2VsZW1lbnQtcG9seWZpbGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG5cdFRoZSBtaXNzaW5nIFNWRy50b0RhdGFVUkwgbGlicmFyeSBmb3IgeW91ciBTVkcgZWxlbWVudHMuXG5cblx0VXNhZ2U6IFNWR0VsZW1lbnQudG9EYXRhVVJMKCB0eXBlLCB7IG9wdGlvbnMgfSApXG5cblx0UmV0dXJuczogdGhlIGRhdGEgVVJMLCBleGNlcHQgd2hlbiB1c2luZyBuYXRpdmUgUE5HIHJlbmRlcmVyIChuZWVkcyBjYWxsYmFjaykuXG5cblx0dHlwZVx0TUlNRSB0eXBlIG9mIHRoZSBleHBvcnRlZCBkYXRhLlxuXHRcdFx0RGVmYXVsdDogaW1hZ2Uvc3ZnK3htbC5cblx0XHRcdE11c3Qgc3VwcG9ydDogaW1hZ2UvcG5nLlxuXHRcdFx0QWRkaXRpb25hbDogaW1hZ2UvanBlZy5cblxuXHRvcHRpb25zIGlzIGEgbWFwIG9mIG9wdGlvbnM6IHtcblx0XHRjYWxsYmFjazogZnVuY3Rpb24oZGF0YVVSTClcblx0XHRcdENhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCB3aGVuIHRoZSBkYXRhIFVSTCBpcyByZWFkeS5cblx0XHRcdFRoaXMgaXMgb25seSBuZWNlc3Nhcnkgd2hlbiB1c2luZyBuYXRpdmUgUE5HIHJlbmRlcmVyLlxuXHRcdFx0RGVmYXVsdDogdW5kZWZpbmVkLlxuXG5cdFx0W3RoZSByZXN0IG9mIHRoZSBvcHRpb25zIG9ubHkgYXBwbHkgd2hlbiB0eXBlPVwiaW1hZ2UvcG5nXCIgb3IgdHlwZT1cImltYWdlL2pwZWdcIl1cblxuXHRcdHJlbmRlcmVyOiBcIm5hdGl2ZVwifFwiY2FudmdcIlxuXHRcdFx0UE5HIHJlbmRlcmVyIHRvIHVzZS4gTmF0aXZlIHJlbmRlcmVywrkgbWlnaHQgY2F1c2UgYSBzZWN1cml0eSBleGNlcHRpb24uXG5cdFx0XHREZWZhdWx0OiBjYW52ZyBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBuYXRpdmUuXG5cblx0XHRrZWVwTm9uU2FmZTogdHJ1ZXxmYWxzZVxuXHRcdFx0RXhwb3J0IG5vbi1zYWZlIChpbWFnZSBhbmQgZm9yZWlnbk9iamVjdCkgZWxlbWVudHMuXG5cdFx0XHRUaGlzIHdpbGwgc2V0IHRoZSBDYW52YXMgb3JpZ2luLWNsZWFuIHByb3BlcnR5IHRvIGZhbHNlLCBpZiB0aGlzIGRhdGEgaXMgdHJhbnNmZXJyZWQgdG8gQ2FudmFzLlxuXHRcdFx0RGVmYXVsdDogZmFsc2UsIHRvIGtlZXAgb3JpZ2luLWNsZWFuIHRydWUuXG5cdFx0XHROT1RFOiBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBhbmQgaXMganVzdCBpZ25vcmVkLlxuXG5cdFx0a2VlcE91dHNpZGVWaWV3cG9ydDogdHJ1ZXxmYWxzZVxuXHRcdFx0RXhwb3J0IGFsbCBkcmF3biBjb250ZW50LCBldmVuIGlmIG5vdCB2aXNpYmxlLlxuXHRcdFx0RGVmYXVsdDogZmFsc2UsIGV4cG9ydCBvbmx5IHZpc2libGUgdmlld3BvcnQsIHNpbWlsYXIgdG8gQ2FudmFzIHRvRGF0YVVSTCgpLlxuXHRcdFx0Tk9URTogb25seSBzdXBwb3J0ZWQgd2l0aCBjYW52ZyByZW5kZXJlci5cblx0fVxuXG5cdFNlZSBvcmlnaW5hbCBwYXBlcsK5IGZvciBtb3JlIGluZm8gb24gU1ZHIHRvIENhbnZhcyBleHBvcnRpbmcuXG5cblx0wrkgaHR0cDovL3N2Z29wZW4ub3JnLzIwMTAvcGFwZXJzLzYyLUZyb21fU1ZHX3RvX0NhbnZhc19hbmRfQmFjay8jc3ZnX3RvX2NhbnZhc1xuKi9cblxuU1ZHRWxlbWVudC5wcm90b3R5cGUudG9EYXRhVVJMID0gZnVuY3Rpb24odHlwZSwgb3B0aW9ucykge1xuICB2YXIgX3N2ZyA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gZGVidWcocykge1xuICAgIC8vIFdlIGNvdWxkIGZpbmQgdG8gYSB3YXkgdG8gbWFrZSB0aGlzIGRpc3BsYXkgZGVwZW5kaW5nIG9uIGVudmlyb25tZW50LCBidXRcbiAgICAvLyBmb3Igbm93IEkgdGhpbmsgaXQncyBva2F5IHRvIGp1c3QgZGlzYWJsZS5cbiAgICAvLyBjb25zb2xlLmxvZyhcIlNWRy50b0RhdGFVUkw6XCIsIHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXhwb3J0U1ZHKCkge1xuICAgIHZhciBzdmdfeG1sID0gWE1MU2VyaWFsaXplKF9zdmcpO1xuICAgIHZhciBzdmdfZGF0YXVybCA9IGJhc2U2NGRhdGFVUkxlbmNvZGUoc3ZnX3htbCk7XG4gICAgZGVidWcodHlwZSArICcgbGVuZ3RoOiAnICsgc3ZnX2RhdGF1cmwubGVuZ3RoKTtcblxuICAgIC8vIE5PVEUgZG91YmxlIGRhdGEgY2FycmllclxuICAgIGlmIChvcHRpb25zLmNhbGxiYWNrKSBvcHRpb25zLmNhbGxiYWNrKHN2Z19kYXRhdXJsKTtcbiAgICByZXR1cm4gc3ZnX2RhdGF1cmw7XG4gIH1cblxuICBmdW5jdGlvbiBYTUxTZXJpYWxpemUoc3ZnKSB7XG4gICAgLy8gcXVpY2stbi1zZXJpYWxpemUgYW4gU1ZHIGRvbSwgbmVlZGVkIGZvciBJRTkgd2hlcmUgdGhlcmUncyBubyBYTUxTZXJpYWxpemVyIG5vciBTVkcueG1sXG4gICAgLy8gczogU1ZHIGRvbSwgd2hpY2ggaXMgdGhlIDxzdmc+IGVsZW1lbm50XG4gICAgZnVuY3Rpb24gWE1MU2VyaWFsaXplckZvcklFKHMpIHtcbiAgICAgIHZhciBvdXQgPSAnJztcblxuICAgICAgb3V0ICs9ICc8JyArIHMubm9kZU5hbWU7XG4gICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHMuYXR0cmlidXRlcy5sZW5ndGg7IG4rKykge1xuICAgICAgICBvdXQgKz1cbiAgICAgICAgICAnICcgKyBzLmF0dHJpYnV0ZXNbbl0ubmFtZSArICc9JyArIFwiJ1wiICsgcy5hdHRyaWJ1dGVzW25dLnZhbHVlICsgXCInXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChzLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICBvdXQgKz0gJz5cXG4nO1xuXG4gICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgcy5jaGlsZE5vZGVzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgb3V0ICs9IFhNTFNlcmlhbGl6ZXJGb3JJRShzLmNoaWxkTm9kZXNbbl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0ICs9ICc8LycgKyBzLm5vZGVOYW1lICsgJz4nICsgJ1xcbic7XG4gICAgICB9IGVsc2Ugb3V0ICs9ICcgLz5cXG4nO1xuXG4gICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIGlmICh3aW5kb3cuWE1MU2VyaWFsaXplcikge1xuICAgICAgZGVidWcoJ3VzaW5nIHN0YW5kYXJkIFhNTFNlcmlhbGl6ZXIuc2VyaWFsaXplVG9TdHJpbmcnKTtcbiAgICAgIHJldHVybiBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2Zyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnKCd1c2luZyBjdXN0b20gWE1MU2VyaWFsaXplckZvcklFJyk7XG4gICAgICByZXR1cm4gWE1MU2VyaWFsaXplckZvcklFKHN2Zyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYmFzZTY0ZGF0YVVSTGVuY29kZShzKSB7XG4gICAgdmFyIGI2NCA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCc7XG5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LmJ0b2FcbiAgICBpZiAod2luZG93LmJ0b2EpIHtcbiAgICAgIGRlYnVnKCd1c2luZyB3aW5kb3cuYnRvYSBmb3IgYmFzZTY0IGVuY29kaW5nJyk7XG4gICAgICBiNjQgKz0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQocykpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWcoJ3VzaW5nIGN1c3RvbSBiYXNlNjQgZW5jb2RlcicpO1xuICAgICAgYjY0ICs9IEJhc2U2NC5lbmNvZGUocyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGI2NDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4cG9ydEltYWdlKHR5cGUpIHtcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgLy8gVE9ETzogaWYgKG9wdGlvbnMua2VlcE91dHNpZGVWaWV3cG9ydCksIGRvIHNvbWUgdHJhbnNsYXRpb24gbWFnaWM/XG5cbiAgICB2YXIgc3ZnX2ltZyA9IG5ldyBJbWFnZSgpO1xuICAgIHZhciBzdmdfeG1sID0gWE1MU2VyaWFsaXplKF9zdmcpO1xuICAgIHN2Z19pbWcuc3JjID0gYmFzZTY0ZGF0YVVSTGVuY29kZShzdmdfeG1sKTtcblxuICAgIHN2Z19pbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBkZWJ1ZygnZXhwb3J0ZWQgaW1hZ2Ugc2l6ZTogJyArIFtzdmdfaW1nLndpZHRoLCBzdmdfaW1nLmhlaWdodF0pO1xuICAgICAgY2FudmFzLndpZHRoID0gc3ZnX2ltZy53aWR0aDtcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSBzdmdfaW1nLmhlaWdodDtcbiAgICAgIGN0eC5kcmF3SW1hZ2Uoc3ZnX2ltZywgMCwgMCk7XG5cbiAgICAgIC8vIFNFQ1VSSVRZX0VSUiBXSUxMIEhBUFBFTiBOT1dcbiAgICAgIHZhciBwbmdfZGF0YXVybCA9IGNhbnZhcy50b0RhdGFVUkwodHlwZSk7XG4gICAgICBkZWJ1Zyh0eXBlICsgJyBsZW5ndGg6ICcgKyBwbmdfZGF0YXVybC5sZW5ndGgpO1xuXG4gICAgICBpZiAob3B0aW9ucy5jYWxsYmFjaykgb3B0aW9ucy5jYWxsYmFjayhwbmdfZGF0YXVybCk7XG4gICAgICBlbHNlIGRlYnVnKCdXQVJOSU5HOiBubyBjYWxsYmFjayBzZXQsIHNvIG5vdGhpbmcgaGFwcGVucy4nKTtcbiAgICB9O1xuXG4gICAgc3ZnX2ltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJDYW4ndCBleHBvcnQhIE1heWJlIHlvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgXCIgK1xuICAgICAgICAgICdTVkcgaW4gaW1nIGVsZW1lbnQgb3IgU1ZHIGlucHV0IGZvciBDYW52YXMgZHJhd0ltYWdlP1xcbicgK1xuICAgICAgICAgICdodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NWRyNOYXRpdmVfc3VwcG9ydCdcbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8vIE5PVEU6IHdpbGwgbm90IHJldHVybiBhbnl0aGluZ1xuICB9XG5cbiAgZnVuY3Rpb24gZXhwb3J0SW1hZ2VDYW52Zyh0eXBlKSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB2YXIgc3ZnX3htbCA9IFhNTFNlcmlhbGl6ZShfc3ZnKTtcblxuICAgIC8vIE5PVEU6IGNhbnZnIGdldHMgdGhlIFNWRyBlbGVtZW50IGRpbWVuc2lvbnMgaW5jb3JyZWN0bHkgaWYgbm90IHNwZWNpZmllZCBhcyBhdHRyaWJ1dGVzXG4gICAgLy9kZWJ1ZyhcImRldGVjdGVkIHN2ZyBkaW1lbnNpb25zIFwiICsgW19zdmcuY2xpZW50V2lkdGgsIF9zdmcuY2xpZW50SGVpZ2h0XSlcbiAgICAvL2RlYnVnKFwiY2FudmFzIGRpbWVuc2lvbnMgXCIgKyBbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XSlcblxuICAgIHZhciBrZWVwQkIgPSBvcHRpb25zLmtlZXBPdXRzaWRlVmlld3BvcnQ7XG4gICAgaWYgKGtlZXBCQikgdmFyIGJiID0gX3N2Zy5nZXRCQm94KCk7XG5cbiAgICAvLyBOT1RFOiB0aGlzIGNhbnZnIGNhbGwgaXMgc3luY2hyb25vdXMgYW5kIGJsb2NrcyAobm8gaXQgZG9lcyBub3QpXG4gICAgY2FudmcoY2FudmFzLCBzdmdfeG1sLCB7XG4gICAgICBpZ25vcmVNb3VzZTogdHJ1ZSxcbiAgICAgIGlnbm9yZUFuaW1hdGlvbjogdHJ1ZSxcbiAgICAgIG9mZnNldFg6IGtlZXBCQiA/IC1iYi54IDogdW5kZWZpbmVkLFxuICAgICAgb2Zmc2V0WToga2VlcEJCID8gLWJiLnkgOiB1bmRlZmluZWQsXG4gICAgICBzY2FsZVdpZHRoOiBrZWVwQkIgPyBiYi53aWR0aCArIGJiLnggOiB1bmRlZmluZWQsXG4gICAgICBzY2FsZUhlaWdodDoga2VlcEJCID8gYmIuaGVpZ2h0ICsgYmIueSA6IHVuZGVmaW5lZCxcbiAgICAgIHJlbmRlckNhbGxiYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZGVidWcoJ2V4cG9ydGVkIGltYWdlIGRpbWVuc2lvbnMgJyArIFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdKTtcbiAgICAgICAgdmFyIHBuZ19kYXRhdXJsID0gY2FudmFzLnRvRGF0YVVSTCh0eXBlKTtcbiAgICAgICAgZGVidWcodHlwZSArICcgbGVuZ3RoOiAnICsgcG5nX2RhdGF1cmwubGVuZ3RoKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5jYWxsYmFjaykgb3B0aW9ucy5jYWxsYmFjayhwbmdfZGF0YXVybCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBOT1RFOiByZXR1cm4gaW4gYWRkaXRpb24gdG8gY2FsbGJhY2tcbiAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCh0eXBlKTtcbiAgfVxuXG4gIC8vIEJFR0lOIE1BSU5cblxuICBpZiAoIXR5cGUpIHR5cGUgPSAnaW1hZ2Uvc3ZnK3htbCc7XG4gIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXG4gIGlmIChvcHRpb25zLmtlZXBOb25TYWZlKVxuICAgIGRlYnVnKCdOT1RFOiBrZWVwTm9uU2FmZSBpcyBOT1Qgc3VwcG9ydGVkIGFuZCB3aWxsIGJlIGlnbm9yZWQhJyk7XG4gIGlmIChvcHRpb25zLmtlZXBPdXRzaWRlVmlld3BvcnQpXG4gICAgZGVidWcoJ05PVEU6IGtlZXBPdXRzaWRlVmlld3BvcnQgaXMgb25seSBzdXBwb3J0ZWQgd2l0aCBjYW52ZyBleHBvcnRlci4nKTtcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdpbWFnZS9zdmcreG1sJzpcbiAgICAgIHJldHVybiBleHBvcnRTVkcoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaW1hZ2UvcG5nJzpcbiAgICBjYXNlICdpbWFnZS9qcGVnJzpcbiAgICAgIGlmICghb3B0aW9ucy5yZW5kZXJlcikge1xuICAgICAgICBpZiAod2luZG93LmNhbnZnKSBvcHRpb25zLnJlbmRlcmVyID0gJ2NhbnZnJztcbiAgICAgICAgZWxzZSBvcHRpb25zLnJlbmRlcmVyID0gJ25hdGl2ZSc7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAob3B0aW9ucy5yZW5kZXJlcikge1xuICAgICAgICBjYXNlICdjYW52Zyc6XG4gICAgICAgICAgZGVidWcoJ3VzaW5nIGNhbnZnIHJlbmRlcmVyIGZvciBwbmcgZXhwb3J0Jyk7XG4gICAgICAgICAgcmV0dXJuIGV4cG9ydEltYWdlQ2FudmcodHlwZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnbmF0aXZlJzpcbiAgICAgICAgICBkZWJ1ZygndXNpbmcgbmF0aXZlIHJlbmRlcmVyIGZvciBwbmcgZXhwb3J0LiBUSElTIE1JR0hUIEZBSUwuJyk7XG4gICAgICAgICAgcmV0dXJuIGV4cG9ydEltYWdlKHR5cGUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZGVidWcoXG4gICAgICAgICAgICAndW5rbm93biBwbmcgcmVuZGVyZXIgZ2l2ZW4sIGRvaW5nIG5vdGluZyAoJyArXG4gICAgICAgICAgICAgIG9wdGlvbnMucmVuZGVyZXIgK1xuICAgICAgICAgICAgICAnKSdcbiAgICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBkZWJ1ZyhcIlNvcnJ5ISBFeHBvcnRpbmcgYXMgJ1wiICsgdHlwZSArIFwiJyBpcyBub3Qgc3VwcG9ydGVkIVwiKTtcbiAgfVxufTtcbiIsIi8vIHRlc3RzIGRvbid0IGhhdmUgc3ZnZWxlbWVudFxuaWYgKHR5cGVvZiBTVkdFbGVtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAvLyBMb2FkaW5nIHRoZXNlIG1vZHVsZXMgZXh0ZW5kcyBTVkdFbGVtZW50IGFuZCBwdXRzIGNhbnZnIGluIHRoZSBnbG9iYWxcbiAgLy8gbmFtZXNwYWNlXG4gIHJlcXVpcmUoJ2NhbnZnJyk7XG4gIHJlcXVpcmUoJy4uL3RoaXJkLXBhcnR5L2NhbnZnL3N2Z190b2RhdGF1cmwnKTtcbn1cbiJdLCJuYW1lcyI6WyJTVkdFbGVtZW50IiwicHJvdG90eXBlIiwidG9EYXRhVVJMIiwidHlwZSIsIm9wdGlvbnMiLCJfc3ZnIiwidGhpcyIsIlhNTFNlcmlhbGl6ZSIsInN2ZyIsIndpbmRvdyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsIlhNTFNlcmlhbGl6ZXJGb3JJRSIsInMiLCJvdXQiLCJub2RlTmFtZSIsIm4iLCJhdHRyaWJ1dGVzIiwibGVuZ3RoIiwibmFtZSIsInZhbHVlIiwiaGFzQ2hpbGROb2RlcyIsImNoaWxkTm9kZXMiLCJiYXNlNjRkYXRhVVJMZW5jb2RlIiwiYjY0IiwiYnRvYSIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiQmFzZTY0IiwiZW5jb2RlIiwia2VlcE5vblNhZmUiLCJrZWVwT3V0c2lkZVZpZXdwb3J0IiwiZXhwb3J0U1ZHIiwic3ZnX2RhdGF1cmwiLCJjYWxsYmFjayIsInJlbmRlcmVyIiwiY2FudmciLCJleHBvcnRJbWFnZUNhbnZnIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3ZnX3htbCIsImdldENvbnRleHQiLCJrZWVwQkIiLCJiYiIsImdldEJCb3giLCJpZ25vcmVNb3VzZSIsImlnbm9yZUFuaW1hdGlvbiIsIm9mZnNldFgiLCJ4IiwidW5kZWZpbmVkIiwib2Zmc2V0WSIsInkiLCJzY2FsZVdpZHRoIiwid2lkdGgiLCJzY2FsZUhlaWdodCIsImhlaWdodCIsInJlbmRlckNhbGxiYWNrIiwicG5nX2RhdGF1cmwiLCJleHBvcnRJbWFnZSIsImN0eCIsInN2Z19pbWciLCJJbWFnZSIsInNyYyIsIm9ubG9hZCIsImRyYXdJbWFnZSIsIm9uZXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVxdWlyZSJdLCJzb3VyY2VSb290IjoiIn0=