"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[19],{"./src/applab/ExternalRedirectDialog.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.UnconnectedExternalRedirectDialog=void 0;var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_reactRedux=__webpack_require__("./node_modules/react-redux/es/index.js"),_constants=__webpack_require__("./src/constants.js"),_urlHelpers=__webpack_require__("./src/lib/util/urlHelpers.js"),_Dialog=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("./src/templates/Dialog.jsx")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_Button=_interopRequireDefault(__webpack_require__("./src/templates/Button.jsx")),_DialogFooter=_interopRequireDefault(__webpack_require__("./src/templates/teacherDashboard/DialogFooter.jsx")),_applab=__webpack_require__("./src/applab/redux/applab.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var ExternalRedirectDialog=function(_React$Component){function ExternalRedirectDialog(){return _React$Component.apply(this,arguments)||this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(ExternalRedirectDialog,_React$Component);var _proto=ExternalRedirectDialog.prototype;return _proto.handleRedirect=function handleRedirect(url){window.open(url,"_blank","noopener,noreferrer"),this.props.handleClose()},_proto.render=function render(){var title,body,footer,_this=this;if(!(this.props.redirects&&this.props.redirects.length>0))return null;var response=this.props.redirects[0].response,url=this.props.redirects[0].url;return response===_applab.REDIRECT_RESPONSE.APPROVED?(title=_locale.default.redirectTitle(),body=_react.default.createElement("div",null,_react.default.createElement("h2",{style:styles.title},_locale.default.redirectConfirmation()),_react.default.createElement("p",{style:styles.url},url),_react.default.createElement("p",null,_locale.default.redirectExplanation(),_react.default.createElement("span",null,_react.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:(0,_urlHelpers.studio)("/report_abuse")},_locale.default.reportAbuse())))),footer=_react.default.createElement(_DialogFooter.default,null,_react.default.createElement(_Button.default,{onClick:this.props.handleClose,text:_locale.default.goBack(),color:_Button.default.ButtonColor.gray,style:{margin:0}}),_react.default.createElement(_Button.default,{onClick:function onClick(){return _this.handleRedirect(url)},text:_locale.default.continue(),color:_Button.default.ButtonColor.brandSecondaryDefault,style:{margin:0}}))):(response===_applab.REDIRECT_RESPONSE.UNSUPPORTED?(title=_locale.default.redirectUnsupportedTitle(),body=_react.default.createElement("p",null,_locale.default.redirectUnsupportedExplanation())):(title=_locale.default.redirectRejectTitle(),body=_react.default.createElement("p",null,_locale.default.redirectRejectExplanation())),footer=_react.default.createElement(_DialogFooter.default,{rightAlign:!0},_react.default.createElement(_Button.default,{__useDeprecatedTag:!0,onClick:this.props.handleClose,text:_locale.default.dialogOK(),color:_Button.default.ButtonColor.gray}))),_react.default.createElement(_Dialog.default,{title,fullWidth:window.innerWidth<_constants.BASE_DIALOG_WIDTH,isOpen:!0,handleClose:this.props.handleClose},_react.default.createElement(_Dialog.Body,null,body,footer))},ExternalRedirectDialog}(_react.default.Component);!function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(ExternalRedirectDialog,"propTypes",{handleClose:_propTypes.default.func,redirects:_propTypes.default.array});var styles={title:{display:"inline",wordWrap:"break-word"},url:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",maxWidth:"100%",wordWrap:"break-word",maxHeight:"140px"}},UnconnectedExternalRedirectDialog=exports.UnconnectedExternalRedirectDialog=ExternalRedirectDialog;exports.default=(0,_reactRedux.connect)((function(state){return{redirects:state.redirectDisplay}}),(function(dispatch){return{handleClose:function handleClose(){dispatch(_applab.actions.dismissRedirectNotice())}}}))(UnconnectedExternalRedirectDialog)},"./src/lib/util/urlHelpers.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.metaTagDescription=exports.RELEASE_OR_DELETE_RECORDS_EXPLANATION=exports.ADD_A_PERSONAL_LOGIN_HELP_URL=void 0,exports.pegasus=function pegasus(relativeUrl){if(window.dashboard&&window.dashboard.CODE_ORG_URL)return window.dashboard.CODE_ORG_URL+relativeUrl;return relativeUrl},exports.setPegasusOrigin=function setPegasusOrigin(origin){window.dashboard=window.dashboard||{},window.dashboard.CODE_ORG_URL=origin},exports.setStudioOrigin=function setStudioOrigin(origin){window.pegasus=window.pegasus||{},window.pegasus.STUDIO_URL=origin},exports.studio=function studio(relativeUrl){if(window.pegasus&&window.pegasus.STUDIO_URL)return window.pegasus.STUDIO_URL+relativeUrl;return relativeUrl};var _jquery=_interopRequireDefault(__webpack_require__("./node_modules/jquery/dist/jquery.js")),_lodash=_interopRequireDefault(__webpack_require__("./node_modules/lodash/lodash.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}exports.metaTagDescription=_lodash.default.memoize((function(relativeUrl){return fetch(relativeUrl).then((function(response){return Promise.all([response.status,response.text()])})).then((function(_ref){var _ref2=_slicedToArray(_ref,2),status=_ref2[0],text=_ref2[1];return status<200||status>=300?relativeUrl:(0,_jquery.default)(text).filter("meta[name='description']").attr("content")||relativeUrl})).catch((function(error){return relativeUrl}))})),exports.ADD_A_PERSONAL_LOGIN_HELP_URL="https://support.code.org/hc/en-us/articles/115001475131-Adding-a-personal-login-to-a-teacher-created-account",exports.RELEASE_OR_DELETE_RECORDS_EXPLANATION="https://support.code.org/hc/en-us/articles/360015983631"},"./src/applab/ExternalRedirectDialog.story.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.UnsupportedSite=exports.RejectedSite=exports.ApprovedSite=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/react/index.js")),_ExternalRedirectDialog=__webpack_require__("./src/applab/ExternalRedirectDialog.jsx"),_applab=__webpack_require__("./src/applab/redux/applab.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}exports.default={component:_ExternalRedirectDialog.UnconnectedExternalRedirectDialog};var Template=function Template(args){return _react.default.createElement(_ExternalRedirectDialog.UnconnectedExternalRedirectDialog,_extends({},args,{handleClose:function handleClose(){}}))};(exports.ApprovedSite=Template.bind({})).args={redirects:[{url:"www.google.com/super_duper/long_url/should_be_wrapped/to-the-next-line.html",response:_applab.REDIRECT_RESPONSE.APPROVED}]},(exports.RejectedSite=Template.bind({})).args={redirects:[{url:"www.google.com",response:_applab.REDIRECT_RESPONSE.REJECTED}]},(exports.UnsupportedSite=Template.bind({})).args={redirects:[{url:"www.google.com",response:_applab.REDIRECT_RESPONSE.UNSUPPORTED}]}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwbGFiLUV4dGVybmFsUmVkaXJlY3REaWFsb2ctc3RvcnkuNjhkNjVmNDYuaWZyYW1lLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoicVRBQUEsSUFBQUEsV0FBQUMsdUJBQUFDLG9CQUFBLHVDQUNBQyxPQUFBRix1QkFBQUMsb0JBQUEsa0NBQ0FFLFlBQUFGLG9CQUFBLDBDQUVBRyxXQUFBSCxvQkFBQSxzQkFDQUksWUFBQUosb0JBQUEsZ0NBQ0FLLFFBTTBELFNBQUFDLHdCQUFBQyxFQUFBQyxHQUFBLElBQUFBLEdBQUFELEdBQUFBLEVBQUFFLFdBQUEsT0FBQUYsRUFBQSxVQUFBQSxHQUFBLFVBQUFHLFFBQUFILElBQUEsbUJBQUFBLEVBQUEsZUFBQUEsR0FBQSxJQUFBSSxFQUFBQyx5QkFBQUosR0FBQSxHQUFBRyxHQUFBQSxFQUFBRSxJQUFBTixHQUFBLE9BQUFJLEVBQUFHLElBQUFQLEdBQUEsSUFBQVEsRUFBQSxDQUFBQyxVQUFBLE1BQUFDLEVBQUFDLE9BQUFDLGdCQUFBRCxPQUFBRSx5QkFBQSxRQUFBQyxLQUFBZCxFQUFBLGVBQUFjLEdBQUEsR0FBQUMsZUFBQUMsS0FBQWhCLEVBQUFjLEdBQUEsS0FBQUcsRUFBQVAsRUFBQUMsT0FBQUUseUJBQUFiLEVBQUFjLEdBQUEsS0FBQUcsSUFBQUEsRUFBQVYsS0FBQVUsRUFBQUMsS0FBQVAsT0FBQUMsZUFBQUosRUFBQU0sRUFBQUcsR0FBQVQsRUFBQU0sR0FBQWQsRUFBQWMsRUFBQSxRQUFBTixFQUFBLFFBQUFSLEVBQUFJLEdBQUFBLEVBQUFjLElBQUFsQixFQUFBUSxHQUFBQSxDQUFBLENBTjFEVCxDQUFBTixvQkFBQSwrQkFDQTBCLFFBQUEzQix1QkFBQUMsb0JBQUEsdUNBRUEyQixRQUFBNUIsdUJBQUFDLG9CQUFBLCtCQUNBNEIsY0FBQTdCLHVCQUFBQyxvQkFBQSxzREFFQTZCLFFBQUE3QixvQkFBQSxnQ0FBMEQsU0FBQVkseUJBQUFMLEdBQUEsc0JBQUF1QixRQUFBLGdCQUFBdEIsRUFBQSxJQUFB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QUVBNkIsUUFBQTdCLG9CQUFBLGdDQUFpRCxTQUFBbUwsV0FBQSxPQUFBQSxTQUFBakssT0FBQWtLLE9BQUFsSyxPQUFBa0ssT0FBQTVJLE9BQUEsU0FBQWtDLFFBQUEsUUFBQWxELEVBQUEsRUFBQUEsRUFBQW9CLFVBQUFtQixPQUFBdkMsSUFBQSxLQUFBNkosT0FBQXpJLFVBQUFwQixHQUFBLFFBQUFnRixPQUFBNkUsT0FBQW5LLE9BQUFrQixVQUFBZCxlQUFBQyxLQUFBOEosT0FBQTdFLE9BQUE5QixPQUFBOEIsS0FBQTZFLE9BQUE3RSxLQUFBLFFBQUE5QixNQUFBLEVBQUF5RyxTQUFBeEksTUFBQSxLQUFBQyxVQUFBLENBQUFrRixRQUFBQSxRQUVsQyxDQUNid0QsVUFBVzdJLHdCQUFBQSxtQ0FIb0MsSUFNM0M4SSxTQUFXLFNBQVhBLFNBQVdDLE1BQUksT0FDbkJ2TCxPQUFBLFFBQUFvRSxjQUFDNkcsd0JBQUFyRCxrQ0FBc0JzRCxTQUFBLEdBQUtLLEtBQUksQ0FBRWhJLFlBQWEsU0FBQUEsY0FBTyxJQUFLLEdBR3BDc0UsUUFBQUEsYUFBR3lELFNBQVMvSSxLQUFLLENBQUMsSUFDOUJnSixLQUFPLENBQ2xCMUgsVUFBVyxDQUNULENBQ0VYLElBQUssOEVBQ0xhLFNBQVVDLFFBQUFBLGtCQUFrQkMsYUFLVDRELFFBQUFBLGFBQUd5RCxTQUFTL0ksS0FBSyxDQUFDLElBQzlCZ0osS0FBTyxDQUNsQjFILFVBQVcsQ0FDVCxDQUNFWCxJQUFLLGlCQUNMYSxTQUFVQyxRQUFBQSxrQkFBa0J3SCxhQUtOM0QsUUFBQUEsZ0JBQUd5RCxTQUFTL0ksS0FBSyxDQUFDLElBQzlCZ0osS0FBTyxDQUNyQjFILFVBQVcsQ0FDVCxDQUNFWCxJQUFLLGlCQUNMYSxTQUFVQyxRQUFBQSxrQkFBa0J1QixjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL2FwcGxhYi9FeHRlcm5hbFJlZGlyZWN0RGlhbG9nLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvbGliL3V0aWwvdXJsSGVscGVycy5qcyIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvYXBwbGFiL0V4dGVybmFsUmVkaXJlY3REaWFsb2cuc3RvcnkuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtjb25uZWN0fSBmcm9tICdyZWFjdC1yZWR1eCc7XG5cbmltcG9ydCB7QkFTRV9ESUFMT0dfV0lEVEh9IGZyb20gJ0BjZG8vYXBwcy9jb25zdGFudHMnO1xuaW1wb3J0IHtzdHVkaW99IGZyb20gJ0BjZG8vYXBwcy9saWIvdXRpbC91cmxIZWxwZXJzJztcbmltcG9ydCBEaWFsb2csIHtCb2R5fSBmcm9tICdAY2RvL2FwcHMvdGVtcGxhdGVzL0RpYWxvZyc7XG5pbXBvcnQgaTE4biBmcm9tICdAY2RvL2xvY2FsZSc7XG5cbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vdGVtcGxhdGVzL0J1dHRvbic7XG5pbXBvcnQgRGlhbG9nRm9vdGVyIGZyb20gJy4uL3RlbXBsYXRlcy90ZWFjaGVyRGFzaGJvYXJkL0RpYWxvZ0Zvb3Rlcic7XG5cbmltcG9ydCB7YWN0aW9ucywgUkVESVJFQ1RfUkVTUE9OU0V9IGZyb20gJy4vcmVkdXgvYXBwbGFiJztcblxuY2xhc3MgRXh0ZXJuYWxSZWRpcmVjdERpYWxvZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgaGFuZGxlQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuICAgIHJlZGlyZWN0czogUHJvcFR5cGVzLmFycmF5LFxuICB9O1xuXG4gIGhhbmRsZVJlZGlyZWN0KHVybCkge1xuICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycsICdub29wZW5lcixub3JlZmVycmVyJyk7XG4gICAgdGhpcy5wcm9wcy5oYW5kbGVDbG9zZSgpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB0aXRsZSwgYm9keSwgZm9vdGVyO1xuICAgIGlmICghKHRoaXMucHJvcHMucmVkaXJlY3RzICYmIHRoaXMucHJvcHMucmVkaXJlY3RzLmxlbmd0aCA+IDApKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnByb3BzLnJlZGlyZWN0c1swXS5yZXNwb25zZTtcbiAgICBsZXQgdXJsID0gdGhpcy5wcm9wcy5yZWRpcmVjdHNbMF0udXJsO1xuICAgIGlmIChyZXNwb25zZSA9PT0gUkVESVJFQ1RfUkVTUE9OU0UuQVBQUk9WRUQpIHtcbiAgICAgIHRpdGxlID0gaTE4bi5yZWRpcmVjdFRpdGxlKCk7XG4gICAgICBib2R5ID0gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxoMiBzdHlsZT17c3R5bGVzLnRpdGxlfT57aTE4bi5yZWRpcmVjdENvbmZpcm1hdGlvbigpfTwvaDI+XG4gICAgICAgICAgPHAgc3R5bGU9e3N0eWxlcy51cmx9Pnt1cmx9PC9wPlxuICAgICAgICAgIDxwPlxuICAgICAgICAgICAge2kxOG4ucmVkaXJlY3RFeHBsYW5hdGlvbigpfVxuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgICAgICBocmVmPXtzdHVkaW8oJy9yZXBvcnRfYWJ1c2UnKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpMThuLnJlcG9ydEFidXNlKCl9XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICAgIGZvb3RlciA9IChcbiAgICAgICAgPERpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLmhhbmRsZUNsb3NlfVxuICAgICAgICAgICAgdGV4dD17aTE4bi5nb0JhY2soKX1cbiAgICAgICAgICAgIGNvbG9yPXtCdXR0b24uQnV0dG9uQ29sb3IuZ3JheX1cbiAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luOiAwfX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuaGFuZGxlUmVkaXJlY3QodXJsKX1cbiAgICAgICAgICAgIHRleHQ9e2kxOG4uY29udGludWUoKX1cbiAgICAgICAgICAgIGNvbG9yPXtCdXR0b24uQnV0dG9uQ29sb3IuYnJhbmRTZWNvbmRhcnlEZWZhdWx0fVxuICAgICAgICAgICAgc3R5bGU9e3ttYXJnaW46IDB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRGlhbG9nRm9vdGVyPlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJlc3BvbnNlID09PSBSRURJUkVDVF9SRVNQT05TRS5VTlNVUFBPUlRFRCkge1xuICAgICAgICB0aXRsZSA9IGkxOG4ucmVkaXJlY3RVbnN1cHBvcnRlZFRpdGxlKCk7XG4gICAgICAgIGJvZHkgPSA8cD57aTE4bi5yZWRpcmVjdFVuc3VwcG9ydGVkRXhwbGFuYXRpb24oKX08L3A+O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGl0bGUgPSBpMThuLnJlZGlyZWN0UmVqZWN0VGl0bGUoKTtcbiAgICAgICAgYm9keSA9IDxwPntpMThuLnJlZGlyZWN0UmVqZWN0RXhwbGFuYXRpb24oKX08L3A+O1xuICAgICAgfVxuICAgICAgZm9vdGVyID0gKFxuICAgICAgICA8RGlhbG9nRm9vdGVyIHJpZ2h0QWxpZ24+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgX191c2VEZXByZWNhdGVkVGFnXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLmhhbmRsZUNsb3NlfVxuICAgICAgICAgICAgdGV4dD17aTE4bi5kaWFsb2dPSygpfVxuICAgICAgICAgICAgY29sb3I9e0J1dHRvbi5CdXR0b25Db2xvci5ncmF5fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRGlhbG9nRm9vdGVyPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPERpYWxvZ1xuICAgICAgICB0aXRsZT17dGl0bGV9XG4gICAgICAgIGZ1bGxXaWR0aD17d2luZG93LmlubmVyV2lkdGggPCBCQVNFX0RJQUxPR19XSURUSH1cbiAgICAgICAgaXNPcGVuXG4gICAgICAgIGhhbmRsZUNsb3NlPXt0aGlzLnByb3BzLmhhbmRsZUNsb3NlfVxuICAgICAgPlxuICAgICAgICA8Qm9keT5cbiAgICAgICAgICB7Ym9keX1cbiAgICAgICAgICB7Zm9vdGVyfVxuICAgICAgICA8L0JvZHk+XG4gICAgICA8L0RpYWxvZz5cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IHtcbiAgdGl0bGU6IHtcbiAgICBkaXNwbGF5OiAnaW5saW5lJyxcbiAgICB3b3JkV3JhcDogJ2JyZWFrLXdvcmQnLFxuICB9LFxuICB1cmw6IHtcbiAgICBkaXNwbGF5OiAnLXdlYmtpdC1ib3gnLFxuICAgIFdlYmtpdExpbmVDbGFtcDogMyxcbiAgICBXZWJraXRCb3hPcmllbnQ6ICd2ZXJ0aWNhbCcsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIG1heFdpZHRoOiAnMTAwJScsXG4gICAgd29yZFdyYXA6ICdicmVhay13b3JkJyxcbiAgICBtYXhIZWlnaHQ6ICcxNDBweCcsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgVW5jb25uZWN0ZWRFeHRlcm5hbFJlZGlyZWN0RGlhbG9nID0gRXh0ZXJuYWxSZWRpcmVjdERpYWxvZztcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gIHN0YXRlID0+ICh7XG4gICAgcmVkaXJlY3RzOiBzdGF0ZS5yZWRpcmVjdERpc3BsYXksXG4gIH0pLFxuICBkaXNwYXRjaCA9PiAoe1xuICAgIGhhbmRsZUNsb3NlKCkge1xuICAgICAgZGlzcGF0Y2goYWN0aW9ucy5kaXNtaXNzUmVkaXJlY3ROb3RpY2UoKSk7XG4gICAgfSxcbiAgfSlcbikoVW5jb25uZWN0ZWRFeHRlcm5hbFJlZGlyZWN0RGlhbG9nKTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG4vKipcbiAqIEF0dGVtcHQgdG8gY29uc3RydWN0IGFuIGFic29sdXRlIFBlZ2FzdXMgdXJsICh0aGF0IGlzLFxuICogc3RhcnRpbmcgd2l0aCBodHRwczovL2NvZGUub3JnIG9yIHRoZSBhcHByb3ByaWF0ZVxuICogZXF1aXZhbGVudCBmb3IgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQpIGZyb20gYSBnaXZlblxuICogcmVsYXRpdmUgdXJsLiAgSWYgd2UncmUgYWxyZWFkeSBvbiBwZWdhc3VzIHdlJ2xsXG4gKiBqdXN0IHJldHVybiB0aGUgcmVsYXRpdmUgdXJsLlxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVXJsIC0gc2hvdWxkIHN0YXJ0IHdpdGggYVxuICogICBsZWFkaW5nIHNsYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGVnYXN1cyhyZWxhdGl2ZVVybCkge1xuICBpZiAod2luZG93LmRhc2hib2FyZCAmJiB3aW5kb3cuZGFzaGJvYXJkLkNPREVfT1JHX1VSTCkge1xuICAgIHJldHVybiB3aW5kb3cuZGFzaGJvYXJkLkNPREVfT1JHX1VSTCArIHJlbGF0aXZlVXJsO1xuICB9XG4gIHJldHVybiByZWxhdGl2ZVVybDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBnbG9iYWwgVVJMIHByZWZpeCBmb3IgcGVnYXN1c1xuICogKGUuZy4gXCJodHRwczovL2NvZGUub3JnXCIpIGFsbG93aW5nIHRoZSBwZWdhc3VzKClcbiAqIG1ldGhvZCBhYm92ZSB0byBnZW5lcmF0ZSBhYnNvbHV0ZSBVUkxzLlxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0UGVnYXN1c09yaWdpbihvcmlnaW4pIHtcbiAgd2luZG93LmRhc2hib2FyZCA9IHdpbmRvdy5kYXNoYm9hcmQgfHwge307XG4gIHdpbmRvdy5kYXNoYm9hcmQuQ09ERV9PUkdfVVJMID0gb3JpZ2luO1xufVxuXG4vKipcbiAqIEF0dGVtcHQgdG8gY29uc3RydWN0IGFuIGFic29sdXRlIFN0dWRpbyB1cmwgKHRoYXQgaXMsXG4gKiBzdGFydGluZyB3aXRoIGh0dHBzOi8vc3R1ZGlvLmNvZGUub3JnIG9yIHRoZSBhcHByb3ByaWF0ZVxuICogZXF1aXZhbGVudCBmb3IgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQpIGZyb20gYSBnaXZlblxuICogcmVsYXRpdmUgdXJsLiAgSWYgd2UncmUgYWxyZWFkeSBvbiBkYXNoYm9hcmQgd2UnbGxcbiAqIGp1c3QgcmV0dXJuIHRoZSByZWxhdGl2ZSB1cmwuXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVcmwgLSBzaG91bGQgc3RhcnQgd2l0aCBhXG4gKiAgIGxlYWRpbmcgc2xhc2guXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHVkaW8ocmVsYXRpdmVVcmwpIHtcbiAgaWYgKHdpbmRvdy5wZWdhc3VzICYmIHdpbmRvdy5wZWdhc3VzLlNUVURJT19VUkwpIHtcbiAgICByZXR1cm4gd2luZG93LnBlZ2FzdXMuU1RVRElPX1VSTCArIHJlbGF0aXZlVXJsO1xuICB9XG4gIHJldHVybiByZWxhdGl2ZVVybDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBnbG9iYWwgVVJMIHByZWZpeCBmb3IgY29kZSBzdHVkaW9cbiAqIChlLmcuIFwiaHR0cHM6Ly9zdHVkaW8uY29kZS5vcmdcIikgYWxsb3dpbmcgdGhlIHN0dWRpbygpXG4gKiBtZXRob2QgYWJvdmUgdG8gZ2VuZXJhdGUgYWJzb2x1dGUgVVJMcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFN0dWRpb09yaWdpbihvcmlnaW4pIHtcbiAgd2luZG93LnBlZ2FzdXMgPSB3aW5kb3cucGVnYXN1cyB8fCB7fTtcbiAgd2luZG93LnBlZ2FzdXMuU1RVRElPX1VSTCA9IG9yaWdpbjtcbn1cblxuLyoqXG4gKiBGZXRjaCB0aGUgbWV0YSBkZXNjcmlwdGlvbiB0YWcgZnJvbSB0aGUgc3BlY2lmaWVkIHVybFxuICogTWVtb2l6ZSBzbyB0aGF0IHdlIG9ubHkgcmVxdWVzdCBvbmNlIHBlciByZWxhdGl2ZSB1cmwuXG4gKi9cbmV4cG9ydCBjb25zdCBtZXRhVGFnRGVzY3JpcHRpb24gPSBfLm1lbW9pemUocmVsYXRpdmVVcmwgPT4ge1xuICByZXR1cm4gZmV0Y2gocmVsYXRpdmVVcmwpXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gUHJvbWlzZS5hbGwoW3Jlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudGV4dCgpXSkpXG4gICAgLnRoZW4oKFtzdGF0dXMsIHRleHRdKSA9PiB7XG4gICAgICAvLyBDYXRjaCBmZXRjaCdzIDQwMCBlcnJvcnNcbiAgICAgIGlmIChzdGF0dXMgPCAyMDAgfHwgc3RhdHVzID49IDMwMCkge1xuICAgICAgICByZXR1cm4gcmVsYXRpdmVVcmw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBtZXRhVGFnID0gJCh0ZXh0KVxuICAgICAgICAgIC5maWx0ZXIoXCJtZXRhW25hbWU9J2Rlc2NyaXB0aW9uJ11cIilcbiAgICAgICAgICAuYXR0cignY29udGVudCcpO1xuICAgICAgICAvLyBSZXR1cm4gdXJsIGlmIHRoZXJlIHdhcyBubyBkZXNjcmlwdGlvbiBtZXRhIHRhZ1xuICAgICAgICByZXR1cm4gbWV0YVRhZyB8fCByZWxhdGl2ZVVybDtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChlcnJvciA9PiByZWxhdGl2ZVVybCk7XG59KTtcblxuZXhwb3J0IGNvbnN0IEFERF9BX1BFUlNPTkFMX0xPR0lOX0hFTFBfVVJMID1cbiAgJ2h0dHBzOi8vc3VwcG9ydC5jb2RlLm9yZy9oYy9lbi11cy9hcnRpY2xlcy8xMTUwMDE0NzUxMzEtQWRkaW5nLWEtcGVyc29uYWwtbG9naW4tdG8tYS10ZWFjaGVyLWNyZWF0ZWQtYWNjb3VudCc7XG5leHBvcnQgY29uc3QgUkVMRUFTRV9PUl9ERUxFVEVfUkVDT1JEU19FWFBMQU5BVElPTiA9XG4gICdodHRwczovL3N1cHBvcnQuY29kZS5vcmcvaGMvZW4tdXMvYXJ0aWNsZXMvMzYwMDE1OTgzNjMxJztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7VW5jb25uZWN0ZWRFeHRlcm5hbFJlZGlyZWN0RGlhbG9nIGFzIEV4dGVybmFsUmVkaXJlY3REaWFsb2d9IGZyb20gJ0BjZG8vYXBwcy9hcHBsYWIvRXh0ZXJuYWxSZWRpcmVjdERpYWxvZyc7XG5cbmltcG9ydCB7UkVESVJFQ1RfUkVTUE9OU0V9IGZyb20gJy4vcmVkdXgvYXBwbGFiJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnQ6IEV4dGVybmFsUmVkaXJlY3REaWFsb2csXG59O1xuXG5jb25zdCBUZW1wbGF0ZSA9IGFyZ3MgPT4gKFxuICA8RXh0ZXJuYWxSZWRpcmVjdERpYWxvZyB7Li4uYXJnc30gaGFuZGxlQ2xvc2U9eygpID0+IHt9fSAvPlxuKTtcblxuZXhwb3J0IGNvbnN0IEFwcHJvdmVkU2l0ZSA9IFRlbXBsYXRlLmJpbmQoe30pO1xuQXBwcm92ZWRTaXRlLmFyZ3MgPSB7XG4gIHJlZGlyZWN0czogW1xuICAgIHtcbiAgICAgIHVybDogJ3d3dy5nb29nbGUuY29tL3N1cGVyX2R1cGVyL2xvbmdfdXJsL3Nob3VsZF9iZV93cmFwcGVkL3RvLXRoZS1uZXh0LWxpbmUuaHRtbCcsXG4gICAgICByZXNwb25zZTogUkVESVJFQ1RfUkVTUE9OU0UuQVBQUk9WRUQsXG4gICAgfSxcbiAgXSxcbn07XG5cbmV4cG9ydCBjb25zdCBSZWplY3RlZFNpdGUgPSBUZW1wbGF0ZS5iaW5kKHt9KTtcblJlamVjdGVkU2l0ZS5hcmdzID0ge1xuICByZWRpcmVjdHM6IFtcbiAgICB7XG4gICAgICB1cmw6ICd3d3cuZ29vZ2xlLmNvbScsXG4gICAgICByZXNwb25zZTogUkVESVJFQ1RfUkVTUE9OU0UuUkVKRUNURUQsXG4gICAgfSxcbiAgXSxcbn07XG5cbmV4cG9ydCBjb25zdCBVbnN1cHBvcnRlZFNpdGUgPSBUZW1wbGF0ZS5iaW5kKHt9KTtcblVuc3VwcG9ydGVkU2l0ZS5hcmdzID0ge1xuICByZWRpcmVjdHM6IFtcbiAgICB7XG4gICAgICB1cmw6ICd3d3cuZ29vZ2xlLmNvbScsXG4gICAgICByZXNwb25zZTogUkVESVJFQ1RfUkVTUE9OU0UuVU5TVVBQT1JURUQsXG4gICAgfSxcbiAgXSxcbn07XG4iXSwibmFtZXMiOlsiX3Byb3BUeXBlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3JlYWN0IiwiX3JlYWN0UmVkdXgiLCJfY29uc3RhbnRzIiwiX3VybEhlbHBlcnMiLCJfRGlhbG9nIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJlIiwiciIsIl9fZXNNb2R1bGUiLCJfdHlwZW9mIiwidCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIl9sb2NhbGUiLCJfQnV0dG9uIiwiX0RpYWxvZ0Zvb3RlciIsIl9hcHBsYWIiLCJXZWFrTWFwIiwib2JqIiwibyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJfc2V0UHJvdG90eXBlT2YiLCJwIiwic2V0UHJvdG90eXBlT2YiLCJiaW5kIiwiRXh0ZXJuYWxSZWRpcmVjdERpYWxvZyIsIl9SZWFjdCRDb21wb25lbnQiLCJhcHBseSIsImFyZ3VtZW50cyIsIl9pbmhlcml0c0xvb3NlIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiX3Byb3RvIiwiaGFuZGxlUmVkaXJlY3QiLCJ1cmwiLCJ3aW5kb3ciLCJvcGVuIiwidGhpcyIsInByb3BzIiwiaGFuZGxlQ2xvc2UiLCJyZW5kZXIiLCJ0aXRsZSIsImJvZHkiLCJmb290ZXIiLCJfdGhpcyIsInJlZGlyZWN0cyIsImxlbmd0aCIsInJlc3BvbnNlIiwiUkVESVJFQ1RfUkVTUE9OU0UiLCJBUFBST1ZFRCIsImkxOG4iLCJyZWRpcmVjdFRpdGxlIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwic3R5bGVzIiwicmVkaXJlY3RDb25maXJtYXRpb24iLCJyZWRpcmVjdEV4cGxhbmF0aW9uIiwidGFyZ2V0IiwicmVsIiwiaHJlZiIsInN0dWRpbyIsInJlcG9ydEFidXNlIiwib25DbGljayIsInRleHQiLCJnb0JhY2siLCJjb2xvciIsIkJ1dHRvbiIsIkJ1dHRvbkNvbG9yIiwiZ3JheSIsIm1hcmdpbiIsImJyYW5kU2Vjb25kYXJ5RGVmYXVsdCIsIlVOU1VQUE9SVEVEIiwicmVkaXJlY3RVbnN1cHBvcnRlZFRpdGxlIiwicmVkaXJlY3RVbnN1cHBvcnRlZEV4cGxhbmF0aW9uIiwicmVkaXJlY3RSZWplY3RUaXRsZSIsInJlZGlyZWN0UmVqZWN0RXhwbGFuYXRpb24iLCJyaWdodEFsaWduIiwiX191c2VEZXByZWNhdGVkVGFnIiwiZGlhbG9nT0siLCJmdWxsV2lkdGgiLCJpbm5lcldpZHRoIiwiQkFTRV9ESUFMT0dfV0lEVEgiLCJpc09wZW4iLCJCb2R5IiwiUmVhY3QiLCJDb21wb25lbnQiLCJfZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiX3RvUHJpbWl0aXZlIiwidG9QcmltaXRpdmUiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJQcm9wVHlwZXMiLCJmdW5jIiwiYXJyYXkiLCJkaXNwbGF5Iiwid29yZFdyYXAiLCJXZWJraXRMaW5lQ2xhbXAiLCJXZWJraXRCb3hPcmllbnQiLCJvdmVyZmxvdyIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiVW5jb25uZWN0ZWRFeHRlcm5hbFJlZGlyZWN0RGlhbG9nIiwiZXhwb3J0cyIsImNvbm5lY3QiLCJzdGF0ZSIsInJlZGlyZWN0RGlzcGxheSIsImRpc3BhdGNoIiwiYWN0aW9ucyIsImRpc21pc3NSZWRpcmVjdE5vdGljZSIsInBlZ2FzdXMiLCJyZWxhdGl2ZVVybCIsImRhc2hib2FyZCIsIkNPREVfT1JHX1VSTCIsInNldFBlZ2FzdXNPcmlnaW4iLCJvcmlnaW4iLCJzZXRTdHVkaW9PcmlnaW4iLCJTVFVESU9fVVJMIiwiX2pxdWVyeSIsIl9sb2Rhc2giLCJfc2xpY2VkVG9BcnJheSIsImFyciIsIl9hcnJheVdpdGhIb2xlcyIsIkFycmF5IiwiaXNBcnJheSIsIl9pdGVyYWJsZVRvQXJyYXlMaW1pdCIsImwiLCJmIiwibmV4dCIsImRvbmUiLCJwdXNoIiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibWluTGVuIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJ0b1N0cmluZyIsInNsaWNlIiwibmFtZSIsImZyb20iLCJ0ZXN0IiwiX25vbkl0ZXJhYmxlUmVzdCIsImxlbiIsImFycjIiLCJfIiwibWVtb2l6ZSIsImZldGNoIiwidGhlbiIsIlByb21pc2UiLCJhbGwiLCJzdGF0dXMiLCJfcmVmIiwiX3JlZjIiLCIkIiwiZmlsdGVyIiwiYXR0ciIsImVycm9yIiwiX0V4dGVybmFsUmVkaXJlY3REaWFsb2ciLCJfZXh0ZW5kcyIsImFzc2lnbiIsInNvdXJjZSIsImNvbXBvbmVudCIsIlRlbXBsYXRlIiwiYXJncyIsIlJFSkVDVEVEIl0sInNvdXJjZVJvb3QiOiIifQ==