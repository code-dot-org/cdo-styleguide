"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[751],{"./src/lib/ui/SchoolInfoConfirmationDialog.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.styles=exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__("./node_modules/react/index.js")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_Dialog=_interopRequireWildcard(__webpack_require__("./src/templates/Dialog.jsx")),_Button=_interopRequireDefault(__webpack_require__("./src/templates/Button.jsx")),_SchoolInfoInterstitial=_interopRequireDefault(__webpack_require__("./src/lib/ui/SchoolInfoInterstitial.jsx")),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_redux=__webpack_require__("./src/redux.js"),_fontConstants=_interopRequireDefault(__webpack_require__("./src/fontConstants.js")),_AnalyticsReporter=_interopRequireDefault(__webpack_require__("./src/lib/util/AnalyticsReporter.js")),_AnalyticsConstants=__webpack_require__("./src/lib/util/AnalyticsConstants.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var styles={button:{marginTop:20,marginLeft:"50%"},buttonRTL:{marginTop:20,marginRight:"50%"},updateButton:{marginTop:20,marginLeft:5},updateButtonRTL:{marginTop:20,marginRight:5},intro:_objectSpread(_objectSpread({fontSize:18},_fontConstants.default["main-font-semi-bold"]),{},{color:_color.default.charcoal,paddingRight:20}),schoolName:{color:_color.default.purple,fontStyle:"italic"},body:{margin:10}};exports.styles=styles;var SchoolInfoConfirmationDialog=function(_Component){function SchoolInfoConfirmationDialog(props){var _this;return _defineProperty(_assertThisInitialized(_this=_Component.call(this,props)||this),"closeModal",(function(){_AnalyticsReporter.default.sendEvent(_AnalyticsConstants.EVENTS.UPDATE_SCHOOL_INFO_DIALOG_CLOSED),_this.setState({isOpen:!1}),_this.props.onClose()})),_defineProperty(_assertThisInitialized(_this),"handleClickYes",(function(){_AnalyticsReporter.default.sendEvent(_AnalyticsConstants.EVENTS.CONFIRM_SCHOOL_CLICKED);var _this$props$scriptDat=_this.props.scriptData,authTokenName=_this$props$scriptDat.authTokenName,authTokenValue=_this$props$scriptDat.authTokenValue,formData=new FormData;formData.append(authTokenName,authTokenValue),fetch("/api/v1/user_school_infos/".concat(_this.props.scriptData.existingSchoolInfo.user_school_info_id,"/update_last_confirmation_date"),{method:"PATCH",body:formData}).then(_this.closeModal).catch((function(error){_this.setState({error})}))})),_defineProperty(_assertThisInitialized(_this),"handleClickUpdate",(function(){_AnalyticsReporter.default.sendEvent(_AnalyticsConstants.EVENTS.UPDATE_SCHOOL_CLICKED),_this.setState({showSchoolInterstitial:!0})})),_defineProperty(_assertThisInitialized(_this),"renderInitialContent",(function(){var _getStore$getState;_AnalyticsReporter.default.sendEvent(_AnalyticsConstants.EVENTS.UPDATE_SCHOOL_INFO_DIALOG_SHOWN);var schoolName=_this.state.schoolName,isRTL=null===(_getStore$getState=(0,_redux.getStore)().getState())||void 0===_getStore$getState?void 0:_getStore$getState.isRtl;return _react.default.createElement(_Dialog.Body,null,_react.default.createElement("div",{style:styles.body},_react.default.createElement("p",{style:styles.intro},_locale.default.schoolInfoDialogDescription(),_react.default.createElement("span",{style:styles.schoolName},_locale.default.schoolInfoDialogDescriptionSchoolName({schoolName})))),_react.default.createElement(_Button.default,{style:isRTL?styles.updateButtonRTL:styles.updateButton,text:_locale.default.schoolInfoDialogUpdate(),color:_Button.default.ButtonColor.blue,onClick:_this.handleClickUpdate,id:"update-button"}),_react.default.createElement(_Button.default,{style:isRTL?styles.buttonRTL:styles.button,text:_locale.default.yes(),color:_Button.default.ButtonColor.brandSecondaryDefault,onClick:_this.handleClickYes,id:"yes-button"}))})),_this.state={showSchoolInterstitial:!1,schoolName:props.scriptData.existingSchoolInfo.school_name,isOpen:props.isOpen||!0},_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(SchoolInfoConfirmationDialog,_Component);var _proto=SchoolInfoConfirmationDialog.prototype;return _proto.renderSchoolInformationForm=function renderSchoolInformationForm(){return _react.default.createElement(_Dialog.Body,null,_react.default.createElement(_SchoolInfoInterstitial.default,{scriptData:this.props.scriptData,onClose:this.closeModal}))},_proto.render=function render(){var _this$state=this.state,showSchoolInterstitial=_this$state.showSchoolInterstitial,isOpen=_this$state.isOpen;return _react.default.createElement(_Dialog.default,{isOpen,handleClose:this.closeModal},showSchoolInterstitial?this.renderSchoolInformationForm():this.renderInitialContent())},SchoolInfoConfirmationDialog}(_react.Component);_defineProperty(SchoolInfoConfirmationDialog,"propTypes",{schoolName:_propTypes.default.string,scriptData:_propTypes.default.shape({formUrl:_propTypes.default.string.isRequired,authTokenName:_propTypes.default.string.isRequired,authTokenValue:_propTypes.default.string.isRequired,existingSchoolInfo:_propTypes.default.shape({id:_propTypes.default.number,user_school_info_id:_propTypes.default.number,school_id:_propTypes.default.string,country:_propTypes.default.string,school_type:_propTypes.default.string,school_name:_propTypes.default.string,full_address:_propTypes.default.string}).isRequired}).isRequired,onClose:_propTypes.default.func,isOpen:_propTypes.default.bool});var _default=SchoolInfoConfirmationDialog;exports.default=_default},"./src/propTypes.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.childrenOfType=function childrenOfType(){for(var _len=arguments.length,validChildrenTypes=new Array(_len),_key=0;_key<_len;_key++)validChildrenTypes[_key]=arguments[_key];return function(props,propName,componentName){if("children"!==propName)return new Error("The childrenOfType prop type should only be used on the children prop.");var prop=props[propName];if(prop){var actualChildrenTypes=_react.default.Children.map(prop,(function(el){return el&&el.type}))||[];return(0,_utils.isSubsequence)(validChildrenTypes,actualChildrenTypes)?void 0:new Error(componentName+" was given children of types "+actualChildrenTypes.map((function(t){return"<".concat(t.name,">")})).join(", ")+" but only accepts one of each child in the following order: "+validChildrenTypes.map((function(t){return"<".concat(t.name,">")})).join(", ")+".")}}},exports.whenNoChildOfTypes=function whenNoChildOfTypes(){for(var _len2=arguments.length,unexpectedChildTypes=new Array(_len2),_key2=0;_key2<_len2;_key2++)unexpectedChildTypes[_key2]=arguments[_key2];return function(props,propName,componentName){if(props.children&&props[propName]){var error,_step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(_react.default.Children.map(props.children,(function(el){return el.type})));try{for(_iterator.s();!(_step=_iterator.n()).done;){var childType=_step.value;if(unexpectedChildTypes.includes(childType)){error=new Error("".concat(componentName," was given a ").concat(propName," prop and a ")+"<".concat(childType.name,"> child, but only one of those is allowed."));break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return error}}};var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/react/index.js")),_utils=__webpack_require__("./src/utils.js");function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}},"./src/redux.js":(module,exports,__webpack_require__)=>{function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStore=function getStore(){reduxStore||(reduxStore=createStoreWithReducers(),_experiments.default.isEnabled("reduxGlobalStore")&&(window.reduxStore=reduxStore));return reduxStore},exports.hasReducer=function hasReducer(key){return!!globalReducers[key]},exports.registerReducers=function registerReducers(reducers){for(var key in reducers){var existingReducer=globalReducers[key];if(existingReducer&&existingReducer!==reducers[key])throw new Error('reducer with key "'.concat(key,'" already registered!'))}Object.assign(globalReducers,reducers),reduxStore&&reduxStore.replaceReducer(redux.combineReducers(globalReducers))};_interopRequireDefault(__webpack_require__("./node_modules/immutable/dist/immutable.js"));var reduxStore,_experiments=_interopRequireDefault(__webpack_require__("./src/util/experiments.js")),redux=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__("./node_modules/redux/es/redux.js")),_reduxThunk=_interopRequireDefault(__webpack_require__("./node_modules/redux-thunk/lib/index.js")),_toolkit=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var globalReducers={};function createStoreWithReducers(){return function createStore(reducer,initialState){_experiments.default.isEnabled(_experiments.default.REDUX_LOGGING);0;return(0,_toolkit.configureStore)({reducer,preloadedState:initialState,middleware:[_reduxThunk.default],devTools:!1})}(Object.keys(globalReducers).length>0?globalReducers:function(s){return s})}module.exports.createStoreWithReducers=createStoreWithReducers},"./src/templates/Dialog.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Body=Body,exports.Buttons=Buttons,exports.Cancel=Cancel,exports.Confirm=Confirm,exports.Footer=Footer,exports.Icon=void 0,exports.Title=Title,exports.styles=exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_radium=_interopRequireDefault(__webpack_require__("./node_modules/radium/es/index.js")),_LegacyButton=_interopRequireDefault(__webpack_require__("./src/templates/LegacyButton.jsx")),_BaseDialog=_interopRequireDefault(__webpack_require__("./src/templates/BaseDialog.jsx")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_propTypes2=__webpack_require__("./src/propTypes.js"),_locale=_interopRequireDefault(__webpack_require__("./src/util/locale-do-not-import.js")),_excluded=["type"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var styles={icon:{backgroundSize:100,backgroundPosition:"bottom",backgroundRepeat:"no-repeat",marginTop:-165,width:120,height:200,float:"left"},title:{fontSize:27,lineHeight:"30px",marginBottom:15,color:_color.default.purple},body:{fontSize:24,lineHeight:"27px",color:_color.default.purple,whiteSpace:"normal"},buttons:{marginTop:10},rightButton:{float:"right"},buttonClear:{clear:"both"},footer:{borderColor:_color.default.light_gray,borderStyle:"solid",borderWidth:0,borderTopWidth:2,marginTop:15,paddingTop:15}};function Title(_ref){var children=_ref.children;return _react.default.createElement("h1",{style:styles.title},children)}function Body(_ref2){var children=_ref2.children;return _react.default.createElement("div",{style:styles.body},children)}function Confirm(props){var type=props.type,other=_objectWithoutProperties(props,_excluded);return type=type||"primary",_react.default.createElement(_LegacyButton.default,_extends({type},other),props.children||_locale.default.dialogOK())}function Cancel(props){return _react.default.createElement(_LegacyButton.default,_extends({type:"cancel"},props),props.children||_locale.default.dialogCancel())}function Buttons(_ref3){var children=_ref3.children,leftChildren=(children=_react.default.Children.toArray(children)).slice(0,children.length-1),rightChild=children[children.length-1];return _react.default.createElement("div",{style:styles.buttons},leftChildren,_react.default.createElement("div",{style:styles.rightButton},rightChild),_react.default.createElement("div",{style:styles.buttonClear}))}function Footer(_ref4){var children=_ref4.children;return _react.default.createElement("div",{style:styles.footer},children)}exports.styles=styles,Title.propTypes={children:_propTypes.default.node},Body.propTypes={children:_propTypes.default.node},Confirm.propTypes={children:_propTypes.default.node,type:_propTypes.default.string},Cancel.propTypes={children:_propTypes.default.node},Buttons.propTypes={children:(0,_propTypes2.childrenOfType)(Cancel,Confirm)},Footer.propTypes={children:_propTypes.default.node};var Icon=(0,_radium.default)((function Icon(_ref5){var src=_ref5.src;return _react.default.createElement("span",{style:[styles.icon,{backgroundImage:"url(".concat(src,")")}]})}));exports.Icon=Icon,Icon.propTypes={src:_propTypes.default.string.isRequired};var Dialog=function(_React$Component){function Dialog(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this),"handleKeyDown",(function(event){if("Tab"===event.key){var elements=_this.baseDialog.getTabbableElements();if(elements.length){var curIndex=elements.findIndex((function(btn){return btn===document.activeElement}));elements[(curIndex+1)%elements.length].focus()}event.preventDefault()}})),_this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(Dialog,_React$Component),Dialog.prototype.render=function render(){var _this2=this,children=[];if(this.props.icon&&children.push(_react.default.createElement(Icon,{key:"icon",src:this.props.icon})),this.props.title&&children.push(_react.default.createElement(Title,{key:"title"},this.props.title)),this.props.body&&children.push(_react.default.createElement(Body,{key:"body"},this.props.body)),children=children.concat(this.props.children),this.props.cancelText||this.props.onCancel||this.props.confirmText||this.props.onConfirm||this.props.confirmType){var buttons=_react.default.createElement(Buttons,{key:"buttons"},this.props.onCancel&&_react.default.createElement(Cancel,{onClick:this.props.onCancel},this.props.cancelText),this.props.onConfirm&&_react.default.createElement(Confirm,{onClick:this.props.onConfirm,type:this.props.confirmType},this.props.confirmText)),lastChild=children[children.length-1];lastChild&&lastChild.type===Footer?children.splice(children.length-1,0,buttons):children.push(buttons)}return this.props.footer&&children.push(_react.default.createElement(Footer,{key:"footer"},this.props.footer)),_react.default.createElement(_BaseDialog.default,_extends({},this.props,{ref:function ref(baseDialog){return _this2.baseDialog=baseDialog},handleKeyDown:this.handleKeyDown}),children)},Dialog}(_react.default.Component);exports.default=Dialog,_defineProperty(Dialog,"propTypes",_objectSpread(_objectSpread({},_BaseDialog.default.propTypes),{},{children:(0,_propTypes2.childrenOfType)(Icon,Title,Body,Buttons,Footer),icon:(0,_propTypes2.whenNoChildOfTypes)(Icon),title:(0,_propTypes2.whenNoChildOfTypes)(Title),body:(0,_propTypes2.whenNoChildOfTypes)(Body),footer:(0,_propTypes2.whenNoChildOfTypes)(Footer),cancelText:(0,_propTypes2.whenNoChildOfTypes)(Buttons),onCancel:(0,_propTypes2.whenNoChildOfTypes)(Buttons),confirmText:(0,_propTypes2.whenNoChildOfTypes)(Buttons),onConfirm:(0,_propTypes2.whenNoChildOfTypes)(Buttons),confirmType:(0,_propTypes2.whenNoChildOfTypes)(Buttons)}))},"./src/templates/LegacyButton.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.style=exports.default=exports.BUTTON_TYPES=void 0;var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_radium=_interopRequireDefault(__webpack_require__("./node_modules/radium/es/index.js")),_color=_interopRequireDefault(__webpack_require__("./src/util/color.js")),_excluded=["type","children","size"],_excluded2=["arrow"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var style={base:{borderWidth:1,borderStyle:"solid",minWidth:100,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,":hover":{boxShadow:"2px 2px 5px rgba(0, 0, 0, 0.3)"}},large:{fontSize:35,lineHeight:"normal",paddingLeft:14,paddingRight:14},arrow:{base:{position:"relative",height:116,textAlign:"left",display:"inline-block"},left:{paddingLeft:58},right:{paddingRight:58}},arrowHead:{base:{position:"absolute",width:0,height:0,borderColor:"transparent",borderWidth:58,borderStyle:"solid"},left:function left(color){return{left:-48,borderRightColor:color}},right:function right(color){return{right:-48,borderLeftColor:color}}}};exports.style=style,style.withArrow={base:{position:"relative",top:(116-style.base.borderWidth-20-44)/2,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,":hover":{boxShadow:"none"}},left:{paddingLeft:0},right:{paddingRight:0}};var BUTTON_TYPES={default:{style:{backgroundColor:_color.default.white,borderColor:_color.default.charcoal,color:_color.default.charcoal}},cancel:{style:{backgroundColor:_color.default.neutral_white,borderWidth:2,borderStyle:"solid",borderColor:_color.default.neutral_dark,color:_color.default.neutral_dark,":hover":{backgroundColor:_color.default.neutral_dark20,boxShadow:"none"},":focus":{backgroundColor:_color.default.neutral_dark20,boxShadow:"none"}}},primary:{style:{backgroundColor:_color.default.brand_secondary_default,borderColor:_color.default.brand_secondary_default,color:_color.default.neutral_white,":hover":{backgroundColor:_color.default.brand_secondary_dark,borderColor:_color.default.brand_secondary_dark,boxShadow:"none"}}},legacyPrimary:{style:{backgroundColor:_color.default.orange,borderColor:_color.default.orange,color:_color.default.neutral_white}},danger:{style:{backgroundColor:_color.default.product_negative_default,borderColor:_color.default.product_negative_default,color:_color.default.neutral_white,":hover":{backgroundColor:_color.default.product_negative_dark,borderColor:_color.default.product_negative_dark,boxShadow:"none"}}},action:{style:{backgroundColor:_color.default.purple,borderColor:_color.default.purple,color:_color.default.white}}};exports.BUTTON_TYPES=BUTTON_TYPES;var BaseButton=(0,_radium.default)((function BaseButton(_ref){var type=_ref.type,children=_ref.children,size=_ref.size,props=_objectWithoutProperties(_ref,_excluded),sizeStyle=style[size||"normal"],config=BUTTON_TYPES[type],styleArray=[style.base,config.style,sizeStyle];return _react.default.createElement("button",_extends({type:"button"},props,{style:[styleArray,props.style]}),children)}));BaseButton.propTypes={type:_propTypes.default.oneOf(Object.keys(BUTTON_TYPES)),children:_propTypes.default.node,size:_propTypes.default.oneOf(["normal","large"])};var ArrowButton=(0,_radium.default)((function ArrowButton(_ref2){var arrow=_ref2.arrow,props=_objectWithoutProperties(_ref2,_excluded2),config=BUTTON_TYPES[props.type];return _react.default.createElement("div",{style:[style.arrow.base,style.arrow[arrow],props.style]},_react.default.createElement("div",{style:[style.arrowHead.base,style.arrowHead[arrow](config.style.backgroundColor)]}),_react.default.createElement(BaseButton,_extends({},props,{style:[style.withArrow.base,style.withArrow[arrow]]})))}));ArrowButton.propTypes=Object.assign({},BaseButton.propTypes,{arrow:_propTypes.default.oneOf(["left","right"]).isRequired});var LegacyButton=(0,_radium.default)((function Button(props){return props.arrow?_react.default.createElement(ArrowButton,props):_react.default.createElement(BaseButton,props)}));LegacyButton.propTypes=Object.assign({},BaseButton.propTypes,{arrow:_propTypes.default.oneOf(["left","right"])});var _default=LegacyButton;exports.default=_default},"./node_modules/redux-thunk/lib/index.js":(__unused_webpack_module,exports)=>{function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){return"function"==typeof action?action(dispatch,getState,extraArgument):next(action)}}}}exports.__esModule=!0;var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware,exports.default=thunk},"./src/lib/ui/SchoolInfoConfirmationDialog.story.jsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DisplaySchoolInfoConfirmationDialog=void 0;var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_SchoolInfoConfirmationDialog=_interopRequireDefault(__webpack_require__("./src/lib/ui/SchoolInfoConfirmationDialog.jsx")),_addonActions=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default={component:_SchoolInfoConfirmationDialog.default};exports.default=_default;var DisplaySchoolInfoConfirmationDialog=function Template(args){return _react.default.createElement(_SchoolInfoConfirmationDialog.default,args)}.bind({});exports.DisplaySchoolInfoConfirmationDialog=DisplaySchoolInfoConfirmationDialog,DisplaySchoolInfoConfirmationDialog.args={scriptData:{formUrl:"",authTokenName:"auth_token",authTokenValue:"fake_auth_token",existingSchoolInfo:{}},onClose:(0,_addonActions.action)("onClose callback"),isOpen:!0}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliLXVpLVNjaG9vbEluZm9Db25maXJtYXRpb25EaWFsb2ctc3RvcnkuMGI4NDZlY2MuaWZyYW1lLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiMmlCQUFBLHlGQUNBLDZGQUNBLG1GQUNBLGtGQUNBLCtHQUNBLDBGQUNBLDBFQUNBLDZDQUNBLHFGQUNBLHNHQUNBLGdGLG14RUFFTyxJQUFNQSxPQUFTLENBQ3BCQyxPQUFRLENBQ05DLFVBQVcsR0FDWEMsV0FBWSxPQUVkQyxVQUFXLENBQ1RGLFVBQVcsR0FDWEcsWUFBYSxPQUVmQyxhQUFjLENBQ1pKLFVBQVcsR0FDWEMsV0FBWSxHQUVkSSxnQkFBaUIsQ0FDZkwsVUFBVyxHQUNYRyxZQUFhLEdBRWZHLE1BQU8sY0FBRixlQUNIQyxTQUFVLElBQ1BDLGVBQUFBLFFBQWMsd0JBRmQsSUFHSEMsTUFBT0EsT0FBQUEsUUFBTUMsU0FDYkMsYUFBYyxLQUVoQkMsV0FBWSxDQUNWSCxNQUFPQSxPQUFBQSxRQUFNSSxPQUNiQyxVQUFXLFVBRWJDLEtBQU0sQ0FDSkMsT0FBUSxLLDBCQUlOQyw2QkFBQUEsU0FBQUEsWUFxQkosc0NBQVlDLE9BQU8sd0RBQ2pCLDJCQUFNQSxRQUFOLE1BRGlCLGNBU04sV0FDWEMsbUJBQUFBLFFBQWtCQyxVQUFVQyxvQkFBQUEsT0FBT0Msa0NBQ25DLE1BQUtDLFNBQVMsQ0FBQ0MsUUFBUSxJQUN2QixNQUFLTixNQUFNTyxTQUNaLElBYmtCLGdFQWVGLFdBQ2ZOLG1CQUFBQSxRQUFrQkMsVUFBVUMsb0JBQUFBLE9BQU9LLHdCQUNuQywwQkFBd0MsTUFBS1IsTUFBTVMsV0FBNUNDLGNBQVAsc0JBQU9BLGNBQWVDLGVBQXRCLHNCQUFzQkEsZUFDaEJDLFNBQVcsSUFBSUMsU0FDckJELFNBQVNFLE9BQU9KLGNBQWVDLGdCQUMvQkksTUFBTSw2QkFBRCxPQUMwQixNQUFLZixNQUFNUyxXQUFXTyxtQkFBbUJDLG9CQURuRSxrQ0FFSCxDQUNFQyxPQUFRLFFBQ1JyQixLQUFNZSxXQUdQTyxLQUFLLE1BQUtDLFlBUGIsT0FRUyxTQUFBQyxPQUNMLE1BQUtoQixTQUFTLENBQUNnQixPQUNoQixHQUNKLElBL0JrQixtRUFpQ0MsV0FDbEJwQixtQkFBQUEsUUFBa0JDLFVBQVVDLG9CQUFBQSxPQUFPbUIsdUJBQ25DLE1BQUtqQixTQUFTLENBQUNrQix3QkFBd0IsR0FDeEMsSUFwQ2tCLHNFQXNDSSxXQUFNLHVCQUMzQnRCLG1CQUFBQSxRQUFrQkMsVUFBVUMsb0JBQUFBLE9BQU9xQixpQ0FDbkMsSUFBTzlCLFdBQWMsTUFBSytCLE1BQW5CL0IsV0FDRGdDLE1BQUssNEJBQUcsRUFBQUMsT0FBQUEsWUFBV0Msa0JBQWQsOEJBQUcsbUJBQXVCQyxNQUNyQyxPQUNFLDZCQUFDLFFBQUFDLEtBQUQsS0FDRSxvQ0FBS0MsTUFBT25ELE9BQU9pQixNQUNqQixrQ0FBR2tDLE1BQU9uRCxPQUFPUSxPQUNkNEMsUUFBQUEsUUFBS0MsOEJBQ04scUNBQU1GLE1BQU9uRCxPQUFPYyxZQUNqQnNDLFFBQUFBLFFBQUtFLHNDQUFzQyxDQUFDeEMsZ0JBSW5ELDZCQUFDLGdCQUFELENBQ0VxQyxNQUFPTCxNQUFROUMsT0FBT08sZ0JBQWtCUCxPQUFPTSxhQUMvQ2lELEtBQU1ILFFBQUFBLFFBQUtJLHlCQUNYN0MsTUFBTzhDLFFBQUFBLFFBQU9DLFlBQVlDLEtBQzFCQyxRQUFTLE1BQUtDLGtCQUNkQyxHQUFHLGtCQUVMLDZCQUFDLGdCQUFELENBQ0VYLE1BQU9MLE1BQVE5QyxPQUFPSSxVQUFZSixPQUFPQyxPQUN6Q3NELEtBQU1ILFFBQUFBLFFBQUtXLE1BQ1hwRCxNQUFPOEMsUUFBQUEsUUFBT0MsWUFBWU0sc0JBQzFCSixRQUFTLE1BQUtLLGVBQ2RILEdBQUcsZUFJVixJQWxFQyxNQUFLakIsTUFBUSxDQUNYRix3QkFBd0IsRUFDeEI3QixXQUFZTSxNQUFNUyxXQUFXTyxtQkFBbUI4QixZQUNoRHhDLE9BQVFOLE1BQU1NLFNBQVUsR0FMVCxLQU9sQixFLDJSQStERHlDLDRCQUFBLFNBQUFBLDhCQUNFLE9BQ0UsNkJBQUMsUUFBQWpCLEtBQUQsS0FDRSw2QkFBQyxnQ0FBRCxDQUNFckIsV0FBWXVDLEtBQUtoRCxNQUFNUyxXQUN2QkYsUUFBU3lDLEtBQUs1QixhQUlyQixFLE9BRUQ2QixPQUFBLFNBQUFBLFNBQ0UsZ0JBQXlDRCxLQUFLdkIsTUFBdkNGLHVCQUFQLFlBQU9BLHVCQUF3QmpCLE9BQS9CLFlBQStCQSxPQUMvQixPQUNFLDZCQUFDLGdCQUFELENBQVFBLE9BQWdCNEMsWUFBYUYsS0FBSzVCLFlBQ3RDRyx1QkFFRXlCLEtBQUtELDhCQURMQyxLQUFLRyx1QkFJZCxFLDZCQS9HR3BELENBQXFDcUQsT0FBQUEsVyxnQkFBckNyRCw2QkFBQUEsWUFDZSxDQUNqQkwsV0FBWTJELFdBQUFBLFFBQVVDLE9BQ3RCN0MsV0FBWTRDLFdBQUFBLFFBQVVFLE1BQU0sQ0FDMUJDLFFBQVNILFdBQUFBLFFBQVVDLE9BQU9HLFdBQzFCL0MsY0FBZTJDLFdBQUFBLFFBQVVDLE9BQU9HLFdBQ2hDOUMsZUFBZ0IwQyxXQUFBQSxRQUFVQyxPQUFPRyxXQUNqQ3pDLG1CQUFvQnFDLFdBQUFBLFFBQVVFLE1BQU0sQ0FDbENiLEdBQUlXLFdBQUFBLFFBQVVLLE9BQ2R6QyxvQkFBcUJvQyxXQUFBQSxRQUFVSyxPQUMvQkMsVUFBV04sV0FBQUEsUUFBVUMsT0FDckJNLFFBQVNQLFdBQUFBLFFBQVVDLE9BQ25CTyxZQUFhUixXQUFBQSxRQUFVQyxPQUN2QlIsWUFBYU8sV0FBQUEsUUFBVUMsT0FDdkJRLGFBQWNULFdBQUFBLFFBQVVDLFNBQ3ZCRyxhQUNGQSxXQUNIbEQsUUFBUzhDLFdBQUFBLFFBQVVVLEtBQ25CekQsT0FBUStDLFdBQUFBLFFBQVVXLE8sYUFnR1BqRSw2QixxTEN2SVIsU0FBU2tFLGlCQUFzQyw4QkFBcEJDLG1CQUFvQix3Q0FBcEJBLG1CQUFvQixzQkFDcEQsT0FBTyxTQUFVbEUsTUFBT21FLFNBQVVDLGVBQ2hDLEdBQWlCLGFBQWJELFNBQ0YsT0FBTyxJQUFJRSxNQUNULDBFQUdKLElBQU1DLEtBQU90RSxNQUFNbUUsVUFDbkIsR0FBS0csS0FBTCxDQUdBLElBQU1DLG9CQUNKQyxPQUFBQSxRQUFNQyxTQUFTQyxJQUFJSixNQUFNLFNBQUFLLElBQUUsT0FBSUEsSUFBTUEsR0FBR0MsSUFBYixLQUFzQixHQUNuRCxPQUFLLEVBQUFDLE9BQUFBLGVBQWNYLG1CQUFvQkssMEJBQXZDLEVBQ1MsSUFBSUYsTUFDVEQsY0FDRSxnQ0FDQUcsb0JBQW9CRyxLQUFJLFNBQUFJLEdBQUMsaUJBQVFBLEVBQUVDLEtBQVYsUUFBbUJDLEtBQUssTUFDakQsK0RBQ0FkLG1CQUFtQlEsS0FBSSxTQUFBSSxHQUFDLGlCQUFRQSxFQUFFQyxLQUFWLFFBQW1CQyxLQUFLLE1BQ2hELElBVkwsQ0FhRixDQUNGLEUsMkJBZ0NNLFNBQVNDLHFCQUE0QywrQkFBdEJDLHFCQUFzQiw2Q0FBdEJBLHFCQUFzQix3QkFDMUQsT0FBTyxTQUFVbEYsTUFBT21FLFNBQVVDLGVBQ2hDLEdBQUtwRSxNQUFNbUYsVUFBYW5GLE1BQU1tRSxVQUE5QixDQUdBLElBQUk5QyxNQUoyQyxnQixpcENBQUEsQ0FLbkJtRCxPQUFBQSxRQUFNQyxTQUFTQyxJQUN6QzFFLE1BQUssVUFDTCxTQUFBMkUsSUFBRSxPQUFJQSxHQUFHQyxJQUFQLEtBUDJDLElBUy9DLElBQUssVUFBTCxpQ0FBNkMsS0FBbENRLFVBQWtDLFlBQzNDLEdBQUlGLHFCQUFxQkcsU0FBU0QsV0FBWSxDQUM1Qy9ELE1BQVEsSUFBSWdELE1BQ1YsVUFBR0QsY0FBSCx3QkFBZ0NELFNBQWhDLDJCQUNNaUIsVUFBVUwsS0FEaEIsK0NBR0YsS0FDRCxDQUNGLENBakI4QyxtREFrQi9DLE9BQU8xRCxLQWZOLENBZ0JGLENBQ0YsRUFqR0QsVyxrRkFBQSx1REFFQSw2QyxtaUJDb0VPLFNBQVNNLFdBQ1QyRCxhQUNIQSxXQUFhQywwQkFDVEMsYUFBQUEsUUFBWUMsVUFBVSxzQkFFeEJDLE9BQU9KLFdBQWFBLGFBSXhCLE9BQU9BLFVBQ1IsRSxtQkFtQ00sU0FBU0ssV0FBV0MsS0FDekIsUUFBU0MsZUFBZUQsSUFDekIsRSx5QkFsQk0sU0FBU0UsaUJBQWlCQyxVQUMvQixJQUFLLElBQUlILE9BQU9HLFNBQVUsQ0FDeEIsSUFBTUMsZ0JBQWtCSCxlQUFlRCxLQUN2QyxHQUFJSSxpQkFBbUJBLGtCQUFvQkQsU0FBU0gsS0FDbEQsTUFBTSxJQUFJdkIsTUFBSiw0QkFBK0J1QixJQUEvQix5QkFFVCxDQUNESyxPQUFPQyxPQUFPTCxlQUFnQkUsVUFDMUJULFlBQ0ZBLFdBQVdhLGVBQWVDLE1BQU1DLGdCQUFnQlIsZ0JBRW5ELEVBdEZELDhGQVVJUCxXQVRKLHNGQUNBLE0sdXFCQUFBLDBEQUNBLG1HQUNBLDBGLDhYQU9BLElBQUlPLGVBQWlCLENBQUMsRUFrRHRCLFNBQVNOLDBCQUNQLE9BdUNGLFNBQVNlLFlBQVlDLFFBQVNDLGNBTURoQixhQUFBQSxRQUFZQyxVQUFVRCxhQUFBQSxRQUFZaUIsZUFDekRDLEVBbUVKLE9BQU8sRUFBQUMsU0FBQUEsZ0JBQWUsQ0FDcEJKLFFBQ0FLLGVBQWdCSixhQUNoQkssV0FBWSxDQUFDQyxZQUFBQSxTQUNiQyxVQUFVTCxHQUViLENBdkhRSixDQUNMTCxPQUFPZSxLQUFLbkIsZ0JBQWdCb0IsT0FBUyxFQUFJcEIsZUFBaUIsU0FBQXFCLEdBQUMsT0FBSUEsQ0FBSixFQUU5RCxDQXpCQ0MsT0FBT0MsUUFBUTdCLHdCQUEwQkEsdUIsMFVDbkUzQyx3RkFDQSw2RkFDQSx5RkFDQSw4RkFDQSwwRkFDQSwwRUFDQSxzREFDQSwwRix3bEVBRU8sSUFBTTNHLE9BQVMsQ0FDcEJ5SSxLQUFNLENBQ0pDLGVBQWdCLElBQ2hCQyxtQkFBb0IsU0FDcEJDLGlCQUFrQixZQUNsQjFJLFdBQVksSUFDWjJJLE1BQU8sSUFDUEMsT0FBUSxJQUNSQyxNQUFPLFFBRVRDLE1BQU8sQ0FDTHZJLFNBQVUsR0FDVndJLFdBQVksT0FDWkMsYUFBYyxHQUNkdkksTUFBT0EsT0FBQUEsUUFBTUksUUFFZkUsS0FBTSxDQUNKUixTQUFVLEdBQ1Z3SSxXQUFZLE9BQ1p0SSxNQUFPQSxPQUFBQSxRQUFNSSxPQUNib0ksV0FBWSxVQUVkQyxRQUFTLENBQ1BsSixVQUFXLElBRWJtSixZQUFhLENBQ1hOLE1BQU8sU0FFVE8sWUFBYSxDQUNYQyxNQUFPLFFBRVRDLE9BQVEsQ0FDTkMsWUFBYTlJLE9BQUFBLFFBQU0rSSxXQUNuQkMsWUFBYSxRQUNiQyxZQUFhLEVBQ2JDLGVBQWdCLEVBQ2hCM0osVUFBVyxHQUNYNEosV0FBWSxLQUlULFNBQVNDLE1BQVQsTUFBMkIsSUFBWHhELFNBQVcsS0FBWEEsU0FDckIsT0FBTyxtQ0FBSXBELE1BQU9uRCxPQUFPZ0osT0FBUXpDLFNBQ2xDLENBS00sU0FBU3JELEtBQVQsT0FBMEIsSUFBWHFELFNBQVcsTUFBWEEsU0FDcEIsT0FBTyxvQ0FBS3BELE1BQU9uRCxPQUFPaUIsTUFBT3NGLFNBQ2xDLENBS00sU0FBU3lELFFBQVE1SSxPQUN0QixJQUFLNEUsS0FBa0I1RSxNQUFsQjRFLEtBQVNpRSxNQUFkLHlCQUF1QjdJLE1BQXZCLFdBRUEsT0FEQTRFLEtBQU9BLE1BQVEsVUFFYiw2QkFBQyxzQkFBRCxVQUFjQSxNQUFnQmlFLE9BQzNCN0ksTUFBTW1GLFVBQVkyRCxRQUFBQSxRQUFPQyxXQUcvQixDQU1NLFNBQVNDLE9BQU9oSixPQUNyQixPQUNFLDZCQUFDLHNCQUFELFVBQWM0RSxLQUFLLFVBQWE1RSxPQUM3QkEsTUFBTW1GLFVBQVkyRCxRQUFBQSxRQUFPRyxlQUcvQixDQUtNLFNBQVNDLFFBQVQsT0FBNkIsSUFBWC9ELFNBQVcsTUFBWEEsU0FFbkJnRSxjQURKaEUsU0FBV1gsT0FBQUEsUUFBTUMsU0FBUzJFLFFBQVFqRSxXQUNOa0UsTUFBTSxFQUFHbEUsU0FBUzhCLE9BQVMsR0FDbkRxQyxXQUFhbkUsU0FBU0EsU0FBUzhCLE9BQVMsR0FDNUMsT0FDRSxvQ0FBS2xGLE1BQU9uRCxPQUFPb0osU0FDaEJtQixhQUNELG9DQUFLcEgsTUFBT25ELE9BQU9xSixhQUFjcUIsWUFDakMsb0NBQUt2SCxNQUFPbkQsT0FBT3NKLGNBR3hCLENBS00sU0FBU3FCLE9BQVQsT0FBNEIsSUFBWHBFLFNBQVcsTUFBWEEsU0FDdEIsT0FBTyxvQ0FBS3BELE1BQU9uRCxPQUFPd0osUUFBU2pELFNBQ3BDLEMsc0JBdEREd0QsTUFBTWEsVUFBWSxDQUNoQnJFLFNBQVU5QixXQUFBQSxRQUFVb0csTUFNdEIzSCxLQUFLMEgsVUFBWSxDQUNmckUsU0FBVTlCLFdBQUFBLFFBQVVvRyxNQVl0QmIsUUFBUVksVUFBWSxDQUNsQnJFLFNBQVU5QixXQUFBQSxRQUFVb0csS0FDcEI3RSxLQUFNdkIsV0FBQUEsUUFBVUMsUUFVbEIwRixPQUFPUSxVQUFZLENBQ2pCckUsU0FBVTlCLFdBQUFBLFFBQVVvRyxNQWV0QlAsUUFBUU0sVUFBWSxDQUNsQnJFLFVBQVUsRUFBQWxCLFlBQUFBLGdCQUFlK0UsT0FBUUosVUFNbkNXLE9BQU9DLFVBQVksQ0FDakJyRSxTQUFVOUIsV0FBQUEsUUFBVW9HLE1BR2YsSUFBSUMsTUFBTyxFQUFBQyxRQUFBQSxVQUFPLFNBQVNELEtBQVQsT0FBcUIsSUFBTkUsSUFBTSxNQUFOQSxJQUN0QyxPQUFPLHFDQUFNN0gsTUFBTyxDQUFDbkQsT0FBT3lJLEtBQU0sQ0FBQ3dDLGdCQUFpQixPQUFGLE9BQVNELElBQVQsUUFDbkQsSSxrQkFDREYsS0FBS0YsVUFBWSxDQUNmSSxJQUFLdkcsV0FBQUEsUUFBVUMsT0FBT0csWSxJQUdIcUcsT0FBQUEsU0FBQUEsa0IsK1lBZUgsU0FBQUMsT0FHZCxHQUFrQixRQUFkQSxNQUFNbkUsSUFBZSxDQUN2QixJQUFNb0UsU0FBVyxNQUFLQyxXQUFXQyxzQkFDakMsR0FBSUYsU0FBUy9DLE9BQVEsQ0FFbkIsSUFBTWtELFNBQVdILFNBQVNJLFdBQ3hCLFNBQUFDLEtBQUcsT0FBSUEsTUFBUUMsU0FBU0MsYUFBckIsSUFHTFAsVUFEbUJHLFNBQVcsR0FBS0gsU0FBUy9DLFFBQ3hCdUQsT0FDckIsQ0FDRFQsTUFBTVUsZ0JBQ1AsQ0FDRixJLHlPQUVEeEgsT0FBQSxTQUFBQSxTQUFTLGdCQUNIa0MsU0FBVyxHQVdmLEdBVkluQyxLQUFLaEQsTUFBTXFILE1BQ2JsQyxTQUFTdUYsS0FBSyw2QkFBQ2hCLEtBQUQsQ0FBTTlELElBQUksT0FBT2dFLElBQUs1RyxLQUFLaEQsTUFBTXFILFFBRTdDckUsS0FBS2hELE1BQU00SCxPQUNiekMsU0FBU3VGLEtBQUssNkJBQUMvQixNQUFELENBQU8vQyxJQUFJLFNBQVM1QyxLQUFLaEQsTUFBTTRILFFBRTNDNUUsS0FBS2hELE1BQU1ILE1BQ2JzRixTQUFTdUYsS0FBSyw2QkFBQzVJLEtBQUQsQ0FBTThELElBQUksUUFBUTVDLEtBQUtoRCxNQUFNSCxPQUU3Q3NGLFNBQVdBLFNBQVN3RixPQUFPM0gsS0FBS2hELE1BQU1tRixVQUVwQ25DLEtBQUtoRCxNQUFNNEssWUFDWDVILEtBQUtoRCxNQUFNNkssVUFDWDdILEtBQUtoRCxNQUFNOEssYUFDWDlILEtBQUtoRCxNQUFNK0ssV0FDWC9ILEtBQUtoRCxNQUFNZ0wsWUFDWCxDQUNBLElBQUloRCxRQUNGLDZCQUFDa0IsUUFBRCxDQUFTdEQsSUFBSSxXQUNWNUMsS0FBS2hELE1BQU02SyxVQUNWLDZCQUFDN0IsT0FBRCxDQUFReEcsUUFBU1EsS0FBS2hELE1BQU02SyxVQUN6QjdILEtBQUtoRCxNQUFNNEssWUFHZjVILEtBQUtoRCxNQUFNK0ssV0FDViw2QkFBQ25DLFFBQUQsQ0FDRXBHLFFBQVNRLEtBQUtoRCxNQUFNK0ssVUFDcEJuRyxLQUFNNUIsS0FBS2hELE1BQU1nTCxhQUVoQmhJLEtBQUtoRCxNQUFNOEssY0FLZEcsVUFBWTlGLFNBQVNBLFNBQVM4QixPQUFTLEdBQ3pDZ0UsV0FBYUEsVUFBVXJHLE9BQVMyRSxPQUNsQ3BFLFNBQVMrRixPQUFPL0YsU0FBUzhCLE9BQVMsRUFBRyxFQUFHZSxTQUV4QzdDLFNBQVN1RixLQUFLMUMsUUFFakIsQ0FJRCxPQUhJaEYsS0FBS2hELE1BQU1vSSxRQUNiakQsU0FBU3VGLEtBQUssNkJBQUNuQixPQUFELENBQVEzRCxJQUFJLFVBQVU1QyxLQUFLaEQsTUFBTW9JLFNBRy9DLDZCQUFDLG9CQUFELFlBQ01wRixLQUFLaEQsTUFEWCxDQUVFbUwsSUFBSyxhQUFBbEIsWUFBVSxPQUFLLE9BQUtBLFdBQWFBLFVBQXZCLEVBQ2ZtQixjQUFlcEksS0FBS29JLGdCQUVuQmpHLFNBR04sRSxPQXZGa0IyRSxDQUFldEYsT0FBQUEsUUFBTXBCLFcsdUNBQXJCMEcsT0FBQUEsWUFBQUEsY0FBQUEsY0FBQUEsQ0FBQUEsRUFFZHVCLFlBQUFBLFFBQVc3QixXQUFBQSxDQUFBQSxFQUFBQSxDQUNkckUsVUFBVSxFQUFBbEIsWUFBQUEsZ0JBQWV5RixLQUFNZixNQUFPN0csS0FBTW9ILFFBQVNLLFFBQ3JEbEMsTUFBTSxFQUFBcEMsWUFBQUEsb0JBQW1CeUUsTUFDekI5QixPQUFPLEVBQUEzQyxZQUFBQSxvQkFBbUIwRCxPQUMxQjlJLE1BQU0sRUFBQW9GLFlBQUFBLG9CQUFtQm5ELE1BQ3pCc0csUUFBUSxFQUFBbkQsWUFBQUEsb0JBQW1Cc0UsUUFDM0JxQixZQUFZLEVBQUEzRixZQUFBQSxvQkFBbUJpRSxTQUMvQjJCLFVBQVUsRUFBQTVGLFlBQUFBLG9CQUFtQmlFLFNBQzdCNEIsYUFBYSxFQUFBN0YsWUFBQUEsb0JBQW1CaUUsU0FDaEM2QixXQUFXLEVBQUE5RixZQUFBQSxvQkFBbUJpRSxTQUM5QjhCLGFBQWEsRUFBQS9GLFlBQUFBLG9CQUFtQmlFLFcsOE1DbklwQyx3RkFDQSw2RkFDQSx5RkFFQSwwRSwwaUNBUUEsSUFJYW5ILE1BQVEsQ0FDbkJ1SixLQUFNLENBQ0o5QyxZQUFhLEVBQ2JELFlBQWEsUUFDYmdELFNBQVUsSUFDVnpNLFVBQVcsRUFDWGdKLGFBQWMsRUFDZC9JLFdBQVksRUFDWkUsWUFBYSxFQUNiLFNBQVUsQ0FDUnVNLFVBQVcsbUNBR2ZDLE1BQU8sQ0FDTHBNLFNBQVUsR0FDVndJLFdBQVksU0FDWjZELFlBQWEsR0FDYmpNLGFBQWMsSUFFaEJrTSxNQUFPLENBQ0xMLEtBQU0sQ0FDSk0sU0FBVSxXQUNWbEUsT0F6QmVtRSxJQTBCZkMsVUFBVyxPQUNYQyxRQUFTLGdCQUVYQyxLQUFNLENBQ0pOLFlBL0JjLElBaUNoQk8sTUFBTyxDQUNMeE0sYUFsQ2MsS0FxQ2xCeU0sVUFBVyxDQUNUWixLQUFNLENBQ0pNLFNBQVUsV0FDVm5FLE1BQU8sRUFDUEMsT0FBUSxFQUNSVyxZQUFhLGNBQ2JHLFlBM0NjLEdBNENkRCxZQUFhLFNBRWZ5RCxLQUFNLGNBQUF6TSxPQUFLLE1BQUssQ0FDZHlNLE1BQU0sR0FDTkcsaUJBQWtCNU0sTUFGVCxFQUlYME0sTUFBTyxlQUFBMU0sT0FBSyxNQUFLLENBQ2YwTSxPQUFPLEdBQ1BHLGdCQUFpQjdNLE1BRlAsSSxvQkFPaEJ3QyxNQUFNc0ssVUFBWSxDQUNoQmYsS0FBTSxDQUNKTSxTQUFVLFdBQ1ZVLEtBM0RpQlQsSUE2RGI5SixNQUFNdUosS0FBSzlDLFlBQ1grRCxHQTdEb0IsSUErRHRCLEVBQ0Z6TixVQUFXLEVBQ1hnSixhQUFjLEVBQ2QvSSxXQUFZLEVBQ1pFLFlBQWEsRUFDYixTQUFVLENBQ1J1TSxVQUFXLFNBR2ZRLEtBQU0sQ0FDSk4sWUFBYSxHQUVmTyxNQUFPLENBQ0x4TSxhQUFjLElBSVgsSUFBTStNLGFBQWUsQ0FDMUJDLFFBQVMsQ0FDUDFLLE1BQU8sQ0FDTDJLLGdCQUFpQm5OLE9BQUFBLFFBQU1vTixNQUN2QnRFLFlBQWE5SSxPQUFBQSxRQUFNQyxTQUNuQkQsTUFBT0EsT0FBQUEsUUFBTUMsV0FHakJvTixPQUFRLENBQ043SyxNQUFPLENBQ0wySyxnQkFBaUJuTixPQUFBQSxRQUFNc04sY0FDdkJyRSxZQUFhLEVBQ2JELFlBQWEsUUFDYkYsWUFBYTlJLE9BQUFBLFFBQU11TixhQUNuQnZOLE1BQU9BLE9BQUFBLFFBQU11TixhQUNiLFNBQVUsQ0FDUkosZ0JBQWlCbk4sT0FBQUEsUUFBTXdOLGVBQ3ZCdkIsVUFBVyxRQUViLFNBQVUsQ0FDUmtCLGdCQUFpQm5OLE9BQUFBLFFBQU13TixlQUN2QnZCLFVBQVcsVUFJakJ3QixRQUFTLENBQ1BqTCxNQUFPLENBQ0wySyxnQkFBaUJuTixPQUFBQSxRQUFNME4sd0JBQ3ZCNUUsWUFBYTlJLE9BQUFBLFFBQU0wTix3QkFDbkIxTixNQUFPQSxPQUFBQSxRQUFNc04sY0FDYixTQUFVLENBQ1JILGdCQUFpQm5OLE9BQUFBLFFBQU0yTixxQkFDdkI3RSxZQUFhOUksT0FBQUEsUUFBTTJOLHFCQUNuQjFCLFVBQVcsVUFJakIyQixjQUFlLENBQ2JwTCxNQUFPLENBQ0wySyxnQkFBaUJuTixPQUFBQSxRQUFNNk4sT0FDdkIvRSxZQUFhOUksT0FBQUEsUUFBTTZOLE9BQ25CN04sTUFBT0EsT0FBQUEsUUFBTXNOLGdCQUdqQlEsT0FBUSxDQUNOdEwsTUFBTyxDQUNMMkssZ0JBQWlCbk4sT0FBQUEsUUFBTStOLHlCQUN2QmpGLFlBQWE5SSxPQUFBQSxRQUFNK04seUJBQ25CL04sTUFBT0EsT0FBQUEsUUFBTXNOLGNBQ2IsU0FBVSxDQUNSSCxnQkFBaUJuTixPQUFBQSxRQUFNZ08sc0JBQ3ZCbEYsWUFBYTlJLE9BQUFBLFFBQU1nTyxzQkFDbkIvQixVQUFXLFVBSWpCZ0MsT0FBUSxDQUNOekwsTUFBTyxDQUNMMkssZ0JBQWlCbk4sT0FBQUEsUUFBTUksT0FDdkIwSSxZQUFhOUksT0FBQUEsUUFBTUksT0FDbkJKLE1BQU9BLE9BQUFBLFFBQU1vTixTLGtDQUtuQixJQUFNYyxZQUFhLEVBQUE5RCxRQUFBQSxVQUFPLFNBQVM4RCxXQUFULE1BS3ZCLElBSkQ3SSxLQUlDLEtBSkRBLEtBQ0FPLFNBR0MsS0FIREEsU0FDQXVJLEtBRUMsS0FGREEsS0FDRzFOLE1BQ0YseUNBQ0syTixVQUFZNUwsTUFBTTJMLE1BQVEsVUFDMUJFLE9BQVNwQixhQUFhNUgsTUFDeEJpSixXQUFhLENBQUM5TCxNQUFNdUosS0FBTXNDLE9BQU83TCxNQUFPNEwsV0FDNUMsT0FDRSxnREFBUS9JLEtBQUssVUFBYTVFLE1BQTFCLENBQWlDK0IsTUFBTyxDQUFDOEwsV0FBWTdOLE1BQU0rQixTQUN4RG9ELFNBR04sSUFDRHNJLFdBQVdqRSxVQUFZLENBQ3JCNUUsS0FBTXZCLFdBQUFBLFFBQVV5SyxNQUFNN0gsT0FBT2UsS0FBS3dGLGVBQ2xDckgsU0FBVTlCLFdBQUFBLFFBQVVvRyxLQUNwQmlFLEtBQU1ySyxXQUFBQSxRQUFVeUssTUFBTSxDQUFDLFNBQVUsV0FHbkMsSUFBTUMsYUFBYyxFQUFBcEUsUUFBQUEsVUFBTyxTQUFTb0UsWUFBVCxPQUF3QyxJQUFsQnBDLE1BQWtCLE1BQWxCQSxNQUFVM0wsTUFBUSwyQ0FDM0Q0TixPQUFTcEIsYUFBYXhNLE1BQU00RSxNQU1sQyxPQUNFLG9DQUFLN0MsTUFBTyxDQUFDQSxNQUFNNEosTUFBTUwsS0FBTXZKLE1BQU00SixNQUFNQSxPQUFRM0wsTUFBTStCLFFBQ3ZELG9DQUNFQSxNQUFPLENBQ0xBLE1BQU1tSyxVQUFVWixLQUNoQnZKLE1BQU1tSyxVQUFVUCxPQUFPaUMsT0FBTzdMLE1BQU0ySyxvQkFHeEMsNkJBQUNlLFdBQUQsWUFDTXpOLE1BRE4sQ0FFRStCLE1BQU8sQ0FBQ0EsTUFBTXNLLFVBQVVmLEtBQU12SixNQUFNc0ssVUFBVVYsV0FJckQsSUFDRG9DLFlBQVl2RSxVQUFZdkQsT0FBT0MsT0FBTyxDQUFDLEVBQUd1SCxXQUFXakUsVUFBVyxDQUM5RG1DLE1BQU90SSxXQUFBQSxRQUFVeUssTUFBTSxDQUFDLE9BQVEsVUFBVXJLLGFBRzVDLElBQU11SyxjQUFlLEVBQUFyRSxRQUFBQSxVQUFPLFNBQVN0SCxPQUFPckMsT0FDMUMsT0FBSUEsTUFBTTJMLE1BQ0QsNkJBQUNvQyxZQUFnQi9OLE9BRWpCLDZCQUFDeU4sV0FBZXpOLE1BRTFCLElBQ0RnTyxhQUFheEUsVUFBWXZELE9BQU9DLE9BQU8sQ0FBQyxFQUFHdUgsV0FBV2pFLFVBQVcsQ0FDL0RtQyxNQUFPdEksV0FBQUEsUUFBVXlLLE1BQU0sQ0FBQyxPQUFRLFksYUFHbkJFLGEsd0dDdE5mLFNBQVNDLHNCQUFzQkMsZUFDN0IsT0FBTyxTQUFVQyxNQUNmLElBQUlDLFNBQVdELEtBQUtDLFNBQ2hCeE0sU0FBV3VNLEtBQUt2TSxTQUNwQixPQUFPLFNBQVV5TSxNQUNmLE9BQU8sU0FBVWIsUUFDZixNQUFzQixtQkFBWEEsT0FDRkEsT0FBT1ksU0FBVXhNLFNBQVVzTSxlQUc3QkcsS0FBS2IsT0FDZCxDQUNGLENBQ0YsQ0FDRixDQWZBcEcsUUFBUWtILFlBQWEsRUFpQnJCLElBQUlDLE1BQVFOLHdCQUNaTSxNQUFNQyxrQkFBb0JQLHNCQUUxQjdHLFFBQUEsUUFBcUJtSCxLLDBPQ3RCckIsd0ZBQ0EsMkhBQ0EsMkYsK0ZBRWUsQ0FDYkUsVUFBVzFPLDhCQUFBQSxTLHlCQU9iLElBTWEyTyxvQ0FOSSxTQUFYQyxTQUFXQyxNQUFJLE9BQUksNkJBQUMsc0NBQWlDQSxLQUF0QyxFQU11Q0MsS0FBSyxDQUFDLEcsZ0ZBQ2xFSCxvQ0FBb0NFLEtBQU8sQ0FDekNuTyxXQUFZLENBQ1YrQyxRQUFTLEdBQ1Q5QyxjQUFlLGFBQ2ZDLGVBQWdCLGtCQUNoQkssbUJBQW9CLENBQUMsR0FFdkJULFNBQVMsRUFBQWlOLGNBQUFBLFFBQU8sb0JBQ2hCbE4sUUFBUSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL2xpYi91aS9TY2hvb2xJbmZvQ29uZmlybWF0aW9uRGlhbG9nLmpzeCIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvcHJvcFR5cGVzLmpzIiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL3NyYy9yZWR1eC5qcyIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvdGVtcGxhdGVzL0RpYWxvZy5qc3giLCJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL3RlbXBsYXRlcy9MZWdhY3lCdXR0b24uanN4Iiwid2VicGFjazovL2Jsb2NrbHktbW9vYy8uL25vZGVfbW9kdWxlcy9yZWR1eC10aHVuay9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL2xpYi91aS9TY2hvb2xJbmZvQ29uZmlybWF0aW9uRGlhbG9nLnN0b3J5LmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgRGlhbG9nLCB7Qm9keX0gZnJvbSAnQGNkby9hcHBzL3RlbXBsYXRlcy9EaWFsb2cnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi8uLi90ZW1wbGF0ZXMvQnV0dG9uJztcbmltcG9ydCBTY2hvb2xJbmZvSW50ZXJzdGl0aWFsIGZyb20gJy4vU2Nob29sSW5mb0ludGVyc3RpdGlhbCc7XG5pbXBvcnQgaTE4biBmcm9tICdAY2RvL2xvY2FsZSc7XG5pbXBvcnQgY29sb3IgZnJvbSAnQGNkby9hcHBzL3V0aWwvY29sb3InO1xuaW1wb3J0IHtnZXRTdG9yZX0gZnJvbSAnLi4vLi4vcmVkdXgnO1xuaW1wb3J0IGZvbnRDb25zdGFudHMgZnJvbSAnQGNkby9hcHBzL2ZvbnRDb25zdGFudHMnO1xuaW1wb3J0IGFuYWx5dGljc1JlcG9ydGVyIGZyb20gJ0BjZG8vYXBwcy9saWIvdXRpbC9BbmFseXRpY3NSZXBvcnRlcic7XG5pbXBvcnQge0VWRU5UU30gZnJvbSAnQGNkby9hcHBzL2xpYi91dGlsL0FuYWx5dGljc0NvbnN0YW50cyc7XG5cbmV4cG9ydCBjb25zdCBzdHlsZXMgPSB7XG4gIGJ1dHRvbjoge1xuICAgIG1hcmdpblRvcDogMjAsXG4gICAgbWFyZ2luTGVmdDogJzUwJScsXG4gIH0sXG4gIGJ1dHRvblJUTDoge1xuICAgIG1hcmdpblRvcDogMjAsXG4gICAgbWFyZ2luUmlnaHQ6ICc1MCUnLFxuICB9LFxuICB1cGRhdGVCdXR0b246IHtcbiAgICBtYXJnaW5Ub3A6IDIwLFxuICAgIG1hcmdpbkxlZnQ6IDUsXG4gIH0sXG4gIHVwZGF0ZUJ1dHRvblJUTDoge1xuICAgIG1hcmdpblRvcDogMjAsXG4gICAgbWFyZ2luUmlnaHQ6IDUsXG4gIH0sXG4gIGludHJvOiB7XG4gICAgZm9udFNpemU6IDE4LFxuICAgIC4uLmZvbnRDb25zdGFudHNbJ21haW4tZm9udC1zZW1pLWJvbGQnXSxcbiAgICBjb2xvcjogY29sb3IuY2hhcmNvYWwsXG4gICAgcGFkZGluZ1JpZ2h0OiAyMCxcbiAgfSxcbiAgc2Nob29sTmFtZToge1xuICAgIGNvbG9yOiBjb2xvci5wdXJwbGUsXG4gICAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgfSxcbiAgYm9keToge1xuICAgIG1hcmdpbjogMTAsXG4gIH0sXG59O1xuXG5jbGFzcyBTY2hvb2xJbmZvQ29uZmlybWF0aW9uRGlhbG9nIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBzY2hvb2xOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHNjcmlwdERhdGE6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBmb3JtVXJsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICBhdXRoVG9rZW5OYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICBhdXRoVG9rZW5WYWx1ZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgZXhpc3RpbmdTY2hvb2xJbmZvOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBpZDogUHJvcFR5cGVzLm51bWJlcixcbiAgICAgICAgdXNlcl9zY2hvb2xfaW5mb19pZDogUHJvcFR5cGVzLm51bWJlcixcbiAgICAgICAgc2Nob29sX2lkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBjb3VudHJ5OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBzY2hvb2xfdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgc2Nob29sX25hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGZ1bGxfYWRkcmVzczogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgIH0pLmlzUmVxdWlyZWQsXG4gICAgfSkuaXNSZXF1aXJlZCxcbiAgICBvbkNsb3NlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBpc09wZW46IFByb3BUeXBlcy5ib29sLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzaG93U2Nob29sSW50ZXJzdGl0aWFsOiBmYWxzZSxcbiAgICAgIHNjaG9vbE5hbWU6IHByb3BzLnNjcmlwdERhdGEuZXhpc3RpbmdTY2hvb2xJbmZvLnNjaG9vbF9uYW1lLFxuICAgICAgaXNPcGVuOiBwcm9wcy5pc09wZW4gfHwgdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgY2xvc2VNb2RhbCA9ICgpID0+IHtcbiAgICBhbmFseXRpY3NSZXBvcnRlci5zZW5kRXZlbnQoRVZFTlRTLlVQREFURV9TQ0hPT0xfSU5GT19ESUFMT0dfQ0xPU0VEKTtcbiAgICB0aGlzLnNldFN0YXRlKHtpc09wZW46IGZhbHNlfSk7XG4gICAgdGhpcy5wcm9wcy5vbkNsb3NlKCk7XG4gIH07XG5cbiAgaGFuZGxlQ2xpY2tZZXMgPSAoKSA9PiB7XG4gICAgYW5hbHl0aWNzUmVwb3J0ZXIuc2VuZEV2ZW50KEVWRU5UUy5DT05GSVJNX1NDSE9PTF9DTElDS0VEKTtcbiAgICBjb25zdCB7YXV0aFRva2VuTmFtZSwgYXV0aFRva2VuVmFsdWV9ID0gdGhpcy5wcm9wcy5zY3JpcHREYXRhO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZm9ybURhdGEuYXBwZW5kKGF1dGhUb2tlbk5hbWUsIGF1dGhUb2tlblZhbHVlKTtcbiAgICBmZXRjaChcbiAgICAgIGAvYXBpL3YxL3VzZXJfc2Nob29sX2luZm9zLyR7dGhpcy5wcm9wcy5zY3JpcHREYXRhLmV4aXN0aW5nU2Nob29sSW5mby51c2VyX3NjaG9vbF9pbmZvX2lkfS91cGRhdGVfbGFzdF9jb25maXJtYXRpb25fZGF0ZWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICB9XG4gICAgKVxuICAgICAgLnRoZW4odGhpcy5jbG9zZU1vZGFsKVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3J9KTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIGhhbmRsZUNsaWNrVXBkYXRlID0gKCkgPT4ge1xuICAgIGFuYWx5dGljc1JlcG9ydGVyLnNlbmRFdmVudChFVkVOVFMuVVBEQVRFX1NDSE9PTF9DTElDS0VEKTtcbiAgICB0aGlzLnNldFN0YXRlKHtzaG93U2Nob29sSW50ZXJzdGl0aWFsOiB0cnVlfSk7XG4gIH07XG5cbiAgcmVuZGVySW5pdGlhbENvbnRlbnQgPSAoKSA9PiB7XG4gICAgYW5hbHl0aWNzUmVwb3J0ZXIuc2VuZEV2ZW50KEVWRU5UUy5VUERBVEVfU0NIT09MX0lORk9fRElBTE9HX1NIT1dOKTtcbiAgICBjb25zdCB7c2Nob29sTmFtZX0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGlzUlRMID0gZ2V0U3RvcmUoKS5nZXRTdGF0ZSgpPy5pc1J0bDtcbiAgICByZXR1cm4gKFxuICAgICAgPEJvZHk+XG4gICAgICAgIDxkaXYgc3R5bGU9e3N0eWxlcy5ib2R5fT5cbiAgICAgICAgICA8cCBzdHlsZT17c3R5bGVzLmludHJvfT5cbiAgICAgICAgICAgIHtpMThuLnNjaG9vbEluZm9EaWFsb2dEZXNjcmlwdGlvbigpfVxuICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3N0eWxlcy5zY2hvb2xOYW1lfT5cbiAgICAgICAgICAgICAge2kxOG4uc2Nob29sSW5mb0RpYWxvZ0Rlc2NyaXB0aW9uU2Nob29sTmFtZSh7c2Nob29sTmFtZX0pfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICBzdHlsZT17aXNSVEwgPyBzdHlsZXMudXBkYXRlQnV0dG9uUlRMIDogc3R5bGVzLnVwZGF0ZUJ1dHRvbn1cbiAgICAgICAgICB0ZXh0PXtpMThuLnNjaG9vbEluZm9EaWFsb2dVcGRhdGUoKX1cbiAgICAgICAgICBjb2xvcj17QnV0dG9uLkJ1dHRvbkNvbG9yLmJsdWV9XG4gICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja1VwZGF0ZX1cbiAgICAgICAgICBpZD1cInVwZGF0ZS1idXR0b25cIlxuICAgICAgICAvPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgc3R5bGU9e2lzUlRMID8gc3R5bGVzLmJ1dHRvblJUTCA6IHN0eWxlcy5idXR0b259XG4gICAgICAgICAgdGV4dD17aTE4bi55ZXMoKX1cbiAgICAgICAgICBjb2xvcj17QnV0dG9uLkJ1dHRvbkNvbG9yLmJyYW5kU2Vjb25kYXJ5RGVmYXVsdH1cbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrWWVzfVxuICAgICAgICAgIGlkPVwieWVzLWJ1dHRvblwiXG4gICAgICAgIC8+XG4gICAgICA8L0JvZHk+XG4gICAgKTtcbiAgfTtcblxuICByZW5kZXJTY2hvb2xJbmZvcm1hdGlvbkZvcm0oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxCb2R5PlxuICAgICAgICA8U2Nob29sSW5mb0ludGVyc3RpdGlhbFxuICAgICAgICAgIHNjcmlwdERhdGE9e3RoaXMucHJvcHMuc2NyaXB0RGF0YX1cbiAgICAgICAgICBvbkNsb3NlPXt0aGlzLmNsb3NlTW9kYWx9XG4gICAgICAgIC8+XG4gICAgICA8L0JvZHk+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7c2hvd1NjaG9vbEludGVyc3RpdGlhbCwgaXNPcGVufSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIChcbiAgICAgIDxEaWFsb2cgaXNPcGVuPXtpc09wZW59IGhhbmRsZUNsb3NlPXt0aGlzLmNsb3NlTW9kYWx9PlxuICAgICAgICB7IXNob3dTY2hvb2xJbnRlcnN0aXRpYWxcbiAgICAgICAgICA/IHRoaXMucmVuZGVySW5pdGlhbENvbnRlbnQoKVxuICAgICAgICAgIDogdGhpcy5yZW5kZXJTY2hvb2xJbmZvcm1hdGlvbkZvcm0oKX1cbiAgICAgIDwvRGlhbG9nPlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2Nob29sSW5mb0NvbmZpcm1hdGlvbkRpYWxvZztcbiIsIi8qKlxuICogQ29kZS5vcmcgY3VzdG9tIHJlYWN0IHByb3B0eXBlcy5cbiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHtpc1N1YnNlcXVlbmNlfSBmcm9tICcuL3V0aWxzJztcblxuLyoqXG4gKiBBIGN1c3RvbSBSZWFjdCBQcm9wVHlwZSB0byBlbnN1cmUgdGhhdCB0aGUgc3BlY2lmaWVkXG4gKiBjb21wb25lbnQgdHlwZXMgYXJlIGdpdmVuIGluIHRoZSBzcGVjaWZpZWQgb3JkZXJcbiAqIGFzIGNoaWxkcmVuIG9mIHRoZSBjb21wb25lbnQgdGhhdCB0aGlzIHByb3AgdHlwZSBpcyB1c2VkIG9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKiAgIHByb3BUeXBlczoge1xuICogICAgIGNoaWxkcmVuOiBjaGlsZHJlbk9mVHlwZShIZWFkaW5nLCBCb2R5KVxuICogICB9XG4gKlxuICogSW4gdGhpcyBleGFtcGxlLCB0aGUgcHJvcCB0eXBlIGRvZXMgbm90IHZhbGlkYXRlIGlmIHRoZXJlIGFyZSBtb3JlIHRoYW5cbiAqIG9uZSA8SGVhZGluZz4gY29tcG9uZW50cyBpbiB0aGUgY2hpbGRyZW4gb3IgaWYgPEhlYWRpbmc+IGNvbWVzIGFmdGVyIDxCb2R5Pi5cbiAqIEhvd2V2ZXIsIHRoZSBwcm9wIHR5cGUgd2lsbCBiZSB2YWxpZCBpZiB5b3Ugb21pdCA8SGVhZGluZz4gYW5kL29yIDxCb2R5Pi5cbiAqXG4gKiBAcGFyYW0gLi4udmFsaWRDaGlsZHJlblR5cGVzIGFycmF5PGNvbnN0cnVjdG9yPiAtIGEgbGlzdCBvZiB0eXBlcyB0byBhbGxvdyBhcyBjaGlsZHJlblxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRyZW5PZlR5cGUoLi4udmFsaWRDaGlsZHJlblR5cGVzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG4gICAgaWYgKHByb3BOYW1lICE9PSAnY2hpbGRyZW4nKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKFxuICAgICAgICAnVGhlIGNoaWxkcmVuT2ZUeXBlIHByb3AgdHlwZSBzaG91bGQgb25seSBiZSB1c2VkIG9uIHRoZSBjaGlsZHJlbiBwcm9wLidcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHByb3AgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgaWYgKCFwcm9wKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFjdHVhbENoaWxkcmVuVHlwZXMgPVxuICAgICAgUmVhY3QuQ2hpbGRyZW4ubWFwKHByb3AsIGVsID0+IGVsICYmIGVsLnR5cGUpIHx8IFtdO1xuICAgIGlmICghaXNTdWJzZXF1ZW5jZSh2YWxpZENoaWxkcmVuVHlwZXMsIGFjdHVhbENoaWxkcmVuVHlwZXMpKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKFxuICAgICAgICBjb21wb25lbnROYW1lICtcbiAgICAgICAgICAnIHdhcyBnaXZlbiBjaGlsZHJlbiBvZiB0eXBlcyAnICtcbiAgICAgICAgICBhY3R1YWxDaGlsZHJlblR5cGVzLm1hcCh0ID0+IGA8JHt0Lm5hbWV9PmApLmpvaW4oJywgJykgK1xuICAgICAgICAgICcgYnV0IG9ubHkgYWNjZXB0cyBvbmUgb2YgZWFjaCBjaGlsZCBpbiB0aGUgZm9sbG93aW5nIG9yZGVyOiAnICtcbiAgICAgICAgICB2YWxpZENoaWxkcmVuVHlwZXMubWFwKHQgPT4gYDwke3QubmFtZX0+YCkuam9pbignLCAnKSArXG4gICAgICAgICAgJy4nXG4gICAgICApO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBBIGN1c3RvbSBSZWFjdCBQcm9wVHlwZSBmb3IgYSBwcm9wIHRoYXQgY2FuIG9ubHkgYmUgc3BlY2lmaWVkXG4gKiB3aGVuIGEgY2hpbGQgbm9kZSBvZiB0aGUgY29ycmVzcG9uZGluZyB0eXBlIGhhcyBub3QgYmVlbiBzcGVjaWZpZWQuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgaGF2aW5nIGFuIEFQSSB3aGVyZSB5b3VyIGNvbXBvbmVudCBhY2NlcHRzIFwiY29uZmlndXJhdGlvblwiXG4gKiBlaXRoZXIgaW4gdGhlIGZvcm0gb2YgYSBwcm9wLCBvciBhcyBhIGNoaWxkIG5vZGUuIEZvciBleGFtcGxlLCB0byBhbGxvdyBmb3I6XG4gKlxuICogPEljb25CdXR0b24+XG4gKiAgIDxJY29uIHNyYz1cIi9pbWFnZXMvaWNvbnMvY293LnBuZ1wiLz5cbiAqICAgQ2xpY2sgdGhlIGNvdyFcbiAqIDwvSWNvbkJ1dHRvbj5cbiAqXG4gKiAtLS0gb3IgLS0tXG4gKlxuICogPEljb25CdXR0b24gaWNvbj1cIi9pbWFnZXMvaWNvbnMvY293LnBuZ1wiPkNsaWNrIHRoZSBjb3chPC9JY29uQnV0dG9uPlxuICpcbiAqIFdoeSB3b3VsZCB5b3Ugd2FudCB0byBkbyB0aGlzPyBJdCBhbGxvd3MgY2FsbHNpdGVzIHRvIHVzZSBub24tZGVmYXVsdCBJY29uXG4gKiBjb21wb25lbnRzIGlmIHRoZXkgd2FudC4gTGlrZSBzbzpcbiAqXG4gKiA8SWNvbkJ1dHRvbj5cbiAqICAgPEFuaW1hdGVkSWNvbiBhbmltYXRpb249XCJzcGluXCIgc3ZnPVwiL2ltYWdlcy9pY29ucy9jb3cuc3ZnXCIvPlxuICogICBDbGljayB0aGUgY293IVxuICogPC9JY29uQnV0dG9uPlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICBwcm9wVHlwZXM6IHtcbiAqICAgICBpY29uOiB3aGVuTm9DaGlsZE9mVHlwZXMoSWNvbiwgQW5pbWF0ZWRJY29uKVxuICogICB9XG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2hlbk5vQ2hpbGRPZlR5cGVzKC4uLnVuZXhwZWN0ZWRDaGlsZFR5cGVzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG4gICAgaWYgKCFwcm9wcy5jaGlsZHJlbiB8fCAhcHJvcHNbcHJvcE5hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBlcnJvcjtcbiAgICBjb25zdCBhY3R1YWxDaGlsZHJlblR5cGVzID0gUmVhY3QuQ2hpbGRyZW4ubWFwKFxuICAgICAgcHJvcHNbJ2NoaWxkcmVuJ10sXG4gICAgICBlbCA9PiBlbC50eXBlXG4gICAgKTtcbiAgICBmb3IgKGNvbnN0IGNoaWxkVHlwZSBvZiBhY3R1YWxDaGlsZHJlblR5cGVzKSB7XG4gICAgICBpZiAodW5leHBlY3RlZENoaWxkVHlwZXMuaW5jbHVkZXMoY2hpbGRUeXBlKSkge1xuICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgICBgJHtjb21wb25lbnROYW1lfSB3YXMgZ2l2ZW4gYSAke3Byb3BOYW1lfSBwcm9wIGFuZCBhIGAgK1xuICAgICAgICAgICAgYDwke2NoaWxkVHlwZS5uYW1lfT4gY2hpbGQsIGJ1dCBvbmx5IG9uZSBvZiB0aG9zZSBpcyBhbGxvd2VkLmBcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlcnJvcjtcbiAgfTtcbn1cbiIsIi8qKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX19fX19fX19fX19fX19fX19fX19fX1xuICogICAgICBfX19fX19fX19fX19fX19fX19fX19fXy0tLS0tLS0tLS0tLS0tLS0tLS0gICAgICAgICAgICAgICAgICAgICAgIGBcXFxuICogICAgLzotLV9fICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgIHx8PCA+IHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fX19fX19fX19fX19fX19fX19fX19fX19fXy9cbiAqICAgfCBcXF9fL19fX19fX19fX19fX19fX19fLS0tLS0tLS0tLS0tLS0tLS0tLSAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICB8ICAgICAgICAgICAgICAgICAgIFRIRSBMT1JEIE9GIFRIRSBSRURVWCBTVE9SRVMgICAgICAgICAgICAgICAgICAgfFxuICogICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgIHwgICAgIFwiVGhyZWUgU3RvcmVzIGZvciB0aGUgRWx2ZW4ta2luZ3MgdW5kZXIgdGhlIHNreSwgICAgICAgICAgICAgfFxuICogICAgIHwgICAgICAgU2V2ZW4gZm9yIHRoZSBEd2FyZi1sb3JkcyBpbiB0aGVpciBoYWxscyBvZiBzdG9uZSwgICAgICAgICB8XG4gKiAgICAgfCAgICAgTmluZSBmb3IgTW9ydGFsIE1lbiBkb29tZWQgdG8gZGllLCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICB8ICAgICAgIE9uZSBmb3IgdGhlIERhcmsgTG9yZCBvbiBoaXMgZGFyayB0aHJvbmUgICAgICAgICAgICAgICAgICAgfFxuICogICAgIHwgICAgIEluIHRoZSBMYW5kIG9mIE1vcmRvciB3aGVyZSB0aGUgU2hhZG93cyBsaWUuICAgICAgICAgICAgICAgICAgfFxuICogICAgICB8ICAgICAgT25lIFN0b3JlIHRvIHJ1bGUgdGhlbSBhbGwsIE9uZSBTdG9yZSB0byBmaW5kIHRoZW0sICAgICAgICAgfFxuICogICAgICB8ICAgICAgT25lIFN0b3JlIHRvIGJyaW5nIHRoZW0gYWxsIGFuZCBpbiB0aGUgZGFya25lc3MgYmluZCB0aGVtICAgfFxuICogICAgICB8ICAgIEluIHRoZSBMYW5kIG9mIE1vcmRvciB3aGVyZSB0aGUgU2hhZG93cyBsaWUuICAgICAgICAgICAgICAgICB8XG4gKiAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX19fX19fX19fX19fX19fX19fX3xfXG4gKiAgICAgfCAgX19fX19fX19fX19fX19fX19fXy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgICAgICAgICAgICAgICAgICAgYFxcXG4gKiAgICAgfC9gLS1fICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICAgfHxbIF18fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19fX19fX19fX19fX19fX19fXy9cbiAqICAgICAgXFw9PT0vX19fX19fX19fX19fX19fX19fXy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICpcbiAqIEBmaWxlIFRoZSBnbG9iYWwgcmVkdXggc3RvcmUgLSBcIlRoZXJlIGNhbiBiZSBvbmx5IG9uZVwiXG4gKi9cblxuaW1wb3J0IEltbXV0YWJsZSBmcm9tICdpbW11dGFibGUnO1xuaW1wb3J0IGV4cGVyaW1lbnRzIGZyb20gJy4vdXRpbC9leHBlcmltZW50cyc7XG5pbXBvcnQgKiBhcyByZWR1eCBmcm9tICdyZWR1eCc7XG5pbXBvcnQgcmVkdXhUaHVuayBmcm9tICdyZWR1eC10aHVuayc7XG5pbXBvcnQge2NvbmZpZ3VyZVN0b3JlfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIGNyZWF0ZUxvZ2dlciA9IHJlcXVpcmUoJ3JlZHV4LWxvZ2dlcicpO1xufVxuXG5sZXQgcmVkdXhTdG9yZTtcbmxldCBnbG9iYWxSZWR1Y2VycyA9IHt9O1xuXG5pZiAoSU5fVU5JVF9URVNUKSB7XG4gIGxldCBfX29sZFJlZHV4U3RvcmU7XG4gIGxldCBfX29sZEdsb2JhbFJlZHVjZXJzO1xuXG4gIG1vZHVsZS5leHBvcnRzLnN0dWJSZWR1eCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX19vbGRSZWR1eFN0b3JlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdSZWR1eCBzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0dWJiZWQuIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgcmVzdG9yZT8nXG4gICAgICApO1xuICAgIH1cbiAgICBfX29sZFJlZHV4U3RvcmUgPSByZWR1eFN0b3JlO1xuICAgIF9fb2xkR2xvYmFsUmVkdWNlcnMgPSBnbG9iYWxSZWR1Y2VycztcbiAgICByZWR1eFN0b3JlID0gbnVsbDtcbiAgICBnbG9iYWxSZWR1Y2VycyA9IHt9O1xuICB9O1xuXG4gIG1vZHVsZS5leHBvcnRzLnJlc3RvcmVSZWR1eCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZWR1eFN0b3JlID0gX19vbGRSZWR1eFN0b3JlO1xuICAgIGdsb2JhbFJlZHVjZXJzID0gX19vbGRHbG9iYWxSZWR1Y2VycztcbiAgICBfX29sZFJlZHV4U3RvcmUgPSBudWxsO1xuICAgIF9fb2xkR2xvYmFsUmVkdWNlcnMgPSBudWxsO1xuICB9O1xufVxuXG5pZiAoSU5fU1RPUllCT09LIHx8IElOX1VOSVRfVEVTVCkge1xuICAvLyBTdG9yeWJvb2tzIG5lZWQgdGhlIGFiaWxpdHkgdG8gY3JlYXRlIG11bHRpcGxlIGRpc3RpbmN0IHN0b3JlcyBpbnN0ZWFkIG9mXG4gIC8vIHVzaW5nIGEgc2luZ2xldG9uXG4gIG1vZHVsZS5leHBvcnRzLmNyZWF0ZVN0b3JlV2l0aFJlZHVjZXJzID0gY3JlYXRlU3RvcmVXaXRoUmVkdWNlcnM7XG59XG5cbi8qKlxuICogR2V0IGEgcmVmZXJlbmNlIHRvIG91ciByZWR1eCBzdG9yZS4gSWYgaXQgZG9lc24ndCBleGlzdCB5ZXQsIGNyZWF0ZSBpdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JlKCkge1xuICBpZiAoIXJlZHV4U3RvcmUpIHtcbiAgICByZWR1eFN0b3JlID0gY3JlYXRlU3RvcmVXaXRoUmVkdWNlcnMoKTtcbiAgICBpZiAoZXhwZXJpbWVudHMuaXNFbmFibGVkKCdyZWR1eEdsb2JhbFN0b3JlJykpIHtcbiAgICAgIC8vIEV4cG9zZSBvdXIgc3RvcmUgZ2xvYmFsbHksIHRvIG1ha2UgZGVidWdnaW5nIGVhc2llclxuICAgICAgd2luZG93LnJlZHV4U3RvcmUgPSByZWR1eFN0b3JlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZWR1eFN0b3JlO1xufVxuXG4vKipcbiAqIENyZWF0ZSBvdXIgc3RvcmVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RvcmVXaXRoUmVkdWNlcnMoKSB7XG4gIHJldHVybiBjcmVhdGVTdG9yZShcbiAgICBPYmplY3Qua2V5cyhnbG9iYWxSZWR1Y2VycykubGVuZ3RoID4gMCA/IGdsb2JhbFJlZHVjZXJzIDogcyA9PiBzXG4gICk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXIgbXVsdGlwbGUgdG9wLWxldmVsIHJlZHVjZXJzIHdpdGggdGhlIGdsb2JhbCBzdG9yZS4gVGhpcyBkb2VzIG5vdCByZW1vdmVcbiAqIGFueSByZWR1Y2VycyB0aGF0IGhhdmUgYmVlbiBwcmV2aW91c2x5IHJlZ2lzdGVyZWQuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IHJlZHVjZXJzIC0gYW4gb2JqZWN0IG1hcHBpbmcgdW5pcXVlIGtleXMgdG8gcmVkdWNlciBmdW5jdGlvbnNcbiAqICAgICBUaGUga2V5cyB3aWxsIGJlIHVzZWQgaW4gdGhlIHN0YXRlIG9iamVjdC5cbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUmVkdWNlcnMocmVkdWNlcnMpIHtcbiAgZm9yIChsZXQga2V5IGluIHJlZHVjZXJzKSB7XG4gICAgY29uc3QgZXhpc3RpbmdSZWR1Y2VyID0gZ2xvYmFsUmVkdWNlcnNba2V5XTtcbiAgICBpZiAoZXhpc3RpbmdSZWR1Y2VyICYmIGV4aXN0aW5nUmVkdWNlciAhPT0gcmVkdWNlcnNba2V5XSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGByZWR1Y2VyIHdpdGgga2V5IFwiJHtrZXl9XCIgYWxyZWFkeSByZWdpc3RlcmVkIWApO1xuICAgIH1cbiAgfVxuICBPYmplY3QuYXNzaWduKGdsb2JhbFJlZHVjZXJzLCByZWR1Y2Vycyk7XG4gIGlmIChyZWR1eFN0b3JlKSB7XG4gICAgcmVkdXhTdG9yZS5yZXBsYWNlUmVkdWNlcihyZWR1eC5jb21iaW5lUmVkdWNlcnMoZ2xvYmFsUmVkdWNlcnMpKTtcbiAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCBhIHJlZHVjZXIgd2l0aCB0aGUgZ2l2ZW4ga2V5IGhhcyBiZWVuIHJlZ2lzdGVyZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1JlZHVjZXIoa2V5KSB7XG4gIHJldHVybiAhIWdsb2JhbFJlZHVjZXJzW2tleV07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN0b3JlIGNvbmZpZ3VyZWQgZm9yIHVzZSB0aGUgd2F5IHdlIHdhbnQgZm9yIENvZGUub3JnLlxuICogQHNlZSBodHRwOi8vcmVkdXguanMub3JnL2RvY3MvYXBpL2NyZWF0ZVN0b3JlLmh0bWxcbiAqIEBwYXJhbSB7IWZ1bmN0aW9ufSByZWR1Y2VyXG4gKiBAcmV0dXJuIHtTdG9yZX0gQ29uZmlndXJlZCBSZWR1eCBzdG9yZSwgcmVhZHkgZm9yIHVzZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RvcmUocmVkdWNlciwgaW5pdGlhbFN0YXRlKSB7XG4gIC8vIFlvdSBoYXZlIHRvIG1hbnVhbGx5IGVuYWJsZSBkZWJ1Z2dpbmcsIGJvdGggdG8ga2VlcCB0aGUgbG9nZ2VyIG91dFxuICAvLyBvZiBwcm9kdWN0aW9uIGJ1bmRsZXMsIGFuZCBiZWNhdXNlIGl0IGNhdXNlcyBhIGxvdCBvZiBjb25zb2xlIG5vaXNlIGFuZFxuICAvLyBtYWtlcyBvdXIgdW5pdCB0ZXN0cyBmYWlsLiBUbyBlbmFibGUsIGFwcGVuZCA/ZW5hYmxlRXhwZXJpbWVudHM9cmVkdXhMb2dnaW5nXG4gIC8vIHRvIHlvdXIgdXJsLiBUaGlzIHdpbGwgYWxzbyBlbmFibGUgbG9nZ2luZyBpZiB0aGVyZSBpcyBhIG5vbi1pbW11dGFibGUgb3Igbm9uLXNlcmlhbGl6YWJsZVxuICAvLyB2YWx1ZSBpbiB0aGUgcmVkdXggc3RvcmUsIHdpdGggc29tZSBpZ25vcmVzIGFscmVhZHkgc2V0IHVwIChzZWUgYmVsb3cpLlxuICB2YXIgZW5hYmxlUmVkdXhEZWJ1Z2dpbmcgPSBleHBlcmltZW50cy5pc0VuYWJsZWQoZXhwZXJpbWVudHMuUkVEVVhfTE9HR0lORyk7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVuYWJsZVJlZHV4RGVidWdnaW5nKSB7XG4gICAgdmFyIHJlZHV4TG9nZ2VyID0gY3JlYXRlTG9nZ2VyKHtcbiAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcbiAgICAgIC8vIGNvbnZlcnQgaW1tdXRhYmxlLmpzIG9iamVjdHMgdG8gSlMgZm9yIGxvZ2dpbmcgKGNvZGUgY29waWVkIGZyb21cbiAgICAgIC8vIHJlZHV4LWxvZ2dlciByZWFkbWUpXG4gICAgICBzdGF0ZVRyYW5zZm9ybWVyOiBzdGF0ZSA9PiB7XG4gICAgICAgIGxldCBuZXdTdGF0ZSA9IHt9O1xuXG4gICAgICAgIGZvciAodmFyIGkgb2YgT2JqZWN0LmtleXMoc3RhdGUpKSB7XG4gICAgICAgICAgaWYgKEltbXV0YWJsZS5JdGVyYWJsZS5pc0l0ZXJhYmxlKHN0YXRlW2ldKSkge1xuICAgICAgICAgICAgbmV3U3RhdGVbaV0gPSBzdGF0ZVtpXS50b0pTKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1N0YXRlW2ldID0gc3RhdGVbaV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBjb25maWd1cmVTdG9yZSh7XG4gICAgICByZWR1Y2VyOiByZWR1Y2VyLFxuICAgICAgcHJlbG9hZGVkU3RhdGU6IGluaXRpYWxTdGF0ZSxcbiAgICAgIG1pZGRsZXdhcmU6IGdldERlZmF1bHRNaWRkbGV3YXJlID0+XG4gICAgICAgIC8vIHRoZSBkZWZhdWx0IG1pZGRsZXdhcmUgaW5jbHVkZXMgcmVkdXggdGh1bmssIGltbXV0YWJpbGl0eSBjaGVjayxcbiAgICAgICAgLy8gYW5kIHNlcmlhbGl6YWJpbGl0eSBjaGVjay4gU29tZSBvZiBvdXIgc3RvcmUgZG9lcyBub3QgcGFzcyB0aGVzZSBjaGVja3MsXG4gICAgICAgIC8vIHNvIHdlIGFyZSBpZ25vcmluZyB0aGVtIGZvciBub3cuIFdlIG9ubHkgZW5hYmxlIHRoaXMgaW4gZGV2IG1vZGVcbiAgICAgICAgLy8gYmVjYXVzZSBpdCBjYXVzZXMgY29uc29sZSBlcnJvcnMgaWYgc29tZXRoaW5nIGZhaWxzIHRoZSBjaGVjaywgYW5kXG4gICAgICAgIC8vIGNhbiBwb3RlbnRpYWxseSBjYXVzZSBhIHBhZ2UgY3Jhc2ggKGluIHRoZSBjYXNlIG9mIHRoZSBKUyBJbnRlcnByZXRlciBhbmQgdGhlXG4gICAgICAgIC8vIGltbXV0YWJpbGl0eSBjaGVjaykuXG4gICAgICAgIGdldERlZmF1bHRNaWRkbGV3YXJlKHtcbiAgICAgICAgICBpbW11dGFibGVDaGVjazoge1xuICAgICAgICAgICAgaWdub3JlZFBhdGhzOiBbJ2pzSW50ZXJwcmV0ZXInLCAnanNkZWJ1Z2dlciddLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VyaWFsaXphYmxlQ2hlY2s6IHtcbiAgICAgICAgICAgIGlnbm9yZWRBY3Rpb25QYXRoczogW1xuICAgICAgICAgICAgICAnYmxvYicsXG4gICAgICAgICAgICAgICdqc2RlYnVnZ2VyJyxcbiAgICAgICAgICAgICAgJ29ic2VydmVyJyxcbiAgICAgICAgICAgICAgJ2pzSW50ZXJwcmV0ZXInLFxuICAgICAgICAgICAgICAncnVuQXBwJyxcbiAgICAgICAgICAgICAgJ3Byb3BzLnNob3dOZXh0SGludCcsXG4gICAgICAgICAgICAgICdwcm9wcy5hc3NldFVybCcsXG4gICAgICAgICAgICAgICdwcm9wcy5leHBvcnRBcHAnLFxuICAgICAgICAgICAgICAncGF5bG9hZC5nZXRDaGFuZ2VzJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpZ25vcmVkUGF0aHM6IFtcbiAgICAgICAgICAgICAgJ2hpZGRlbkxlc3NvbicsXG4gICAgICAgICAgICAgICdibG9iJyxcbiAgICAgICAgICAgICAgJ3BhZ2VDb25zdGFudHMnLFxuICAgICAgICAgICAgICAnb2JzZXJ2ZXInLFxuICAgICAgICAgICAgICAnd2F0Y2hlZEV4cHJlc3Npb25zJyxcbiAgICAgICAgICAgICAgJ2luc3RydWN0aW9ucycsXG4gICAgICAgICAgICAgICdydW5BcHAnLFxuICAgICAgICAgICAgICAnanNkZWJ1Z2dlcicsXG4gICAgICAgICAgICAgIC9hbmltYXRpb25MaXN0XFwucHJvcHNCeUtleS4qXFwuYmxvYi8sXG4gICAgICAgICAgICAgICdtYWtlcicsXG4gICAgICAgICAgICAgICdkYXRhJyxcbiAgICAgICAgICAgICAgJ3NjcmVlbnMnLFxuICAgICAgICAgICAgICAnaGVhZGVyLmdldExldmVsQnVpbGRlckNoYW5nZXMnLFxuICAgICAgICAgICAgICAnZ2V0Q2hhbmdlcycsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLmNvbmNhdChyZWR1eExvZ2dlciksXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gY29uZmlndXJlU3RvcmUoe1xuICAgIHJlZHVjZXI6IHJlZHVjZXIsXG4gICAgcHJlbG9hZGVkU3RhdGU6IGluaXRpYWxTdGF0ZSxcbiAgICBtaWRkbGV3YXJlOiBbcmVkdXhUaHVua10sXG4gICAgZGV2VG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLCAvLyBvbmx5IGVuYWJsZSBkZXZUb29scyBpbiBkZXZlbG9wbWVudFxuICB9KTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJhZGl1bSBmcm9tICdyYWRpdW0nOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtaW1wb3J0c1xuaW1wb3J0IExlZ2FjeUJ1dHRvbiBmcm9tICcuL0xlZ2FjeUJ1dHRvbic7XG5pbXBvcnQgQmFzZURpYWxvZyBmcm9tICcuL0Jhc2VEaWFsb2cnO1xuaW1wb3J0IGNvbG9yIGZyb20gJy4uL3V0aWwvY29sb3InO1xuaW1wb3J0IHtjaGlsZHJlbk9mVHlwZSwgd2hlbk5vQ2hpbGRPZlR5cGVzfSBmcm9tICcuLi9wcm9wVHlwZXMnO1xuaW1wb3J0IGxvY2FsZSBmcm9tICdAY2RvL2xvY2FsZSc7XG5cbmV4cG9ydCBjb25zdCBzdHlsZXMgPSB7XG4gIGljb246IHtcbiAgICBiYWNrZ3JvdW5kU2l6ZTogMTAwLFxuICAgIGJhY2tncm91bmRQb3NpdGlvbjogJ2JvdHRvbScsXG4gICAgYmFja2dyb3VuZFJlcGVhdDogJ25vLXJlcGVhdCcsXG4gICAgbWFyZ2luVG9wOiAtMTY1LFxuICAgIHdpZHRoOiAxMjAsXG4gICAgaGVpZ2h0OiAyMDAsXG4gICAgZmxvYXQ6ICdsZWZ0JyxcbiAgfSxcbiAgdGl0bGU6IHtcbiAgICBmb250U2l6ZTogMjcsXG4gICAgbGluZUhlaWdodDogJzMwcHgnLFxuICAgIG1hcmdpbkJvdHRvbTogMTUsXG4gICAgY29sb3I6IGNvbG9yLnB1cnBsZSxcbiAgfSxcbiAgYm9keToge1xuICAgIGZvbnRTaXplOiAyNCxcbiAgICBsaW5lSGVpZ2h0OiAnMjdweCcsXG4gICAgY29sb3I6IGNvbG9yLnB1cnBsZSxcbiAgICB3aGl0ZVNwYWNlOiAnbm9ybWFsJyxcbiAgfSxcbiAgYnV0dG9uczoge1xuICAgIG1hcmdpblRvcDogMTAsXG4gIH0sXG4gIHJpZ2h0QnV0dG9uOiB7XG4gICAgZmxvYXQ6ICdyaWdodCcsXG4gIH0sXG4gIGJ1dHRvbkNsZWFyOiB7XG4gICAgY2xlYXI6ICdib3RoJyxcbiAgfSxcbiAgZm9vdGVyOiB7XG4gICAgYm9yZGVyQ29sb3I6IGNvbG9yLmxpZ2h0X2dyYXksXG4gICAgYm9yZGVyU3R5bGU6ICdzb2xpZCcsXG4gICAgYm9yZGVyV2lkdGg6IDAsXG4gICAgYm9yZGVyVG9wV2lkdGg6IDIsXG4gICAgbWFyZ2luVG9wOiAxNSxcbiAgICBwYWRkaW5nVG9wOiAxNSxcbiAgfSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBUaXRsZSh7Y2hpbGRyZW59KSB7XG4gIHJldHVybiA8aDEgc3R5bGU9e3N0eWxlcy50aXRsZX0+e2NoaWxkcmVufTwvaDE+O1xufVxuVGl0bGUucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQm9keSh7Y2hpbGRyZW59KSB7XG4gIHJldHVybiA8ZGl2IHN0eWxlPXtzdHlsZXMuYm9keX0+e2NoaWxkcmVufTwvZGl2Pjtcbn1cbkJvZHkucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQ29uZmlybShwcm9wcykge1xuICBsZXQge3R5cGUsIC4uLm90aGVyfSA9IHByb3BzO1xuICB0eXBlID0gdHlwZSB8fCAncHJpbWFyeSc7XG4gIHJldHVybiAoXG4gICAgPExlZ2FjeUJ1dHRvbiB0eXBlPXt0eXBlfSB7Li4ub3RoZXJ9PlxuICAgICAge3Byb3BzLmNoaWxkcmVuIHx8IGxvY2FsZS5kaWFsb2dPSygpfVxuICAgIDwvTGVnYWN5QnV0dG9uPlxuICApO1xufVxuQ29uZmlybS5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbiAgdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBDYW5jZWwocHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8TGVnYWN5QnV0dG9uIHR5cGU9XCJjYW5jZWxcIiB7Li4ucHJvcHN9PlxuICAgICAge3Byb3BzLmNoaWxkcmVuIHx8IGxvY2FsZS5kaWFsb2dDYW5jZWwoKX1cbiAgICA8L0xlZ2FjeUJ1dHRvbj5cbiAgKTtcbn1cbkNhbmNlbC5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBCdXR0b25zKHtjaGlsZHJlbn0pIHtcbiAgY2hpbGRyZW4gPSBSZWFjdC5DaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKTtcbiAgdmFyIGxlZnRDaGlsZHJlbiA9IGNoaWxkcmVuLnNsaWNlKDAsIGNoaWxkcmVuLmxlbmd0aCAtIDEpO1xuICB2YXIgcmlnaHRDaGlsZCA9IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdO1xuICByZXR1cm4gKFxuICAgIDxkaXYgc3R5bGU9e3N0eWxlcy5idXR0b25zfT5cbiAgICAgIHtsZWZ0Q2hpbGRyZW59XG4gICAgICA8ZGl2IHN0eWxlPXtzdHlsZXMucmlnaHRCdXR0b259PntyaWdodENoaWxkfTwvZGl2PlxuICAgICAgPGRpdiBzdHlsZT17c3R5bGVzLmJ1dHRvbkNsZWFyfSAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuQnV0dG9ucy5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBjaGlsZHJlbk9mVHlwZShDYW5jZWwsIENvbmZpcm0pLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIEZvb3Rlcih7Y2hpbGRyZW59KSB7XG4gIHJldHVybiA8ZGl2IHN0eWxlPXtzdHlsZXMuZm9vdGVyfT57Y2hpbGRyZW59PC9kaXY+O1xufVxuRm9vdGVyLnByb3BUeXBlcyA9IHtcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxufTtcblxuZXhwb3J0IHZhciBJY29uID0gUmFkaXVtKGZ1bmN0aW9uIEljb24oe3NyY30pIHtcbiAgcmV0dXJuIDxzcGFuIHN0eWxlPXtbc3R5bGVzLmljb24sIHtiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtzcmN9KWB9XX0gLz47XG59KTtcbkljb24ucHJvcFR5cGVzID0ge1xuICBzcmM6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpYWxvZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgLi4uQmFzZURpYWxvZy5wcm9wVHlwZXMsXG4gICAgY2hpbGRyZW46IGNoaWxkcmVuT2ZUeXBlKEljb24sIFRpdGxlLCBCb2R5LCBCdXR0b25zLCBGb290ZXIpLFxuICAgIGljb246IHdoZW5Ob0NoaWxkT2ZUeXBlcyhJY29uKSxcbiAgICB0aXRsZTogd2hlbk5vQ2hpbGRPZlR5cGVzKFRpdGxlKSxcbiAgICBib2R5OiB3aGVuTm9DaGlsZE9mVHlwZXMoQm9keSksXG4gICAgZm9vdGVyOiB3aGVuTm9DaGlsZE9mVHlwZXMoRm9vdGVyKSxcbiAgICBjYW5jZWxUZXh0OiB3aGVuTm9DaGlsZE9mVHlwZXMoQnV0dG9ucyksXG4gICAgb25DYW5jZWw6IHdoZW5Ob0NoaWxkT2ZUeXBlcyhCdXR0b25zKSxcbiAgICBjb25maXJtVGV4dDogd2hlbk5vQ2hpbGRPZlR5cGVzKEJ1dHRvbnMpLFxuICAgIG9uQ29uZmlybTogd2hlbk5vQ2hpbGRPZlR5cGVzKEJ1dHRvbnMpLFxuICAgIGNvbmZpcm1UeXBlOiB3aGVuTm9DaGlsZE9mVHlwZXMoQnV0dG9ucyksXG4gIH07XG5cbiAgaGFuZGxlS2V5RG93biA9IGV2ZW50ID0+IHtcbiAgICAvLyBGb2N1cyB0aGUgbmV4dCBidXR0b24sIGlucHV0IG9yIGxpbmsgd2hlbiB0YWIgaXMgcHJlc3NlZCwgdG8gcHJldmVudCB0aGVcbiAgICAvLyB1c2VyIGZyb20gc2VsZWN0aW5nIGVsZW1lbnRzIG91dHNpZGUgb2YgdGhlIGRpYWxvZy5cbiAgICBpZiAoZXZlbnQua2V5ID09PSAnVGFiJykge1xuICAgICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLmJhc2VEaWFsb2cuZ2V0VGFiYmFibGVFbGVtZW50cygpO1xuICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAvLyBGb2N1cyB0aGUgbmV4dCBlbGVtZW50LCBvciB0aGUgZmlyc3QgZWxlbWVudCBpZiBub25lIGlzIGZvY3VzZWQuXG4gICAgICAgIGNvbnN0IGN1ckluZGV4ID0gZWxlbWVudHMuZmluZEluZGV4KFxuICAgICAgICAgIGJ0biA9PiBidG4gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGN1ckluZGV4ICsgMSkgJSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIGVsZW1lbnRzW25leHRJbmRleF0uZm9jdXMoKTtcbiAgICAgIH1cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBbXTtcbiAgICBpZiAodGhpcy5wcm9wcy5pY29uKSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKDxJY29uIGtleT1cImljb25cIiBzcmM9e3RoaXMucHJvcHMuaWNvbn0gLz4pO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy50aXRsZSkge1xuICAgICAgY2hpbGRyZW4ucHVzaCg8VGl0bGUga2V5PVwidGl0bGVcIj57dGhpcy5wcm9wcy50aXRsZX08L1RpdGxlPik7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLmJvZHkpIHtcbiAgICAgIGNoaWxkcmVuLnB1c2goPEJvZHkga2V5PVwiYm9keVwiPnt0aGlzLnByb3BzLmJvZHl9PC9Cb2R5Pik7XG4gICAgfVxuICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uY29uY2F0KHRoaXMucHJvcHMuY2hpbGRyZW4pO1xuICAgIGlmIChcbiAgICAgIHRoaXMucHJvcHMuY2FuY2VsVGV4dCB8fFxuICAgICAgdGhpcy5wcm9wcy5vbkNhbmNlbCB8fFxuICAgICAgdGhpcy5wcm9wcy5jb25maXJtVGV4dCB8fFxuICAgICAgdGhpcy5wcm9wcy5vbkNvbmZpcm0gfHxcbiAgICAgIHRoaXMucHJvcHMuY29uZmlybVR5cGVcbiAgICApIHtcbiAgICAgIHZhciBidXR0b25zID0gKFxuICAgICAgICA8QnV0dG9ucyBrZXk9XCJidXR0b25zXCI+XG4gICAgICAgICAge3RoaXMucHJvcHMub25DYW5jZWwgJiYgKFxuICAgICAgICAgICAgPENhbmNlbCBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2FuY2VsfT5cbiAgICAgICAgICAgICAge3RoaXMucHJvcHMuY2FuY2VsVGV4dH1cbiAgICAgICAgICAgIDwvQ2FuY2VsPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3RoaXMucHJvcHMub25Db25maXJtICYmIChcbiAgICAgICAgICAgIDxDb25maXJtXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25Db25maXJtfVxuICAgICAgICAgICAgICB0eXBlPXt0aGlzLnByb3BzLmNvbmZpcm1UeXBlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jb25maXJtVGV4dH1cbiAgICAgICAgICAgIDwvQ29uZmlybT5cbiAgICAgICAgICApfVxuICAgICAgICA8L0J1dHRvbnM+XG4gICAgICApO1xuICAgICAgY29uc3QgbGFzdENoaWxkID0gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG4gICAgICBpZiAobGFzdENoaWxkICYmIGxhc3RDaGlsZC50eXBlID09PSBGb290ZXIpIHtcbiAgICAgICAgY2hpbGRyZW4uc3BsaWNlKGNoaWxkcmVuLmxlbmd0aCAtIDEsIDAsIGJ1dHRvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hpbGRyZW4ucHVzaChidXR0b25zKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMuZm9vdGVyKSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKDxGb290ZXIga2V5PVwiZm9vdGVyXCI+e3RoaXMucHJvcHMuZm9vdGVyfTwvRm9vdGVyPik7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8QmFzZURpYWxvZ1xuICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgcmVmPXtiYXNlRGlhbG9nID0+ICh0aGlzLmJhc2VEaWFsb2cgPSBiYXNlRGlhbG9nKX1cbiAgICAgICAgaGFuZGxlS2V5RG93bj17dGhpcy5oYW5kbGVLZXlEb3dufVxuICAgICAgPlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L0Jhc2VEaWFsb2c+XG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1pbXBvcnRzXG5cbmltcG9ydCBjb2xvciBmcm9tICcuLi91dGlsL2NvbG9yJztcblxuLyoqXG4gKiBUaGlzIGZpbGUgYXQgb25lIHBvaW50IHJlcHJlc2VudGVkIG91ciBcImRlZmF1bHRcIiBidXR0b24gY29tcG9uZW50LiBJdCBoYXMgc2luY2VcbiAqIGJlY29tZSBvdXRkYXRlZCwgYW5kIHRodXMgaGFzIGJlZW4gcmVuYW1lZCB0byBMZWdhY3lCdXR0b24uIE5ldyBidXR0b25zIHNob3VsZCB1c2VcbiAqIHRlbXBsYXRlcy9CdXR0b24uanN4XG4gKi9cblxuY29uc3QgQVJST1dfV0lEVEggPSA1ODtcbmNvbnN0IEFSUk9XX0hFSUdIVCA9IEFSUk9XX1dJRFRIICogMjtcbmNvbnN0IEFSUk9XX0JVVFRPTl9IRUlHSFQgPSA0NDsgLy8gb3JpZ2luYWxseSBmcm9tIGNvbW1vbi5zY3NzIC5hcnJvdy10ZXh0IHJ1bGVcbmNvbnN0IEFSUk9XX0JVVFRPTl9QQURESU5HID0gMTA7IC8vIG9yaWdpbmFsbHkgZnJvbSBjb21tb24uc2NzcyAuYXJyb3ctbGVmdCAuYXJyb3ctdGV4dCBydWxlXG5leHBvcnQgY29uc3Qgc3R5bGUgPSB7XG4gIGJhc2U6IHtcbiAgICBib3JkZXJXaWR0aDogMSxcbiAgICBib3JkZXJTdHlsZTogJ3NvbGlkJyxcbiAgICBtaW5XaWR0aDogMTAwLFxuICAgIG1hcmdpblRvcDogMCxcbiAgICBtYXJnaW5Cb3R0b206IDAsXG4gICAgbWFyZ2luTGVmdDogMCxcbiAgICBtYXJnaW5SaWdodDogMCxcbiAgICAnOmhvdmVyJzoge1xuICAgICAgYm94U2hhZG93OiAnMnB4IDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjMpJyxcbiAgICB9LFxuICB9LFxuICBsYXJnZToge1xuICAgIGZvbnRTaXplOiAzNSxcbiAgICBsaW5lSGVpZ2h0OiAnbm9ybWFsJyxcbiAgICBwYWRkaW5nTGVmdDogMTQsXG4gICAgcGFkZGluZ1JpZ2h0OiAxNCxcbiAgfSxcbiAgYXJyb3c6IHtcbiAgICBiYXNlOiB7XG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIGhlaWdodDogQVJST1dfSEVJR0hULFxuICAgICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICB9LFxuICAgIGxlZnQ6IHtcbiAgICAgIHBhZGRpbmdMZWZ0OiBBUlJPV19XSURUSCxcbiAgICB9LFxuICAgIHJpZ2h0OiB7XG4gICAgICBwYWRkaW5nUmlnaHQ6IEFSUk9XX1dJRFRILFxuICAgIH0sXG4gIH0sXG4gIGFycm93SGVhZDoge1xuICAgIGJhc2U6IHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDAsXG4gICAgICBib3JkZXJDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgIGJvcmRlcldpZHRoOiBBUlJPV19XSURUSCxcbiAgICAgIGJvcmRlclN0eWxlOiAnc29saWQnLFxuICAgIH0sXG4gICAgbGVmdDogY29sb3IgPT4gKHtcbiAgICAgIGxlZnQ6IDEwIC0gQVJST1dfV0lEVEgsXG4gICAgICBib3JkZXJSaWdodENvbG9yOiBjb2xvcixcbiAgICB9KSxcbiAgICByaWdodDogY29sb3IgPT4gKHtcbiAgICAgIHJpZ2h0OiAxMCAtIEFSUk9XX1dJRFRILFxuICAgICAgYm9yZGVyTGVmdENvbG9yOiBjb2xvcixcbiAgICB9KSxcbiAgfSxcbn07XG5cbnN0eWxlLndpdGhBcnJvdyA9IHtcbiAgYmFzZToge1xuICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgIHRvcDpcbiAgICAgIChBUlJPV19IRUlHSFQgLVxuICAgICAgICBzdHlsZS5iYXNlLmJvcmRlcldpZHRoIC1cbiAgICAgICAgQVJST1dfQlVUVE9OX1BBRERJTkcgKiAyIC1cbiAgICAgICAgQVJST1dfQlVUVE9OX0hFSUdIVCkgL1xuICAgICAgMixcbiAgICBtYXJnaW5Ub3A6IDAsXG4gICAgbWFyZ2luQm90dG9tOiAwLFxuICAgIG1hcmdpbkxlZnQ6IDAsXG4gICAgbWFyZ2luUmlnaHQ6IDAsXG4gICAgJzpob3Zlcic6IHtcbiAgICAgIGJveFNoYWRvdzogJ25vbmUnLFxuICAgIH0sXG4gIH0sXG4gIGxlZnQ6IHtcbiAgICBwYWRkaW5nTGVmdDogMCxcbiAgfSxcbiAgcmlnaHQ6IHtcbiAgICBwYWRkaW5nUmlnaHQ6IDAsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgQlVUVE9OX1RZUEVTID0ge1xuICBkZWZhdWx0OiB7XG4gICAgc3R5bGU6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3Iud2hpdGUsXG4gICAgICBib3JkZXJDb2xvcjogY29sb3IuY2hhcmNvYWwsXG4gICAgICBjb2xvcjogY29sb3IuY2hhcmNvYWwsXG4gICAgfSxcbiAgfSxcbiAgY2FuY2VsOiB7XG4gICAgc3R5bGU6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3IubmV1dHJhbF93aGl0ZSxcbiAgICAgIGJvcmRlcldpZHRoOiAyLFxuICAgICAgYm9yZGVyU3R5bGU6ICdzb2xpZCcsXG4gICAgICBib3JkZXJDb2xvcjogY29sb3IubmV1dHJhbF9kYXJrLFxuICAgICAgY29sb3I6IGNvbG9yLm5ldXRyYWxfZGFyayxcbiAgICAgICc6aG92ZXInOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3IubmV1dHJhbF9kYXJrMjAsXG4gICAgICAgIGJveFNoYWRvdzogJ25vbmUnLFxuICAgICAgfSxcbiAgICAgICc6Zm9jdXMnOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3IubmV1dHJhbF9kYXJrMjAsXG4gICAgICAgIGJveFNoYWRvdzogJ25vbmUnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBwcmltYXJ5OiB7XG4gICAgc3R5bGU6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3IuYnJhbmRfc2Vjb25kYXJ5X2RlZmF1bHQsXG4gICAgICBib3JkZXJDb2xvcjogY29sb3IuYnJhbmRfc2Vjb25kYXJ5X2RlZmF1bHQsXG4gICAgICBjb2xvcjogY29sb3IubmV1dHJhbF93aGl0ZSxcbiAgICAgICc6aG92ZXInOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3IuYnJhbmRfc2Vjb25kYXJ5X2RhcmssXG4gICAgICAgIGJvcmRlckNvbG9yOiBjb2xvci5icmFuZF9zZWNvbmRhcnlfZGFyayxcbiAgICAgICAgYm94U2hhZG93OiAnbm9uZScsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIGxlZ2FjeVByaW1hcnk6IHtcbiAgICBzdHlsZToge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvci5vcmFuZ2UsXG4gICAgICBib3JkZXJDb2xvcjogY29sb3Iub3JhbmdlLFxuICAgICAgY29sb3I6IGNvbG9yLm5ldXRyYWxfd2hpdGUsXG4gICAgfSxcbiAgfSxcbiAgZGFuZ2VyOiB7XG4gICAgc3R5bGU6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3IucHJvZHVjdF9uZWdhdGl2ZV9kZWZhdWx0LFxuICAgICAgYm9yZGVyQ29sb3I6IGNvbG9yLnByb2R1Y3RfbmVnYXRpdmVfZGVmYXVsdCxcbiAgICAgIGNvbG9yOiBjb2xvci5uZXV0cmFsX3doaXRlLFxuICAgICAgJzpob3Zlcic6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvci5wcm9kdWN0X25lZ2F0aXZlX2RhcmssXG4gICAgICAgIGJvcmRlckNvbG9yOiBjb2xvci5wcm9kdWN0X25lZ2F0aXZlX2RhcmssXG4gICAgICAgIGJveFNoYWRvdzogJ25vbmUnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBhY3Rpb246IHtcbiAgICBzdHlsZToge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvci5wdXJwbGUsXG4gICAgICBib3JkZXJDb2xvcjogY29sb3IucHVycGxlLFxuICAgICAgY29sb3I6IGNvbG9yLndoaXRlLFxuICAgIH0sXG4gIH0sXG59O1xuXG5jb25zdCBCYXNlQnV0dG9uID0gUmFkaXVtKGZ1bmN0aW9uIEJhc2VCdXR0b24oe1xuICB0eXBlLFxuICBjaGlsZHJlbixcbiAgc2l6ZSxcbiAgLi4ucHJvcHNcbn0pIHtcbiAgY29uc3Qgc2l6ZVN0eWxlID0gc3R5bGVbc2l6ZSB8fCAnbm9ybWFsJ107XG4gIGNvbnN0IGNvbmZpZyA9IEJVVFRPTl9UWVBFU1t0eXBlXTtcbiAgbGV0IHN0eWxlQXJyYXkgPSBbc3R5bGUuYmFzZSwgY29uZmlnLnN0eWxlLCBzaXplU3R5bGVdO1xuICByZXR1cm4gKFxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIHsuLi5wcm9wc30gc3R5bGU9e1tzdHlsZUFycmF5LCBwcm9wcy5zdHlsZV19PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvYnV0dG9uPlxuICApO1xufSk7XG5CYXNlQnV0dG9uLnByb3BUeXBlcyA9IHtcbiAgdHlwZTogUHJvcFR5cGVzLm9uZU9mKE9iamVjdC5rZXlzKEJVVFRPTl9UWVBFUykpLFxuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG4gIHNpemU6IFByb3BUeXBlcy5vbmVPZihbJ25vcm1hbCcsICdsYXJnZSddKSxcbn07XG5cbmNvbnN0IEFycm93QnV0dG9uID0gUmFkaXVtKGZ1bmN0aW9uIEFycm93QnV0dG9uKHthcnJvdywgLi4ucHJvcHN9KSB7XG4gIGNvbnN0IGNvbmZpZyA9IEJVVFRPTl9UWVBFU1twcm9wcy50eXBlXTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgaWYgKCFwcm9wcy5zaXplID09PSAnbGFyZ2UnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoaXMgXCIke3Byb3BzLnNpemV9XCIgYnV0dG9uIGNhbid0IHVzZSBhcnJvd3MuYCk7XG4gICAgfVxuICB9XG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17W3N0eWxlLmFycm93LmJhc2UsIHN0eWxlLmFycm93W2Fycm93XSwgcHJvcHMuc3R5bGVdfT5cbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICBzdHlsZS5hcnJvd0hlYWQuYmFzZSxcbiAgICAgICAgICBzdHlsZS5hcnJvd0hlYWRbYXJyb3ddKGNvbmZpZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLFxuICAgICAgICBdfVxuICAgICAgLz5cbiAgICAgIDxCYXNlQnV0dG9uXG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgc3R5bGU9e1tzdHlsZS53aXRoQXJyb3cuYmFzZSwgc3R5bGUud2l0aEFycm93W2Fycm93XV19XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufSk7XG5BcnJvd0J1dHRvbi5wcm9wVHlwZXMgPSBPYmplY3QuYXNzaWduKHt9LCBCYXNlQnV0dG9uLnByb3BUeXBlcywge1xuICBhcnJvdzogUHJvcFR5cGVzLm9uZU9mKFsnbGVmdCcsICdyaWdodCddKS5pc1JlcXVpcmVkLFxufSk7XG5cbmNvbnN0IExlZ2FjeUJ1dHRvbiA9IFJhZGl1bShmdW5jdGlvbiBCdXR0b24ocHJvcHMpIHtcbiAgaWYgKHByb3BzLmFycm93KSB7XG4gICAgcmV0dXJuIDxBcnJvd0J1dHRvbiB7Li4ucHJvcHN9IC8+O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiA8QmFzZUJ1dHRvbiB7Li4ucHJvcHN9IC8+O1xuICB9XG59KTtcbkxlZ2FjeUJ1dHRvbi5wcm9wVHlwZXMgPSBPYmplY3QuYXNzaWduKHt9LCBCYXNlQnV0dG9uLnByb3BUeXBlcywge1xuICBhcnJvdzogUHJvcFR5cGVzLm9uZU9mKFsnbGVmdCcsICdyaWdodCddKSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBMZWdhY3lCdXR0b247XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5mdW5jdGlvbiBjcmVhdGVUaHVua01pZGRsZXdhcmUoZXh0cmFBcmd1bWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoO1xuICAgIHZhciBnZXRTdGF0ZSA9IF9yZWYuZ2V0U3RhdGU7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24oZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYUFyZ3VtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbnZhciB0aHVuayA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZSgpO1xudGh1bmsud2l0aEV4dHJhQXJndW1lbnQgPSBjcmVhdGVUaHVua01pZGRsZXdhcmU7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHRodW5rOyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgU2Nob29sSW5mb0NvbmZpcm1hdGlvbkRpYWxvZyBmcm9tICcuL1NjaG9vbEluZm9Db25maXJtYXRpb25EaWFsb2cnO1xuaW1wb3J0IHthY3Rpb259IGZyb20gJ0BzdG9yeWJvb2svYWRkb24tYWN0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50OiBTY2hvb2xJbmZvQ29uZmlybWF0aW9uRGlhbG9nLFxufTtcblxuLy9cbi8vIFRFTVBMQVRFXG4vL1xuXG5jb25zdCBUZW1wbGF0ZSA9IGFyZ3MgPT4gPFNjaG9vbEluZm9Db25maXJtYXRpb25EaWFsb2cgey4uLmFyZ3N9IC8+O1xuXG4vL1xuLy8gU1RPUklFU1xuLy9cblxuZXhwb3J0IGNvbnN0IERpc3BsYXlTY2hvb2xJbmZvQ29uZmlybWF0aW9uRGlhbG9nID0gVGVtcGxhdGUuYmluZCh7fSk7XG5EaXNwbGF5U2Nob29sSW5mb0NvbmZpcm1hdGlvbkRpYWxvZy5hcmdzID0ge1xuICBzY3JpcHREYXRhOiB7XG4gICAgZm9ybVVybDogJycsXG4gICAgYXV0aFRva2VuTmFtZTogJ2F1dGhfdG9rZW4nLFxuICAgIGF1dGhUb2tlblZhbHVlOiAnZmFrZV9hdXRoX3Rva2VuJyxcbiAgICBleGlzdGluZ1NjaG9vbEluZm86IHt9LFxuICB9LFxuICBvbkNsb3NlOiBhY3Rpb24oJ29uQ2xvc2UgY2FsbGJhY2snKSxcbiAgaXNPcGVuOiB0cnVlLFxufTtcbiJdLCJuYW1lcyI6WyJzdHlsZXMiLCJidXR0b24iLCJtYXJnaW5Ub3AiLCJtYXJnaW5MZWZ0IiwiYnV0dG9uUlRMIiwibWFyZ2luUmlnaHQiLCJ1cGRhdGVCdXR0b24iLCJ1cGRhdGVCdXR0b25SVEwiLCJpbnRybyIsImZvbnRTaXplIiwiZm9udENvbnN0YW50cyIsImNvbG9yIiwiY2hhcmNvYWwiLCJwYWRkaW5nUmlnaHQiLCJzY2hvb2xOYW1lIiwicHVycGxlIiwiZm9udFN0eWxlIiwiYm9keSIsIm1hcmdpbiIsIlNjaG9vbEluZm9Db25maXJtYXRpb25EaWFsb2ciLCJwcm9wcyIsImFuYWx5dGljc1JlcG9ydGVyIiwic2VuZEV2ZW50IiwiRVZFTlRTIiwiVVBEQVRFX1NDSE9PTF9JTkZPX0RJQUxPR19DTE9TRUQiLCJzZXRTdGF0ZSIsImlzT3BlbiIsIm9uQ2xvc2UiLCJDT05GSVJNX1NDSE9PTF9DTElDS0VEIiwic2NyaXB0RGF0YSIsImF1dGhUb2tlbk5hbWUiLCJhdXRoVG9rZW5WYWx1ZSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJmZXRjaCIsImV4aXN0aW5nU2Nob29sSW5mbyIsInVzZXJfc2Nob29sX2luZm9faWQiLCJtZXRob2QiLCJ0aGVuIiwiY2xvc2VNb2RhbCIsImVycm9yIiwiVVBEQVRFX1NDSE9PTF9DTElDS0VEIiwic2hvd1NjaG9vbEludGVyc3RpdGlhbCIsIlVQREFURV9TQ0hPT0xfSU5GT19ESUFMT0dfU0hPV04iLCJzdGF0ZSIsImlzUlRMIiwiZ2V0U3RvcmUiLCJnZXRTdGF0ZSIsImlzUnRsIiwiQm9keSIsInN0eWxlIiwiaTE4biIsInNjaG9vbEluZm9EaWFsb2dEZXNjcmlwdGlvbiIsInNjaG9vbEluZm9EaWFsb2dEZXNjcmlwdGlvblNjaG9vbE5hbWUiLCJ0ZXh0Iiwic2Nob29sSW5mb0RpYWxvZ1VwZGF0ZSIsIkJ1dHRvbiIsIkJ1dHRvbkNvbG9yIiwiYmx1ZSIsIm9uQ2xpY2siLCJoYW5kbGVDbGlja1VwZGF0ZSIsImlkIiwieWVzIiwiYnJhbmRTZWNvbmRhcnlEZWZhdWx0IiwiaGFuZGxlQ2xpY2tZZXMiLCJzY2hvb2xfbmFtZSIsInJlbmRlclNjaG9vbEluZm9ybWF0aW9uRm9ybSIsInRoaXMiLCJyZW5kZXIiLCJoYW5kbGVDbG9zZSIsInJlbmRlckluaXRpYWxDb250ZW50IiwiQ29tcG9uZW50IiwiUHJvcFR5cGVzIiwic3RyaW5nIiwic2hhcGUiLCJmb3JtVXJsIiwiaXNSZXF1aXJlZCIsIm51bWJlciIsInNjaG9vbF9pZCIsImNvdW50cnkiLCJzY2hvb2xfdHlwZSIsImZ1bGxfYWRkcmVzcyIsImZ1bmMiLCJib29sIiwiY2hpbGRyZW5PZlR5cGUiLCJ2YWxpZENoaWxkcmVuVHlwZXMiLCJwcm9wTmFtZSIsImNvbXBvbmVudE5hbWUiLCJFcnJvciIsInByb3AiLCJhY3R1YWxDaGlsZHJlblR5cGVzIiwiUmVhY3QiLCJDaGlsZHJlbiIsIm1hcCIsImVsIiwidHlwZSIsImlzU3Vic2VxdWVuY2UiLCJ0IiwibmFtZSIsImpvaW4iLCJ3aGVuTm9DaGlsZE9mVHlwZXMiLCJ1bmV4cGVjdGVkQ2hpbGRUeXBlcyIsImNoaWxkcmVuIiwiY2hpbGRUeXBlIiwiaW5jbHVkZXMiLCJyZWR1eFN0b3JlIiwiY3JlYXRlU3RvcmVXaXRoUmVkdWNlcnMiLCJleHBlcmltZW50cyIsImlzRW5hYmxlZCIsIndpbmRvdyIsImhhc1JlZHVjZXIiLCJrZXkiLCJnbG9iYWxSZWR1Y2VycyIsInJlZ2lzdGVyUmVkdWNlcnMiLCJyZWR1Y2VycyIsImV4aXN0aW5nUmVkdWNlciIsIk9iamVjdCIsImFzc2lnbiIsInJlcGxhY2VSZWR1Y2VyIiwicmVkdXgiLCJjb21iaW5lUmVkdWNlcnMiLCJjcmVhdGVTdG9yZSIsInJlZHVjZXIiLCJpbml0aWFsU3RhdGUiLCJSRURVWF9MT0dHSU5HIiwicHJvY2VzcyIsImNvbmZpZ3VyZVN0b3JlIiwicHJlbG9hZGVkU3RhdGUiLCJtaWRkbGV3YXJlIiwicmVkdXhUaHVuayIsImRldlRvb2xzIiwia2V5cyIsImxlbmd0aCIsInMiLCJtb2R1bGUiLCJleHBvcnRzIiwiaWNvbiIsImJhY2tncm91bmRTaXplIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwiYmFja2dyb3VuZFJlcGVhdCIsIndpZHRoIiwiaGVpZ2h0IiwiZmxvYXQiLCJ0aXRsZSIsImxpbmVIZWlnaHQiLCJtYXJnaW5Cb3R0b20iLCJ3aGl0ZVNwYWNlIiwiYnV0dG9ucyIsInJpZ2h0QnV0dG9uIiwiYnV0dG9uQ2xlYXIiLCJjbGVhciIsImZvb3RlciIsImJvcmRlckNvbG9yIiwibGlnaHRfZ3JheSIsImJvcmRlclN0eWxlIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJUb3BXaWR0aCIsInBhZGRpbmdUb3AiLCJUaXRsZSIsIkNvbmZpcm0iLCJvdGhlciIsImxvY2FsZSIsImRpYWxvZ09LIiwiQ2FuY2VsIiwiZGlhbG9nQ2FuY2VsIiwiQnV0dG9ucyIsImxlZnRDaGlsZHJlbiIsInRvQXJyYXkiLCJzbGljZSIsInJpZ2h0Q2hpbGQiLCJGb290ZXIiLCJwcm9wVHlwZXMiLCJub2RlIiwiSWNvbiIsIlJhZGl1bSIsInNyYyIsImJhY2tncm91bmRJbWFnZSIsIkRpYWxvZyIsImV2ZW50IiwiZWxlbWVudHMiLCJiYXNlRGlhbG9nIiwiZ2V0VGFiYmFibGVFbGVtZW50cyIsImN1ckluZGV4IiwiZmluZEluZGV4IiwiYnRuIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiZm9jdXMiLCJwcmV2ZW50RGVmYXVsdCIsInB1c2giLCJjb25jYXQiLCJjYW5jZWxUZXh0Iiwib25DYW5jZWwiLCJjb25maXJtVGV4dCIsIm9uQ29uZmlybSIsImNvbmZpcm1UeXBlIiwibGFzdENoaWxkIiwic3BsaWNlIiwicmVmIiwiaGFuZGxlS2V5RG93biIsIkJhc2VEaWFsb2ciLCJiYXNlIiwibWluV2lkdGgiLCJib3hTaGFkb3ciLCJsYXJnZSIsInBhZGRpbmdMZWZ0IiwiYXJyb3ciLCJwb3NpdGlvbiIsIkFSUk9XX1dJRFRIIiwidGV4dEFsaWduIiwiZGlzcGxheSIsImxlZnQiLCJyaWdodCIsImFycm93SGVhZCIsImJvcmRlclJpZ2h0Q29sb3IiLCJib3JkZXJMZWZ0Q29sb3IiLCJ3aXRoQXJyb3ciLCJ0b3AiLCJBUlJPV19CVVRUT05fUEFERElORyIsIkJVVFRPTl9UWVBFUyIsImRlZmF1bHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ3aGl0ZSIsImNhbmNlbCIsIm5ldXRyYWxfd2hpdGUiLCJuZXV0cmFsX2RhcmsiLCJuZXV0cmFsX2RhcmsyMCIsInByaW1hcnkiLCJicmFuZF9zZWNvbmRhcnlfZGVmYXVsdCIsImJyYW5kX3NlY29uZGFyeV9kYXJrIiwibGVnYWN5UHJpbWFyeSIsIm9yYW5nZSIsImRhbmdlciIsInByb2R1Y3RfbmVnYXRpdmVfZGVmYXVsdCIsInByb2R1Y3RfbmVnYXRpdmVfZGFyayIsImFjdGlvbiIsIkJhc2VCdXR0b24iLCJzaXplIiwic2l6ZVN0eWxlIiwiY29uZmlnIiwic3R5bGVBcnJheSIsIm9uZU9mIiwiQXJyb3dCdXR0b24iLCJMZWdhY3lCdXR0b24iLCJjcmVhdGVUaHVua01pZGRsZXdhcmUiLCJleHRyYUFyZ3VtZW50IiwiX3JlZiIsImRpc3BhdGNoIiwibmV4dCIsIl9fZXNNb2R1bGUiLCJ0aHVuayIsIndpdGhFeHRyYUFyZ3VtZW50IiwiY29tcG9uZW50IiwiRGlzcGxheVNjaG9vbEluZm9Db25maXJtYXRpb25EaWFsb2ciLCJUZW1wbGF0ZSIsImFyZ3MiLCJiaW5kIl0sInNvdXJjZVJvb3QiOiIifQ==