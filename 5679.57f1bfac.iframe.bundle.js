"use strict";(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[5679],{"./src/redux/unitSelectionRedux.js":(__unused_webpack_module,exports)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.asyncLoadCoursesWithProgress=exports.START_LOADING_COURSES=exports.SET_SCRIPT=exports.SET_COURSES=exports.FINISHED_LOADING_COURSES=void 0,exports.default=function unitSelection(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments.length>1?arguments[1]:void 0;if(action.type===SET_COURSES){var firstCourse=action.coursesWithProgress[0],firstUnit=firstCourse?firstCourse.units[0]:null;return _objectSpread(_objectSpread({},state),{},{coursesWithProgress:action.coursesWithProgress,scriptId:null===state.scriptId?null==firstUnit?void 0:firstUnit.id:state.scriptId})}if(action.type===SET_SCRIPT)return _objectSpread(_objectSpread({},state),{},{scriptId:action.scriptId});if(action.type===START_LOADING_COURSES)return _objectSpread(_objectSpread({},state),{},{isLoadingCoursesWithProgress:!0});if(action.type===FINISHED_LOADING_COURSES)return _objectSpread(_objectSpread({},state),{},{isLoadingCoursesWithProgress:!1});return state},exports.startLoadingCoursesWithProgress=exports.setScriptId=exports.setCoursesWithProgress=exports.getSelectedScriptName=exports.getSelectedScriptFriendlyName=exports.getSelectedScriptDescription=exports.finishedLoadingCoursesWithProgress=exports.doesCurrentCourseUseFeedback=void 0;var SET_SCRIPT=exports.SET_SCRIPT="unitSelection/SET_SCRIPT",SET_COURSES=exports.SET_COURSES="unitSelection/SET_COURSES",START_LOADING_COURSES=exports.START_LOADING_COURSES="unitSelection/START_LOADING_COURSES",FINISHED_LOADING_COURSES=exports.FINISHED_LOADING_COURSES="unitSelection/FINISHED_LOADING_COURSES",setCoursesWithProgress=(exports.setScriptId=function setScriptId(scriptId){return{type:SET_SCRIPT,scriptId}},exports.setCoursesWithProgress=function setCoursesWithProgress(coursesWithProgress){return{type:SET_COURSES,coursesWithProgress}}),startLoadingCoursesWithProgress=exports.startLoadingCoursesWithProgress=function startLoadingCoursesWithProgress(){return{type:START_LOADING_COURSES}},finishedLoadingCoursesWithProgress=exports.finishedLoadingCoursesWithProgress=function finishedLoadingCoursesWithProgress(){return{type:FINISHED_LOADING_COURSES}},getSelectedUnit=function getSelectedUnit(state){var unit,scriptId=state.unitSelection.scriptId;return scriptId?(state.unitSelection.coursesWithProgress.forEach((function(course){var tempUnit=course.units.find((function(unit){return scriptId===unit.id}));tempUnit&&(unit=tempUnit)})),unit):null},initialState=(exports.getSelectedScriptName=function getSelectedScriptName(state){return getSelectedUnit(state)?getSelectedUnit(state).key:null},exports.getSelectedScriptFriendlyName=function getSelectedScriptFriendlyName(state){return getSelectedUnit(state)?getSelectedUnit(state).name:null},exports.getSelectedScriptDescription=function getSelectedScriptDescription(state){return getSelectedUnit(state)?getSelectedUnit(state).description:null},exports.doesCurrentCourseUseFeedback=function doesCurrentCourseUseFeedback(state){var _getSelectedUnit;return!(null===(_getSelectedUnit=getSelectedUnit(state))||void 0===_getSelectedUnit||!_getSelectedUnit.is_feedback_enabled)},exports.asyncLoadCoursesWithProgress=function asyncLoadCoursesWithProgress(){return function(dispatch,getState){var state=getState(),selectedSection=state.teacherSections.sections[state.teacherSections.selectedSectionId];!state.unitSelection.isLoadingCoursesWithProgress&&selectedSection&&(dispatch(startLoadingCoursesWithProgress()),fetch("/dashboardapi/section_courses/".concat(selectedSection.id),{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(response){if(!response.ok)throw new Error("Error(".concat(response.status,": ").concat(response.statusText,")"));return response.json()})).then((function(coursesWithProgress){var reorderedCourses=[].concat(_toConsumableArray(coursesWithProgress.filter((function(course){return course.id!==selectedSection.course_version_id}))),_toConsumableArray(coursesWithProgress.filter((function(course){return course.id===selectedSection.course_version_id})))).reverse();dispatch(setCoursesWithProgress(reorderedCourses)),dispatch(finishedLoadingCoursesWithProgress())})).catch((function(err){console.error(err.message),dispatch(finishedLoadingCoursesWithProgress())})))}},{scriptId:null,coursesWithProgress:[],isLoadingCoursesWithProgress:!1})},"./src/templates/sectionAssessments/sectionAssessmentsRedux.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.currentStudentHasResponses=exports.countSubmissionsForCurrentAssessment=exports.asyncLoadAssessments=exports.QuestionType=exports.ASSESSMENT_FEEDBACK_OPTION_ID=exports.ALL_STUDENT_FILTER=void 0,exports.default=function sectionAssessments(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments.length>1?arguments[1]:void 0;if(action.type===_unitSelectionRedux.SET_SCRIPT)return _objectSpread(_objectSpread({},state),{},{studentId:ALL_STUDENT_FILTER,questionIndex:0});if(action.type===SET_ASSESSMENT_ID)return _objectSpread(_objectSpread({},state),{},{assessmentId:action.assessmentId,questionIndex:0,studentId:ALL_STUDENT_FILTER});if(action.type===SET_INITIAL_ASSESSMENT_ID){var assessmentId=getFirstAssessmentId(state,action.scriptId);return _objectSpread(_objectSpread({},state),{},{assessmentId})}if(action.type===SET_STUDENT_ID)return _objectSpread(_objectSpread({},state),{},{studentId:action.studentId});if(action.type===SET_QUESTION_INDEX)return _objectSpread(_objectSpread({},state),{},{questionIndex:action.questionIndex});if(action.type===SET_ASSESSMENT_RESPONSES)return _objectSpread(_objectSpread({},state),{},{assessmentResponsesByScript:_objectSpread(_objectSpread({},state.assessmentResponsesByScript),{},_defineProperty({},action.scriptId,action.assessments))});if(action.type===SET_FEEDBACK)return _objectSpread(_objectSpread({},state),{},{feedbackByScript:_objectSpread(_objectSpread({},state.feedbackByScript),{},_defineProperty({},action.scriptId,action.feedback))});if(action.type===SET_SURVEYS)return _objectSpread(_objectSpread({},state),{},{surveysByScript:_objectSpread(_objectSpread({},state.surveysByScript),{},_defineProperty({},action.scriptId,action.surveys))});if(action.type===SET_ASSESSMENTS_QUESTIONS)return _objectSpread(_objectSpread({},state),{},{assessmentQuestionsByScript:_objectSpread(_objectSpread({},state.assessmentQuestionsByScript),{},_defineProperty({},action.scriptId,action.assessments)),assessmentId:parseInt(Object.keys(action.assessments)[0])});if(action.type===START_LOADING_ASSESSMENTS)return _objectSpread(_objectSpread({},state),{},{isLoading:!0});if(action.type===FINISH_LOADING_ASSESSMENTS)return _objectSpread(_objectSpread({},state),{},{isLoading:!1});return state},exports.getAssessmentsFreeResponseResults=exports.getAssessmentResponsesForCurrentScript=exports.finishLoadingAssessments=void 0,exports.getCorrectAnswer=getCorrectAnswer,exports.inProgressFakeTimestamp=exports.getSurveyFreeResponseQuestions=exports.getStudentsMCandMatchSummaryForCurrentAssessment=exports.getStudentMatchResponsesForCurrentAssessment=exports.getStudentMCResponsesForCurrentAssessment=exports.getStudentAnswersForCurrentQuestion=exports.getMultipleChoiceSurveyResults=exports.getMultipleChoiceStructureForCurrentAssessment=exports.getMultipleChoiceSectionSummary=exports.getMatchStructureForCurrentAssessment=exports.getMatchSectionSummary=exports.getExportableSurveyData=exports.getExportableSubmissionStatusData=exports.getExportableFeedbackData=exports.getExportableData=exports.getExportableAssessmentData=exports.getCurrentScriptAssessmentList=exports.getCurrentQuestion=exports.getCurrentAssessmentQuestions=void 0,exports.indexesToAnswerString=indexesToAnswerString,exports.startLoadingAssessments=exports.setSurveys=exports.setStudentId=exports.setQuestionIndex=exports.setInitialAssessmentId=exports.setFeedback=exports.setAssessmentResponses=exports.setAssessmentQuestions=exports.setAssessmentId=exports.notStartedFakeTimestamp=exports.isCurrentScriptCSD=exports.isCurrentAssessmentSurvey=void 0;var _unitSelectionRedux=__webpack_require__("./src/redux/unitSelectionRedux.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ALL_STUDENT_FILTER=exports.ALL_STUDENT_FILTER=0,initialState={assessmentResponsesByScript:{},assessmentQuestionsByScript:{},feedbackByScript:{},surveysByScript:{},isLoading:!1,assessmentId:0,questionIndex:0,studentId:ALL_STUDENT_FILTER},QuestionType=exports.QuestionType={MULTI:"Multi",MATCH:"Match",FREE_RESPONSE:"FreeResponse"},SurveyQuestionType_MULTI="multi",SurveyQuestionType_FREE_RESPONSE="free_response",MultiAnswerStatus_CORRECT="correct",ANSWER_LETTERS=["A","B","C","D","E","F","G","H","I","J","K"],ASSESSMENT_FEEDBACK_OPTION_ID=exports.ASSESSMENT_FEEDBACK_OPTION_ID=0,inProgressFakeTimestamp=exports.inProgressFakeTimestamp=new Date("1990-01-01T20:52:05.000+00:00"),notStartedFakeTimestamp=exports.notStartedFakeTimestamp=new Date("1980-01-01T20:52:05.000+00:00"),SET_ASSESSMENT_RESPONSES="sectionAssessments/SET_ASSESSMENT_RESPONSES",SET_ASSESSMENTS_QUESTIONS="sectionAssessments/SET_ASSESSMENTS_QUESTIONS",SET_FEEDBACK="sectionAssessments/SET_FEEDBACK",SET_SURVEYS="sectionAssessments/SET_SURVEYS",START_LOADING_ASSESSMENTS="sectionAssessments/START_LOADING_ASSESSMENTS",FINISH_LOADING_ASSESSMENTS="sectionAssessments/FINISH_LOADING_ASSESSMENTS",SET_ASSESSMENT_ID="sectionAssessments/SET_ASSESSMENT_ID",SET_INITIAL_ASSESSMENT_ID="sectionAssessments/SET_INITIAL_ASSESSMENT_ID",SET_STUDENT_ID="sectionAssessments/SET_STUDENT_ID",SET_QUESTION_INDEX="sectionAssessments/SET_QUESTION_INDEX",setAssessmentResponses=exports.setAssessmentResponses=function setAssessmentResponses(scriptId,assessments){return{type:SET_ASSESSMENT_RESPONSES,scriptId,assessments}},setAssessmentQuestions=exports.setAssessmentQuestions=function setAssessmentQuestions(scriptId,assessments){return{type:SET_ASSESSMENTS_QUESTIONS,scriptId,assessments}},setFeedback=exports.setFeedback=function setFeedback(scriptId,feedback){return{type:SET_FEEDBACK,scriptId,feedback}},startLoadingAssessments=exports.startLoadingAssessments=function startLoadingAssessments(){return{type:START_LOADING_ASSESSMENTS}},finishLoadingAssessments=exports.finishLoadingAssessments=function finishLoadingAssessments(){return{type:FINISH_LOADING_ASSESSMENTS}},setInitialAssessmentId=(exports.setAssessmentId=function setAssessmentId(assessmentId){return{type:SET_ASSESSMENT_ID,assessmentId}},exports.setInitialAssessmentId=function setInitialAssessmentId(scriptId){return{type:SET_INITIAL_ASSESSMENT_ID,scriptId}}),setSurveys=(exports.setQuestionIndex=function setQuestionIndex(questionIndex){return{type:SET_QUESTION_INDEX,questionIndex}},exports.setStudentId=function setStudentId(studentId){return{type:SET_STUDENT_ID,studentId}},exports.setSurveys=function setSurveys(scriptId,surveys){return{type:SET_SURVEYS,scriptId,surveys}});exports.asyncLoadAssessments=function asyncLoadAssessments(sectionId,scriptId){return function(dispatch,getState){if(!getState().sectionAssessments.assessmentResponsesByScript[scriptId]&&scriptId&&sectionId){dispatch(startLoadingAssessments());var loadResponses=loadAssessmentResponsesFromServer(sectionId,scriptId),loadQuestions=loadAssessmentQuestionsFromServer(scriptId),loadSurveys=loadSurveysFromServer(sectionId,scriptId),loadFeedback=loadFeedbackFromServer(sectionId,scriptId);Promise.all([loadResponses,loadQuestions,loadSurveys,loadFeedback]).then((function(arrayOfValues){dispatch(setAssessmentResponses(scriptId,arrayOfValues[0])),dispatch(setAssessmentQuestions(scriptId,arrayOfValues[1])),dispatch(setFeedback(scriptId,arrayOfValues[3])),dispatch(setSurveys(scriptId,arrayOfValues[2])),dispatch(setInitialAssessmentId(scriptId)),dispatch(finishLoadingAssessments())})).catch((function(error){dispatch(finishLoadingAssessments())}))}}};exports.getCurrentScriptAssessmentList=function getCurrentScriptAssessmentList(state){var tempAssessmentList=computeScriptAssessmentList(state.sectionAssessments,state.unitSelection.scriptId);return(0,_unitSelectionRedux.doesCurrentCourseUseFeedback)(state)&&(tempAssessmentList=tempAssessmentList.concat({id:ASSESSMENT_FEEDBACK_OPTION_ID,name:"All teacher feedback in this unit"})),tempAssessmentList};var getAssessmentResponsesForCurrentScript=exports.getAssessmentResponsesForCurrentScript=function getAssessmentResponsesForCurrentScript(state){return state.sectionAssessments.assessmentResponsesByScript[state.unitSelection.scriptId]||{}},getCurrentAssessmentQuestions=exports.getCurrentAssessmentQuestions=function getCurrentAssessmentQuestions(state){return(state.sectionAssessments.assessmentQuestionsByScript[state.unitSelection.scriptId]||{})[state.sectionAssessments.assessmentId]},isCurrentAssessmentSurvey=(exports.getCurrentQuestion=function getCurrentQuestion(state){var emptyQuestion={question:"",answers:[]};if(isCurrentAssessmentSurvey(state)){var question=(state.sectionAssessments.surveysByScript[state.unitSelection.scriptId]||{})[state.sectionAssessments.assessmentId].levelgroup_results[state.sectionAssessments.questionIndex];return question?{question:question.question,answers:question.type===SurveyQuestionType_MULTI&&question.answer_texts.map((function(answer,index){return{text:answer,correct:!1,letter:ANSWER_LETTERS[index]}}))}:emptyQuestion}var assessmentQuestions=(getCurrentAssessmentQuestions(state)||{}).questions,_question=assessmentQuestions?assessmentQuestions[state.sectionAssessments.questionIndex]:null;if(!_question)return emptyQuestion;if(_question.type===QuestionType.MULTI){var answers=_question.type===QuestionType.MULTI&&(_question.answers||[]).map((function(answer,index){return _objectSpread(_objectSpread({},answer),{},{letter:ANSWER_LETTERS[index]})}));return{question:_question.question_text,answers,questionType:QuestionType.MULTI}}if(_question.type===QuestionType.FREE_RESPONSE)return{question:_question.question_text,answers:null,questionType:QuestionType.FREE_RESPONSE};if(_question.type===QuestionType.MATCH){var _answers=_question.answers.map((function(answer){return answer.text})),options=_question.options.map((function(option){return option.text}));return{question:_question.question,answers:_answers,options,questionType:QuestionType.MATCH}}},exports.getMultipleChoiceStructureForCurrentAssessment=function getMultipleChoiceStructureForCurrentAssessment(state){var assessmentsStructure=getCurrentAssessmentQuestions(state);return assessmentsStructure?assessmentsStructure.questions.filter((function(question){return question.type===QuestionType.MULTI})).map((function(question){return{id:question.level_id,question:question.question_text,questionNumber:question.question_index+1,correctAnswer:getCorrectAnswer(question.answers)}})):[]},exports.getStudentMCResponsesForCurrentAssessment=function getStudentMCResponsesForCurrentAssessment(state){var studentResponses=getAssessmentResponsesForCurrentScript(state);if(!studentResponses)return{};var studentId=state.sectionAssessments.studentId,studentObject=studentResponses[studentId];if(!studentObject)return{};var currentAssessmentId=state.sectionAssessments.assessmentId,studentAssessment=studentObject.responses_by_assessment[currentAssessmentId];return studentAssessment?{id:studentId,name:studentObject.student_name,studentResponses:studentAssessment.level_results.filter((function(answer){return answer.type===QuestionType.MULTI})).map((function(answer){return{responses:indexesToAnswerString(answer.student_result),isCorrect:answer.status===MultiAnswerStatus_CORRECT}}))}:{}},exports.getMatchStructureForCurrentAssessment=function getMatchStructureForCurrentAssessment(state){var assessmentsStructure=getCurrentAssessmentQuestions(state);return assessmentsStructure?assessmentsStructure.questions.filter((function(question){return question.type===QuestionType.MATCH})).map((function(question){return{id:question.level_id,question:question.question,questionNumber:question.question_index+1,answers:question.answers,options:question.options}})):[]},exports.getStudentMatchResponsesForCurrentAssessment=function getStudentMatchResponsesForCurrentAssessment(state){var studentResponses=getAssessmentResponsesForCurrentScript(state);if(!studentResponses)return{};var studentId=state.sectionAssessments.studentId,studentObject=studentResponses[studentId];if(!studentObject)return{};var currentAssessmentId=state.sectionAssessments.assessmentId,studentAssessment=studentObject.responses_by_assessment[currentAssessmentId];return studentAssessment?{id:studentId,name:studentObject.student_name,studentResponses:studentAssessment.level_results.filter((function(answer){return answer.type===QuestionType.MATCH})).map((function(answer){return{responses:answer.student_result}}))}:{}},exports.getStudentAnswersForCurrentQuestion=function getStudentAnswersForCurrentQuestion(state){var studentResponses=getAssessmentResponsesForCurrentScript(state);if(!studentResponses||isCurrentAssessmentSurvey(state))return[];var questionIndex=state.sectionAssessments.questionIndex,studentAnswers=[];return Object.keys(studentResponses).forEach((function(studentId){studentId=parseInt(studentId,10);var studentObject=studentResponses[studentId],currentAssessmentId=state.sectionAssessments.assessmentId,question=((studentObject.responses_by_assessment[currentAssessmentId]||{}).level_results||[])[questionIndex];question&&question.type===QuestionType.MULTI&&studentAnswers.push({id:studentId,name:studentObject.student_name,answer:question.student_result?indexesToAnswerString(question.student_result):"-",correct:"correct"===question.status})})),studentAnswers},exports.getAssessmentsFreeResponseResults=function getAssessmentsFreeResponseResults(state){var assessmentsStructure=getCurrentAssessmentQuestions(state);if(!assessmentsStructure)return[];var questionsAndResults=assessmentsStructure.questions.filter((function(question){return question.type===QuestionType.FREE_RESPONSE})).map((function(question){return{questionText:question.question_text,questionNumber:question.question_index+1,responses:[]}})),studentResponses=getAssessmentResponsesForCurrentScript(state),currentStudentsIds=Object.keys(studentResponses);if(state.sectionAssessments.studentId!==ALL_STUDENT_FILTER){if(!currentStudentHasResponses(state))return[];currentStudentsIds=[state.sectionAssessments.studentId]}return currentStudentsIds.forEach((function(studentId){studentId=parseInt(studentId,10);var studentObject=studentResponses[studentId],currentAssessmentId=state.sectionAssessments.assessmentId;((studentObject.responses_by_assessment[currentAssessmentId]||{}).level_results||[]).filter((function(result){return result.type===QuestionType.FREE_RESPONSE})).forEach((function(response,index){questionsAndResults[index]&&questionsAndResults[index].responses.push({id:studentId,name:studentObject.student_name,response:response.student_result})}))})),questionsAndResults},exports.getSurveyFreeResponseQuestions=function getSurveyFreeResponseQuestions(state){var currentSurvey=(state.sectionAssessments.surveysByScript[state.unitSelection.scriptId]||{})[state.sectionAssessments.assessmentId];return currentSurvey?currentSurvey.levelgroup_results.filter((function(question){return question.type===SurveyQuestionType_FREE_RESPONSE})).map((function(question){return{questionText:question.question,questionNumber:question.question_index+1,answers:question.results.map((function(response,index){return{index,response:response.result}}))}})):[]},exports.getMultipleChoiceSurveyResults=function getMultipleChoiceSurveyResults(state){var currentSurvey=(state.sectionAssessments.surveysByScript[state.unitSelection.scriptId]||{})[state.sectionAssessments.assessmentId];return currentSurvey?currentSurvey.levelgroup_results.filter((function(question){return question.type===SurveyQuestionType_MULTI})).map((function(question,index){for(var totalAnswered=question.results.length,answerTotals=[],i=0;i<question.answer_texts.length;i++)answerTotals[i]=0;for(var notAnswered=0,_i=0;_i<totalAnswered;_i++){var answerIndex=question.results[_i].answer_index;answerIndex>=0?answerTotals[answerIndex]++:notAnswered++}return{id:index,question:question.question,questionNumber:question.question_index+1,answers:question.answer_texts.map((function(answer,index){return{multipleChoiceOption:ANSWER_LETTERS[index],percentAnswered:Math.floor(answerTotals[index]/totalAnswered*100),text:answer}})),notAnswered:Math.floor(notAnswered/totalAnswered*100),totalAnswered}})):[]},exports.isCurrentAssessmentSurvey=function isCurrentAssessmentSurvey(state){var scriptId=state.unitSelection.scriptId,surveysStructure=state.sectionAssessments.surveysByScript[scriptId]||{},currentAssessmentId=state.sectionAssessments.assessmentId;return Object.keys(surveysStructure).includes(currentAssessmentId+"")}),getStudentsMCandMatchSummaryForCurrentAssessment=exports.getStudentsMCandMatchSummaryForCurrentAssessment=function getStudentsMCandMatchSummaryForCurrentAssessment(state){var studentResponses=getAssessmentResponsesForCurrentScript(state);if(!studentResponses)return[];var allStudentsByIds={};state.teacherSections.selectedStudents.forEach((function(student){allStudentsByIds[student.id]={student_name:student.name,responses_by_assessment:{}}})),allStudentsByIds=_objectSpread(_objectSpread({},allStudentsByIds),studentResponses);var currentStudentsIds=Object.keys(allStudentsByIds);return state.sectionAssessments.studentId!==ALL_STUDENT_FILTER&&(currentStudentsIds=[state.sectionAssessments.studentId]),currentStudentsIds.map((function(studentId){studentId=parseInt(studentId,10);var studentsObject=allStudentsByIds[studentId],currentAssessmentId=state.sectionAssessments.assessmentId,studentsAssessment=studentsObject.responses_by_assessment[currentAssessmentId];if(!studentsAssessment)return{id:studentId,name:studentsObject.student_name,isSubmitted:!1,inProgress:!1,submissionTimeStamp:notStartedFakeTimestamp};var inProgress=studentsAssessment.timestamp&&!studentsAssessment.submitted,submissionTimeStamp=inProgress?inProgressFakeTimestamp:new Date(studentsAssessment.timestamp);return{id:studentId,name:studentsObject.student_name,numMultipleChoiceCorrect:studentsAssessment.multi_correct,numMultipleChoice:studentsAssessment.multi_count,numMatchCorrect:studentsAssessment.match_correct,numMatch:studentsAssessment.match_count,inProgress,isSubmitted:studentsAssessment.submitted,submissionTimeStamp,url:studentsAssessment.url}}))},getExportableSurveyData=(exports.getExportableSubmissionStatusData=function getExportableSubmissionStatusData(state){var summaryStudentStatus=[];return getStudentsMCandMatchSummaryForCurrentAssessment(state).forEach((function(student){summaryStudentStatus.push({studentName:student.name,numMultipleChoiceCorrect:student.numMultipleChoiceCorrect,numMultipleChoice:student.numMultipleChoice,numMatchCorrect:student.numMatchCorrect,numMatch:student.numMatch,submissionTimestamp:student.submissionTimeStamp})})),summaryStudentStatus},exports.getMultipleChoiceSectionSummary=function getMultipleChoiceSectionSummary(state){var assessmentsStructure=getCurrentAssessmentQuestions(state);if(!assessmentsStructure)return[];var results=assessmentsStructure.questions.filter((function(question){return question.type===QuestionType.MULTI})).map((function(question){return{id:question.level_id,question:question.question_text,questionNumber:question.question_index+1,answers:question.answers.map((function(answer,index){return{multipleChoiceOption:ANSWER_LETTERS[index],isCorrect:answer.correct,numAnswered:0}})),totalAnswered:0,notAnswered:0}})),studentResponses=getAssessmentResponsesForCurrentScript(state);return studentResponses?(Object.keys(studentResponses).forEach((function(studentId){studentId=parseInt(studentId,10);var studentObject=studentResponses[studentId],currentAssessmentId=state.sectionAssessments.assessmentId;((studentObject.responses_by_assessment[currentAssessmentId]||{}).level_results||[]).filter((function(result){return result.type===QuestionType.MULTI})).forEach((function(response,questionIndex){results[questionIndex].totalAnswered++,"unsubmitted"===response.status?results[questionIndex].notAnswered++:(response.student_result||[]).forEach((function(answer){results[questionIndex].answers[answer].numAnswered++}))}))})),results):[]},exports.getMatchSectionSummary=function getMatchSectionSummary(state){var assessmentsStructure=getCurrentAssessmentQuestions(state);if(!assessmentsStructure)return[];var results=assessmentsStructure.questions.filter((function(question){return question.type===QuestionType.MATCH})).map((function(question){return{id:question.level_id,question:question.question,questionNumber:question.question_index+1,options:question.options.map((function(option,indexO){return{option:question.options[indexO].text,id:indexO,totalAnswered:0,notAnswered:0,answers:question.answers.map((function(answer,indexA){return{answer:question.answers[indexA].text,isCorrect:indexA===indexO,numAnswered:0}}))}}))}})),studentResponses=getAssessmentResponsesForCurrentScript(state);return studentResponses?(Object.keys(studentResponses).forEach((function(studentId){studentId=parseInt(studentId,10);var studentObject=studentResponses[studentId],currentAssessmentId=state.sectionAssessments.assessmentId;((studentObject.responses_by_assessment[currentAssessmentId]||{}).level_results||[]).filter((function(result){return result.type===QuestionType.MATCH})).forEach((function(response,questionIndex){(response.student_result||[]).forEach((function(answer,index){results[questionIndex].options[index].totalAnswered++,"unsubmitted"===response.status[index]?results[questionIndex].options[index].notAnswered++:results[questionIndex].options[index].answers[answer].numAnswered++}))}))})),results):[]},exports.countSubmissionsForCurrentAssessment=function countSubmissionsForCurrentAssessment(state){var currentAssessmentId=state.sectionAssessments.assessmentId;if(!currentAssessmentId)return 0;if(isCurrentAssessmentSurvey(state)){var currentSurvey=(state.sectionAssessments.surveysByScript[state.unitSelection.scriptId]||{})[currentAssessmentId];return currentSurvey&&0!==currentSurvey.levelgroup_results.length?currentSurvey.levelgroup_results[0].results.length:0}var studentResponses=getAssessmentResponsesForCurrentScript(state),totalSubmissions=0;return Object.values(studentResponses).forEach((function(student){Object.keys(student.responses_by_assessment).includes(currentAssessmentId+"")&&totalSubmissions++})),totalSubmissions},exports.getExportableData=function getExportableData(state){return isCurrentAssessmentSurvey(state)?getExportableSurveyData(state):getExportableAssessmentData(state)},exports.getExportableSurveyData=function getExportableSurveyData(state){for(var currentAssessmentId=state.sectionAssessments.assessmentId,currentSurvey=(state.sectionAssessments.surveysByScript[state.unitSelection.scriptId]||{})[currentAssessmentId],responses=[],i=0;i<currentSurvey.levelgroup_results.length;i++){var questionResults=currentSurvey.levelgroup_results[i],rowBase={lesson:currentSurvey.lesson_name,questionNumber:questionResults.question_index+1,questionText:questionResults.question};if(questionResults.type===SurveyQuestionType_MULTI)for(var _loop=function _loop(answerIndex){responses.push(_objectSpread(_objectSpread({},rowBase),{},{answer:questionResults.answer_texts[answerIndex],numberAnswered:questionResults.results.filter((function(result){return result.answer_index===answerIndex})).length}))},answerIndex=0;answerIndex<questionResults.answer_texts.length;answerIndex++)_loop(answerIndex);else if(questionResults.type===SurveyQuestionType_FREE_RESPONSE)for(var j=0;j<questionResults.results.length;j++)responses.push(_objectSpread(_objectSpread({},rowBase),{},{answer:questionResults.results[j].result,numberAnswered:1}))}return responses}),getExportableAssessmentData=exports.getExportableAssessmentData=function getExportableAssessmentData(state){var responses=[],currentAssessmentId=state.sectionAssessments.assessmentId,studentResponses=getAssessmentResponsesForCurrentScript(state);return Object.keys(studentResponses).forEach((function(studentId){studentId=parseInt(studentId,10);var studentObject=studentResponses[studentId],studentAssessment=studentObject.responses_by_assessment[currentAssessmentId];if(studentAssessment&&studentAssessment.level_results)for(var questionIndex=0;questionIndex<studentAssessment.level_results.length;questionIndex++){var response=studentAssessment.level_results[questionIndex];responses.push({studentName:studentObject.student_name,lesson:studentAssessment.lesson,timestamp:studentAssessment.timestamp,question:questionIndex+1,response:response.type===QuestionType.MULTI?indexesToAnswerString(response.student_result):response.student_result,correct:response.status})}})),responses},currentStudentHasResponses=(exports.getExportableFeedbackData=function getExportableFeedbackData(state){var feedback=[],feedbackForCurrentScript=state.sectionAssessments.feedbackByScript[state.unitSelection.scriptId]||{};return Object.keys(feedbackForCurrentScript).forEach((function(feedbackId){feedbackId=parseInt(feedbackId,10),feedback.push(feedbackForCurrentScript[feedbackId])})),feedback},exports.isCurrentScriptCSD=function isCurrentScriptCSD(state){return((0,_unitSelectionRedux.getSelectedScriptName)(state)||"").includes("csd")},exports.currentStudentHasResponses=function currentStudentHasResponses(state){return!!Object.prototype.hasOwnProperty.call(getAssessmentResponsesForCurrentScript(state),state.sectionAssessments.studentId)});function getCorrectAnswer(answerArr){return indexesToAnswerString(answerArr.map((function(_ref,i){return _ref.correct?i:null})).filter((function(i){return null!==i})))}function indexesToAnswerString(answerArr){return answerArr?answerArr.map((function(index){return ANSWER_LETTERS[index]})).join(", "):""}var getFirstAssessmentId=function getFirstAssessmentId(state,scriptId){return computeScriptAssessmentList(state,scriptId).map((function(a){return parseInt(a.id)}))[0]},computeScriptAssessmentList=function computeScriptAssessmentList(state,scriptId){var assessmentStructure=state.assessmentQuestionsByScript[scriptId]||{},assessments=Object.values(assessmentStructure).map((function(assessment){return{id:assessment.id,name:assessment.name}})),surveysStructure=state.surveysByScript[scriptId]||{},surveys=Object.keys(surveysStructure).map((function(surveyId){return{id:parseInt(surveyId),name:surveysStructure[surveyId].lesson_name}}));return assessments.concat(surveys)},loadAssessmentResponsesFromServer=function loadAssessmentResponsesFromServer(sectionId,scriptId){var payload={section_id:sectionId};return scriptId&&(payload.script_id=scriptId),$.ajax({url:"/dashboardapi/assessments/section_responses",method:"GET",contentType:"application/json;charset=UTF-8",data:payload})},loadAssessmentQuestionsFromServer=function loadAssessmentQuestionsFromServer(scriptId){var payload={script_id:scriptId};return $.ajax({url:"/dashboardapi/assessments",method:"GET",contentType:"application/json;charset=UTF-8",data:payload})},loadSurveysFromServer=function loadSurveysFromServer(sectionId,scriptId){var payload={script_id:scriptId,section_id:sectionId};return $.ajax({url:"/dashboardapi/assessments/section_surveys",method:"GET",contentType:"application/json;charset=UTF-8",data:payload})},loadFeedbackFromServer=function loadFeedbackFromServer(sectionId,scriptId){var payload={script_id:scriptId,section_id:sectionId};return $.ajax({url:"/dashboardapi/assessments/section_feedback",method:"GET",contentType:"application/json;charset=UTF-8",data:payload})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxLQUFLLENBQ1p2QyxJQUFLLDZDQUNMdk0sT0FBUSxNQUNSK08sWUFBYSxpQ0FDYkMsS0FBTU4sU0FFVixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxvY2tseS1tb29jLy4vc3JjL3JlZHV4L3VuaXRTZWxlY3Rpb25SZWR1eC5qcyIsIndlYnBhY2s6Ly9ibG9ja2x5LW1vb2MvLi9zcmMvdGVtcGxhdGVzL3NlY3Rpb25Bc3Nlc3NtZW50cy9zZWN0aW9uQXNzZXNzbWVudHNSZWR1eC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBSZWR1Y2VyIGZvciBzY3JpcHQgc2VsZWN0aW9uIGluIHRlYWNoZXIgZGFzaGJvYXJkLlxuLy8gVGFiIHNwZWNpZmljIHJlZHVjZXJzIGNhbiBpbXBvcnQgYWN0aW9ucyBmcm9tIHRoaXMgZmlsZVxuLy8gaWYgdGhleSBuZWVkIHRvIHJlc3BvbmQgdG8gYSBzY3JpcHQgY2hhbmdpbmcuXG5cbi8vIEFjdGlvbiB0eXBlIGNvbnN0YW50c1xuZXhwb3J0IGNvbnN0IFNFVF9TQ1JJUFQgPSAndW5pdFNlbGVjdGlvbi9TRVRfU0NSSVBUJztcbmV4cG9ydCBjb25zdCBTRVRfQ09VUlNFUyA9ICd1bml0U2VsZWN0aW9uL1NFVF9DT1VSU0VTJztcblxuZXhwb3J0IGNvbnN0IFNUQVJUX0xPQURJTkdfQ09VUlNFUyA9ICd1bml0U2VsZWN0aW9uL1NUQVJUX0xPQURJTkdfQ09VUlNFUyc7XG5leHBvcnQgY29uc3QgRklOSVNIRURfTE9BRElOR19DT1VSU0VTID1cbiAgJ3VuaXRTZWxlY3Rpb24vRklOSVNIRURfTE9BRElOR19DT1VSU0VTJztcblxuLy8gQWN0aW9uIGNyZWF0b3JzXG5leHBvcnQgY29uc3Qgc2V0U2NyaXB0SWQgPSBzY3JpcHRJZCA9PiAoe3R5cGU6IFNFVF9TQ1JJUFQsIHNjcmlwdElkfSk7XG5leHBvcnQgY29uc3Qgc2V0Q291cnNlc1dpdGhQcm9ncmVzcyA9IGNvdXJzZXNXaXRoUHJvZ3Jlc3MgPT4gKHtcbiAgdHlwZTogU0VUX0NPVVJTRVMsXG4gIGNvdXJzZXNXaXRoUHJvZ3Jlc3MsXG59KTtcblxuZXhwb3J0IGNvbnN0IHN0YXJ0TG9hZGluZ0NvdXJzZXNXaXRoUHJvZ3Jlc3MgPSAoKSA9PiAoe1xuICB0eXBlOiBTVEFSVF9MT0FESU5HX0NPVVJTRVMsXG59KTtcbmV4cG9ydCBjb25zdCBmaW5pc2hlZExvYWRpbmdDb3Vyc2VzV2l0aFByb2dyZXNzID0gKCkgPT4gKHtcbiAgdHlwZTogRklOSVNIRURfTE9BRElOR19DT1VSU0VTLFxufSk7XG5cbi8vIFNlbGVjdG9yc1xuY29uc3QgZ2V0U2VsZWN0ZWRVbml0ID0gc3RhdGUgPT4ge1xuICBjb25zdCBzY3JpcHRJZCA9IHN0YXRlLnVuaXRTZWxlY3Rpb24uc2NyaXB0SWQ7XG4gIGlmICghc2NyaXB0SWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxldCB1bml0O1xuICBzdGF0ZS51bml0U2VsZWN0aW9uLmNvdXJzZXNXaXRoUHJvZ3Jlc3MuZm9yRWFjaChjb3Vyc2UgPT4ge1xuICAgIGNvbnN0IHRlbXBVbml0ID0gY291cnNlLnVuaXRzLmZpbmQodW5pdCA9PiBzY3JpcHRJZCA9PT0gdW5pdC5pZCk7XG4gICAgaWYgKHRlbXBVbml0KSB7XG4gICAgICB1bml0ID0gdGVtcFVuaXQ7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHVuaXQ7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U2VsZWN0ZWRTY3JpcHROYW1lID0gc3RhdGUgPT4ge1xuICByZXR1cm4gZ2V0U2VsZWN0ZWRVbml0KHN0YXRlKSA/IGdldFNlbGVjdGVkVW5pdChzdGF0ZSkua2V5IDogbnVsbDtcbn07XG5cbi8qIEdldCB0aGUgdXNlciBmcmllbmRseSBuYW1lIG9mIGEgc2NyaXB0KHRoZSB1bml0IG9yIGNvdXJzZSBuYW1lKSAqL1xuZXhwb3J0IGNvbnN0IGdldFNlbGVjdGVkU2NyaXB0RnJpZW5kbHlOYW1lID0gc3RhdGUgPT4ge1xuICByZXR1cm4gZ2V0U2VsZWN0ZWRVbml0KHN0YXRlKSA/IGdldFNlbGVjdGVkVW5pdChzdGF0ZSkubmFtZSA6IG51bGw7XG59O1xuXG4vKiBHZXQgdGhlIGRlc2NyaXB0aW9uIG9mIGEgc2NyaXB0KHRoZSB1bml0IG9yIGNvdXJzZSBuYW1lKSAqL1xuZXhwb3J0IGNvbnN0IGdldFNlbGVjdGVkU2NyaXB0RGVzY3JpcHRpb24gPSBzdGF0ZSA9PiB7XG4gIHJldHVybiBnZXRTZWxlY3RlZFVuaXQoc3RhdGUpID8gZ2V0U2VsZWN0ZWRVbml0KHN0YXRlKS5kZXNjcmlwdGlvbiA6IG51bGw7XG59O1xuXG5leHBvcnQgY29uc3QgZG9lc0N1cnJlbnRDb3Vyc2VVc2VGZWVkYmFjayA9IHN0YXRlID0+IHtcbiAgcmV0dXJuICEhZ2V0U2VsZWN0ZWRVbml0KHN0YXRlKT8uaXNfZmVlZGJhY2tfZW5hYmxlZDtcbn07XG5cbmV4cG9ydCBjb25zdCBhc3luY0xvYWRDb3Vyc2VzV2l0aFByb2dyZXNzID0gKCkgPT4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gIGNvbnN0IHNlbGVjdGVkU2VjdGlvbiA9XG4gICAgc3RhdGUudGVhY2hlclNlY3Rpb25zLnNlY3Rpb25zW3N0YXRlLnRlYWNoZXJTZWN0aW9ucy5zZWxlY3RlZFNlY3Rpb25JZF07XG5cbiAgaWYgKHN0YXRlLnVuaXRTZWxlY3Rpb24uaXNMb2FkaW5nQ291cnNlc1dpdGhQcm9ncmVzcyB8fCAhc2VsZWN0ZWRTZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZGlzcGF0Y2goc3RhcnRMb2FkaW5nQ291cnNlc1dpdGhQcm9ncmVzcygpKTtcblxuICBmZXRjaChgL2Rhc2hib2FyZGFwaS9zZWN0aW9uX2NvdXJzZXMvJHtzZWxlY3RlZFNlY3Rpb24uaWR9YCwge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICB9LFxuICB9KVxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvcigke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0pYCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSlcbiAgICAudGhlbihjb3Vyc2VzV2l0aFByb2dyZXNzID0+IHtcbiAgICAgIC8vIFJlb3JkZXIgY291cnNlc1dpdGhQcm9ncmVzcyBzbyB0aGF0IHRoZSBjdXJyZW50IHNlY3Rpb24gaXMgYXQgdGhlIHRvcCBhbmQgb3RoZXIgc2VjdGlvbnMgYXJlIGluIG9yZGVyIGZyb20gbmV3ZXN0IHRvIG9sZGVzdFxuICAgICAgY29uc3QgcmVvcmRlcmVkQ291cnNlcyA9IFtcbiAgICAgICAgLi4uY291cnNlc1dpdGhQcm9ncmVzcy5maWx0ZXIoXG4gICAgICAgICAgY291cnNlID0+IGNvdXJzZS5pZCAhPT0gc2VsZWN0ZWRTZWN0aW9uLmNvdXJzZV92ZXJzaW9uX2lkXG4gICAgICAgICksXG4gICAgICAgIC4uLmNvdXJzZXNXaXRoUHJvZ3Jlc3MuZmlsdGVyKFxuICAgICAgICAgIGNvdXJzZSA9PiBjb3Vyc2UuaWQgPT09IHNlbGVjdGVkU2VjdGlvbi5jb3Vyc2VfdmVyc2lvbl9pZFxuICAgICAgICApLFxuICAgICAgXS5yZXZlcnNlKCk7XG4gICAgICBkaXNwYXRjaChzZXRDb3Vyc2VzV2l0aFByb2dyZXNzKHJlb3JkZXJlZENvdXJzZXMpKTtcbiAgICAgIGRpc3BhdGNoKGZpbmlzaGVkTG9hZGluZ0NvdXJzZXNXaXRoUHJvZ3Jlc3MoKSk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgZGlzcGF0Y2goZmluaXNoZWRMb2FkaW5nQ291cnNlc1dpdGhQcm9ncmVzcygpKTtcbiAgICB9KTtcbn07XG5cbi8vIEluaXRpYWwgc3RhdGUgb2YgdW5pdFNlbGVjdGlvblJlZHV4XG5jb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gIHNjcmlwdElkOiBudWxsLFxuICBjb3Vyc2VzV2l0aFByb2dyZXNzOiBbXSxcbiAgaXNMb2FkaW5nQ291cnNlc1dpdGhQcm9ncmVzczogZmFsc2UsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1bml0U2VsZWN0aW9uKHN0YXRlID0gaW5pdGlhbFN0YXRlLCBhY3Rpb24pIHtcbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfQ09VUlNFUykge1xuICAgIGxldCBmaXJzdENvdXJzZSA9IGFjdGlvbi5jb3Vyc2VzV2l0aFByb2dyZXNzWzBdO1xuXG4gICAgY29uc3QgZmlyc3RVbml0ID0gZmlyc3RDb3Vyc2UgPyBmaXJzdENvdXJzZS51bml0c1swXSA6IG51bGw7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBjb3Vyc2VzV2l0aFByb2dyZXNzOiBhY3Rpb24uY291cnNlc1dpdGhQcm9ncmVzcyxcbiAgICAgIHNjcmlwdElkOiBzdGF0ZS5zY3JpcHRJZCA9PT0gbnVsbCA/IGZpcnN0VW5pdD8uaWQgOiBzdGF0ZS5zY3JpcHRJZCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfU0NSSVBUKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc2NyaXB0SWQ6IGFjdGlvbi5zY3JpcHRJZCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTVEFSVF9MT0FESU5HX0NPVVJTRVMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBpc0xvYWRpbmdDb3Vyc2VzV2l0aFByb2dyZXNzOiB0cnVlLFxuICAgIH07XG4gIH1cblxuICBpZiAoYWN0aW9uLnR5cGUgPT09IEZJTklTSEVEX0xPQURJTkdfQ09VUlNFUykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGlzTG9hZGluZ0NvdXJzZXNXaXRoUHJvZ3Jlc3M6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gc3RhdGU7XG59XG4iLCJpbXBvcnQge1xuICBTRVRfU0NSSVBULFxuICBnZXRTZWxlY3RlZFNjcmlwdE5hbWUsXG4gIGRvZXNDdXJyZW50Q291cnNlVXNlRmVlZGJhY2ssXG59IGZyb20gJ0BjZG8vYXBwcy9yZWR1eC91bml0U2VsZWN0aW9uUmVkdXgnO1xuXG5leHBvcnQgY29uc3QgQUxMX1NUVURFTlRfRklMVEVSID0gMDtcblxuLyoqXG4gKiBJbml0aWFsIHN0YXRlIG9mIHNlY3Rpb25Bc3Nlc3NtZW50c1JlZHV4XG4gKiBUaGUgcmVkdXggc3RhdGUgbWF0Y2hlcyB0aGUgc3RydWN0dXJlIG9mIG91ciBBUEkgY2FsbHMgYW5kIG91ciB2aWV3cyBkb24ndFxuICogdXNlIHRoaXMgc3RydWN0dXJlIGRpcmVjdGx5LiBTZWxlY3RvcnMgZmlsdGVyIGFuZCB0cmFuc2Zvcm0gZGF0YSB0byB3aGF0IHRoZXkgbmVlZC5cbiAqXG4gKiBhc3Nlc3NtZW50UmVzcG9uc2VzQnlTY3JpcHQgLSBvYmplY3QgLSBrZXlzIGFyZSBzY3JpcHRJZHMsIHZhbHVlcyBhcmUgb2JqZWN0cyBvZlxuICogIHN0dWRlbnQgaWRzIHRvIHN0dWRlbnQgcmVzcG9uc2UgZGF0YSBmb3IgZWFjaCBhc3Nlc3NtZW50XG4gKiBhc3Nlc3NtZW50UXVlc3Rpb25zQnlTY3JpcHQgLSBvYmplY3QgLSBrZXlzIGFyZSBzY3JpcHRJZHMsIHZhbHVlcyBhcmUgb2JqZWN0cyBvZlxuICogICBhc3Nlc3NtZW50SWRzIHRvIHF1ZXN0aW9uIGFuZCBhbnN3ZXIgaW5mb3JtYXRpb24gZm9yIGVhY2ggYXNzZXNzbWVudFxuICogc3VydmV5c0J5U2NyaXB0IC0gb2JqZWN0IC0ga2V5cyBhcmUgc2NyaXB0SWRzLCB2YWx1ZXMgYXJlIG9iamVjdHMgb2ZcbiAqICAgYXNzZXNzbWVudElkcyB0byBzdXJ2ZXkgcXVlc3Rpb25zIGFuZCBhbm9ueW1vdXMgcmVzcG9uc2VzXG4gKiBpc0xvYWRpbmcgLSBib29sZWFuIC0gaW5kaWNhdGVzIHRoYXQgcmVxdWVzdHMgZm9yIGFzc2Vzc21lbnRzIGFuZCBzdXJ2ZXlzIGhhdmUgYmVlblxuICogc2VudCB0byB0aGUgc2VydmVyIGJ1dCB0aGUgY2xpZW50IGhhcyBub3QgeWV0IHJlY2VpdmVkIGEgcmVzcG9uc2VcbiAqIGFzc2Vzc21lbnRJZCAtIGludCAtIHRoZSBsZXZlbF9ncm91cCBpZCBvZiB0aGUgYXNzZXNzbWVudCBjdXJyZW50bHkgaW4gdmlld1xuICogcXVlc3Rpb25JbmRleCAtIGludCAtIHRoZSBxdWVzdGlvbiBpbmRleCBvZiB0aGUgcXVlc3Rpb24gY3VycmVudGx5IGluIHZpZXcgaW4gZGV0YWlsIHZpZXdcbiAqIHN0dWRlbnRJZCAtIGludCAtIHRoZSBzdHVkZW50SWQgb2YgdGhlIGN1cnJlbnQgc3R1ZGVudCBiZWluZyBmaWx0ZXJlZCBmb3IuXG4gKi9cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgYXNzZXNzbWVudFJlc3BvbnNlc0J5U2NyaXB0OiB7fSxcbiAgYXNzZXNzbWVudFF1ZXN0aW9uc0J5U2NyaXB0OiB7fSxcbiAgZmVlZGJhY2tCeVNjcmlwdDoge30sXG4gIHN1cnZleXNCeVNjcmlwdDoge30sXG4gIGlzTG9hZGluZzogZmFsc2UsXG4gIGFzc2Vzc21lbnRJZDogMCxcbiAgcXVlc3Rpb25JbmRleDogMCxcbiAgc3R1ZGVudElkOiBBTExfU1RVREVOVF9GSUxURVIsXG59O1xuXG4vLyBRdWVzdGlvbiB0eXBlcyBmb3IgYXNzZXNzbWVudHMuXG5leHBvcnQgY29uc3QgUXVlc3Rpb25UeXBlID0ge1xuICBNVUxUSTogJ011bHRpJyxcbiAgTUFUQ0g6ICdNYXRjaCcsXG4gIEZSRUVfUkVTUE9OU0U6ICdGcmVlUmVzcG9uc2UnLFxufTtcblxuLy8gUXVlc3Rpb24gdHlwZXMgZm9yIHN1cnZleXMuXG5jb25zdCBTdXJ2ZXlRdWVzdGlvblR5cGUgPSB7XG4gIE1VTFRJOiAnbXVsdGknLFxuICBGUkVFX1JFU1BPTlNFOiAnZnJlZV9yZXNwb25zZScsXG59O1xuXG5jb25zdCBNdWx0aUFuc3dlclN0YXR1cyA9IHtcbiAgQ09SUkVDVDogJ2NvcnJlY3QnLFxuICBJTkNPUlJFQ1Q6ICdpbmNvcnJlY3QnLFxufTtcblxuY29uc3QgQU5TV0VSX0xFVFRFUlMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSyddO1xuXG5leHBvcnQgY29uc3QgQVNTRVNTTUVOVF9GRUVEQkFDS19PUFRJT05fSUQgPSAwO1xuXG4vKiBJbiBvcmRlciBmb3IgdGhlIHNvcnRpbmcgb2YgdGhlIHN1Ym1pc3Npb24gdGltZXN0YW1wIGNvbHVtbiB0byB3b3JrIGNvcnJlY3RseSBpbiB0aGUgU3VibWlzc2lvblN0YXR1c0Fzc2Vzc21lbnRzVGFibGUsIHRoZSBzdWJtaXNzaW9uVGltZVN0YW1wIGZpZWxkIG11c3QgYmUgYSBEYXRlLiBTbywgd2UgcGFzcyBpbiBhcmJpdHJhcnkgRGF0ZXMgaW4gdGhlIHBhc3QgdG8gaGFuZGxlIHdoZW4gdGhlIGFzc2Vzc21lbnQgaXMgaW4gcHJvZ3Jlc3Mgb3Igbm90IHlldCBzdGFydGVkLiAqL1xuZXhwb3J0IGNvbnN0IGluUHJvZ3Jlc3NGYWtlVGltZXN0YW1wID0gbmV3IERhdGUoXG4gICcxOTkwLTAxLTAxVDIwOjUyOjA1LjAwMCswMDowMCdcbik7XG5leHBvcnQgY29uc3Qgbm90U3RhcnRlZEZha2VUaW1lc3RhbXAgPSBuZXcgRGF0ZShcbiAgJzE5ODAtMDEtMDFUMjA6NTI6MDUuMDAwKzAwOjAwJ1xuKTtcblxuLy8gQWN0aW9uIHR5cGUgY29uc3RhbnRzXG5jb25zdCBTRVRfQVNTRVNTTUVOVF9SRVNQT05TRVMgPSAnc2VjdGlvbkFzc2Vzc21lbnRzL1NFVF9BU1NFU1NNRU5UX1JFU1BPTlNFUyc7XG5jb25zdCBTRVRfQVNTRVNTTUVOVFNfUVVFU1RJT05TID1cbiAgJ3NlY3Rpb25Bc3Nlc3NtZW50cy9TRVRfQVNTRVNTTUVOVFNfUVVFU1RJT05TJztcbmNvbnN0IFNFVF9GRUVEQkFDSyA9ICdzZWN0aW9uQXNzZXNzbWVudHMvU0VUX0ZFRURCQUNLJztcbmNvbnN0IFNFVF9TVVJWRVlTID0gJ3NlY3Rpb25Bc3Nlc3NtZW50cy9TRVRfU1VSVkVZUyc7XG5jb25zdCBTVEFSVF9MT0FESU5HX0FTU0VTU01FTlRTID1cbiAgJ3NlY3Rpb25Bc3Nlc3NtZW50cy9TVEFSVF9MT0FESU5HX0FTU0VTU01FTlRTJztcbmNvbnN0IEZJTklTSF9MT0FESU5HX0FTU0VTU01FTlRTID1cbiAgJ3NlY3Rpb25Bc3Nlc3NtZW50cy9GSU5JU0hfTE9BRElOR19BU1NFU1NNRU5UUyc7XG5jb25zdCBTRVRfQVNTRVNTTUVOVF9JRCA9ICdzZWN0aW9uQXNzZXNzbWVudHMvU0VUX0FTU0VTU01FTlRfSUQnO1xuY29uc3QgU0VUX0lOSVRJQUxfQVNTRVNTTUVOVF9JRCA9XG4gICdzZWN0aW9uQXNzZXNzbWVudHMvU0VUX0lOSVRJQUxfQVNTRVNTTUVOVF9JRCc7XG5jb25zdCBTRVRfU1RVREVOVF9JRCA9ICdzZWN0aW9uQXNzZXNzbWVudHMvU0VUX1NUVURFTlRfSUQnO1xuY29uc3QgU0VUX1FVRVNUSU9OX0lOREVYID0gJ3NlY3Rpb25Bc3Nlc3NtZW50cy9TRVRfUVVFU1RJT05fSU5ERVgnO1xuXG4vLyBBY3Rpb24gY3JlYXRvcnNcbmV4cG9ydCBjb25zdCBzZXRBc3Nlc3NtZW50UmVzcG9uc2VzID0gKHNjcmlwdElkLCBhc3Nlc3NtZW50cykgPT4gKHtcbiAgdHlwZTogU0VUX0FTU0VTU01FTlRfUkVTUE9OU0VTLFxuICBzY3JpcHRJZCxcbiAgYXNzZXNzbWVudHMsXG59KTtcbmV4cG9ydCBjb25zdCBzZXRBc3Nlc3NtZW50UXVlc3Rpb25zID0gKHNjcmlwdElkLCBhc3Nlc3NtZW50cykgPT4gKHtcbiAgdHlwZTogU0VUX0FTU0VTU01FTlRTX1FVRVNUSU9OUyxcbiAgc2NyaXB0SWQsXG4gIGFzc2Vzc21lbnRzLFxufSk7XG5leHBvcnQgY29uc3Qgc2V0RmVlZGJhY2sgPSAoc2NyaXB0SWQsIGZlZWRiYWNrKSA9PiAoe1xuICB0eXBlOiBTRVRfRkVFREJBQ0ssXG4gIHNjcmlwdElkLFxuICBmZWVkYmFjayxcbn0pO1xuZXhwb3J0IGNvbnN0IHN0YXJ0TG9hZGluZ0Fzc2Vzc21lbnRzID0gKCkgPT4gKHtcbiAgdHlwZTogU1RBUlRfTE9BRElOR19BU1NFU1NNRU5UUyxcbn0pO1xuZXhwb3J0IGNvbnN0IGZpbmlzaExvYWRpbmdBc3Nlc3NtZW50cyA9ICgpID0+ICh7XG4gIHR5cGU6IEZJTklTSF9MT0FESU5HX0FTU0VTU01FTlRTLFxufSk7XG5leHBvcnQgY29uc3Qgc2V0QXNzZXNzbWVudElkID0gYXNzZXNzbWVudElkID0+ICh7XG4gIHR5cGU6IFNFVF9BU1NFU1NNRU5UX0lELFxuICBhc3Nlc3NtZW50SWQ6IGFzc2Vzc21lbnRJZCxcbn0pO1xuZXhwb3J0IGNvbnN0IHNldEluaXRpYWxBc3Nlc3NtZW50SWQgPSBzY3JpcHRJZCA9PiAoe1xuICB0eXBlOiBTRVRfSU5JVElBTF9BU1NFU1NNRU5UX0lELFxuICBzY3JpcHRJZDogc2NyaXB0SWQsXG59KTtcbmV4cG9ydCBjb25zdCBzZXRRdWVzdGlvbkluZGV4ID0gcXVlc3Rpb25JbmRleCA9PiAoe1xuICB0eXBlOiBTRVRfUVVFU1RJT05fSU5ERVgsXG4gIHF1ZXN0aW9uSW5kZXg6IHF1ZXN0aW9uSW5kZXgsXG59KTtcbmV4cG9ydCBjb25zdCBzZXRTdHVkZW50SWQgPSBzdHVkZW50SWQgPT4gKHtcbiAgdHlwZTogU0VUX1NUVURFTlRfSUQsXG4gIHN0dWRlbnRJZDogc3R1ZGVudElkLFxufSk7XG5leHBvcnQgY29uc3Qgc2V0U3VydmV5cyA9IChzY3JpcHRJZCwgc3VydmV5cykgPT4gKHtcbiAgdHlwZTogU0VUX1NVUlZFWVMsXG4gIHNjcmlwdElkLFxuICBzdXJ2ZXlzLFxufSk7XG5cbmV4cG9ydCBjb25zdCBhc3luY0xvYWRBc3Nlc3NtZW50cyA9IChzZWN0aW9uSWQsIHNjcmlwdElkKSA9PiB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpLnNlY3Rpb25Bc3Nlc3NtZW50cztcblxuICAgIC8vIERvbid0IGxvYWQgZGF0YSBpZiBpdCdzIGFscmVhZHkgc3RvcmVkIG9yIGlmIHRoZXJlIGlzIG5vIHNjcmlwdCBvciBubyBzZWN0aW9uIHNlbGVjdGVkLlxuICAgIGlmIChcbiAgICAgIHN0YXRlLmFzc2Vzc21lbnRSZXNwb25zZXNCeVNjcmlwdFtzY3JpcHRJZF0gfHxcbiAgICAgICFzY3JpcHRJZCB8fFxuICAgICAgIXNlY3Rpb25JZFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRpc3BhdGNoKHN0YXJ0TG9hZGluZ0Fzc2Vzc21lbnRzKCkpO1xuXG4gICAgY29uc3QgbG9hZFJlc3BvbnNlcyA9IGxvYWRBc3Nlc3NtZW50UmVzcG9uc2VzRnJvbVNlcnZlcihcbiAgICAgIHNlY3Rpb25JZCxcbiAgICAgIHNjcmlwdElkXG4gICAgKTtcbiAgICBjb25zdCBsb2FkUXVlc3Rpb25zID0gbG9hZEFzc2Vzc21lbnRRdWVzdGlvbnNGcm9tU2VydmVyKHNjcmlwdElkKTtcbiAgICBjb25zdCBsb2FkU3VydmV5cyA9IGxvYWRTdXJ2ZXlzRnJvbVNlcnZlcihzZWN0aW9uSWQsIHNjcmlwdElkKTtcbiAgICBjb25zdCBsb2FkRmVlZGJhY2sgPSBsb2FkRmVlZGJhY2tGcm9tU2VydmVyKHNlY3Rpb25JZCwgc2NyaXB0SWQpO1xuXG4gICAgUHJvbWlzZS5hbGwoW2xvYWRSZXNwb25zZXMsIGxvYWRRdWVzdGlvbnMsIGxvYWRTdXJ2ZXlzLCBsb2FkRmVlZGJhY2tdKVxuICAgICAgLnRoZW4oYXJyYXlPZlZhbHVlcyA9PiB7XG4gICAgICAgIGRpc3BhdGNoKHNldEFzc2Vzc21lbnRSZXNwb25zZXMoc2NyaXB0SWQsIGFycmF5T2ZWYWx1ZXNbMF0pKTtcbiAgICAgICAgZGlzcGF0Y2goc2V0QXNzZXNzbWVudFF1ZXN0aW9ucyhzY3JpcHRJZCwgYXJyYXlPZlZhbHVlc1sxXSkpO1xuICAgICAgICBkaXNwYXRjaChzZXRGZWVkYmFjayhzY3JpcHRJZCwgYXJyYXlPZlZhbHVlc1szXSkpO1xuICAgICAgICBkaXNwYXRjaChzZXRTdXJ2ZXlzKHNjcmlwdElkLCBhcnJheU9mVmFsdWVzWzJdKSk7XG4gICAgICAgIGRpc3BhdGNoKHNldEluaXRpYWxBc3Nlc3NtZW50SWQoc2NyaXB0SWQpKTtcbiAgICAgICAgZGlzcGF0Y2goZmluaXNoTG9hZGluZ0Fzc2Vzc21lbnRzKCkpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIC8vIElmIGFueSByZXR1cm4gYW4gZXJyb3IsIHRoZSBVSSB3aWxsIHNob3cgdGhhdCB0aGVyZSBhcmUgbm8gYXNzZXNzbWVudHMuXG4gICAgICAgIGRpc3BhdGNoKGZpbmlzaExvYWRpbmdBc3Nlc3NtZW50cygpKTtcbiAgICAgIH0pO1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2VjdGlvbkFzc2Vzc21lbnRzKHN0YXRlID0gaW5pdGlhbFN0YXRlLCBhY3Rpb24pIHtcbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfU0NSSVBUKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc3R1ZGVudElkOiBBTExfU1RVREVOVF9GSUxURVIsXG4gICAgICBxdWVzdGlvbkluZGV4OiAwLFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfQVNTRVNTTUVOVF9JRCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGFzc2Vzc21lbnRJZDogYWN0aW9uLmFzc2Vzc21lbnRJZCxcbiAgICAgIHF1ZXN0aW9uSW5kZXg6IDAsXG4gICAgICBzdHVkZW50SWQ6IEFMTF9TVFVERU5UX0ZJTFRFUixcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gU0VUX0lOSVRJQUxfQVNTRVNTTUVOVF9JRCkge1xuICAgIGNvbnN0IGFzc2Vzc21lbnRJZCA9IGdldEZpcnN0QXNzZXNzbWVudElkKHN0YXRlLCBhY3Rpb24uc2NyaXB0SWQpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGFzc2Vzc21lbnRJZCxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gU0VUX1NUVURFTlRfSUQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBzdHVkZW50SWQ6IGFjdGlvbi5zdHVkZW50SWQsXG4gICAgfTtcbiAgfVxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFNFVF9RVUVTVElPTl9JTkRFWCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHF1ZXN0aW9uSW5kZXg6IGFjdGlvbi5xdWVzdGlvbkluZGV4LFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfQVNTRVNTTUVOVF9SRVNQT05TRVMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBhc3Nlc3NtZW50UmVzcG9uc2VzQnlTY3JpcHQ6IHtcbiAgICAgICAgLi4uc3RhdGUuYXNzZXNzbWVudFJlc3BvbnNlc0J5U2NyaXB0LFxuICAgICAgICBbYWN0aW9uLnNjcmlwdElkXTogYWN0aW9uLmFzc2Vzc21lbnRzLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gU0VUX0ZFRURCQUNLKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgZmVlZGJhY2tCeVNjcmlwdDoge1xuICAgICAgICAuLi5zdGF0ZS5mZWVkYmFja0J5U2NyaXB0LFxuICAgICAgICBbYWN0aW9uLnNjcmlwdElkXTogYWN0aW9uLmZlZWRiYWNrLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gU0VUX1NVUlZFWVMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBzdXJ2ZXlzQnlTY3JpcHQ6IHtcbiAgICAgICAgLi4uc3RhdGUuc3VydmV5c0J5U2NyaXB0LFxuICAgICAgICBbYWN0aW9uLnNjcmlwdElkXTogYWN0aW9uLnN1cnZleXMsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgaWYgKGFjdGlvbi50eXBlID09PSBTRVRfQVNTRVNTTUVOVFNfUVVFU1RJT05TKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgYXNzZXNzbWVudFF1ZXN0aW9uc0J5U2NyaXB0OiB7XG4gICAgICAgIC4uLnN0YXRlLmFzc2Vzc21lbnRRdWVzdGlvbnNCeVNjcmlwdCxcbiAgICAgICAgW2FjdGlvbi5zY3JpcHRJZF06IGFjdGlvbi5hc3Nlc3NtZW50cyxcbiAgICAgIH0sXG4gICAgICAvLyBEZWZhdWx0IHRoZSBhc3Nlc3NtZW50SWQgdG8gdGhlIGZpcnN0IGFzc2Vzc21lbnQgaW4gdGhlIHN0cnVjdHVyZVxuICAgICAgYXNzZXNzbWVudElkOiBwYXJzZUludChPYmplY3Qua2V5cyhhY3Rpb24uYXNzZXNzbWVudHMpWzBdKSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gU1RBUlRfTE9BRElOR19BU1NFU1NNRU5UUykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICB9O1xuICB9XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gRklOSVNIX0xPQURJTkdfQVNTRVNTTUVOVFMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gc3RhdGU7XG59XG5cbi8vIFNlbGVjdG9yIGZ1bmN0aW9uc1xuXG4vLyBSZXR1cm5zIGFuIGFycmF5IG9mIG9iamVjdHMsIGVhY2ggaW5kaWNhdGluZyBhbiBhc3Nlc3NtZW50IG5hbWUgYW5kIGl0J3MgaWRcbi8vIGZvciB0aGUgYXNzZXNzbWVudHMgYW5kIHN1cnZleXMgaW4gdGhlIGN1cnJlbnQgc2NyaXB0LlxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRTY3JpcHRBc3Nlc3NtZW50TGlzdCA9IHN0YXRlID0+IHtcbiAgbGV0IHRlbXBBc3Nlc3NtZW50TGlzdCA9IGNvbXB1dGVTY3JpcHRBc3Nlc3NtZW50TGlzdChcbiAgICBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMsXG4gICAgc3RhdGUudW5pdFNlbGVjdGlvbi5zY3JpcHRJZFxuICApO1xuICAvKiBPbmx5IGFkZCB0aGUgZmVlZGJhY2sgb3B0aW9uIHRvIHRoZSBkcm9wZG93biBmb3IgQ1NEIGFuZCBDU1AgKi9cbiAgaWYgKGRvZXNDdXJyZW50Q291cnNlVXNlRmVlZGJhY2soc3RhdGUpKSB7XG4gICAgdGVtcEFzc2Vzc21lbnRMaXN0ID0gdGVtcEFzc2Vzc21lbnRMaXN0LmNvbmNhdCh7XG4gICAgICBpZDogQVNTRVNTTUVOVF9GRUVEQkFDS19PUFRJT05fSUQsXG4gICAgICBuYW1lOiAnQWxsIHRlYWNoZXIgZmVlZGJhY2sgaW4gdGhpcyB1bml0JyxcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGVtcEFzc2Vzc21lbnRMaXN0O1xufTtcblxuLy8gR2V0IHRoZSBzdHVkZW50IHJlc3BvbnNlcyBmb3IgYXNzZXNzbWVudHMgaW4gdGhlIGN1cnJlbnQgc2NyaXB0IGFuZCBjdXJyZW50IGFzc2Vzc21lbnRcbmV4cG9ydCBjb25zdCBnZXRBc3Nlc3NtZW50UmVzcG9uc2VzRm9yQ3VycmVudFNjcmlwdCA9IHN0YXRlID0+IHtcbiAgcmV0dXJuIChcbiAgICBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuYXNzZXNzbWVudFJlc3BvbnNlc0J5U2NyaXB0W1xuICAgICAgc3RhdGUudW5pdFNlbGVjdGlvbi5zY3JpcHRJZFxuICAgIF0gfHwge31cbiAgKTtcbn07XG5cbi8vIEdldCB0aGUgcXVlc3Rpb24gc3RydWN0dXJlIGZvciBhc3Nlc3NtZW50cyBpbiB0aGUgY3VycmVudCBzY3JpcHQgYW5kIGN1cnJlbnQgYXNzZXNzbWVudFxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRBc3Nlc3NtZW50UXVlc3Rpb25zID0gc3RhdGUgPT4ge1xuICBjb25zdCBjdXJyZW50U2NyaXB0RGF0YSA9XG4gICAgc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRRdWVzdGlvbnNCeVNjcmlwdFtcbiAgICAgIHN0YXRlLnVuaXRTZWxlY3Rpb24uc2NyaXB0SWRcbiAgICBdIHx8IHt9O1xuICByZXR1cm4gY3VycmVudFNjcmlwdERhdGFbc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRJZF07XG59O1xuXG4vLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHRoZSBxdWVzdGlvbiB0ZXh0IGFuZCBhbnN3ZXJzIG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWRcbi8vIHF1ZXN0aW9uIGluIHRoZSBjdXJyZW50IGFzc2Vzc21lbnQuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFF1ZXN0aW9uID0gc3RhdGUgPT4ge1xuICBjb25zdCBlbXB0eVF1ZXN0aW9uID0ge3F1ZXN0aW9uOiAnJywgYW5zd2VyczogW119O1xuICBjb25zdCBpc1N1cnZleSA9IGlzQ3VycmVudEFzc2Vzc21lbnRTdXJ2ZXkoc3RhdGUpO1xuICBpZiAoaXNTdXJ2ZXkpIHtcbiAgICBjb25zdCBzdXJ2ZXlzID1cbiAgICAgIHN0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5zdXJ2ZXlzQnlTY3JpcHRbc3RhdGUudW5pdFNlbGVjdGlvbi5zY3JpcHRJZF0gfHxcbiAgICAgIHt9O1xuICAgIGNvbnN0IGN1cnJlbnRTdXJ2ZXkgPSBzdXJ2ZXlzW3N0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5hc3Nlc3NtZW50SWRdO1xuICAgIGNvbnN0IHF1ZXN0aW9uc0RhdGEgPSBjdXJyZW50U3VydmV5LmxldmVsZ3JvdXBfcmVzdWx0cztcbiAgICBjb25zdCBxdWVzdGlvbiA9IHF1ZXN0aW9uc0RhdGFbc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLnF1ZXN0aW9uSW5kZXhdO1xuICAgIGlmIChxdWVzdGlvbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLnF1ZXN0aW9uLFxuICAgICAgICBhbnN3ZXJzOlxuICAgICAgICAgIHF1ZXN0aW9uLnR5cGUgPT09IFN1cnZleVF1ZXN0aW9uVHlwZS5NVUxUSSAmJlxuICAgICAgICAgIHF1ZXN0aW9uLmFuc3dlcl90ZXh0cy5tYXAoKGFuc3dlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHRleHQ6IGFuc3dlcixcbiAgICAgICAgICAgICAgY29ycmVjdDogZmFsc2UsXG4gICAgICAgICAgICAgIGxldHRlcjogQU5TV0VSX0xFVFRFUlNbaW5kZXhdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbXB0eVF1ZXN0aW9uO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgcXVlc3Rpb24gdGV4dCBmb3IgYXNzZXNzbWVudC5cbiAgICBjb25zdCBhc3Nlc3NtZW50ID0gZ2V0Q3VycmVudEFzc2Vzc21lbnRRdWVzdGlvbnMoc3RhdGUpIHx8IHt9O1xuICAgIGNvbnN0IGFzc2Vzc21lbnRRdWVzdGlvbnMgPSBhc3Nlc3NtZW50LnF1ZXN0aW9ucztcbiAgICBjb25zdCBxdWVzdGlvbiA9IGFzc2Vzc21lbnRRdWVzdGlvbnNcbiAgICAgID8gYXNzZXNzbWVudFF1ZXN0aW9uc1tzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMucXVlc3Rpb25JbmRleF1cbiAgICAgIDogbnVsbDtcbiAgICBpZiAocXVlc3Rpb24pIHtcbiAgICAgIGlmIChxdWVzdGlvbi50eXBlID09PSBRdWVzdGlvblR5cGUuTVVMVEkpIHtcbiAgICAgICAgY29uc3QgYW5zd2VycyA9XG4gICAgICAgICAgcXVlc3Rpb24udHlwZSA9PT0gUXVlc3Rpb25UeXBlLk1VTFRJICYmXG4gICAgICAgICAgKHF1ZXN0aW9uLmFuc3dlcnMgfHwgW10pLm1hcCgoYW5zd2VyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsuLi5hbnN3ZXIsIGxldHRlcjogQU5TV0VSX0xFVFRFUlNbaW5kZXhdfTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbi5xdWVzdGlvbl90ZXh0LFxuICAgICAgICAgIGFuc3dlcnM6IGFuc3dlcnMsXG4gICAgICAgICAgcXVlc3Rpb25UeXBlOiBRdWVzdGlvblR5cGUuTVVMVEksXG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYgKHF1ZXN0aW9uLnR5cGUgPT09IFF1ZXN0aW9uVHlwZS5GUkVFX1JFU1BPTlNFKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLnF1ZXN0aW9uX3RleHQsXG4gICAgICAgICAgYW5zd2VyczogbnVsbCxcbiAgICAgICAgICBxdWVzdGlvblR5cGU6IFF1ZXN0aW9uVHlwZS5GUkVFX1JFU1BPTlNFLFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChxdWVzdGlvbi50eXBlID09PSBRdWVzdGlvblR5cGUuTUFUQ0gpIHtcbiAgICAgICAgY29uc3QgYW5zd2VycyA9IHF1ZXN0aW9uLmFuc3dlcnMubWFwKGFuc3dlciA9PiB7XG4gICAgICAgICAgcmV0dXJuIGFuc3dlci50ZXh0O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHF1ZXN0aW9uLm9wdGlvbnMubWFwKG9wdGlvbiA9PiB7XG4gICAgICAgICAgcmV0dXJuIG9wdGlvbi50ZXh0O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBxdWVzdGlvbjogcXVlc3Rpb24ucXVlc3Rpb24sXG4gICAgICAgICAgYW5zd2VyczogYW5zd2VycyxcbiAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgIHF1ZXN0aW9uVHlwZTogUXVlc3Rpb25UeXBlLk1BVENILFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZW1wdHlRdWVzdGlvbjtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBvYmplY3RzLCBlYWNoIG9mIHR5cGUgcXVlc3Rpb25TdHJ1Y3R1cmVQcm9wVHlwZVxuICogaW5kaWNhdGluZyB0aGUgcXVlc3Rpb24gYW5kIGNvcnJlY3QgYW5zd2VycyBmb3IgZWFjaCBtdWx0aXBsZSBjaG9pY2VcbiAqIHF1ZXN0aW9uIGluIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgYXNzZXNzbWVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldE11bHRpcGxlQ2hvaWNlU3RydWN0dXJlRm9yQ3VycmVudEFzc2Vzc21lbnQgPSBzdGF0ZSA9PiB7XG4gIGNvbnN0IGFzc2Vzc21lbnRzU3RydWN0dXJlID0gZ2V0Q3VycmVudEFzc2Vzc21lbnRRdWVzdGlvbnMoc3RhdGUpO1xuICBpZiAoIWFzc2Vzc21lbnRzU3RydWN0dXJlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgcXVlc3Rpb25EYXRhID0gYXNzZXNzbWVudHNTdHJ1Y3R1cmUucXVlc3Rpb25zO1xuXG4gIC8vIFRyYW5zZm9ybSB0aGF0IGRhdGEgaW50byB3aGF0IHdlIG5lZWQgZm9yIHRoaXMgcGFydGljdWxhciB0YWJsZSwgaW4gdGhpcyBjYXNlXG4gIC8vIHF1ZXN0aW9uU3RydWN0dXJlUHJvcFR5cGUgc3RydWN0dXJlLlxuICByZXR1cm4gcXVlc3Rpb25EYXRhXG4gICAgLmZpbHRlcihxdWVzdGlvbiA9PiBxdWVzdGlvbi50eXBlID09PSBRdWVzdGlvblR5cGUuTVVMVEkpXG4gICAgLm1hcChxdWVzdGlvbiA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcXVlc3Rpb24ubGV2ZWxfaWQsXG4gICAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbi5xdWVzdGlvbl90ZXh0LFxuICAgICAgICBxdWVzdGlvbk51bWJlcjogcXVlc3Rpb24ucXVlc3Rpb25faW5kZXggKyAxLFxuICAgICAgICBjb3JyZWN0QW5zd2VyOiBnZXRDb3JyZWN0QW5zd2VyKHF1ZXN0aW9uLmFuc3dlcnMpLFxuICAgICAgfTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBvYmplY3RzLCBlYWNoIG9mIHR5cGUgc3R1ZGVudEFuc3dlckRhdGFQcm9wVHlwZVxuICogaW5kaWNhdGluZyB0aGUgc3R1ZGVudCByZXNwb25zZXMgdG8gbXVsdGlwbGUgY2hvaWNlIHF1ZXN0aW9ucyBmb3IgdGhlXG4gKiBjdXJyZW50bHkgc2VsZWN0ZWQgYXNzZXNzbWVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFN0dWRlbnRNQ1Jlc3BvbnNlc0ZvckN1cnJlbnRBc3Nlc3NtZW50ID0gc3RhdGUgPT4ge1xuICBjb25zdCBzdHVkZW50UmVzcG9uc2VzID0gZ2V0QXNzZXNzbWVudFJlc3BvbnNlc0ZvckN1cnJlbnRTY3JpcHQoc3RhdGUpO1xuICBpZiAoIXN0dWRlbnRSZXNwb25zZXMpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgY29uc3Qgc3R1ZGVudElkID0gc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLnN0dWRlbnRJZDtcbiAgY29uc3Qgc3R1ZGVudE9iamVjdCA9IHN0dWRlbnRSZXNwb25zZXNbc3R1ZGVudElkXTtcbiAgaWYgKCFzdHVkZW50T2JqZWN0KSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgY29uc3QgY3VycmVudEFzc2Vzc21lbnRJZCA9IHN0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5hc3Nlc3NtZW50SWQ7XG4gIGNvbnN0IHN0dWRlbnRBc3Nlc3NtZW50ID1cbiAgICBzdHVkZW50T2JqZWN0LnJlc3BvbnNlc19ieV9hc3Nlc3NtZW50W2N1cnJlbnRBc3Nlc3NtZW50SWRdO1xuXG4gIC8vIElmIHRoZSBzdHVkZW50IGhhcyBub3Qgc3VibWl0dGVkIHRoaXMgYXNzZXNzbWVudCwgZG9uJ3QgZGlzcGxheSByZXN1bHRzLlxuICBpZiAoIXN0dWRlbnRBc3Nlc3NtZW50KSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgLy8gVHJhbnNmb3JtIHRoYXQgZGF0YSBpbnRvIHdoYXQgd2UgbmVlZCBmb3IgdGhpcyBwYXJ0aWN1bGFyIHRhYmxlLCBpbiB0aGlzIGNhc2VcbiAgLy8gaXMgdGhlIHN0cnVjdHVyZSBzdHVkZW50QW5zd2VyRGF0YVByb3BUeXBlXG4gIHJldHVybiB7XG4gICAgaWQ6IHN0dWRlbnRJZCxcbiAgICBuYW1lOiBzdHVkZW50T2JqZWN0LnN0dWRlbnRfbmFtZSxcbiAgICBzdHVkZW50UmVzcG9uc2VzOiBzdHVkZW50QXNzZXNzbWVudC5sZXZlbF9yZXN1bHRzXG4gICAgICAuZmlsdGVyKGFuc3dlciA9PiBhbnN3ZXIudHlwZSA9PT0gUXVlc3Rpb25UeXBlLk1VTFRJKVxuICAgICAgLm1hcChhbnN3ZXIgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc3BvbnNlczogaW5kZXhlc1RvQW5zd2VyU3RyaW5nKGFuc3dlci5zdHVkZW50X3Jlc3VsdCksXG4gICAgICAgICAgaXNDb3JyZWN0OiBhbnN3ZXIuc3RhdHVzID09PSBNdWx0aUFuc3dlclN0YXR1cy5DT1JSRUNULFxuICAgICAgICB9O1xuICAgICAgfSksXG4gIH07XG59O1xuXG4vKlxuICogR2V0IHRoZSBtYXRjaCBxdWVzdGlvbnMgaW4gdGhlIGN1cnJlbnQgYXNzZXNzbWVudFxuICovXG5leHBvcnQgY29uc3QgZ2V0TWF0Y2hTdHJ1Y3R1cmVGb3JDdXJyZW50QXNzZXNzbWVudCA9IHN0YXRlID0+IHtcbiAgY29uc3QgYXNzZXNzbWVudHNTdHJ1Y3R1cmUgPSBnZXRDdXJyZW50QXNzZXNzbWVudFF1ZXN0aW9ucyhzdGF0ZSk7XG4gIGlmICghYXNzZXNzbWVudHNTdHJ1Y3R1cmUpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBxdWVzdGlvbkRhdGEgPSBhc3Nlc3NtZW50c1N0cnVjdHVyZS5xdWVzdGlvbnM7XG5cbiAgLy8gVHJhbnNmb3JtIHRoYXQgZGF0YSBpbnRvIHdoYXQgd2UgbmVlZCBmb3IgdGhpcyBwYXJ0aWN1bGFyIHRhYmxlLCBpbiB0aGlzIGNhc2VcbiAgLy8gcXVlc3Rpb25TdHJ1Y3R1cmVQcm9wVHlwZSBzdHJ1Y3R1cmUuXG4gIHJldHVybiBxdWVzdGlvbkRhdGFcbiAgICAuZmlsdGVyKHF1ZXN0aW9uID0+IHF1ZXN0aW9uLnR5cGUgPT09IFF1ZXN0aW9uVHlwZS5NQVRDSClcbiAgICAubWFwKHF1ZXN0aW9uID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBxdWVzdGlvbi5sZXZlbF9pZCxcbiAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLnF1ZXN0aW9uLFxuICAgICAgICBxdWVzdGlvbk51bWJlcjogcXVlc3Rpb24ucXVlc3Rpb25faW5kZXggKyAxLFxuICAgICAgICBhbnN3ZXJzOiBxdWVzdGlvbi5hbnN3ZXJzLFxuICAgICAgICBvcHRpb25zOiBxdWVzdGlvbi5vcHRpb25zLFxuICAgICAgfTtcbiAgICB9KTtcbn07XG5cbi8qXG4gKiBHZXQgdGhlIG1hdGNoIHF1ZXN0aW9ucyByZXNwb25zZXMgaW4gdGhlIGN1cnJlbnQgYXNzZXNzbWVudFxuICovXG5leHBvcnQgY29uc3QgZ2V0U3R1ZGVudE1hdGNoUmVzcG9uc2VzRm9yQ3VycmVudEFzc2Vzc21lbnQgPSBzdGF0ZSA9PiB7XG4gIGNvbnN0IHN0dWRlbnRSZXNwb25zZXMgPSBnZXRBc3Nlc3NtZW50UmVzcG9uc2VzRm9yQ3VycmVudFNjcmlwdChzdGF0ZSk7XG4gIGlmICghc3R1ZGVudFJlc3BvbnNlcykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBjb25zdCBzdHVkZW50SWQgPSBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuc3R1ZGVudElkO1xuICBjb25zdCBzdHVkZW50T2JqZWN0ID0gc3R1ZGVudFJlc3BvbnNlc1tzdHVkZW50SWRdO1xuICBpZiAoIXN0dWRlbnRPYmplY3QpIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBjb25zdCBjdXJyZW50QXNzZXNzbWVudElkID0gc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRJZDtcbiAgY29uc3Qgc3R1ZGVudEFzc2Vzc21lbnQgPVxuICAgIHN0dWRlbnRPYmplY3QucmVzcG9uc2VzX2J5X2Fzc2Vzc21lbnRbY3VycmVudEFzc2Vzc21lbnRJZF07XG5cbiAgLy8gSWYgdGhlIHN0dWRlbnQgaGFzIG5vdCBzdWJtaXR0ZWQgdGhpcyBhc3Nlc3NtZW50LCBkb24ndCBkaXNwbGF5IHJlc3VsdHMuXG4gIGlmICghc3R1ZGVudEFzc2Vzc21lbnQpIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICAvLyBUcmFuc2Zvcm0gdGhhdCBkYXRhIGludG8gd2hhdCB3ZSBuZWVkIGZvciB0aGlzIHBhcnRpY3VsYXIgdGFibGUsIGluIHRoaXMgY2FzZVxuICAvLyBpcyB0aGUgc3RydWN0dXJlIHN0dWRlbnRBbnN3ZXJEYXRhUHJvcFR5cGVcbiAgcmV0dXJuIHtcbiAgICBpZDogc3R1ZGVudElkLFxuICAgIG5hbWU6IHN0dWRlbnRPYmplY3Quc3R1ZGVudF9uYW1lLFxuICAgIHN0dWRlbnRSZXNwb25zZXM6IHN0dWRlbnRBc3Nlc3NtZW50LmxldmVsX3Jlc3VsdHNcbiAgICAgIC5maWx0ZXIoYW5zd2VyID0+IGFuc3dlci50eXBlID09PSBRdWVzdGlvblR5cGUuTUFUQ0gpXG4gICAgICAubWFwKGFuc3dlciA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVzcG9uc2VzOiBhbnN3ZXIuc3R1ZGVudF9yZXN1bHQsXG4gICAgICAgIH07XG4gICAgICB9KSxcbiAgfTtcbn07XG5cbi8vIEdldCBhbiBhcnJheSBvZiBvYmplY3RzIGluZGljYXRpbmcgd2hhdCBlYWNoIHN0dWRlbnQgYW5zd2VyZWQgZm9yIHRoZSBjdXJyZW50XG4vLyBxdWVzdGlvbiBpbiB2aWV3LlxuZXhwb3J0IGNvbnN0IGdldFN0dWRlbnRBbnN3ZXJzRm9yQ3VycmVudFF1ZXN0aW9uID0gc3RhdGUgPT4ge1xuICBjb25zdCBzdHVkZW50UmVzcG9uc2VzID0gZ2V0QXNzZXNzbWVudFJlc3BvbnNlc0ZvckN1cnJlbnRTY3JpcHQoc3RhdGUpO1xuICBpZiAoIXN0dWRlbnRSZXNwb25zZXMgfHwgaXNDdXJyZW50QXNzZXNzbWVudFN1cnZleShzdGF0ZSkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBxdWVzdGlvbkluZGV4ID0gc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLnF1ZXN0aW9uSW5kZXg7XG4gIGxldCBzdHVkZW50QW5zd2VycyA9IFtdO1xuXG4gIC8vIEZvciBlYWNoIHN0dWRlbnQsIGxvb2sgdXAgdGhlaXIgcmVzcG9uc2VzIHRvIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgYXNzZXNzbWVudC5cbiAgT2JqZWN0LmtleXMoc3R1ZGVudFJlc3BvbnNlcykuZm9yRWFjaChzdHVkZW50SWQgPT4ge1xuICAgIHN0dWRlbnRJZCA9IHBhcnNlSW50KHN0dWRlbnRJZCwgMTApO1xuICAgIGNvbnN0IHN0dWRlbnRPYmplY3QgPSBzdHVkZW50UmVzcG9uc2VzW3N0dWRlbnRJZF07XG4gICAgY29uc3QgY3VycmVudEFzc2Vzc21lbnRJZCA9IHN0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5hc3Nlc3NtZW50SWQ7XG4gICAgbGV0IHN0dWRlbnRBc3Nlc3NtZW50ID1cbiAgICAgIHN0dWRlbnRPYmplY3QucmVzcG9uc2VzX2J5X2Fzc2Vzc21lbnRbY3VycmVudEFzc2Vzc21lbnRJZF0gfHwge307XG5cbiAgICBjb25zdCByZXNwb25zZXNBcnJheSA9IHN0dWRlbnRBc3Nlc3NtZW50LmxldmVsX3Jlc3VsdHMgfHwgW107XG4gICAgY29uc3QgcXVlc3Rpb24gPSByZXNwb25zZXNBcnJheVtxdWVzdGlvbkluZGV4XTtcbiAgICBpZiAocXVlc3Rpb24pIHtcbiAgICAgIGlmIChxdWVzdGlvbi50eXBlID09PSBRdWVzdGlvblR5cGUuTVVMVEkpIHtcbiAgICAgICAgc3R1ZGVudEFuc3dlcnMucHVzaCh7XG4gICAgICAgICAgaWQ6IHN0dWRlbnRJZCxcbiAgICAgICAgICBuYW1lOiBzdHVkZW50T2JqZWN0LnN0dWRlbnRfbmFtZSxcbiAgICAgICAgICBhbnN3ZXI6IHF1ZXN0aW9uLnN0dWRlbnRfcmVzdWx0XG4gICAgICAgICAgICA/IGluZGV4ZXNUb0Fuc3dlclN0cmluZyhxdWVzdGlvbi5zdHVkZW50X3Jlc3VsdClcbiAgICAgICAgICAgIDogJy0nLFxuICAgICAgICAgIGNvcnJlY3Q6IHF1ZXN0aW9uLnN0YXR1cyA9PT0gJ2NvcnJlY3QnLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gc3R1ZGVudEFuc3dlcnM7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2Ygb2JqZWN0cywgZWFjaCByZXByZXNlbnRpbmcgYSBmcmVlIHJlc3BvbnNlIHF1ZXN0aW9uXG4gKiBhbmQgYWxsIHRoZSBzdHVkZW50cycgcmVzcG9uc2VzIHRvIHRoYXQgcXVlc3Rpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBc3Nlc3NtZW50c0ZyZWVSZXNwb25zZVJlc3VsdHMgPSBzdGF0ZSA9PiB7XG4gIGNvbnN0IGFzc2Vzc21lbnRzU3RydWN0dXJlID0gZ2V0Q3VycmVudEFzc2Vzc21lbnRRdWVzdGlvbnMoc3RhdGUpO1xuICBpZiAoIWFzc2Vzc21lbnRzU3RydWN0dXJlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gSW5pdGlhbGl6ZSBhbiBvYmplY3QgZm9yIGVhY2ggcXVlc3Rpb24sIHdpdGggdGhlIHF1ZXN0aW9uVGV4dCBhbmRcbiAgLy8gYW4gZW1wdHkgYXJyYXkgb2YgcmVzcG9uc2VzLlxuICBjb25zdCBxdWVzdGlvbkRhdGEgPSBhc3Nlc3NtZW50c1N0cnVjdHVyZS5xdWVzdGlvbnM7XG4gIGNvbnN0IHF1ZXN0aW9uc0FuZFJlc3VsdHMgPSBxdWVzdGlvbkRhdGFcbiAgICAuZmlsdGVyKHF1ZXN0aW9uID0+IHF1ZXN0aW9uLnR5cGUgPT09IFF1ZXN0aW9uVHlwZS5GUkVFX1JFU1BPTlNFKVxuICAgIC5tYXAocXVlc3Rpb24gPT4gKHtcbiAgICAgIHF1ZXN0aW9uVGV4dDogcXVlc3Rpb24ucXVlc3Rpb25fdGV4dCxcbiAgICAgIHF1ZXN0aW9uTnVtYmVyOiBxdWVzdGlvbi5xdWVzdGlvbl9pbmRleCArIDEsXG4gICAgICByZXNwb25zZXM6IFtdLFxuICAgIH0pKTtcblxuICBjb25zdCBzdHVkZW50UmVzcG9uc2VzID0gZ2V0QXNzZXNzbWVudFJlc3BvbnNlc0ZvckN1cnJlbnRTY3JpcHQoc3RhdGUpO1xuXG4gIGxldCBjdXJyZW50U3R1ZGVudHNJZHMgPSBPYmplY3Qua2V5cyhzdHVkZW50UmVzcG9uc2VzKTtcbiAgLy8gRmlsdGVyIGJ5IGN1cnJlbnQgc2VsZWN0ZWQgc3R1ZGVudC5cbiAgaWYgKHN0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5zdHVkZW50SWQgIT09IEFMTF9TVFVERU5UX0ZJTFRFUikge1xuICAgIGlmICghY3VycmVudFN0dWRlbnRIYXNSZXNwb25zZXMoc3RhdGUpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRTdHVkZW50c0lkcyA9IFtzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuc3R1ZGVudElkXTtcbiAgICB9XG4gIH1cblxuICAvLyBGb3IgZWFjaCBzdHVkZW50LCBsb29rIHVwIHRoZWlyIHJlc3BvbnNlcyB0byB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGFzc2Vzc21lbnQuXG4gIGN1cnJlbnRTdHVkZW50c0lkcy5mb3JFYWNoKHN0dWRlbnRJZCA9PiB7XG4gICAgc3R1ZGVudElkID0gcGFyc2VJbnQoc3R1ZGVudElkLCAxMCk7XG4gICAgY29uc3Qgc3R1ZGVudE9iamVjdCA9IHN0dWRlbnRSZXNwb25zZXNbc3R1ZGVudElkXTtcbiAgICBjb25zdCBjdXJyZW50QXNzZXNzbWVudElkID0gc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRJZDtcbiAgICBsZXQgc3R1ZGVudEFzc2Vzc21lbnQgPVxuICAgICAgc3R1ZGVudE9iamVjdC5yZXNwb25zZXNfYnlfYXNzZXNzbWVudFtjdXJyZW50QXNzZXNzbWVudElkXSB8fCB7fTtcblxuICAgIGNvbnN0IHJlc3BvbnNlc0FycmF5ID0gc3R1ZGVudEFzc2Vzc21lbnQubGV2ZWxfcmVzdWx0cyB8fCBbXTtcbiAgICByZXNwb25zZXNBcnJheVxuICAgICAgLmZpbHRlcihyZXN1bHQgPT4gcmVzdWx0LnR5cGUgPT09IFF1ZXN0aW9uVHlwZS5GUkVFX1JFU1BPTlNFKVxuICAgICAgLmZvckVhY2goKHJlc3BvbnNlLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAocXVlc3Rpb25zQW5kUmVzdWx0c1tpbmRleF0pIHtcbiAgICAgICAgICBxdWVzdGlvbnNBbmRSZXN1bHRzW2luZGV4XS5yZXNwb25zZXMucHVzaCh7XG4gICAgICAgICAgICBpZDogc3R1ZGVudElkLFxuICAgICAgICAgICAgbmFtZTogc3R1ZGVudE9iamVjdC5zdHVkZW50X25hbWUsXG4gICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2Uuc3R1ZGVudF9yZXN1bHQsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHF1ZXN0aW9uc0FuZFJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2Ygb2JqZWN0cywgZWFjaCBvZiB0eXBlIGZyZWVSZXNwb25zZVF1ZXN0aW9uc1Byb3BUeXBlXG4gKiBpbmRpY2F0aW5nIHRoZSBxdWVzdGlvbiBhbmQgcmVzcG9uc2VzIHRvIGZyZWUgcmVzcG9uc2UgcXVlc3Rpb25zIGZvciB0aGVcbiAqIGN1cnJlbnRseSBzZWxlY3RlZCBzdXJ2ZXkuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTdXJ2ZXlGcmVlUmVzcG9uc2VRdWVzdGlvbnMgPSBzdGF0ZSA9PiB7XG4gIGNvbnN0IHN1cnZleXNTdHJ1Y3R1cmUgPVxuICAgIHN0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5zdXJ2ZXlzQnlTY3JpcHRbc3RhdGUudW5pdFNlbGVjdGlvbi5zY3JpcHRJZF0gfHxcbiAgICB7fTtcbiAgY29uc3QgY3VycmVudFN1cnZleSA9IHN1cnZleXNTdHJ1Y3R1cmVbc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRJZF07XG4gIGlmICghY3VycmVudFN1cnZleSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IHF1ZXN0aW9uRGF0YSA9IGN1cnJlbnRTdXJ2ZXkubGV2ZWxncm91cF9yZXN1bHRzO1xuXG4gIHJldHVybiBxdWVzdGlvbkRhdGFcbiAgICAuZmlsdGVyKHF1ZXN0aW9uID0+IHF1ZXN0aW9uLnR5cGUgPT09IFN1cnZleVF1ZXN0aW9uVHlwZS5GUkVFX1JFU1BPTlNFKVxuICAgIC5tYXAocXVlc3Rpb24gPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcXVlc3Rpb25UZXh0OiBxdWVzdGlvbi5xdWVzdGlvbixcbiAgICAgICAgcXVlc3Rpb25OdW1iZXI6IHF1ZXN0aW9uLnF1ZXN0aW9uX2luZGV4ICsgMSxcbiAgICAgICAgYW5zd2VyczogcXVlc3Rpb24ucmVzdWx0cy5tYXAoKHJlc3BvbnNlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHJldHVybiB7aW5kZXg6IGluZGV4LCByZXNwb25zZTogcmVzcG9uc2UucmVzdWx0fTtcbiAgICAgICAgfSksXG4gICAgICB9O1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIG9iamVjdHMsIGVhY2ggb2YgdHlwZSBtdWx0aXBsZUNob2ljZURhdGFQcm9wVHlwZVxuICogaW5kaWNhdGluZyBhIG11bHRpcGxlIGNob2ljZSBxdWVzdGlvbiBhbmQgdGhlIHBlcmNlbnQgb2YgcmVzcG9uc2VzIHJlY2VpdmVkXG4gKiBmb3IgZWFjaCBhbnN3ZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRNdWx0aXBsZUNob2ljZVN1cnZleVJlc3VsdHMgPSBzdGF0ZSA9PiB7XG4gIGNvbnN0IHN1cnZleXNTdHJ1Y3R1cmUgPVxuICAgIHN0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5zdXJ2ZXlzQnlTY3JpcHRbc3RhdGUudW5pdFNlbGVjdGlvbi5zY3JpcHRJZF0gfHxcbiAgICB7fTtcbiAgY29uc3QgY3VycmVudFN1cnZleSA9IHN1cnZleXNTdHJ1Y3R1cmVbc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRJZF07XG4gIGlmICghY3VycmVudFN1cnZleSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IHF1ZXN0aW9uRGF0YSA9IGN1cnJlbnRTdXJ2ZXkubGV2ZWxncm91cF9yZXN1bHRzO1xuXG4gIC8vIEZpbHRlciB0byBtdWx0aXBsZSBjaG9pY2UgcXVlc3Rpb25zLlxuICByZXR1cm4gcXVlc3Rpb25EYXRhXG4gICAgLmZpbHRlcihxdWVzdGlvbiA9PiBxdWVzdGlvbi50eXBlID09PSBTdXJ2ZXlRdWVzdGlvblR5cGUuTVVMVEkpXG4gICAgLm1hcCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAvLyBDYWxjdWxhdGUgdGhlIHRvdGFsIHJlc3BvbnNlcyBmb3IgZWFjaCBhbnN3ZXIuXG5cbiAgICAgIGNvbnN0IHRvdGFsQW5zd2VyZWQgPSBxdWVzdGlvbi5yZXN1bHRzLmxlbmd0aDtcbiAgICAgIC8vIEVhY2ggdmFsdWUgb2YgYW5zd2VyVG90YWxzIHJlcHJlc2VudHMgdGhlIG51bWJlciBvZiByZXNwb25zZXMgcmVjZWl2ZWQgZm9yXG4gICAgICAvLyB0aGUgYW5zd2VyIGluIHRoYXQgaW5kZXguXG4gICAgICBjb25zdCBhbnN3ZXJUb3RhbHMgPSBbXTtcbiAgICAgIC8vIEluaXRpYWxpemUgZWFjaCBhbnN3ZXIgdG8gMCByZXNwb25zZXMuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXN0aW9uLmFuc3dlcl90ZXh0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhbnN3ZXJUb3RhbHNbaV0gPSAwO1xuICAgICAgfVxuICAgICAgbGV0IG5vdEFuc3dlcmVkID0gMDtcblxuICAgICAgLy8gRm9yIGVhY2ggcmVzcG9uc2UsIGFkZCAxIHRvIHRoZSBjb3JyZWN0IHZhbHVlIGluIGFuc3dlclRvdGFscy5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxBbnN3ZXJlZDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFuc3dlckluZGV4ID0gcXVlc3Rpb24ucmVzdWx0c1tpXS5hbnN3ZXJfaW5kZXg7XG4gICAgICAgIGlmIChhbnN3ZXJJbmRleCA+PSAwKSB7XG4gICAgICAgICAgYW5zd2VyVG90YWxzW2Fuc3dlckluZGV4XSsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vdEFuc3dlcmVkKys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGluZGV4LFxuICAgICAgICBxdWVzdGlvbjogcXVlc3Rpb24ucXVlc3Rpb24sXG4gICAgICAgIHF1ZXN0aW9uTnVtYmVyOiBxdWVzdGlvbi5xdWVzdGlvbl9pbmRleCArIDEsXG4gICAgICAgIGFuc3dlcnM6IHF1ZXN0aW9uLmFuc3dlcl90ZXh0cy5tYXAoKGFuc3dlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbXVsdGlwbGVDaG9pY2VPcHRpb246IEFOU1dFUl9MRVRURVJTW2luZGV4XSxcbiAgICAgICAgICAgIHBlcmNlbnRBbnN3ZXJlZDogTWF0aC5mbG9vcihcbiAgICAgICAgICAgICAgKGFuc3dlclRvdGFsc1tpbmRleF0gLyB0b3RhbEFuc3dlcmVkKSAqIDEwMFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRleHQ6IGFuc3dlcixcbiAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgbm90QW5zd2VyZWQ6IE1hdGguZmxvb3IoKG5vdEFuc3dlcmVkIC8gdG90YWxBbnN3ZXJlZCkgKiAxMDApLFxuICAgICAgICB0b3RhbEFuc3dlcmVkOiB0b3RhbEFuc3dlcmVkLFxuICAgICAgfTtcbiAgICB9KTtcbn07XG5cbi8vIFJldHVybnMgYSBib29sZWFuLiAgVGhlIHNlbGVjdG9yIGZ1bmN0aW9uIGNoZWNrcyBpZiB0aGUgY3VycmVudCBhc3Nlc3NtZW50IElkXG4vLyBpcyBpbiB0aGUgc3VydmV5cyBzdHJ1Y3R1cmUuXG5leHBvcnQgY29uc3QgaXNDdXJyZW50QXNzZXNzbWVudFN1cnZleSA9IHN0YXRlID0+IHtcbiAgY29uc3Qgc2NyaXB0SWQgPSBzdGF0ZS51bml0U2VsZWN0aW9uLnNjcmlwdElkO1xuICBjb25zdCBzdXJ2ZXlzU3RydWN0dXJlID1cbiAgICBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuc3VydmV5c0J5U2NyaXB0W3NjcmlwdElkXSB8fCB7fTtcblxuICBjb25zdCBjdXJyZW50QXNzZXNzbWVudElkID0gc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRJZDtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHN1cnZleXNTdHJ1Y3R1cmUpLmluY2x1ZGVzKGN1cnJlbnRBc3Nlc3NtZW50SWQgKyAnJyk7XG59O1xuXG4vKiogR2V0IGRhdGEgZm9yIHN0dWRlbnRzIGFzc2Vzc21lbnRzIG11bHRpcGxlIGNob2ljZSB0YWJsZVxuICogUmV0dXJucyBhbiBvYmplY3QsIGVhY2ggb2YgdHlwZSBzdHVkZW50T3ZlcnZpZXdEYXRhUHJvcFR5cGUgd2l0aFxuICogdGhlIHZhbHVlIG9mIHRoZSBrZXkgYmVpbmcgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIG51bWJlclxuICogb2YgbXVsdGlwbGUgY2hvaWNlIGFuc3dlcmVkIGNvcnJlY3RseSBieSBhIHN0dWRlbnQsIHRvdGFsIG51bWJlclxuICogb2YgbXVsdGlwbGUgY2hvaWNlIG9wdGlvbnMsIGNoZWNrIGZvciBpZiB0aGUgc3R1ZGVudCBzdWJtaXR0ZWQgdGhlXG4gKiBhc3Nlc3NtZW50IGFuZCBhIHRpbWVzdGFtcCB0aGF0IGluZGljYXRlcyB3aGVuIGEgc3R1ZGVudCBzdWJtaXR0ZWRcbiAqIHRoZSBhc3Nlc3NtZW50LlxuICovXG5leHBvcnQgY29uc3QgZ2V0U3R1ZGVudHNNQ2FuZE1hdGNoU3VtbWFyeUZvckN1cnJlbnRBc3Nlc3NtZW50ID0gc3RhdGUgPT4ge1xuICBjb25zdCBzdHVkZW50UmVzcG9uc2VzID0gZ2V0QXNzZXNzbWVudFJlc3BvbnNlc0ZvckN1cnJlbnRTY3JpcHQoc3RhdGUpO1xuICBpZiAoIXN0dWRlbnRSZXNwb25zZXMpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvLyBHZXQgYSBzZXQgb2YgYWxsIHN0dWRlbnRzIGZyb20gdGVhY2hlclNlY3Rpb25zUmVkdXguXG4gIGxldCBhbGxTdHVkZW50c0J5SWRzID0ge307XG4gIHN0YXRlLnRlYWNoZXJTZWN0aW9ucy5zZWxlY3RlZFN0dWRlbnRzLmZvckVhY2goc3R1ZGVudCA9PiB7XG4gICAgYWxsU3R1ZGVudHNCeUlkc1tzdHVkZW50LmlkXSA9IHtcbiAgICAgIHN0dWRlbnRfbmFtZTogc3R1ZGVudC5uYW1lLFxuICAgICAgcmVzcG9uc2VzX2J5X2Fzc2Vzc21lbnQ6IHt9LFxuICAgIH07XG4gIH0pO1xuXG4gIC8vIENvbWJpbmUgdGhlIGxpc3Qgb2YgYWxsIHN0dWRlbnRzIHdpdGggdGhlIGxpc3Qgb2Ygc3R1ZGVudCByZXNwb25zZXMuXG4gIGFsbFN0dWRlbnRzQnlJZHMgPSB7XG4gICAgLi4uYWxsU3R1ZGVudHNCeUlkcyxcbiAgICAuLi5zdHVkZW50UmVzcG9uc2VzLFxuICB9O1xuXG4gIGxldCBjdXJyZW50U3R1ZGVudHNJZHMgPSBPYmplY3Qua2V5cyhhbGxTdHVkZW50c0J5SWRzKTtcbiAgLy8gRmlsdGVyIGJ5IGN1cnJlbnQgc2VsZWN0ZWQgc3R1ZGVudC5cbiAgaWYgKHN0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5zdHVkZW50SWQgIT09IEFMTF9TVFVERU5UX0ZJTFRFUikge1xuICAgIGN1cnJlbnRTdHVkZW50c0lkcyA9IFtzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuc3R1ZGVudElkXTtcbiAgfVxuXG4gIGNvbnN0IHN0dWRlbnRzU3VtbWFyeUFycmF5ID0gY3VycmVudFN0dWRlbnRzSWRzLm1hcChzdHVkZW50SWQgPT4ge1xuICAgIHN0dWRlbnRJZCA9IHBhcnNlSW50KHN0dWRlbnRJZCwgMTApO1xuICAgIGNvbnN0IHN0dWRlbnRzT2JqZWN0ID0gYWxsU3R1ZGVudHNCeUlkc1tzdHVkZW50SWRdO1xuICAgIGNvbnN0IGN1cnJlbnRBc3Nlc3NtZW50SWQgPSBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuYXNzZXNzbWVudElkO1xuICAgIGNvbnN0IHN0dWRlbnRzQXNzZXNzbWVudCA9XG4gICAgICBzdHVkZW50c09iamVjdC5yZXNwb25zZXNfYnlfYXNzZXNzbWVudFtjdXJyZW50QXNzZXNzbWVudElkXTtcblxuICAgIC8vIElmIHRoZSBzdHVkZW50IGhhcyBub3Qgc3VibWl0dGVkIHRoaXMgYXNzZXNzbWVudFxuICAgIGlmICghc3R1ZGVudHNBc3Nlc3NtZW50KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogc3R1ZGVudElkLFxuICAgICAgICBuYW1lOiBzdHVkZW50c09iamVjdC5zdHVkZW50X25hbWUsXG4gICAgICAgIGlzU3VibWl0dGVkOiBmYWxzZSxcbiAgICAgICAgaW5Qcm9ncmVzczogZmFsc2UsXG4gICAgICAgIHN1Ym1pc3Npb25UaW1lU3RhbXA6IG5vdFN0YXJ0ZWRGYWtlVGltZXN0YW1wLFxuICAgICAgfTtcbiAgICB9XG4gICAgLy8gVHJhbnNmb3JtIHRoYXQgZGF0YSBpbnRvIHdoYXQgd2UgbmVlZCBmb3IgdGhpcyBwYXJ0aWN1bGFyIHRhYmxlLCBpbiB0aGlzIGNhc2VcbiAgICAvLyBpdCBpcyB0aGUgc3RydWN0dXJlIHN0dWRlbnRPdmVydmlld0RhdGFQcm9wVHlwZVxuXG4gICAgLyogSW4gcHJvZ3Jlc3MgYXNzZXNzbWVudHMgaGF2ZSBhIHRpbWVzdGFtcCBmcm9tIHRoZSBzZXJ2ZXIgaW5kaWNhdGluZyB3aGVuIHRoZSBzdHVkZW50IGxhc3Qgd29ya2VkIG9uIHRoZSBhc3Nlc3NtZW50LiBXZSBkb24ndCBkaXNwbGF5IHRoYXQgdGltZXN0YW1wIGluIHRoZSBTdWJtaXNzaW9uU3RhdHVzQXNzZXNzbWVudHNUYWJsZSwgYnV0IHdlIHVzZSBpdCBoZXJlIHRvIGNoZWNrIGlmIHRoZSBhc3Nlc3NtZW50IGhhcyBiZWVuIHN0YXJ0ZWQuICovXG4gICAgY29uc3QgaW5Qcm9ncmVzcyA9XG4gICAgICBzdHVkZW50c0Fzc2Vzc21lbnQudGltZXN0YW1wICYmICFzdHVkZW50c0Fzc2Vzc21lbnQuc3VibWl0dGVkO1xuICAgIGNvbnN0IHN1Ym1pc3Npb25UaW1lU3RhbXAgPSBpblByb2dyZXNzXG4gICAgICA/IGluUHJvZ3Jlc3NGYWtlVGltZXN0YW1wXG4gICAgICA6IG5ldyBEYXRlKHN0dWRlbnRzQXNzZXNzbWVudC50aW1lc3RhbXApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBzdHVkZW50SWQsXG4gICAgICBuYW1lOiBzdHVkZW50c09iamVjdC5zdHVkZW50X25hbWUsXG4gICAgICBudW1NdWx0aXBsZUNob2ljZUNvcnJlY3Q6IHN0dWRlbnRzQXNzZXNzbWVudC5tdWx0aV9jb3JyZWN0LFxuICAgICAgbnVtTXVsdGlwbGVDaG9pY2U6IHN0dWRlbnRzQXNzZXNzbWVudC5tdWx0aV9jb3VudCxcbiAgICAgIG51bU1hdGNoQ29ycmVjdDogc3R1ZGVudHNBc3Nlc3NtZW50Lm1hdGNoX2NvcnJlY3QsXG4gICAgICBudW1NYXRjaDogc3R1ZGVudHNBc3Nlc3NtZW50Lm1hdGNoX2NvdW50LFxuICAgICAgaW5Qcm9ncmVzczogaW5Qcm9ncmVzcyxcbiAgICAgIGlzU3VibWl0dGVkOiBzdHVkZW50c0Fzc2Vzc21lbnQuc3VibWl0dGVkLFxuICAgICAgc3VibWlzc2lvblRpbWVTdGFtcDogc3VibWlzc2lvblRpbWVTdGFtcCxcbiAgICAgIHVybDogc3R1ZGVudHNBc3Nlc3NtZW50LnVybCxcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4gc3R1ZGVudHNTdW1tYXJ5QXJyYXk7XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHthcnJheX0gb2Ygb2JqZWN0cyB3aXRoIGtleXMgY29ycmVzcG9uZGluZyB0byBjb2x1bW5zXG4gKiBvZiBDU1YgdG8gZG93bmxvYWQuIENvbHVtbnMgYXJlIGRlZmluZWQgYXMgQ1NWX1NVQk1JU1NJT05fU1RBVFVTX0hFQURFUlMgaW4gU3VibWlzc2lvblN0YXR1c0Fzc2Vzc21lbnRzQ29udGFpbmVyXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRFeHBvcnRhYmxlU3VibWlzc2lvblN0YXR1c0RhdGEgPSBzdGF0ZSA9PiB7XG4gIGxldCBzdW1tYXJ5U3R1ZGVudFN0YXR1cyA9IFtdO1xuICBjb25zdCBzdHVkZW50U3RhdHVzID0gZ2V0U3R1ZGVudHNNQ2FuZE1hdGNoU3VtbWFyeUZvckN1cnJlbnRBc3Nlc3NtZW50KHN0YXRlKTtcblxuICBzdHVkZW50U3RhdHVzLmZvckVhY2goc3R1ZGVudCA9PiB7XG4gICAgc3VtbWFyeVN0dWRlbnRTdGF0dXMucHVzaCh7XG4gICAgICBzdHVkZW50TmFtZTogc3R1ZGVudC5uYW1lLFxuICAgICAgbnVtTXVsdGlwbGVDaG9pY2VDb3JyZWN0OiBzdHVkZW50Lm51bU11bHRpcGxlQ2hvaWNlQ29ycmVjdCxcbiAgICAgIG51bU11bHRpcGxlQ2hvaWNlOiBzdHVkZW50Lm51bU11bHRpcGxlQ2hvaWNlLFxuICAgICAgbnVtTWF0Y2hDb3JyZWN0OiBzdHVkZW50Lm51bU1hdGNoQ29ycmVjdCxcbiAgICAgIG51bU1hdGNoOiBzdHVkZW50Lm51bU1hdGNoLFxuICAgICAgc3VibWlzc2lvblRpbWVzdGFtcDogc3R1ZGVudC5zdWJtaXNzaW9uVGltZVN0YW1wLFxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHN1bW1hcnlTdHVkZW50U3RhdHVzO1xufTtcblxuLy8gUmV0dXJucyBhbiBhcnJheSBvZiBvYmplY3RzIGNvcnJlc3BvbmRpbmcgdG8gZWFjaCBxdWVzdGlvbiBhbmQgdGhlXG4vLyBudW1iZXIgb2Ygc3R1ZGVudHMgd2hvIGFuc3dlcmVkIGVhY2ggYW5zd2VyLlxuZXhwb3J0IGNvbnN0IGdldE11bHRpcGxlQ2hvaWNlU2VjdGlvblN1bW1hcnkgPSBzdGF0ZSA9PiB7XG4gIC8vIFNldCB1cCBhbiBpbml0aWFsIHN0cnVjdHVyZSBiYXNlZCBvbiB0aGUgbXVsdGlwbGUgY2hvaWNlIGFzc2Vzc21lbnQgcXVlc3Rpb25zLlxuICAvLyBJbml0aWFsaXplIG51bUFuc3dlcmVkIGZvciBlYWNoIGFuc3dlciB0byAwLCBhbmQgdG90YWxBbnN3ZXJlZCBmb3IgZWFjaFxuICAvLyBxdWVzdGlvbiB0byAwLlxuICBjb25zdCBhc3Nlc3NtZW50c1N0cnVjdHVyZSA9IGdldEN1cnJlbnRBc3Nlc3NtZW50UXVlc3Rpb25zKHN0YXRlKTtcbiAgaWYgKCFhc3Nlc3NtZW50c1N0cnVjdHVyZSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBxdWVzdGlvbkRhdGEgPSBhc3Nlc3NtZW50c1N0cnVjdHVyZS5xdWVzdGlvbnM7XG4gIGNvbnN0IG11bHRpUXVlc3Rpb25zID0gcXVlc3Rpb25EYXRhLmZpbHRlcihcbiAgICBxdWVzdGlvbiA9PiBxdWVzdGlvbi50eXBlID09PSBRdWVzdGlvblR5cGUuTVVMVElcbiAgKTtcbiAgY29uc3QgcmVzdWx0cyA9IG11bHRpUXVlc3Rpb25zLm1hcChxdWVzdGlvbiA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBxdWVzdGlvbi5sZXZlbF9pZCxcbiAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbi5xdWVzdGlvbl90ZXh0LFxuICAgICAgcXVlc3Rpb25OdW1iZXI6IHF1ZXN0aW9uLnF1ZXN0aW9uX2luZGV4ICsgMSxcbiAgICAgIGFuc3dlcnM6IHF1ZXN0aW9uLmFuc3dlcnMubWFwKChhbnN3ZXIsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbXVsdGlwbGVDaG9pY2VPcHRpb246IEFOU1dFUl9MRVRURVJTW2luZGV4XSxcbiAgICAgICAgICBpc0NvcnJlY3Q6IGFuc3dlci5jb3JyZWN0LFxuICAgICAgICAgIG51bUFuc3dlcmVkOiAwLFxuICAgICAgICB9O1xuICAgICAgfSksXG4gICAgICB0b3RhbEFuc3dlcmVkOiAwLFxuICAgICAgbm90QW5zd2VyZWQ6IDAsXG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2Ygc3R1ZGVudHMgd2hvIGFuc3dlcmVkIGVhY2ggb3B0aW9uIGFuZCBmaWxsXG4gIC8vIGluIHRoZSBpbml0aWFsaXplZCByZXN1bHRzIHN0cnVjdHVyZSBhYm92ZS5cbiAgY29uc3Qgc3R1ZGVudFJlc3BvbnNlcyA9IGdldEFzc2Vzc21lbnRSZXNwb25zZXNGb3JDdXJyZW50U2NyaXB0KHN0YXRlKTtcbiAgaWYgKCFzdHVkZW50UmVzcG9uc2VzKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIE9iamVjdC5rZXlzKHN0dWRlbnRSZXNwb25zZXMpLmZvckVhY2goc3R1ZGVudElkID0+IHtcbiAgICBzdHVkZW50SWQgPSBwYXJzZUludChzdHVkZW50SWQsIDEwKTtcbiAgICBjb25zdCBzdHVkZW50T2JqZWN0ID0gc3R1ZGVudFJlc3BvbnNlc1tzdHVkZW50SWRdO1xuICAgIGNvbnN0IGN1cnJlbnRBc3Nlc3NtZW50SWQgPSBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuYXNzZXNzbWVudElkO1xuICAgIGNvbnN0IHN0dWRlbnRBc3Nlc3NtZW50ID1cbiAgICAgIHN0dWRlbnRPYmplY3QucmVzcG9uc2VzX2J5X2Fzc2Vzc21lbnRbY3VycmVudEFzc2Vzc21lbnRJZF0gfHwge307XG5cbiAgICBjb25zdCBzdHVkZW50UmVzdWx0cyA9IHN0dWRlbnRBc3Nlc3NtZW50LmxldmVsX3Jlc3VsdHMgfHwgW107XG4gICAgY29uc3QgbXVsdGlSZXN1bHRzID0gc3R1ZGVudFJlc3VsdHMuZmlsdGVyKFxuICAgICAgcmVzdWx0ID0+IHJlc3VsdC50eXBlID09PSBRdWVzdGlvblR5cGUuTVVMVElcbiAgICApO1xuICAgIG11bHRpUmVzdWx0cy5mb3JFYWNoKChyZXNwb25zZSwgcXVlc3Rpb25JbmRleCkgPT4ge1xuICAgICAgLy8gc3R1ZGVudF9yZXN1bHQgaXMgZWl0aGVyIFtdIGFuZCBub3QgYW5zd2VyZWQgb3IgYSBzZXJpZXMgb2YgbGV0dGVyc1xuICAgICAgLy8gdGhhdCB0aGUgc3R1ZGVudCBzZWxlY3RlZC5cbiAgICAgIHJlc3VsdHNbcXVlc3Rpb25JbmRleF0udG90YWxBbnN3ZXJlZCsrO1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ3Vuc3VibWl0dGVkJykge1xuICAgICAgICByZXN1bHRzW3F1ZXN0aW9uSW5kZXhdLm5vdEFuc3dlcmVkKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAocmVzcG9uc2Uuc3R1ZGVudF9yZXN1bHQgfHwgW10pLmZvckVhY2goYW5zd2VyID0+IHtcbiAgICAgICAgICByZXN1bHRzW3F1ZXN0aW9uSW5kZXhdLmFuc3dlcnNbYW5zd2VyXS5udW1BbnN3ZXJlZCsrO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vLyBSZXR1cm5zIGFuIGFycmF5IG9mIG9iamVjdHMgY29ycmVzcG9uZGluZyB0byBlYWNoIG1hdGNoIHF1ZXN0aW9uIGFuZCB0aGVcbi8vIG51bWJlciBvZiBzdHVkZW50cyB3aG8gYW5zd2VyZWQgZWFjaCBhbnN3ZXIuXG5leHBvcnQgY29uc3QgZ2V0TWF0Y2hTZWN0aW9uU3VtbWFyeSA9IHN0YXRlID0+IHtcbiAgY29uc3QgYXNzZXNzbWVudHNTdHJ1Y3R1cmUgPSBnZXRDdXJyZW50QXNzZXNzbWVudFF1ZXN0aW9ucyhzdGF0ZSk7XG4gIGlmICghYXNzZXNzbWVudHNTdHJ1Y3R1cmUpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgcXVlc3Rpb25EYXRhID0gYXNzZXNzbWVudHNTdHJ1Y3R1cmUucXVlc3Rpb25zO1xuICBjb25zdCBtYXRjaFF1ZXN0aW9ucyA9IHF1ZXN0aW9uRGF0YS5maWx0ZXIoXG4gICAgcXVlc3Rpb24gPT4gcXVlc3Rpb24udHlwZSA9PT0gUXVlc3Rpb25UeXBlLk1BVENIXG4gICk7XG5cbiAgY29uc3QgcmVzdWx0cyA9IG1hdGNoUXVlc3Rpb25zLm1hcChxdWVzdGlvbiA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBxdWVzdGlvbi5sZXZlbF9pZCxcbiAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbi5xdWVzdGlvbixcbiAgICAgIHF1ZXN0aW9uTnVtYmVyOiBxdWVzdGlvbi5xdWVzdGlvbl9pbmRleCArIDEsXG4gICAgICBvcHRpb25zOiBxdWVzdGlvbi5vcHRpb25zLm1hcCgob3B0aW9uLCBpbmRleE8pID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBvcHRpb246IHF1ZXN0aW9uLm9wdGlvbnNbaW5kZXhPXS50ZXh0LFxuICAgICAgICAgIGlkOiBpbmRleE8sXG4gICAgICAgICAgdG90YWxBbnN3ZXJlZDogMCxcbiAgICAgICAgICBub3RBbnN3ZXJlZDogMCxcbiAgICAgICAgICBhbnN3ZXJzOiBxdWVzdGlvbi5hbnN3ZXJzLm1hcCgoYW5zd2VyLCBpbmRleEEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGFuc3dlcjogcXVlc3Rpb24uYW5zd2Vyc1tpbmRleEFdLnRleHQsXG4gICAgICAgICAgICAgIGlzQ29ycmVjdDogaW5kZXhBID09PSBpbmRleE8sXG4gICAgICAgICAgICAgIG51bUFuc3dlcmVkOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICAgIH0pLFxuICAgIH07XG4gIH0pO1xuXG4gIC8vIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHN0dWRlbnRzIHdobyBhbnN3ZXJlZCBlYWNoIG9wdGlvbiBhbmQgZmlsbFxuICAvLyBpbiB0aGUgaW5pdGlhbGl6ZWQgcmVzdWx0cyBzdHJ1Y3R1cmUgYWJvdmUuXG4gIGNvbnN0IHN0dWRlbnRSZXNwb25zZXMgPSBnZXRBc3Nlc3NtZW50UmVzcG9uc2VzRm9yQ3VycmVudFNjcmlwdChzdGF0ZSk7XG4gIGlmICghc3R1ZGVudFJlc3BvbnNlcykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIE9iamVjdC5rZXlzKHN0dWRlbnRSZXNwb25zZXMpLmZvckVhY2goc3R1ZGVudElkID0+IHtcbiAgICBzdHVkZW50SWQgPSBwYXJzZUludChzdHVkZW50SWQsIDEwKTtcbiAgICBjb25zdCBzdHVkZW50T2JqZWN0ID0gc3R1ZGVudFJlc3BvbnNlc1tzdHVkZW50SWRdO1xuICAgIGNvbnN0IGN1cnJlbnRBc3Nlc3NtZW50SWQgPSBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuYXNzZXNzbWVudElkO1xuICAgIGNvbnN0IHN0dWRlbnRBc3Nlc3NtZW50ID1cbiAgICAgIHN0dWRlbnRPYmplY3QucmVzcG9uc2VzX2J5X2Fzc2Vzc21lbnRbY3VycmVudEFzc2Vzc21lbnRJZF0gfHwge307XG5cbiAgICBjb25zdCBzdHVkZW50UmVzdWx0cyA9IHN0dWRlbnRBc3Nlc3NtZW50LmxldmVsX3Jlc3VsdHMgfHwgW107XG4gICAgY29uc3QgbWF0Y2hSZXN1bHRzID0gc3R1ZGVudFJlc3VsdHMuZmlsdGVyKFxuICAgICAgcmVzdWx0ID0+IHJlc3VsdC50eXBlID09PSBRdWVzdGlvblR5cGUuTUFUQ0hcbiAgICApO1xuXG4gICAgbWF0Y2hSZXN1bHRzLmZvckVhY2goKHJlc3BvbnNlLCBxdWVzdGlvbkluZGV4KSA9PiB7XG4gICAgICAocmVzcG9uc2Uuc3R1ZGVudF9yZXN1bHQgfHwgW10pLmZvckVhY2goKGFuc3dlciwgaW5kZXgpID0+IHtcbiAgICAgICAgcmVzdWx0c1txdWVzdGlvbkluZGV4XS5vcHRpb25zW2luZGV4XS50b3RhbEFuc3dlcmVkKys7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNbaW5kZXhdID09PSAndW5zdWJtaXR0ZWQnKSB7XG4gICAgICAgICAgcmVzdWx0c1txdWVzdGlvbkluZGV4XS5vcHRpb25zW2luZGV4XS5ub3RBbnN3ZXJlZCsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdHNbcXVlc3Rpb25JbmRleF0ub3B0aW9uc1tpbmRleF0uYW5zd2Vyc1thbnN3ZXJdLm51bUFuc3dlcmVkKys7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0cztcbn07XG5cbi8qKlxuICogU2VsZWN0b3IgZnVuY3Rpb24gdGhhdCB0YWtlcyBpbiB0aGUgc3RhdGUuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0b3RhbCBjb3VudCBvZiBzdHVkZW50cyB3aG8gaGF2ZSBzdWJtaXR0ZWRcbiAqIHRoZSBjdXJyZW50IGFzc2Vzc21lbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBjb3VudFN1Ym1pc3Npb25zRm9yQ3VycmVudEFzc2Vzc21lbnQgPSBzdGF0ZSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRBc3Nlc3NtZW50SWQgPSBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuYXNzZXNzbWVudElkO1xuICBpZiAoIWN1cnJlbnRBc3Nlc3NtZW50SWQpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICBjb25zdCBpc1N1cnZleSA9IGlzQ3VycmVudEFzc2Vzc21lbnRTdXJ2ZXkoc3RhdGUpO1xuICBpZiAoaXNTdXJ2ZXkpIHtcbiAgICBjb25zdCBzdXJ2ZXlzU3RydWN0dXJlID1cbiAgICAgIHN0YXRlLnNlY3Rpb25Bc3Nlc3NtZW50cy5zdXJ2ZXlzQnlTY3JpcHRbc3RhdGUudW5pdFNlbGVjdGlvbi5zY3JpcHRJZF0gfHxcbiAgICAgIHt9O1xuICAgIGNvbnN0IGN1cnJlbnRTdXJ2ZXkgPSBzdXJ2ZXlzU3RydWN0dXJlW2N1cnJlbnRBc3Nlc3NtZW50SWRdO1xuICAgIGlmICghY3VycmVudFN1cnZleSB8fCBjdXJyZW50U3VydmV5LmxldmVsZ3JvdXBfcmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudFN1cnZleS5sZXZlbGdyb3VwX3Jlc3VsdHNbMF0ucmVzdWx0cy5sZW5ndGg7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc3R1ZGVudFJlc3BvbnNlcyA9IGdldEFzc2Vzc21lbnRSZXNwb25zZXNGb3JDdXJyZW50U2NyaXB0KHN0YXRlKTtcbiAgICBsZXQgdG90YWxTdWJtaXNzaW9ucyA9IDA7XG4gICAgT2JqZWN0LnZhbHVlcyhzdHVkZW50UmVzcG9uc2VzKS5mb3JFYWNoKHN0dWRlbnQgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBPYmplY3Qua2V5cyhzdHVkZW50LnJlc3BvbnNlc19ieV9hc3Nlc3NtZW50KS5pbmNsdWRlcyhcbiAgICAgICAgICBjdXJyZW50QXNzZXNzbWVudElkICsgJydcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHRvdGFsU3VibWlzc2lvbnMrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdG90YWxTdWJtaXNzaW9ucztcbiAgfVxufTtcblxuLyoqXG4gKiBAcmV0dXJucyB7YXJyYXl9IG9mIG9iamVjdHMgd2l0aCBrZXlzIGNvcnJlc3BvbmRpbmcgdG8gY29sdW1uc1xuICogb2YgQ1NWIHRvIGRvd25sb2FkLiBDb2x1bW5zIGFyZSBkZWZpbmVkIGFzIENTVl9TVVJWRVlfSEVBREVSUyBhbmQgQ1NWX0FTU0VTU01FTlRfSEVBREVSUy5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEV4cG9ydGFibGVEYXRhID0gc3RhdGUgPT4ge1xuICBjb25zdCBpc1N1cnZleSA9IGlzQ3VycmVudEFzc2Vzc21lbnRTdXJ2ZXkoc3RhdGUpO1xuICBpZiAoaXNTdXJ2ZXkpIHtcbiAgICByZXR1cm4gZ2V0RXhwb3J0YWJsZVN1cnZleURhdGEoc3RhdGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRFeHBvcnRhYmxlQXNzZXNzbWVudERhdGEoc3RhdGUpO1xuICB9XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHthcnJheX0gb2Ygb2JqZWN0cyB3aXRoIGtleXMgY29ycmVzcG9uZGluZyB0byBjb2x1bW5zXG4gKiBvZiBDU1YgdG8gZG93bmxvYWQuIENvbHVtbnMgYXJlIGxlc3NvbiwgcXVlc3Rpb25OdW1iZXIsIHF1ZXN0aW9uVGV4dCwgYW5zd2VyLCBudW1iZXJBbnN3ZXJlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEV4cG9ydGFibGVTdXJ2ZXlEYXRhID0gc3RhdGUgPT4ge1xuICBjb25zdCBjdXJyZW50QXNzZXNzbWVudElkID0gc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRJZDtcbiAgY29uc3Qgc3VydmV5cyA9XG4gICAgc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLnN1cnZleXNCeVNjcmlwdFtzdGF0ZS51bml0U2VsZWN0aW9uLnNjcmlwdElkXSB8fFxuICAgIHt9O1xuICBjb25zdCBjdXJyZW50U3VydmV5ID0gc3VydmV5c1tjdXJyZW50QXNzZXNzbWVudElkXTtcbiAgbGV0IHJlc3BvbnNlcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFN1cnZleS5sZXZlbGdyb3VwX3Jlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBxdWVzdGlvblJlc3VsdHMgPSBjdXJyZW50U3VydmV5LmxldmVsZ3JvdXBfcmVzdWx0c1tpXTtcbiAgICBjb25zdCByb3dCYXNlID0ge1xuICAgICAgbGVzc29uOiBjdXJyZW50U3VydmV5Lmxlc3Nvbl9uYW1lLFxuICAgICAgcXVlc3Rpb25OdW1iZXI6IHF1ZXN0aW9uUmVzdWx0cy5xdWVzdGlvbl9pbmRleCArIDEsXG4gICAgICBxdWVzdGlvblRleHQ6IHF1ZXN0aW9uUmVzdWx0cy5xdWVzdGlvbixcbiAgICB9O1xuXG4gICAgaWYgKHF1ZXN0aW9uUmVzdWx0cy50eXBlID09PSBTdXJ2ZXlRdWVzdGlvblR5cGUuTVVMVEkpIHtcbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBhbnN3ZXJJbmRleCA9IDA7XG4gICAgICAgIGFuc3dlckluZGV4IDwgcXVlc3Rpb25SZXN1bHRzLmFuc3dlcl90ZXh0cy5sZW5ndGg7XG4gICAgICAgIGFuc3dlckluZGV4KytcbiAgICAgICkge1xuICAgICAgICByZXNwb25zZXMucHVzaCh7XG4gICAgICAgICAgLi4ucm93QmFzZSxcbiAgICAgICAgICBhbnN3ZXI6IHF1ZXN0aW9uUmVzdWx0cy5hbnN3ZXJfdGV4dHNbYW5zd2VySW5kZXhdLFxuICAgICAgICAgIG51bWJlckFuc3dlcmVkOiBxdWVzdGlvblJlc3VsdHMucmVzdWx0cy5maWx0ZXIoXG4gICAgICAgICAgICByZXN1bHQgPT4gcmVzdWx0LmFuc3dlcl9pbmRleCA9PT0gYW5zd2VySW5kZXhcbiAgICAgICAgICApLmxlbmd0aCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChxdWVzdGlvblJlc3VsdHMudHlwZSA9PT0gU3VydmV5UXVlc3Rpb25UeXBlLkZSRUVfUkVTUE9OU0UpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcXVlc3Rpb25SZXN1bHRzLnJlc3VsdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcmVzcG9uc2VzLnB1c2goe1xuICAgICAgICAgIC4uLnJvd0Jhc2UsXG4gICAgICAgICAgYW5zd2VyOiBxdWVzdGlvblJlc3VsdHMucmVzdWx0c1tqXS5yZXN1bHQsXG4gICAgICAgICAgbnVtYmVyQW5zd2VyZWQ6IDEsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXNwb25zZXM7XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHthcnJheX0gb2Ygb2JqZWN0cyB3aXRoIGtleXMgY29ycmVzcG9uZGluZyB0byBjb2x1bW5zXG4gKiBvZiBDU1YgdG8gZG93bmxvYWQuIENvbHVtbnMgYXJlIHN0dWRlbnROYW1lLCBsZXNzb24sIHRpbWVzdGFtcCwgcXVlc3Rpb24sIHJlc3BvbnNlLCBhbmQgY29ycmVjdC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEV4cG9ydGFibGVBc3Nlc3NtZW50RGF0YSA9IHN0YXRlID0+IHtcbiAgbGV0IHJlc3BvbnNlcyA9IFtdO1xuICBjb25zdCBjdXJyZW50QXNzZXNzbWVudElkID0gc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmFzc2Vzc21lbnRJZDtcbiAgY29uc3Qgc3R1ZGVudFJlc3BvbnNlcyA9IGdldEFzc2Vzc21lbnRSZXNwb25zZXNGb3JDdXJyZW50U2NyaXB0KHN0YXRlKTtcblxuICBPYmplY3Qua2V5cyhzdHVkZW50UmVzcG9uc2VzKS5mb3JFYWNoKHN0dWRlbnRJZCA9PiB7XG4gICAgc3R1ZGVudElkID0gcGFyc2VJbnQoc3R1ZGVudElkLCAxMCk7XG4gICAgY29uc3Qgc3R1ZGVudE9iamVjdCA9IHN0dWRlbnRSZXNwb25zZXNbc3R1ZGVudElkXTtcbiAgICBjb25zdCBzdHVkZW50QXNzZXNzbWVudCA9XG4gICAgICBzdHVkZW50T2JqZWN0LnJlc3BvbnNlc19ieV9hc3Nlc3NtZW50W2N1cnJlbnRBc3Nlc3NtZW50SWRdO1xuXG4gICAgaWYgKHN0dWRlbnRBc3Nlc3NtZW50ICYmIHN0dWRlbnRBc3Nlc3NtZW50LmxldmVsX3Jlc3VsdHMpIHtcbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBxdWVzdGlvbkluZGV4ID0gMDtcbiAgICAgICAgcXVlc3Rpb25JbmRleCA8IHN0dWRlbnRBc3Nlc3NtZW50LmxldmVsX3Jlc3VsdHMubGVuZ3RoO1xuICAgICAgICBxdWVzdGlvbkluZGV4KytcbiAgICAgICkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IHN0dWRlbnRBc3Nlc3NtZW50LmxldmVsX3Jlc3VsdHNbcXVlc3Rpb25JbmRleF07XG4gICAgICAgIHJlc3BvbnNlcy5wdXNoKHtcbiAgICAgICAgICBzdHVkZW50TmFtZTogc3R1ZGVudE9iamVjdC5zdHVkZW50X25hbWUsXG4gICAgICAgICAgbGVzc29uOiBzdHVkZW50QXNzZXNzbWVudC5sZXNzb24sXG4gICAgICAgICAgdGltZXN0YW1wOiBzdHVkZW50QXNzZXNzbWVudC50aW1lc3RhbXAsXG4gICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uSW5kZXggKyAxLFxuICAgICAgICAgIHJlc3BvbnNlOlxuICAgICAgICAgICAgcmVzcG9uc2UudHlwZSA9PT0gUXVlc3Rpb25UeXBlLk1VTFRJXG4gICAgICAgICAgICAgID8gaW5kZXhlc1RvQW5zd2VyU3RyaW5nKHJlc3BvbnNlLnN0dWRlbnRfcmVzdWx0KVxuICAgICAgICAgICAgICA6IHJlc3BvbnNlLnN0dWRlbnRfcmVzdWx0LFxuICAgICAgICAgIGNvcnJlY3Q6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcmVzcG9uc2VzO1xufTtcblxuLyoqXG4gKiBAcmV0dXJucyB7YXJyYXl9IG9mIG9iamVjdHMgd2l0aCBrZXlzIGNvcnJlc3BvbmRpbmcgdG8gY29sdW1uc1xuICogb2YgQ1NWIHRvIGRvd25sb2FkLiBDb2x1bW5zIGFyZSBzdHVkZW50TmFtZSwgbGVzc29uLCBsZXZlbCwga2V5IGNvbmNlcHQsIHJ1YnJpYywgY29tbWVudCwgdGltZXN0YW1wLCAuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRFeHBvcnRhYmxlRmVlZGJhY2tEYXRhID0gc3RhdGUgPT4ge1xuICBsZXQgZmVlZGJhY2sgPSBbXTtcbiAgbGV0IGZlZWRiYWNrRm9yQ3VycmVudFNjcmlwdCA9XG4gICAgc3RhdGUuc2VjdGlvbkFzc2Vzc21lbnRzLmZlZWRiYWNrQnlTY3JpcHRbc3RhdGUudW5pdFNlbGVjdGlvbi5zY3JpcHRJZF0gfHxcbiAgICB7fTtcblxuICBPYmplY3Qua2V5cyhmZWVkYmFja0ZvckN1cnJlbnRTY3JpcHQpLmZvckVhY2goZmVlZGJhY2tJZCA9PiB7XG4gICAgZmVlZGJhY2tJZCA9IHBhcnNlSW50KGZlZWRiYWNrSWQsIDEwKTtcbiAgICBmZWVkYmFjay5wdXNoKGZlZWRiYWNrRm9yQ3VycmVudFNjcmlwdFtmZWVkYmFja0lkXSk7XG4gIH0pO1xuXG4gIHJldHVybiBmZWVkYmFjaztcbn07XG5cbmV4cG9ydCBjb25zdCBpc0N1cnJlbnRTY3JpcHRDU0QgPSBzdGF0ZSA9PiB7XG4gIGNvbnN0IHNjcmlwdE5hbWUgPSBnZXRTZWxlY3RlZFNjcmlwdE5hbWUoc3RhdGUpIHx8ICcnO1xuICByZXR1cm4gc2NyaXB0TmFtZS5pbmNsdWRlcygnY3NkJyk7XG59O1xuXG4vKipcbiAqICBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBjdXJyZW50IHN0dWRlbnRJZCBoYXMgc3VibWl0dGVkIHJlc3BvbnNlcyBmb3IgY3VycmVudCBzY3JpcHQuXG4gKi9cbmV4cG9ydCBjb25zdCBjdXJyZW50U3R1ZGVudEhhc1Jlc3BvbnNlcyA9IHN0YXRlID0+IHtcbiAgcmV0dXJuICEhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgIGdldEFzc2Vzc21lbnRSZXNwb25zZXNGb3JDdXJyZW50U2NyaXB0KHN0YXRlKSxcbiAgICBzdGF0ZS5zZWN0aW9uQXNzZXNzbWVudHMuc3R1ZGVudElkXG4gICk7XG59O1xuXG4vLyBIZWxwZXJzXG5cbi8qKlxuICogVGFrZXMgaW4gYW4gYXJyYXkgb2Ygb2JqZWN0cyB7YW5zd2VyVGV4dDogJycsIGNvcnJlY3Q6IHRydWUvZmFsc2V9IGFuZFxuICogcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBsZXR0ZXJzIHRvIHRoZSBvcHRpb25zIHdpdGggdGhlIGNvcnJlY3QgYW5zd2Vycy5cbiAqIEV4IC0gW3tjb3JyZWN0OiBmYWxzZX0sIHtjb3JyZWN0OiB0cnVlfV0gLS0+IHJldHVybnMgJ0InXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JyZWN0QW5zd2VyKGFuc3dlckFycikge1xuICBjb25zdCBjb3JyZWN0SW5kZXhlcyA9IGFuc3dlckFyclxuICAgIC5tYXAoKHtjb3JyZWN0fSwgaSkgPT4gKGNvcnJlY3QgPyBpIDogbnVsbCkpXG4gICAgLmZpbHRlcihpID0+IGkgIT09IG51bGwpO1xuICByZXR1cm4gaW5kZXhlc1RvQW5zd2VyU3RyaW5nKGNvcnJlY3RJbmRleGVzKTtcbn1cblxuLyoqXG4gKiBUYWtlcyBpbiBhbiBhcnJheSBvZiBpbnRlZ2VycyBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBsZXR0ZXJzXG4gKiByZXByZXNlbnRpbmcgY29ycmVjdCBhbnN3ZXJzLlxuICogRXggLSBbMV0gLS0+IHJldHVybnMgJ0InLCBbMCwgMl0gLS0+IHJldHVybnMgJ0EsIEMnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmRleGVzVG9BbnN3ZXJTdHJpbmcoYW5zd2VyQXJyKSB7XG4gIGlmICghYW5zd2VyQXJyKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHJldHVybiBhbnN3ZXJBcnIubWFwKGluZGV4ID0+IEFOU1dFUl9MRVRURVJTW2luZGV4XSkuam9pbignLCAnKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGlkIG9mIHRoZSBmaXJzdCBhc3Nlc3NtZW50IG9yIHN1cnZleSBpbiB0aGUgbGlzdC5cbiAqXG4gKiBAcGFyYW0gc3RhdGUge09iamVjdH0gdGhlIHNlY3Rpb25Bc3Nlc3NtZW50cyBicmFuY2ggb2YgdGhlIHJlZHV4IHN0YXRlIHRyZWUuXG4gKiBAcGFyYW0gc2NyaXB0SWRcbiAqIEByZXR1cm5zIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgaWQgb2YgdGhlIGZpcnN0IGFzc2Vzc21lbnQgb3Igc3VydmV5LlxuICovXG5jb25zdCBnZXRGaXJzdEFzc2Vzc21lbnRJZCA9IChzdGF0ZSwgc2NyaXB0SWQpID0+XG4gIGNvbXB1dGVTY3JpcHRBc3Nlc3NtZW50TGlzdChzdGF0ZSwgc2NyaXB0SWQpLm1hcChhID0+IHBhcnNlSW50KGEuaWQpKVswXTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgbGlzdCBvZiBpZHMgYW5kIG5hbWVzIG9mIGFzc2Vzc21lbnRzIGFuZCBzdXJ2ZXlzLlxuICpcbiAqIEBwYXJhbSBzdGF0ZSB7T2JqZWN0fSB0aGUgc2VjdGlvbkFzc2Vzc21lbnRzIGJyYW5jaCBvZiB0aGUgcmVkdXggc3RhdGUgdHJlZS5cbiAqIEBwYXJhbSBzY3JpcHRJZCB7bnVtYmVyfHN0cmluZ31cbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuY29uc3QgY29tcHV0ZVNjcmlwdEFzc2Vzc21lbnRMaXN0ID0gKHN0YXRlLCBzY3JpcHRJZCkgPT4ge1xuICBjb25zdCBhc3Nlc3NtZW50U3RydWN0dXJlID0gc3RhdGUuYXNzZXNzbWVudFF1ZXN0aW9uc0J5U2NyaXB0W3NjcmlwdElkXSB8fCB7fTtcbiAgY29uc3QgYXNzZXNzbWVudHMgPSBPYmplY3QudmFsdWVzKGFzc2Vzc21lbnRTdHJ1Y3R1cmUpLm1hcChhc3Nlc3NtZW50ID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGFzc2Vzc21lbnQuaWQsXG4gICAgICBuYW1lOiBhc3Nlc3NtZW50Lm5hbWUsXG4gICAgfTtcbiAgfSk7XG5cbiAgY29uc3Qgc3VydmV5c1N0cnVjdHVyZSA9IHN0YXRlLnN1cnZleXNCeVNjcmlwdFtzY3JpcHRJZF0gfHwge307XG4gIGNvbnN0IHN1cnZleXMgPSBPYmplY3Qua2V5cyhzdXJ2ZXlzU3RydWN0dXJlKS5tYXAoc3VydmV5SWQgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcGFyc2VJbnQoc3VydmV5SWQpLFxuICAgICAgbmFtZTogc3VydmV5c1N0cnVjdHVyZVtzdXJ2ZXlJZF0ubGVzc29uX25hbWUsXG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIGFzc2Vzc21lbnRzLmNvbmNhdChzdXJ2ZXlzKTtcbn07XG5cbi8vIFJlcXVlc3RzIHRvIHRoZSBzZXJ2ZXIgZm9yIGFzc2Vzc21lbnQgZGF0YVxuXG4vLyBMb2FkcyB0aGUgYXNzZXNzbWVudCByZXNwb25zZXMuXG5jb25zdCBsb2FkQXNzZXNzbWVudFJlc3BvbnNlc0Zyb21TZXJ2ZXIgPSAoc2VjdGlvbklkLCBzY3JpcHRJZCkgPT4ge1xuICBsZXQgcGF5bG9hZCA9IHtzZWN0aW9uX2lkOiBzZWN0aW9uSWR9O1xuICBpZiAoc2NyaXB0SWQpIHtcbiAgICBwYXlsb2FkLnNjcmlwdF9pZCA9IHNjcmlwdElkO1xuICB9XG4gIHJldHVybiAkLmFqYXgoe1xuICAgIHVybDogYC9kYXNoYm9hcmRhcGkvYXNzZXNzbWVudHMvc2VjdGlvbl9yZXNwb25zZXNgLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxuICAgIGRhdGE6IHBheWxvYWQsXG4gIH0pO1xufTtcblxuLy8gTG9hZHMgdGhlIGFzc2Vzc21lbnQgcXVlc3Rpb24gc3RydWN0dXJlLlxuY29uc3QgbG9hZEFzc2Vzc21lbnRRdWVzdGlvbnNGcm9tU2VydmVyID0gc2NyaXB0SWQgPT4ge1xuICBjb25zdCBwYXlsb2FkID0ge3NjcmlwdF9pZDogc2NyaXB0SWR9O1xuICByZXR1cm4gJC5hamF4KHtcbiAgICB1cmw6IGAvZGFzaGJvYXJkYXBpL2Fzc2Vzc21lbnRzYCxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICBkYXRhOiBwYXlsb2FkLFxuICB9KTtcbn07XG5cbi8vIExvYWRzIHN1cnZleSBxdWVzdGlvbnMgYW5kIGFub255bW91cyByZXNwb25zZXMuXG5jb25zdCBsb2FkU3VydmV5c0Zyb21TZXJ2ZXIgPSAoc2VjdGlvbklkLCBzY3JpcHRJZCkgPT4ge1xuICBjb25zdCBwYXlsb2FkID0ge3NjcmlwdF9pZDogc2NyaXB0SWQsIHNlY3Rpb25faWQ6IHNlY3Rpb25JZH07XG4gIHJldHVybiAkLmFqYXgoe1xuICAgIHVybDogYC9kYXNoYm9hcmRhcGkvYXNzZXNzbWVudHMvc2VjdGlvbl9zdXJ2ZXlzYCxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICBkYXRhOiBwYXlsb2FkLFxuICB9KTtcbn07XG5cbi8vIExvYWRzIGNvbW1lbnQgYW5kIHJ1YnJpYyBmZWVkYmFjay5cbmNvbnN0IGxvYWRGZWVkYmFja0Zyb21TZXJ2ZXIgPSAoc2VjdGlvbklkLCBzY3JpcHRJZCkgPT4ge1xuICBjb25zdCBwYXlsb2FkID0ge3NjcmlwdF9pZDogc2NyaXB0SWQsIHNlY3Rpb25faWQ6IHNlY3Rpb25JZH07XG4gIHJldHVybiAkLmFqYXgoe1xuICAgIHVybDogYC9kYXNoYm9hcmRhcGkvYXNzZXNzbWVudHMvc2VjdGlvbl9mZWVkYmFja2AsXG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCcsXG4gICAgZGF0YTogcGF5bG9hZCxcbiAgfSk7XG59O1xuIl0sIm5hbWVzIjpbInVuaXRTZWxlY3Rpb24iLCJzdGF0ZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImluaXRpYWxTdGF0ZSIsImFjdGlvbiIsInR5cGUiLCJTRVRfQ09VUlNFUyIsImZpcnN0Q291cnNlIiwiY291cnNlc1dpdGhQcm9ncmVzcyIsImZpcnN0VW5pdCIsInVuaXRzIiwiX29iamVjdFNwcmVhZCIsInNjcmlwdElkIiwiaWQiLCJTRVRfU0NSSVBUIiwiU1RBUlRfTE9BRElOR19DT1VSU0VTIiwiaXNMb2FkaW5nQ291cnNlc1dpdGhQcm9ncmVzcyIsIkZJTklTSEVEX0xPQURJTkdfQ09VUlNFUyIsImV4cG9ydHMiLCJzZXRDb3Vyc2VzV2l0aFByb2dyZXNzIiwic2V0U2NyaXB0SWQiLCJzdGFydExvYWRpbmdDb3Vyc2VzV2l0aFByb2dyZXNzIiwiZmluaXNoZWRMb2FkaW5nQ291cnNlc1dpdGhQcm9ncmVzcyIsImdldFNlbGVjdGVkVW5pdCIsInVuaXQiLCJmb3JFYWNoIiwiY291cnNlIiwidGVtcFVuaXQiLCJmaW5kIiwiZ2V0U2VsZWN0ZWRTY3JpcHROYW1lIiwia2V5IiwiZ2V0U2VsZWN0ZWRTY3JpcHRGcmllbmRseU5hbWUiLCJuYW1lIiwiZ2V0U2VsZWN0ZWRTY3JpcHREZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwiZG9lc0N1cnJlbnRDb3Vyc2VVc2VGZWVkYmFjayIsIl9nZXRTZWxlY3RlZFVuaXQiLCJpc19mZWVkYmFja19lbmFibGVkIiwiYXN5bmNMb2FkQ291cnNlc1dpdGhQcm9ncmVzcyIsImRpc3BhdGNoIiwiZ2V0U3RhdGUiLCJzZWxlY3RlZFNlY3Rpb24iLCJ0ZWFjaGVyU2VjdGlvbnMiLCJzZWN0aW9ucyIsInNlbGVjdGVkU2VjdGlvbklkIiwiZmV0Y2giLCJjb25jYXQiLCJtZXRob2QiLCJoZWFkZXJzIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJFcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJqc29uIiwicmVvcmRlcmVkQ291cnNlcyIsIl90b0NvbnN1bWFibGVBcnJheSIsImZpbHRlciIsImNvdXJzZV92ZXJzaW9uX2lkIiwicmV2ZXJzZSIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJzZWN0aW9uQXNzZXNzbWVudHMiLCJzdHVkZW50SWQiLCJBTExfU1RVREVOVF9GSUxURVIiLCJxdWVzdGlvbkluZGV4IiwiU0VUX0FTU0VTU01FTlRfSUQiLCJhc3Nlc3NtZW50SWQiLCJTRVRfSU5JVElBTF9BU1NFU1NNRU5UX0lEIiwiZ2V0Rmlyc3RBc3Nlc3NtZW50SWQiLCJTRVRfU1RVREVOVF9JRCIsIlNFVF9RVUVTVElPTl9JTkRFWCIsIlNFVF9BU1NFU1NNRU5UX1JFU1BPTlNFUyIsImFzc2Vzc21lbnRSZXNwb25zZXNCeVNjcmlwdCIsIl9kZWZpbmVQcm9wZXJ0eSIsImFzc2Vzc21lbnRzIiwiU0VUX0ZFRURCQUNLIiwiZmVlZGJhY2tCeVNjcmlwdCIsImZlZWRiYWNrIiwiU0VUX1NVUlZFWVMiLCJzdXJ2ZXlzQnlTY3JpcHQiLCJzdXJ2ZXlzIiwiU0VUX0FTU0VTU01FTlRTX1FVRVNUSU9OUyIsImFzc2Vzc21lbnRRdWVzdGlvbnNCeVNjcmlwdCIsInBhcnNlSW50IiwiT2JqZWN0Iiwia2V5cyIsIlNUQVJUX0xPQURJTkdfQVNTRVNTTUVOVFMiLCJpc0xvYWRpbmciLCJGSU5JU0hfTE9BRElOR19BU1NFU1NNRU5UUyIsIl91bml0U2VsZWN0aW9uUmVkdXgiLCJyZXF1aXJlIiwiX3R5cGVvZiIsIm8iLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwib3duS2V5cyIsImUiLCJyIiwidCIsImdldE93blByb3BlcnR5U3ltYm9scyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5Iiwib2JqIiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsImkiLCJfdG9QcmltaXRpdmUiLCJ0b1ByaW1pdGl2ZSIsImNhbGwiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIlF1ZXN0aW9uVHlwZSIsIk1VTFRJIiwiTUFUQ0giLCJGUkVFX1JFU1BPTlNFIiwiU3VydmV5UXVlc3Rpb25UeXBlIiwiTXVsdGlBbnN3ZXJTdGF0dXMiLCJBTlNXRVJfTEVUVEVSUyIsIkFTU0VTU01FTlRfRkVFREJBQ0tfT1BUSU9OX0lEIiwiaW5Qcm9ncmVzc0Zha2VUaW1lc3RhbXAiLCJEYXRlIiwibm90U3RhcnRlZEZha2VUaW1lc3RhbXAiLCJzZXRBc3Nlc3NtZW50UmVzcG9uc2VzIiwic2V0QXNzZXNzbWVudFF1ZXN0aW9ucyIsInNldEZlZWRiYWNrIiwic3RhcnRMb2FkaW5nQXNzZXNzbWVudHMiLCJmaW5pc2hMb2FkaW5nQXNzZXNzbWVudHMiLCJzZXRJbml0aWFsQXNzZXNzbWVudElkIiwic2V0QXNzZXNzbWVudElkIiwic2V0U3VydmV5cyIsInNldFF1ZXN0aW9uSW5kZXgiLCJzZXRTdHVkZW50SWQiLCJhc3luY0xvYWRBc3Nlc3NtZW50cyIsInNlY3Rpb25JZCIsImxvYWRSZXNwb25zZXMiLCJsb2FkQXNzZXNzbWVudFJlc3BvbnNlc0Zyb21TZXJ2ZXIiLCJsb2FkUXVlc3Rpb25zIiwibG9hZEFzc2Vzc21lbnRRdWVzdGlvbnNGcm9tU2VydmVyIiwibG9hZFN1cnZleXMiLCJsb2FkU3VydmV5c0Zyb21TZXJ2ZXIiLCJsb2FkRmVlZGJhY2siLCJsb2FkRmVlZGJhY2tGcm9tU2VydmVyIiwiUHJvbWlzZSIsImFsbCIsImFycmF5T2ZWYWx1ZXMiLCJnZXRDdXJyZW50U2NyaXB0QXNzZXNzbWVudExpc3QiLCJ0ZW1wQXNzZXNzbWVudExpc3QiLCJjb21wdXRlU2NyaXB0QXNzZXNzbWVudExpc3QiLCJnZXRBc3Nlc3NtZW50UmVzcG9uc2VzRm9yQ3VycmVudFNjcmlwdCIsImdldEN1cnJlbnRBc3Nlc3NtZW50UXVlc3Rpb25zIiwiaXNDdXJyZW50QXNzZXNzbWVudFN1cnZleSIsImdldEN1cnJlbnRRdWVzdGlvbiIsImVtcHR5UXVlc3Rpb24iLCJxdWVzdGlvbiIsImFuc3dlcnMiLCJsZXZlbGdyb3VwX3Jlc3VsdHMiLCJhbnN3ZXJfdGV4dHMiLCJtYXAiLCJhbnN3ZXIiLCJpbmRleCIsInRleHQiLCJjb3JyZWN0IiwibGV0dGVyIiwiYXNzZXNzbWVudFF1ZXN0aW9ucyIsInF1ZXN0aW9ucyIsInF1ZXN0aW9uX3RleHQiLCJxdWVzdGlvblR5cGUiLCJvcHRpb25zIiwib3B0aW9uIiwiZ2V0TXVsdGlwbGVDaG9pY2VTdHJ1Y3R1cmVGb3JDdXJyZW50QXNzZXNzbWVudCIsImFzc2Vzc21lbnRzU3RydWN0dXJlIiwibGV2ZWxfaWQiLCJxdWVzdGlvbk51bWJlciIsInF1ZXN0aW9uX2luZGV4IiwiY29ycmVjdEFuc3dlciIsImdldENvcnJlY3RBbnN3ZXIiLCJnZXRTdHVkZW50TUNSZXNwb25zZXNGb3JDdXJyZW50QXNzZXNzbWVudCIsInN0dWRlbnRSZXNwb25zZXMiLCJzdHVkZW50T2JqZWN0IiwiY3VycmVudEFzc2Vzc21lbnRJZCIsInN0dWRlbnRBc3Nlc3NtZW50IiwicmVzcG9uc2VzX2J5X2Fzc2Vzc21lbnQiLCJzdHVkZW50X25hbWUiLCJsZXZlbF9yZXN1bHRzIiwicmVzcG9uc2VzIiwiaW5kZXhlc1RvQW5zd2VyU3RyaW5nIiwic3R1ZGVudF9yZXN1bHQiLCJpc0NvcnJlY3QiLCJnZXRNYXRjaFN0cnVjdHVyZUZvckN1cnJlbnRBc3Nlc3NtZW50IiwiZ2V0U3R1ZGVudE1hdGNoUmVzcG9uc2VzRm9yQ3VycmVudEFzc2Vzc21lbnQiLCJnZXRTdHVkZW50QW5zd2Vyc0ZvckN1cnJlbnRRdWVzdGlvbiIsInN0dWRlbnRBbnN3ZXJzIiwiZ2V0QXNzZXNzbWVudHNGcmVlUmVzcG9uc2VSZXN1bHRzIiwicXVlc3Rpb25zQW5kUmVzdWx0cyIsInF1ZXN0aW9uVGV4dCIsImN1cnJlbnRTdHVkZW50c0lkcyIsImN1cnJlbnRTdHVkZW50SGFzUmVzcG9uc2VzIiwicmVzdWx0IiwiZ2V0U3VydmV5RnJlZVJlc3BvbnNlUXVlc3Rpb25zIiwiY3VycmVudFN1cnZleSIsInJlc3VsdHMiLCJnZXRNdWx0aXBsZUNob2ljZVN1cnZleVJlc3VsdHMiLCJ0b3RhbEFuc3dlcmVkIiwiYW5zd2VyVG90YWxzIiwibm90QW5zd2VyZWQiLCJhbnN3ZXJJbmRleCIsImFuc3dlcl9pbmRleCIsIm11bHRpcGxlQ2hvaWNlT3B0aW9uIiwicGVyY2VudEFuc3dlcmVkIiwiTWF0aCIsImZsb29yIiwic3VydmV5c1N0cnVjdHVyZSIsImluY2x1ZGVzIiwiZ2V0U3R1ZGVudHNNQ2FuZE1hdGNoU3VtbWFyeUZvckN1cnJlbnRBc3Nlc3NtZW50IiwiYWxsU3R1ZGVudHNCeUlkcyIsInNlbGVjdGVkU3R1ZGVudHMiLCJzdHVkZW50Iiwic3R1ZGVudHNPYmplY3QiLCJzdHVkZW50c0Fzc2Vzc21lbnQiLCJpc1N1Ym1pdHRlZCIsImluUHJvZ3Jlc3MiLCJzdWJtaXNzaW9uVGltZVN0YW1wIiwidGltZXN0YW1wIiwic3VibWl0dGVkIiwibnVtTXVsdGlwbGVDaG9pY2VDb3JyZWN0IiwibXVsdGlfY29ycmVjdCIsIm51bU11bHRpcGxlQ2hvaWNlIiwibXVsdGlfY291bnQiLCJudW1NYXRjaENvcnJlY3QiLCJtYXRjaF9jb3JyZWN0IiwibnVtTWF0Y2giLCJtYXRjaF9jb3VudCIsInVybCIsImdldEV4cG9ydGFibGVTdXJ2ZXlEYXRhIiwiZ2V0RXhwb3J0YWJsZVN1Ym1pc3Npb25TdGF0dXNEYXRhIiwic3VtbWFyeVN0dWRlbnRTdGF0dXMiLCJzdHVkZW50TmFtZSIsInN1Ym1pc3Npb25UaW1lc3RhbXAiLCJnZXRNdWx0aXBsZUNob2ljZVNlY3Rpb25TdW1tYXJ5IiwibnVtQW5zd2VyZWQiLCJnZXRNYXRjaFNlY3Rpb25TdW1tYXJ5IiwiaW5kZXhPIiwiaW5kZXhBIiwiY291bnRTdWJtaXNzaW9uc0ZvckN1cnJlbnRBc3Nlc3NtZW50IiwidG90YWxTdWJtaXNzaW9ucyIsInZhbHVlcyIsImdldEV4cG9ydGFibGVEYXRhIiwiZ2V0RXhwb3J0YWJsZUFzc2Vzc21lbnREYXRhIiwicXVlc3Rpb25SZXN1bHRzIiwicm93QmFzZSIsImxlc3NvbiIsImxlc3Nvbl9uYW1lIiwiX2xvb3AiLCJudW1iZXJBbnN3ZXJlZCIsImoiLCJnZXRFeHBvcnRhYmxlRmVlZGJhY2tEYXRhIiwiZmVlZGJhY2tGb3JDdXJyZW50U2NyaXB0IiwiZmVlZGJhY2tJZCIsImlzQ3VycmVudFNjcmlwdENTRCIsImhhc093blByb3BlcnR5IiwiYW5zd2VyQXJyIiwiX3JlZiIsImpvaW4iLCJhIiwiYXNzZXNzbWVudFN0cnVjdHVyZSIsImFzc2Vzc21lbnQiLCJzdXJ2ZXlJZCIsInBheWxvYWQiLCJzZWN0aW9uX2lkIiwic2NyaXB0X2lkIiwiJCIsImFqYXgiLCJjb250ZW50VHlwZSIsImRhdGEiXSwic291cmNlUm9vdCI6IiJ9